!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-redux"),require("es6-promise"),require("react-native"),require("json5"),require("redux-actions"),require("@react-native-community/async-storage"),require("clone"),require("react-native-elements"),require("deepmerge"),require("uuid"),require("isomorphic-fetch"),require("redux"),require("react-native-app-auth"),require("react-fast-compare"),require("react-native-root-view"),require("@react-navigation/stack"),require("@ui-kitten/components"),require("moment"),require("expo-image-picker"),require("expo-file-system"),require("react-native-signature-canvas"),require("react-native-web-hooks"),require("react-native-modal-datetime-picker"),require("react-native-render-html"),require("react-number-format"),require("react-dom"),require("redux-devtools-extension"),require("redux-thunk"),require("lodash"),require("rn-snackbar-component"),require("react-native-webview"),require("@microsoft/signalr"),require("object-hash")):"function"==typeof define&&define.amd?define(["react","react-redux","es6-promise","react-native","json5","redux-actions","@react-native-community/async-storage","clone","react-native-elements","deepmerge","uuid","isomorphic-fetch","redux","react-native-app-auth","react-fast-compare","react-native-root-view","@react-navigation/stack","@ui-kitten/components","moment","expo-image-picker","expo-file-system","react-native-signature-canvas","react-native-web-hooks","react-native-modal-datetime-picker","react-native-render-html","react-number-format","react-dom","redux-devtools-extension","redux-thunk","lodash","rn-snackbar-component","react-native-webview","@microsoft/signalr","object-hash"],t):"object"==typeof exports?exports["optimajet-app"]=t(require("react"),require("react-redux"),require("es6-promise"),require("react-native"),require("json5"),require("redux-actions"),require("@react-native-community/async-storage"),require("clone"),require("react-native-elements"),require("deepmerge"),require("uuid"),require("isomorphic-fetch"),require("redux"),require("react-native-app-auth"),require("react-fast-compare"),require("react-native-root-view"),require("@react-navigation/stack"),require("@ui-kitten/components"),require("moment"),require("expo-image-picker"),require("expo-file-system"),require("react-native-signature-canvas"),require("react-native-web-hooks"),require("react-native-modal-datetime-picker"),require("react-native-render-html"),require("react-number-format"),require("react-dom"),require("redux-devtools-extension"),require("redux-thunk"),require("lodash"),require("rn-snackbar-component"),require("react-native-webview"),require("@microsoft/signalr"),require("object-hash")):e["optimajet-app"]=t(e.react,e["react-redux"],e["es6-promise"],e["react-native"],e.json5,e["redux-actions"],e["@react-native-community/async-storage"],e.clone,e["react-native-elements"],e.deepmerge,e.uuid,e["isomorphic-fetch"],e.redux,e["react-native-app-auth"],e["react-fast-compare"],e["react-native-root-view"],e["@react-navigation/stack"],e["@ui-kitten/components"],e.moment,e["expo-image-picker"],e["expo-file-system"],e["react-native-signature-canvas"],e["react-native-web-hooks"],e["react-native-modal-datetime-picker"],e["react-native-render-html"],e["react-number-format"],e["react-dom"],e["redux-devtools-extension"],e["redux-thunk"],e.lodash,e["rn-snackbar-component"],e["react-native-webview"],e["@microsoft/signalr"],e["object-hash"])}(window,function(r,n,o,a,i,l,s,c,u,p,f,d,h,y,m,b,v,g,w,O,C,S,E,j,k,P,x,_,R,D,T,F,A,I){return N=[function(e,t){e.exports=r},function(e,t){e.exports=n},function(e,t){e.exports=o},function(e,t){e.exports=a},function(e,t){e.exports=i},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function s(e){var t=void 0===e?"undefined":n(e);return"function"===t||"object"===t&&!!e}r.capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},r.callbackName=function(e,t){return(t=t||"on")+r.capitalize(e)},r.isObject=s,r.extend=function(e){if(!s(e))return e;for(var t,r,n,o=1,a=arguments.length;o<a;o++){t=arguments[o],r=Object.keys(t);for(var i,l=0;l<r.length;l++)n=r[l],Object.getOwnPropertyDescriptor&&Object.defineProperty?(i=Object.getOwnPropertyDescriptor(t,n),Object.defineProperty(e,n,i)):e[n]=t[n]}return e},r.isFunction=function(e){return"function"==typeof e},r.nextTick=function(e){setTimeout(e,0)},r.object=function(e,t){for(var r={},n=0;n<e.length;n++)r[e[n]]=t[n];return r},r.isArguments=function(e){return"object"===(void 0===e?"undefined":n(e))&&"callee"in e&&"number"==typeof e.length},r.throwIf=function(e,t){if(e)throw Error(t||e)},r.EventEmitter=t(48)},function(e,t){e.exports=l},function(e,t){e.exports=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.joinStrict=t.joinConcat=t.joinLeading=t.joinTrailing=t.fetchInitialState=t.stopListeningToAll=t.stopListeningTo=t.listenTo=t.validateListening=t.listenToMany=t.hasListener=void 0;var l=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(r(5)),r=r(29);function s(e){var t,r={};for(t in e){var n,o=e[t],a=s(function(e){for(var t,r=0,n={};r<(e.children||[]).length;++r)e[t=e.children[r]]&&(n[t]=e[t]);return n}(o));for(n in r[t]=o,a){var i=a[n];r[t+l.capitalize(n)]=i}}return r}t.hasListener=function(e){for(var t,r,n,o=0;o<(this.subscriptions||[]).length;++o)for(n=[].concat(this.subscriptions[o].listenable),t=0;t<n.length;t++)if((r=n[t])===e||r.hasListener&&r.hasListener(e))return!0;return!1},t.listenToMany=function(e){var t,r=s(e);for(t in r){var n=l.callbackName(t),o=this[n]?n:this[t]?t:void 0;o&&this.listenTo(r[t],o,this[n+"Default"]||this[o+"Default"]||o)}},t.validateListening=function(e){return e===this?"Listener is not able to listen to itself":l.isFunction(e.listen)?e.hasListener&&e.hasListener(this)?"Listener cannot listen to this listenable because of circular loop":void 0:e+" is missing a listen method"},t.listenTo=function(e,t,r){var n,o,a=this.subscriptions=this.subscriptions||[];return l.throwIf(this.validateListening(e)),this.fetchInitialState(e,r),n=e.listen(this[t]||t,this),o={stop:function(){var e=a.indexOf(o);l.throwIf(-1===e,"Tried to remove listen already gone from subscriptions list!"),a.splice(e,1),n()},listenable:e},a.push(o),o},t.stopListeningTo=function(e){for(var t,r=0,n=this.subscriptions||[];r<n.length;r++)if((t=n[r]).listenable===e)return t.stop(),l.throwIf(-1!==n.indexOf(t),"Failed to remove listen from subscriptions list!"),!0;return!1},t.stopListeningToAll=function(){for(var e,t=this.subscriptions||[];e=t.length;)t[0].stop(),l.throwIf(t.length!==e-1,"Failed to remove listen from subscriptions list!")},t.fetchInitialState=function(e,t){t=t&&this[t]||t;var r=this;l.isFunction(t)&&l.isFunction(e.getInitialState)&&((e=e.getInitialState())&&l.isFunction(e.then)?e.then(function(){t.apply(r,arguments)}):t.call(this,e))},t.joinTrailing=(0,r.instanceJoinCreator)("last"),t.joinLeading=(0,r.instanceJoinCreator)("first"),t.joinConcat=(0,r.instanceJoinCreator)("all"),t.joinStrict=(0,r.instanceJoinCreator)("strict")},function(e,t){e.exports=c},function(e,t){e.exports=u},function(e,t){e.exports=p},function(e,t){e.exports=f},function(e,t){e.exports=d},function(e,t){e.exports=h},function(e,t){e.exports=y},function(e,t){e.exports=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.__keep=t.joinConcat=t.joinStrict=t.joinLeading=t.all=t.joinTrailing=t.use=t.nextTick=t.setEventEmitter=t.createActions=t.createStore=t.createAction=t.utils=t.StoreMethods=t.PublisherMethods=t.ListenerMethods=t.ActionMethods=t.version=void 0;var n=f(r(28)),o=f(r(8)),a=f(r(19)),i=f(r(31)),l=r(29),s=f(r(5)),c=r(51),u=r(30),p=f(r(18));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}var d=(0,l.staticJoinCreator)("last"),h=d,y=(0,l.staticJoinCreator)("first"),m=(0,l.staticJoinCreator)("strict"),b=(0,l.staticJoinCreator)("all"),r=s,l=function(e){var t={};return e instanceof Array?e.forEach(function(e){s.isObject(e)?v(e,t):t[e]=(0,c.createAction)(e)}):v(e,t),t};function v(r,n){Object.keys(r).forEach(function(e){var t=r[e];n[e]=(0,c.createAction)(t)})}t.version={"reflux-core":"1.0.0"},t.ActionMethods=n,t.ListenerMethods=o,t.PublisherMethods=a,t.StoreMethods=i,t.utils=r,t.createAction=c.createAction,t.createStore=u.createStore,t.createActions=l,t.setEventEmitter=function(e){s.EventEmitter=e},t.nextTick=function(e){s.nextTick=e},t.use=function(e){e(this)},t.joinTrailing=d,t.all=h,t.joinLeading=y,t.joinStrict=m,t.joinConcat=b,t.__keep=p,Object.defineProperty(t,"default",{get:function(){return t}}),Function.prototype.bind||console.error("Function.prototype.bind not available. ES5 shim required. https://github.com/spoike/refluxjs#es5")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=!1,o=[],a=[];t.useKeep=function(){n=!(0<arguments.length&&void 0!==arguments[0])||arguments[0]},t.addStore=function(e){n&&o.push(e)},t.addAction=function(e){n&&a.push(e)},t.createdStores=o,t.createdActions=a,t.reset=function(){for(;o.length;)o.pop();for(;a.length;)a.pop()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deferWith=t.triggerAsync=t.trigger=t.listen=t.shouldEmit=t.preEmit=void 0;var n=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(r(5));t.preEmit=function(){},t.shouldEmit=function(){return!0},t.listen=function(t,r){r=r||this;function e(e){o||t.apply(r,e)}var n=this,o=!1;return this.emitter.addListener(this.eventLabel,e),function(){o=!0,n.emitter.removeListener(n.eventLabel,e)}},t.trigger=function(){var e=arguments,t=this.preEmit.apply(this,e),e=void 0===t?e:n.isArguments(t)?t:[].concat(t);this.shouldEmit.apply(this,e)&&this.emitter.emit(this.eventLabel,e)},t.triggerAsync=function(){var e=arguments,t=this;n.nextTick(function(){t.trigger.apply(t,e)})},t.deferWith=function(e){var t=this.trigger,r=this;this.trigger=function(){e.apply(r,[function(){t.apply(r,arguments)}].concat([].splice.call(arguments,0)))}}},function(e,t,r){var n=r(5),r=r(8);e.exports=n.extend({componentWillUnmount:r.stopListeningToAll},r)},function(e,t){e.exports=b},function(e,t){e.exports=v},function(e,t){e.exports=g},function(e,t){e.exports=w},function(e,t){e.exports=O},function(e,t){e.exports=C},function(e,t,r){var n=r(17);n.serverMode="object"!=typeof window,n.connect=r(52),n.connectFilter=r(53),n.ListenerMixin=r(20),n.listenTo=r(54),n.listenToMany=r(55),r(56),e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.staticJoinCreator=function(t){return function(){var e=p.call(arguments);return(0,n.createStore)({init:function(){this[o[t]].apply(this,e.concat("triggerAsync"))}})}},t.instanceJoinCreator=function(c){return function(){u.throwIf(arguments.length<2,"Cannot create a join with less than 2 listenables!");for(var n,o,a,e=p.call(arguments),t=e.pop(),r=e.length,i={numberOfListenables:r,callback:this[t]||t,listener:this,strategy:c},l=[],s=0;s<r;s++)u.throwIf(this.validateListening(e[s]));for(s=0;s<r;s++)l.push(e[s].listen(function(t,r){return function(){var e=p.call(arguments);if(r.listenablesEmitted[t])switch(r.strategy){case"strict":throw new Error("Strict join failed because listener triggered twice.");case"last":r.args[t]=e;break;case"all":r.args[t].push(e)}else r.listenablesEmitted[t]=!0,r.args[t]="all"===r.strategy?[e]:e;!function(e){for(var t=0;t<e.numberOfListenables;t++)if(!e.listenablesEmitted[t])return;e.callback.apply(e.listener,e.args),f(e)}(r)}}(s,i),this));return f(i),(t={listenable:e}).stop=(n=t,o=l,a=this,function(){var e,t=a.subscriptions,r=t?t.indexOf(n):-1;for(u.throwIf(-1===r,"Tried to remove join already gone from subscriptions list!"),e=0;e<o.length;e++)o[e]();t.splice(r,1)}),this.subscriptions=(this.subscriptions||[]).concat(t),t}};var n=r(30),u=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(r(5));var p=Array.prototype.slice,o={strict:"joinStrict",first:"joinLeading",last:"joinTrailing",all:"joinConcat"};function f(e){e.listenablesEmitted=new Array(e.numberOfListenables),e.args=new Array(e.numberOfListenables)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createStore=function(r){for(var e in r=r||{},c)if(!f[e]&&(u[e]||p[e]))throw new Error("Cannot override API method "+e+" in Reflux.StoreMethods. Use another method name or override it on Reflux.PublisherMethods / Reflux.ListenerMethods instead.");for(var t in r)if(!f[t]&&(u[t]||p[t]))throw new Error("Cannot override API method "+t+" in store creation. Use another method name or override it on Reflux.PublisherMethods / Reflux.ListenerMethods instead.");function n(){var e,t=0;if(this.subscriptions=[],this.emitter=new a.EventEmitter,this.eventLabel="change",(0,s.bindMethods)(this,r),this.init&&a.isFunction(this.init)&&this.init(),this.listenables)for(e=[].concat(this.listenables);t<e.length;t++)this.listenToMany(e[t])}r=(0,l.mix)(r),a.extend(n.prototype,p,u,c,r);var o=new n;return i.addStore(o),o};var a=n(r(5)),i=n(r(18)),l=r(49),s=r(50),c=n(r(31)),u=n(r(19)),p=n(r(8));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}var f={preEmit:1,shouldEmit:1}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){var n;void 0===(n="function"==typeof(n=function(){var j,a,e,l={},k={},t={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:true},s={currentLocale:t.currentLocale,zeroFormat:t.zeroFormat,nullFormat:t.nullFormat,defaultFormat:t.defaultFormat,scalePercentBy100:t.scalePercentBy100};function i(e,t){this._input=e;this._value=t}return(j=function(e){var t,r,n,o;if(j.isNumeral(e))t=e.value();else if(e===0||typeof e==="undefined")t=0;else if(e===null||a.isNaN(e))t=null;else if(typeof e==="string")if(s.zeroFormat&&e===s.zeroFormat)t=0;else if(s.nullFormat&&e===s.nullFormat||!e.replace(/[^0-9]+/g,"").length)t=null;else{for(r in l){o=typeof l[r].regexps.unformat==="function"?l[r].regexps.unformat():l[r].regexps.unformat;if(o&&e.match(o)){n=l[r].unformat;break}}n=n||j._.stringToNumber;t=n(e)}else t=Number(e)||null;return new i(e,t)}).version="2.0.6",j.isNumeral=function(e){return e instanceof i},j._=a={numberToFormat:function(e,t,r){var n=k[j.options.currentLocale],o=false,a=false,i=0,l="",s=1e12,c=1e9,u=1e6,p=1e3,f="",d=false,h,y,m,b,v,g,w,O,C,S;e=e||0;y=Math.abs(e);if(j._.includes(t,"(")){o=true;t=t.replace(/[\(|\)]/g,"")}else if(j._.includes(t,"+")||j._.includes(t,"-")){O=j._.includes(t,"+")?t.indexOf("+"):e<0?t.indexOf("-"):-1;t=t.replace(/[\+|\-]/g,"")}if(j._.includes(t,"a")){h=t.match(/a(k|m|b|t)?/);h=h?h[1]:false;if(j._.includes(t," a"))l=" ";t=t.replace(new RegExp(l+"a[kmbt]?"),"");if(y>=s&&!h||h==="t"){l+=n.abbreviations.trillion;e=e/s}else if(y<s&&y>=c&&!h||h==="b"){l+=n.abbreviations.billion;e=e/c}else if(y<c&&y>=u&&!h||h==="m"){l+=n.abbreviations.million;e=e/u}else if(y<u&&y>=p&&!h||h==="k"){l+=n.abbreviations.thousand;e=e/p}}if(j._.includes(t,"[.]")){a=true;t=t.replace("[.]",".")}g=e.toString().split(".")[0];w=t.split(".")[1];C=t.indexOf(",");i=(t.split(".")[0].split(",")[0].match(/0/g)||[]).length;if(w){if(j._.includes(w,"[")){w=w.replace("]","");w=w.split("[");f=j._.toFixed(e,w[0].length+w[1].length,r,w[1].length)}else f=j._.toFixed(e,w.length,r);g=f.split(".")[0];if(j._.includes(f,"."))f=n.delimiters.decimal+f.split(".")[1];else f="";if(a&&Number(f.slice(1))===0)f=""}else g=j._.toFixed(e,0,r);if(l&&!h&&Number(g)>=1e3&&l!==n.abbreviations.trillion){g=String(Number(g)/1e3);switch(l){case n.abbreviations.thousand:l=n.abbreviations.million;break;case n.abbreviations.million:l=n.abbreviations.billion;break;case n.abbreviations.billion:l=n.abbreviations.trillion;break}}if(j._.includes(g,"-")){g=g.slice(1);d=true}if(g.length<i)for(var E=i-g.length;E>0;E--)g="0"+g;if(C>-1)g=g.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+n.delimiters.thousands);if(t.indexOf(".")===0)g="";S=g+f+(l?l:"");if(o)S=(o&&d?"(":"")+S+(o&&d?")":"");else if(O>=0)S=O===0?(d?"-":"+")+S:S+(d?"-":"+");else if(d)S="-"+S;return S},stringToNumber:function(e){var t=k[s.currentLocale],r=e,n={thousand:3,million:6,billion:9,trillion:12},o,a,i,l;if(s.zeroFormat&&e===s.zeroFormat)a=0;else if(s.nullFormat&&e===s.nullFormat||!e.replace(/[^0-9]+/g,"").length)a=null;else{a=1;if(t.delimiters.decimal!==".")e=e.replace(/\./g,"").replace(t.delimiters.decimal,".");for(o in n){l=new RegExp("[^a-zA-Z]"+t.abbreviations[o]+"(?:\\)|(\\"+t.currency.symbol+")?(?:\\))?)?$");if(r.match(l)){a*=Math.pow(10,n[o]);break}}a*=(e.split("-").length+Math.min(e.split("(").length-1,e.split(")").length-1))%2?1:-1;e=e.replace(/[^0-9\.]+/g,"");a*=Number(e)}return a},isNaN:function(e){return typeof e==="number"&&isNaN(e)},includes:function(e,t){return e.indexOf(t)!==-1},insert:function(e,t,r){return e.slice(0,r)+t+e.slice(r)},reduce:function(e,t){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof t!=="function")throw new TypeError(t+" is not a function");var r=Object(e),n=r.length>>>0,o=0,a;if(arguments.length===3)a=arguments[2];else{while(o<n&&!(o in r))o++;if(o>=n)throw new TypeError("Reduce of empty array with no initial value");a=r[o++]}for(;o<n;o++)if(o in r)a=t(a,r[o],o,r);return a},multiplier:function(e){var t=e.toString().split(".");return t.length<2?1:Math.pow(10,t[1].length)},correctionFactor:function(){var e=Array.prototype.slice.call(arguments);return e.reduce(function(e,t){var r=a.multiplier(t);return e>r?e:r},1)},toFixed:function(e,t,r,n){var o=e.toString().split("."),a=t-(n||0),i,l,s,c;if(o.length===2)i=Math.min(Math.max(o[1].length,a),t);else i=a;s=Math.pow(10,i);c=(r(e+"e+"+i)/s).toFixed(i);if(n>t-i){l=new RegExp("\\.?0{1,"+(n-(t-i))+"}$");c=c.replace(l,"")}return c}},j.options=s,j.formats=l,j.locales=k,j.locale=function(e){if(e)s.currentLocale=e.toLowerCase();return s.currentLocale},j.localeData=function(e){if(!e)return k[s.currentLocale];e=e.toLowerCase();if(!k[e])throw new Error("Unknown locale : "+e);return k[e]},j.reset=function(){for(var e in t)s[e]=t[e]},j.zeroFormat=function(e){s.zeroFormat=typeof e==="string"?e:null},j.nullFormat=function(e){s.nullFormat=typeof e==="string"?e:null},j.defaultFormat=function(e){s.defaultFormat=typeof e==="string"?e:"0.0"},j.register=function(e,t,r){t=t.toLowerCase();if(this[e+"s"][t])throw new TypeError(t+" "+e+" already registered.");this[e+"s"][t]=r;return r},j.validate=function(e,t){var r,n,o,a,i,l,s,c;if(typeof e!=="string"){e+="";if(console.warn)console.warn("Numeral.js: Value is not string. It has been co-erced to: ",e)}e=e.trim();if(!!e.match(/^\d+$/))return true;if(e==="")return false;try{s=j.localeData(t)}catch(e){s=j.localeData(j.locale())}o=s.currency.symbol;i=s.abbreviations;r=s.delimiters.decimal;if(s.delimiters.thousands===".")n="\\.";else n=s.delimiters.thousands;c=e.match(/^[^\d]+/);if(c!==null){e=e.substr(1);if(c[0]!==o)return false}c=e.match(/[^\d]+$/);if(c!==null){e=e.slice(0,-1);if(c[0]!==i.thousand&&c[0]!==i.million&&c[0]!==i.billion&&c[0]!==i.trillion)return false}l=new RegExp(n+"{2}");if(!e.match(/[^\d.,]/g)){a=e.split(r);if(a.length>2)return false;else if(a.length<2)return!!a[0].match(/^\d+.*\d$/)&&!a[0].match(l);else if(a[0].length===1)return!!a[0].match(/^\d+$/)&&!a[0].match(l)&&!!a[1].match(/^\d+$/);else return!!a[0].match(/^\d+.*\d$/)&&!a[0].match(l)&&!!a[1].match(/^\d+$/)}return false},j.fn=i.prototype={clone:function(){return j(this)},format:function(e,t){var r=this._value,n=e||s.defaultFormat,o,a,i;t=t||Math.round;if(r===0&&s.zeroFormat!==null)a=s.zeroFormat;else if(r===null&&s.nullFormat!==null)a=s.nullFormat;else{for(o in l)if(n.match(l[o].regexps.format)){i=l[o].format;break}i=i||j._.numberToFormat;a=i(r,n,t)}return a},value:function(){return this._value},input:function(){return this._input},set:function(e){this._value=Number(e);return this},add:function(e){var o=a.correctionFactor.call(null,this._value,e);function t(e,t,r,n){return e+Math.round(o*t)}this._value=a.reduce([this._value,e],t,0)/o;return this},subtract:function(e){var o=a.correctionFactor.call(null,this._value,e);function t(e,t,r,n){return e-Math.round(o*t)}this._value=a.reduce([e],t,Math.round(this._value*o))/o;return this},multiply:function(e){function t(e,t,r,n){var o=a.correctionFactor(e,t);return Math.round(e*o)*Math.round(t*o)/Math.round(o*o)}this._value=a.reduce([this._value,e],t,1);return this},divide:function(e){function t(e,t,r,n){var o=a.correctionFactor(e,t);return Math.round(e*o)/Math.round(t*o)}this._value=a.reduce([this._value,e],t);return this},difference:function(e){return Math.abs(j(this._value).subtract(e).value())}},j.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return~~(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th"},currency:{symbol:"$"}}),function(){j.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(e,t,r){var n=j._.includes(t," BPS")?" ":"",o;e=e*1e4;t=t.replace(/\s?BPS/,"");o=j._.numberToFormat(e,t,r);if(j._.includes(o,")")){o=o.split("");o.splice(-1,0,n+"BPS");o=o.join("")}else o=o+n+"BPS";return o},unformat:function(e){return+(j._.stringToNumber(e)*1e-4).toFixed(15)}})}(),function(){var c={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},u={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]};var e=c.suffixes.concat(u.suffixes.filter(function(e){return c.suffixes.indexOf(e)<0}));var t=e.join("|");t="("+t.replace("B","B(?!PS)")+")";j.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(t)},format:function(e,t,r){var n,o=j._.includes(t,"ib")?u:c,a=j._.includes(t," b")||j._.includes(t," ib")?" ":"",i,l,s;t=t.replace(/\s?i?b/,"");for(i=0;i<=o.suffixes.length;i++){l=Math.pow(o.base,i);s=Math.pow(o.base,i+1);if(e===null||e===0||e>=l&&e<s){a+=o.suffixes[i];if(l>0)e=e/l;break}}n=j._.numberToFormat(e,t,r);return n+a},unformat:function(e){var t=j._.stringToNumber(e),r,n;if(t){for(r=c.suffixes.length-1;r>=0;r--){if(j._.includes(e,c.suffixes[r])){n=Math.pow(c.base,r);break}if(j._.includes(e,u.suffixes[r])){n=Math.pow(u.base,r);break}}t*=n||1}return t}})}(),function(){j.register("format","currency",{regexps:{format:/(\$)/},format:function(e,t,r){var n=j.locales[j.options.currentLocale],o={before:t.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:t.match(/([\+|\-|\)|\s|\$]*)$/)[0]},a,i,l;t=t.replace(/\s?\$\s?/,"");a=j._.numberToFormat(e,t,r);if(e>=0){o.before=o.before.replace(/[\-\(]/,"");o.after=o.after.replace(/[\-\)]/,"")}else if(e<0&&(!j._.includes(o.before,"-")&&!j._.includes(o.before,"(")))o.before="-"+o.before;for(l=0;l<o.before.length;l++){i=o.before[l];switch(i){case"$":a=j._.insert(a,n.currency.symbol,l);break;case" ":a=j._.insert(a," ",l+n.currency.symbol.length-1);break}}for(l=o.after.length-1;l>=0;l--){i=o.after[l];switch(i){case"$":a=l===o.after.length-1?a+n.currency.symbol:j._.insert(a,n.currency.symbol,-(o.after.length-(1+l)));break;case" ":a=l===o.after.length-1?a+" ":j._.insert(a," ",-(o.after.length-(1+l)+n.currency.symbol.length-1));break}}return a}})}(),function(){j.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(e,t,r){var n,o=typeof e==="number"&&!j._.isNaN(e)?e.toExponential():"0e+0",a=o.split("e");t=t.replace(/e[\+|\-]{1}0/,"");n=j._.numberToFormat(Number(a[0]),t,r);return n+"e"+a[1]},unformat:function(e){var t=j._.includes(e,"e+")?e.split("e+"):e.split("e-"),r=Number(t[0]),n=Number(t[1]);n=j._.includes(e,"e-")?n*=-1:n;function o(e,t,r,n){var o=j._.correctionFactor(e,t),a=e*o*(t*o)/(o*o);return a}return j._.reduce([r,Math.pow(10,n)],o,1)}})}(),function(){j.register("format","ordinal",{regexps:{format:/(o)/},format:function(e,t,r){var n=j.locales[j.options.currentLocale],o,a=j._.includes(t," o")?" ":"";t=t.replace(/\s?o/,"");a+=n.ordinal(e);o=j._.numberToFormat(e,t,r);return o+a}})}(),function(){j.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(e,t,r){var n=j._.includes(t," %")?" ":"",o;if(j.options.scalePercentBy100)e=e*100;t=t.replace(/\s?\%/,"");o=j._.numberToFormat(e,t,r);if(j._.includes(o,")")){o=o.split("");o.splice(-1,0,n+"%");o=o.join("")}else o=o+n+"%";return o},unformat:function(e){var t=j._.stringToNumber(e);if(j.options.scalePercentBy100)return t*.01;return t}})}(),function(){j.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(e,t,r){var n=Math.floor(e/60/60),o=Math.floor((e-n*60*60)/60),a=Math.round(e-n*60*60-o*60);return n+":"+(o<10?"0"+o:o)+":"+(a<10?"0"+a:a)},unformat:function(e){var t=e.split(":"),r=0;if(t.length===3){r=r+Number(t[0])*60*60;r=r+Number(t[1])*60;r=r+Number(t[2])}else if(t.length===2){r=r+Number(t[0])*60;r=r+Number(t[1])}return Number(r)}})}(),j})?n.call(t,r,t,e):n)||(e.exports=n)},function(e,t){e.exports=S},function(e,t){e.exports=E},function(e,t){e.exports=j},function(e,t){e.exports=k},function(e,t){e.exports=P},function(e,t){e.exports=x},function(e,t){e.exports=_},function(e,t){e.exports=R},function(e,t){e.exports=D},function(e,t){e.exports=T},function(e,n,o){!function(e){var t,r;function Pu(e){return(Pu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window,r=function(r,n,o,a,i,l,s,c,u,p,f,d,h,y,m,b,v,g,w,O){return S=[function(e,t){e.exports=r},function(e,t){e.exports=n},function(e,t){e.exports=o},function(e,t){e.exports=a},function(e,t){e.exports=i},function(e,t){e.exports=l},function(e,t){function o(e){return(o="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function s(e){var t=e.model,r=e.data,n={hideControls:[],readOnlyControls:[]};if(!t||!r)return n;for(var o=0;o<t.length;o++){var a,i=t[o]["other-visibleConition"];if(void 0!==i&&""!==i&&(new Function("data","return "+i)(r)||n.hideControls.push(t[o].key)),void 0!==(i=t[o]["other-readOnlyConition"])&&""!==i&&new Function("data","return "+i)(r)&&n.readOnlyControls.push(t[o].key),Array.isArray(t[o].children)&&(a=s({model:t[o].children,data:r}),n={hideControls:n.hideControls.concat(a.hideControls),readOnlyControls:n.readOnlyControls.concat(a.readOnlyControls)}),void 0!==t[o].placeholders)for(var l in t[o].placeholders)l=s({model:t[o].placeholders[l],data:r}),n={hideControls:n.hideControls.concat(l.hideControls),readOnlyControls:n.readOnlyControls.concat(l.readOnlyControls)};"customblock"===t[o]["data-buildertype"]&&"source"===t[o].sourceType&&null!=t[o].source&&(a=s({model:JSON5.parse(t[o].source),data:r}),n={hideControls:n.hideControls.concat(a.hideControls),readOnlyControls:n.readOnlyControls.concat(a.readOnlyControls)})}return n}function c(e,n){var o=[],a=s({model:e,data:n}).hideControls;return null!=e&&e.forEach(function(e){if(!a.includes(e.key)){var t;if((!0===e["other-required"]||"collectioneditor"===e["data-buildertype"]||void 0!==e["other-customValidation"]&&""!==e["other-customValidation"])&&o.push(e),void 0!==e.children&&0<e.children.length&&(t=c(e.children,n),o=o.concat(t)),void 0!==e.placeholders)for(var r in e.placeholders)r=c(e.placeholders[r],n),o=o.concat(r);"customblock"===e["data-buildertype"]&&"source"===e.sourceType&&null!=e.source&&(t=c(JSON5.parse(e.source),n),o=o.concat(t))}}),o}e.exports={initDefaultState:function e(t){var r=t.model,n=t.data;if(Array.isArray(r)&&void 0!==n)for(var o=0;o<r.length;o++){var a=r[o].propertyName||r[o].key;if(r[o].defaultValue&&!n[a]&&(n[a]=r[o].defaultValue),Array.isArray(r[o].children)&&e({model:r[o].children,data:n}),void 0!==r[o].placeholders)for(var i in r[o].placeholders)e({model:r[o].placeholders[i],data:n});"customblock"===r[o]["data-buildertype"]&&"source"===r[o].sourceType&&null!=r[o].source&&e({model:JSON5.parse(r[o].source),data:n})}},initDefaultStateFormUrl:function(e){void 0===e&&(e={});var t,t=null==(t=new RegExp("[?&]defaultvalues=([^&#]*)").exec(window.location.href))?null:decodeURI(t[1])||0;if(t){var r=void 0;try{r=JSON5.parse(t)}catch(e){}if(r&&"object"===o(r))for(var n in r)void 0!==r[n]&&(e[n]=r[n])}return e},validate:function(e){for(var t=e.data,r={valid:!0,errors:{}},n=c(e.model,t),o=0;o<(null==n?void 0:n.length);o++){var a=n[o].propertyName||n[o].key,i=function a(i,e,l){var t,r=void 0;if("collectioneditor"!==i["data-buildertype"]||void 0===i.placeholders)return!0===i["other-required"]&&(null==e||""===e||"collectioneditor"===i["data-buildertype"]||"files"===i["data-buildertype"]&&Array.isArray(e)&&0===e.length)?r="This field is required!":void 0!==i["other-customValidation"]&&""!==i["other-customValidation"]&&(t="return "+i["other-customValidation"],"boolean"==typeof(e=new Function("value, data",t)(e,l))?!1===e&&(r=!0):r=e),r;var s=[];return null!=e&&e.forEach(function(n,e){s.push({});var t,o=s[e];for(t in i.placeholders)!function(r){var e=c(i.placeholders[r],l);null!=e&&e.forEach(function(e){var t=n[r];o[r]=a(e,t,l)})}(t)}),s}(n[o],t?t[a]:void 0,t);i&&(r.errors[a]=i,r.valid=!1)}return r},checkConditions:s,updateEventsFormat:function(n){return n.updated||(Object.keys(n).forEach(function(e){var t,r=n[e];((t=r).actions||r.parameters||r.targets)&&(t={actions:r.actions||[],parameters:r.parameters||[],targets:r.targets||[]},n[e]={active:r.active||!1,triggers:r.actions?[t]:void 0})}),n.updated=!0),n}}},function(e,t){e.exports=s},function(e,t){e.exports=c},function(e,t){e.exports=u},function(e,t){e.exports=p},function(e,t){e.exports=f},function(e,t,r){r(20),e.exports=self.fetch.bind(self)},function(e,t){e.exports=d},function(e,t){e.exports=h},function(e,t){e.exports=y},function(e,t){e.exports=m},function(e,t){e.exports=b},function(e,t){e.exports=v},function(e,t){e.exports=g},function(e,t,r){"use strict";r.r(t),r.d(t,"Headers",function(){return u}),r.d(t,"Request",function(){return b}),r.d(t,"Response",function(){return g}),r.d(t,"DOMException",function(){return O}),r.d(t,"fetch",function(){return C});var n,o,l="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==l&&l,s={searchParams:"URLSearchParams"in l,iterable:"Symbol"in l&&"iterator"in Symbol,blob:"FileReader"in l&&"Blob"in l&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in l,arrayBuffer:"ArrayBuffer"in l};function a(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function c(e){return"string"!=typeof e?String(e):e}function i(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return s.iterable&&(e[Symbol.iterator]=function(){return e}),e}function u(t){this.map={},t instanceof u?t.forEach(function(e,t){this.append(t,e)},this):Array.isArray(t)?t.forEach(function(e){this.append(e[0],e[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function p(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function f(r){return new Promise(function(e,t){r.onload=function(){e(r.result)},r.onerror=function(){t(r.error)}})}function d(e){var t=new FileReader,r=f(t);return t.readAsArrayBuffer(e),r}function h(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,(this._bodyInit=e)?"string"==typeof e?this._bodyText=e:s.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:s.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:s.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():s.arrayBuffer&&s.blob&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=h(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||o(e))?this._bodyArrayBuffer=h(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):s.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s.blob&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=p(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(d)}),this.text=function(){var e,t,r=p(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,r=f(t=new FileReader),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s.formData&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}s.arrayBuffer&&(n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(e){return e&&-1<n.indexOf(Object.prototype.toString.call(e))}),u.prototype.append=function(e,t){e=a(e),t=c(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},u.prototype.delete=function(e){delete this.map[a(e)]},u.prototype.get=function(e){return e=a(e),this.has(e)?this.map[e]:null},u.prototype.has=function(e){return this.map.hasOwnProperty(a(e))},u.prototype.set=function(e,t){this.map[a(e)]=c(t)},u.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},u.prototype.keys=function(){var r=[];return this.forEach(function(e,t){r.push(t)}),i(r)},u.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),i(t)},u.prototype.entries=function(){var r=[];return this.forEach(function(e,t){r.push([t,e])}),i(r)},s.iterable&&(u.prototype[Symbol.iterator]=u.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(e,t){if(!(this instanceof b))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,n=(t=t||{}).body;if(e instanceof b){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new u(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new u(t.headers)),this.method=(e=(r=t.method||this.method||"GET").toUpperCase(),-1<m.indexOf(e)?e:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n),"GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache||((t=/([?&])_=[^&]*/).test(this.url)?this.url=this.url.replace(t,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime())}function v(e){var r=new FormData;return e.trim().split("&").forEach(function(e){var t;e&&(e=(t=e.split("=")).shift().replace(/\+/g," "),t=t.join("=").replace(/\+/g," "),r.append(decodeURIComponent(e),decodeURIComponent(t)))}),r}function g(e,t){if(!(this instanceof g))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t=t||{},this.type="default",this.status=void 0===t.status?200:t.status,this.ok=200<=this.status&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new u(t.headers),this.url=t.url||"",this._initBody(e)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},y.call(b.prototype),y.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},g.error=function(){var e=new g(null,{status:0,statusText:""});return e.type="error",e};var w=[301,302,303,307,308];g.redirect=function(e,t){if(-1===w.indexOf(t))throw new RangeError("Invalid status code");return new g(null,{status:t,headers:{location:e}})};var O=l.DOMException;try{new O}catch(e){(O=function(e,t){this.message=e,this.name=t,e=Error(e),this.stack=e.stack}).prototype=Object.create(Error.prototype),O.prototype.constructor=O}function C(n,i){return new Promise(function(o,e){var t=new b(n,i);if(t.signal&&t.signal.aborted)return e(new O("Aborted","AbortError"));var a=new XMLHttpRequest;function r(){a.abort()}a.onload=function(){var e,r,t={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",r=new u,e.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e}).forEach(function(e){var t=e.split(":");(e=t.shift().trim())&&(t=t.join(":").trim(),r.append(e,t))}),r)};t.url="responseURL"in a?a.responseURL:t.headers.get("X-Request-URL");var n="response"in a?a.response:a.responseText;setTimeout(function(){o(new g(n,t))},0)},a.onerror=function(){setTimeout(function(){e(new TypeError("Network request failed"))},0)},a.ontimeout=function(){setTimeout(function(){e(new TypeError("Network request failed"))},0)},a.onabort=function(){setTimeout(function(){e(new O("Aborted","AbortError"))},0)},a.open(t.method,function(t){try{return""===t&&l.location.href?l.location.href:t}catch(e){return t}}(t.url),!0),"include"===t.credentials?a.withCredentials=!0:"omit"===t.credentials&&(a.withCredentials=!1),"responseType"in a&&(s.blob?a.responseType="blob":s.arrayBuffer&&t.headers.get("Content-Type")&&-1!==t.headers.get("Content-Type").indexOf("application/octet-stream")&&(a.responseType="arraybuffer")),!i||"object"!=Pu(i.headers)||i.headers instanceof u?t.headers.forEach(function(e,t){a.setRequestHeader(t,e)}):Object.getOwnPropertyNames(i.headers).forEach(function(e){a.setRequestHeader(e,c(i.headers[e]))}),t.signal&&(t.signal.addEventListener("abort",r),a.onreadystatechange=function(){4===a.readyState&&t.signal.removeEventListener("abort",r)}),a.send(void 0===t._bodyInit?null:t._bodyInit)})}C.polyfill=!0,l.fetch||(l.fetch=C,l.Headers=u,l.Request=b,l.Response=g)},function(t,r,n){!function(m){var e;void 0===(e="function"==typeof(e=function(){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function e(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(r){var n=t();return function(){var e,t=a(r);return e=n?(e=a(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Pu(e)&&"function"!=typeof e?l(t):e}}function c(e,t,r){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(r):t.value}})(e,t,r||e)}var r,u,p=(e(y,[{key:"addEventListener",value:function(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"removeEventListener",value:function(e,t){if(e in this.listeners)for(var r=this.listeners[e],n=0,o=r.length;n<o;n++)if(r[n]===t)return void r.splice(n,1)}},{key:"dispatchEvent",value:function(t){var r=this;if(t.type in this.listeners){for(var e=this.listeners[t.type],n=0,o=e.length;n<o;n++)!function(e){setTimeout(function(){return e.call(r,t)})}(e[n]);return!t.defaultPrevented}}}]),y),f=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(r,p);var t=s(r);function r(){var e;return n(this,r),(e=t.call(this)).listeners||p.call(l(e)),Object.defineProperty(l(e),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(l(e),"onabort",{value:null,writable:!0,configurable:!0}),e}return e(r,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(e){"abort"===e.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,e)),c(a(r.prototype),"dispatchEvent",this).call(this,e)}}]),r}(),d=(e(h,[{key:"abort",value:function(){var t;try{t=new Event("abort")}catch(e){"undefined"!=typeof document?document.createEvent?(t=document.createEvent("Event")).initEvent("abort",!1,!1):(t=document.createEventObject()).type="abort":t={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(t)}},{key:"toString",value:function(){return"[object AbortController]"}}]),h);function h(){n(this,h),Object.defineProperty(this,"signal",{value:new f,writable:!0,configurable:!0})}function y(){n(this,y),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}"undefined"!=typeof Symbol&&Symbol.toStringTag&&(d.prototype[Symbol.toStringTag]="AbortController",f.prototype[Symbol.toStringTag]="AbortSignal"),r="undefined"!=typeof self?self:m,((u=r).__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),1):"function"==typeof u.Request&&!u.Request.prototype.hasOwnProperty("signal")||!u.AbortController)&&(r.AbortController=d,r.AbortSignal=f)})?e.call(r,n,r,t):e)||(t.exports=e)}.call(this,n(22))},function(e,t){var r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==("undefined"==typeof window?"undefined":Pu(window))&&(r=window)}e.exports=r},function(e,t){e.exports=w},function(e,t){e.exports=O},function(e,t,r){"use strict";r.r(t),r.d(t,"DWKitForm",function(){return iu}),r.d(t,"GridView",function(){return Xt}),r.d(t,"CollectionEditor",function(){return Re}),r.d(t,"BaseEditControl",function(){return ku});var c=r(0),z=r.n(c);function o(e){return(o="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=r(7),l=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(s,c.Component);var r,n,l=(r=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=p(r);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}(this,n?(e=p(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function s(){var r;!function(e){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this);for(var e,t,n,o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=function(e,t){r.props.handleChange(r.props.row,e,t)},(t="handleChange")in(e=u(r=l.call.apply(l,[this].concat(a))))?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,r}return a(s.prototype,[{key:"shouldComponentUpdate",value:function(e){return!f(this.props,e)}}]),s}();function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=(n(h.prototype,[{key:"register",value:function(e,t){if(s.map[e])throw new Error("Component "+e+" already registered!");s.map[e]=t}},{key:"draw",value:function(e,t){var r=s.map[e];return r?r(t):(r=s.map["null-control"])({"data-buildertype":e,text:"".concat(e," is unsupported")})}}]),new h),d=s.register,W=s.draw;function h(){var e;!function(e){if(!(e instanceof h))throw new TypeError("Cannot call a class as a function")}(this),e={},"map"in this?Object.defineProperty(this,"map",{value:e,enumerable:!0,configurable:!0,writable:!0}):this.map=e}function y(e){return(y="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,l);var r,n,e=(r=t,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=v(r);return function(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}()}(this,n?(e=v(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function t(){return function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e.apply(this,arguments)}return m(t.prototype,[{key:"render",value:function(){return W("collection-checkbox",{me:this,props:this.props})}}]),t}();function g(e){return(g="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var k=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(a,c.Component);var r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=S(r);return function(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return C(e)}(this,n?(e=S(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function a(){var n;!function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return E(C(n=o.call.apply(o,[this].concat(t))),"handleEvent",function(e){e.parameters||(e.parameters={}),e.parameters.row||(e.parameters.row=n.props.row),"onChange"===e.eventName?n.props.handleChange(n.props.row,e.syntheticEvent,e):n.props.handleEvent(e)}),E(C(n),"getAdditionalDataForControl",function(e,t,r){return(t=t||{}).row||(t.row=n.props.row),n.props.getAdditionalDataForControl(e,t,r)}),n}return w(a.prototype,[{key:"render",value:function(){return W("collection-custom-control",{getAdditionalDataForControl:this.getAdditionalDataForControl,handleEvent:this.handleEvent,props:this.props})}}]),a}();function P(e){return(P="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function x(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var D=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,l);var r,n,e=(r=t,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=R(r);return function(e,t){if(t&&("object"===P(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}()}(this,n?(e=R(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function t(){return function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e.apply(this,arguments)}return x(t.prototype,[{key:"render",value:function(){return W("collection-date-time",{me:this,props:this.props})}}]),t}();function T(e){return(T="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function F(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var L=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(t,l);var r,n,e=(r=t,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=I(r);return function(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}()}(this,n?(e=I(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function t(){return function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e.apply(this,arguments)}return F(t.prototype,[{key:"render",value:function(){return W("collection-dropdown",{me:this,props:this.props})}}]),t}();function N(e){return(N="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var U=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,l);var r,n,e=(r=t,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=M(r);return function(e,t){if(t&&("object"===N(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}()}(this,n?(e=M(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function t(){return function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e.apply(this,arguments)}return B(t.prototype,[{key:"render",value:function(){return W("collection-input",{me:this,props:this.props})}}]),t}();function H(e){return(H="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function G(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var J=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(t,l);var r,n,e=(r=t,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=K(r);return function(e,t){if(t&&("object"===H(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}()}(this,n?(e=K(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function t(){return function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e.apply(this,arguments)}return G(t.prototype,[{key:"render",value:function(){return W("collection-upload",{me:this,props:this.props})}}]),t}();function Y(e){return(Y="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function Q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ee=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(t,l);var r,n,e=(r=t,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=X(r);return function(e,t){if(t&&("object"===Y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}()}(this,n?(e=X(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function t(){return function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e.apply(this,arguments)}return Q(t.prototype,[{key:"render",value:function(){return W("collection-camera",{me:this,props:this.props})}}]),t}();function te(e){return(te="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function re(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ae=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(t,l);var r,n,e=(r=t,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=oe(r);return function(e,t){if(t&&("object"===te(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}()}(this,n?(e=oe(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function t(){return function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e.apply(this,arguments)}return re(t.prototype,[{key:"render",value:function(){return W("collection-signature",{me:this,props:this.props})}}]),t}();function ie(e){return(ie="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var fe=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(a,c.Component);var r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=ue(r);return function(e,t){if(t&&("object"===ie(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ce(e)}(this,n?(e=ue(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function a(){var n;!function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return pe(ce(n=o.call.apply(o,[this].concat(t))),"onUpload",function(e,t){var r=ce(n),e={name:e.name,token:t.result.properties.Token,success:t.success,properties:t.result.properties};t.success?r.props.onChange&&r.props.onChange(null,{name:r.props.name,propertyName:r.props.propertyName,value:t.result.properties.Token,parameters:e}):r.props.onUploadFail&&r.props.onUploadFail(null,{name:r.props.name,propertyName:r.props.propertyName,message:t.result.message,details:t.result.details,success:!1})}),pe(ce(n),"onClear",function(e){var t=ce(n);t.props.onChange&&t.props.onChange(null,{name:t.props.name,propertyName:t.props.propertyName,value:null})}),n}return le(a.prototype,[{key:"render",value:function(){var e=this.onClear,t=this.onUpload;return W("camera",{handleChange:this.handleChange,me:this,onClear:e,onUpload:t,props:this.props,state:this.state})}}]),a}();function de(e){return void 0===e}function he(e){return!de(e)&&null!==e}function ye(e){return he(e)&&""!==e}function me(e){if(!e)return 1;for(var t in e)if(e.hasOwnProperty(t))return;return JSON.stringify(e)===JSON.stringify({})}r(7);var be=r(4),ve=r.n(be),ge=r(8),we=r.n(ge);function Oe(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Ce(e){return(Ce="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function Se(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ee(e,t){return(Ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function je(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var xe=r(7),_e=r(10),Re=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ee(e,t)}(i,c.Component);var e,t,r,n,o,a=(n=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=ke(n);return function(e,t){if(t&&("object"===Ce(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return je(e)}(this,o?(e=ke(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function i(e){var u;return function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),Pe(je(u=a.call(this,e)),"btnAdd",function(){var e=de(u.props.defaultrow)?{}:u.props.defaultrow;e.__id="CLIENT_"+we.a.v1(),u.fillDefaultValues(e,u.props.columns,u.props.placeholders),u.state.data.push(e),u.props.handleEvent&&u.props.handleEvent({key:u.props.name,propertyName:u.props.propertyName,eventName:"onAdd",parameters:{rowIdx:u.state.data.length-1,row:e}}),u.sendChangesToParent()}),Pe(je(u),"handleChange",function(e,t,r){var n=r.name,o=r.propertyName,a=r.value,i=r.checked,l=r.additionalValues;if(u.props.handleEvent||u.props.onChange){var s=o||n;if(de(a)&&he(i)?e[s]=i:e[s]=a,"object"==Ce(l))for(var c in l)e[s+"_"+c]=l[c];u.sendChangesToParent(),t&&t.preventDefault?t.preventDefault():u.forceUpdate()}}),u.state={expanded:{},data:[]},u}return r=[{key:"getDerivedStateFromProps",value:function(e,t){var r=null;return xe(t.originalValue,e.value)||((r={}).originalValue=_e(e.value),e=null==e.value?[]:e.value,Array.isArray(e)?(r.data=_e(e),r.stringmode=!1):(r.data=e.length?ve.a.parse(e):[],r.stringmode=!0)),r}}],t=[{key:"applyCollapseAll",value:function(e){for(var t in e)de(this.state.expanded[t])&&(this.state.expanded[t]=!1)}},{key:"getFilteredItems",value:function(e,t){return void 0===e?[]:void 0!==t?e.filter(function(e){return t.IsRowMatched(e)}):e}},{key:"btnDelete",value:function(e,t){var r;(this.props.handleEvent||this.props.onChange)&&(r=(t=void 0===t?this.state.data:t)[e],t.splice(e,1),this.props.handleEvent&&this.props.handleEvent({key:this.props.name,propertyName:this.props.propertyName,eventName:"onDelete",parameters:{rowIdx:e,row:r}}),this.sendChangesToParent())}},{key:"btnAddChild",value:function(e,t){var r=(t=void 0===t?de(this.state.data)?[]:this.state.data:t)[e];(e=de(this.props.defaultrow)?{}:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Oe(Object(r),!0).forEach(function(e){Pe(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Oe(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},this.props.defaultrow)).__id="CLIENT_"+we.a.v1(),this.fillDefaultValues(e,this.props.columns,this.props.placeholders),this.props.parentIdField?(e[this.props.parentIdField]=r[this.props.idField]||r.__id,t.push(e)):(Array.isArray(r[this.props.childrenField])||(r[this.props.childrenField]=[]),r[this.props.childrenField].push(e)),this.props.handleEvent&&this.props.handleEvent({key:this.props.name,propertyName:this.props.propertyName,eventName:"onAddChild",parameters:{rowIdx:t.length-1,row:e}}),this.sendChangesToParent()}},{key:"fillDefaultValues",value:function(e,t,r){if(t&&r)for(var n=0;n<t.length;n++){var o=void 0,a=r[o="object"===Ce(t[n])?t[n].key:t[n]];Array.isArray(a)&&0<a.length&&(a=a[0])&&(a.propertyName&&(o=a.propertyName),a.defaultValue&&(e[o]=a.defaultValue))}}},{key:"copyForParentId",value:function(t,r,e){var n=this,o=_e(r);return o.__id="CLIENT_"+we.a.v1(),delete o[this.props.idField],o[this.props.parentIdField]=e,t.filter(function(e){return e[n.props.parentIdField]===(r[n.props.idField]||r.__id)}).forEach(function(e){return n.copyForParentId(t,e,o.__id)}),t.push(o),o}},{key:"resetIdsRecursive",value:function(e){var t=this;e.__id="CLIENT_"+we.a.v1(),delete e[this.props.idField],Array.isArray(e[this.props.childrenField])&&e[this.props.childrenField].forEach(function(e){return t.resetIdsRecursive(e)})}},{key:"btnCopy",value:function(e,t){var r,e=(t=t||this.state.data)[e];this.props.parentIdField&&e.hasOwnProperty(this.props.parentIdField)?r=this.copyForParentId(t,e,e[this.props.parentIdField]):(r=_e(e),this.resetIdsRecursive(r),t.push(r)),this.props.handleEvent&&this.props.handleEvent({key:this.props.name,propertyName:this.props.propertyName,eventName:"onCopy",parameters:{rowIdx:t.length-1,row:r}}),this.sendChangesToParent()}},{key:"onExpand",value:function(e,t){this.state.expanded[e]=t,this.forceUpdate()}},{key:"onDragOver",value:function(e){e.preventDefault()}},{key:"onDragStart",value:function(e,t,r){r.dataTransfer.setData("index",e);var n=r.target;(n=(n=n&&n.parentElement)&&n.parentElement)&&r.dataTransfer.setDragImage($(r.target).parent().parent()[0],0,0),this.state.dragElementIndex=e,this.state.dragRows=t}},{key:"onDragEnd",value:function(e,t){this.state.dragElementIndex=void 0,this.state.dragRows=void 0}},{key:"onDrop",value:function(e,t,r){var n=this.state.dragElementIndex,o=this.state.dragRows,e=e,t=t;return he(n)&&(e!==n&&(void 0!==this.props.parentIdField&&""!==this.props.parentIdField&&(o[n][this.props.parentIdField]=t[e][this.props.parentIdField]),t.splice(e,0,o.splice(n,1)[0]),this.sendChangesToParent()),r.preventDefault()),!1}},{key:"sendChangesToParent",value:function(){var e=this.state.data,e=this.state.stringmode?e.length?ve.a.stringify(e):[]:e;this.props.buildermode||(this.props.onChange?this.props.onChange(null,{name:this.props.name,propertyName:this.props.propertyName,value:e}):this.props.handleEvent({syntheticEvent:null,key:this.props.name,eventName:"onChange",name:this.props.name,value:e,propertyName:this.props.propertyName}))}},{key:"render",value:function(){return W("collection-editor",{applyCollapseAll:this.applyCollapseAll,btnAdd:this.btnAdd,btnAddChild:this.btnAddChild,btnCopy:this.btnCopy,btnDelete:this.btnDelete,getFilteredItems:this.getFilteredItems,handleChange:this.handleChange,me:this,onExpand:this.onExpand,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onDragOver:this.onDragOver,onDrop:this.onDrop,props:this.props,state:this.state})}}],Se((e=i).prototype,t),Se(e,r),i}();function De(e){return(De="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function Te(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Fe(e,t){return(Fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ie=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fe(e,t)}(o,c.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Ae(r);return function(e,t){if(t&&("object"===De(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}()}(this,n?(e=Ae(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function o(e){return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e)).state={},e}return Te(o.prototype,[{key:"render",value:function(){return W("container",{props:this.props})}}]),o}(),Le=r(5),Ne=r.n(Le);function Be(e){return window.DWKitLang&&window.DWKitLang.common&&window.DWKitLang.common.dateFormat?window.DWKitLang.common.dateFormat:e}function Ve(e){return window.DWKitLang&&window.DWKitLang.common&&window.DWKitLang.common.timeFormat?window.DWKitLang.common.timeFormat:e}function Me(){if(window.DWKitAdminLang&&window.DWKitAdminLang.workflowbar)return window.DWKitAdminLang.workflowbar}function Ue(e){return(Ue="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function ze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function We(e,t){return(We=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function He(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ge(e){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ke=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&We(e,t)}(o,c.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Ge(r);return function(e,t){if(t&&("object"===Ue(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return He(e)}(this,n?(e=Ge(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function o(e){var r;return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),qe(He(r=t.call(this,e)),"handleChangeRaw",function(e){e=Ne()(e.target.value,r.state.dateFormat),r.onChange(e)}),qe(He(r),"onChange",function(e){var t;r.props.readOnly||he(r.props.onChange)&&((t=null)!=e&&he(e)&&(t="date"===r.props.type?e.format("YYYY-MM-DD"):e.toJSON()),r.props.onChange(null,{propertyName:r.props.propertyName,name:r.props.name,value:t}))}),r.state={},r}return ze(o.prototype,[{key:"render",value:function(){var e=this.props.type,t=this.props.value?Ne()(this.props.value):void 0;t&&!t.isValid()&&(t=void 0);var r={style:this.props.style,className:this.props.className,onBlur:this.props.onBlur,onClick:this.props.onClick,onFocus:this.props.onFocus,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave},n={};return"date"===e?n.dateFormat=Be("DD.MM.YYYY"):"time"===e?(n.showTimeSelect=!0,n.showTimeSelectOnly=!0,n.timeIntervals=10,n.dateFormat=Ve(),n.dateFormat||(n.dateFormat="HH:mm",n.timeFormat="HH:mm")):"datetime"===e&&(n.showTimeSelect=!0,Be()?n.dateFormat=Be()+" "+Ve("HH:ss"):(n.dateFormat="DD.MM.YYYY HH:mm",n.timeFormat="HH:mm")),this.state.dateFormat=n.dateFormat,W("date-picker",{controlProps:r,date:t,datePickerProps:n,handleChangeRaw:this.handleChangeRaw,onChange:this.onChange,state:this.state,placeholder:this.placeholder,props:this.props})}}]),o}();function Je(e){return(Je="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function $e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ye(e,t){return(Ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qe(e){return(Qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ze=r(7),Xe=r(10),et=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ye(e,t)}(i,c.Component);var e,t,r,n,o,a=(n=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Qe(n);return function(e,t){if(t&&("object"===Je(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}()}(this,o?(e=Qe(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function i(e){var t;return function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),(t=a.call(this,e)).state={options:[],value:t.props.value},t.pageSize=e.pageSize,t.pageSize||(t.pageSize=100),t}return r=[{key:"getDerivedStateFromProps",value:function(e,t){return e.dataModel!==t.dataModel?{getAdditionalDataForControl:e.getAdditionalDataForControl,dataModel:e.dataModel,needFetch:!0,needValueFetch:!0,filters:e.filters}:e.paging&&e.value!==t.value&&void 0!==e.value?{needValueFetch:!0,value:e.value}:e.filters!=t.filters?{needFetch:!0,filters:e.filters}:null}}],t=[{key:"componentDidMount",value:function(){this.GetAdditionalData()}},{key:"shouldComponentUpdate",value:function(e,t){return!Ze(this.state,t)||!Ze(this.props,e)}},{key:"componentDidUpdate",value:function(e,t){this.GetAdditionalData()}},{key:"GetAdditionalData",value:function(){var r,e,n=this;void 0===this.state.dataModel?void 0!==console&&!0===this.props.buildermode&&console.log("Dictionary: Set DataModel label!"):void 0===this.state.getAdditionalDataForControl?void 0!==console&&!0===this.props.buildermode&&console.log("Dictionary: For paging on server need to set getAdditionalDataForControl func!"):this.state.needFetch?(e={model:(r=this).state.dataModel,filters:this.state.filters},this.props.paging&&(e.startIndex=0,e.pageSize=this.pageSize),this.state.isFetching=!0,this.state.needFetch=!1,this.state.getAdditionalDataForControl(this,e,function(e){var t=e.items,e=e.rowsCount;r.setData({items:t,rowsCount:e,page:0},!0),n.state.needValueFetch&&(n.state.needValueFetch=!1,n.loadCurrentValue())})):this.state.needValueFetch&&(this.state.needValueFetch=!1,this.loadCurrentValue())}},{key:"render",value:function(){var e,t=this,r={};for(e in this.props)"parentIsForm"!==e&&"getAdditionalDataForControl"!==e&&"dataModel"!==e&&"clearable"!==e&&"columns"!==e&&"paging"!==e&&"pageSize"!==e&&"handleEvent"!==e&&"propertyName"!==e&&"textAsValue"!==e&&(r[e]=this.props[e]);return this.props.readOnly&&(r.disabled=!0),r.options=this.state.options,r.onChange=this.onChange.bind(this),this.props.paging&&(r.onSearchChange=this.handleSearchChange.bind(this),r.onClose=this.onClose.bind(this),null!=this.state.open&&(this.state.open?r.open=!0:(r.open=!1,this.state.open=void 0,setTimeout(function(){t.forceUpdate()})))),r.multiple&&(void 0!==r.value&&null!==r.value||(r.value=[]),Array.isArray(r.value)||(r.value=this.getArrayValues(r.value))),r.loading=this.state.isFetching,r.searchQuery=this.state.searchQuery,W("dictionary",{propsControl:r,props:this.props})}},{key:"onChange",value:function(e,t){var r,n=this,o=(t.name,t.value),t=!1;this.props.multiple?Array.isArray(o)&&(r=!1,o.forEach(function(e){"string"==typeof e&&0===e.lastIndexOf("__load",0)&&(r=!0)}),r&&(t=!0)):"string"==typeof o&&0===o.lastIndexOf("__load",0)&&(t=!0),t?(this.state.open=!0,this.setState({isFetching:!0}),this.loadNextPage(),o=this.props.value):he(this.state.open)&&(this.state.open=!1);var a=null;this.props.textAsValue||(Array.isArray(o)?(a=new Array,o.forEach(function(t){var e;"string"!=typeof t||0!==t.lastIndexOf("__load",0)||0<(e=n.state.options.filter(function(e){return e.key===t})).length&&a.push(e[0].values)})):0<(t=this.state.options.filter(function(e){return e.key===o})).length?a=t[0].values:(t=this.getCollumnsForFilter())&&(a={},t.split(",").forEach(function(e){a[e]=null}))),this.props.handleEvent&&this.props.handleEvent({syntheticEvent:e,key:this.props.name,eventName:"onChange",name:this.props.name,propertyName:this.props.propertyName,value:o,additionalValues:a})}},{key:"onClose",value:function(){1!=this.state.open&&this.state.searchQuery?(this.state.isFetching=!0,this.state.searchQuery="",this.state.lastLoadPage=-1,this.loadNextPage(!0)):!1===this.state.open&&this.forceUpdate()}},{key:"handleSearchChange",value:function(e,t){var r=t.searchQuery,n=this;n.searchTimeout&&clearTimeout(n.searchTimeout),n.searchTimeout=setTimeout(function(){n.searchTimeout=void 0,n.setState({isFetching:!0,searchQuery:r,lastLoadPage:-1}),n.loadNextPage(!0)},100)}},{key:"loadNextPage",value:function(r){var n=this,e={model:this.state.dataModel},o=this.state.lastLoadPage+1;e.filters=n.state.filters,n.state.searchQuery&&(e.filters=[{column:this.getCollumnsForFilter(),term:"like",value:n.state.searchQuery}]),e.startIndex=o*this.pageSize,e.pageSize=this.pageSize,this.state.getAdditionalDataForControl(this,e,function(e){var t=e.items,e=e.rowsCount;n.setData({items:t,rowsCount:e,page:o},r),r&&n.loadCurrentValue()})}},{key:"setData",value:function(e,t){var r,n=e.items,o=e.rowsCount,e=e.page;if(t){if(o>(r=Xe(n)).length&&(u=(null!=this.state.searchQuery?this.state.searchQuery:"")+"...",r.push({key:"__load",value:"__load",text:u})),this.props.clearable&&!this.props.multiple&&r.unshift({key:"__reset",value:"",text:"   "}),this.props.multiple)for(var a=this.getArrayValues(this.props.value),i=0;i<a.length;i++)for(var l=a[i],s=0;s<this.state.options.length;s++){var c=this.state.options[s];l==c.value&&r.unshift(c)}}else{var u=void 0;0<(r=this.state.options).length&&"__load"===r[r.length-1].key&&((u=r.pop()).value="__load_"+e);for(var p=0;p<n.length;p++){for(var f=n[p],d=0;d<r.length;d++)if(r[d].key===f.key){r.splice(d,1);break}r.push(f)}void 0!==u&&o>r.length&&r.push(u)}this.props.textAsValue&&r.forEach(function(e){"__load"!=e.key&&(e.value=e.text)}),this.setState({needFetch:!1,options:r,rowsCount:o,isFetching:!1,lastLoadPage:e}),this.props.handleEvent&&this.props.handleEvent({syntheticEvent:void 0,key:this.props.name,eventName:"onDataReceived",name:this.props.name,propertyName:this.props.propertyName,value:this.props.value,parameters:{options:r}})}},{key:"getArrayValues",value:function(e){var t,e=e;if(!Array.isArray(e)){try{t=JSON.parse(e)}catch(e){}e=t=Array.isArray(t)?t:[e]}return e}},{key:"loadCurrentValue",value:function(){var t=this;if(this.props.value)if(this.props.multiple){for(var r,e=this.getArrayValues(this.props.value),n=[],o=0;o<e.length;o++){for(var a=e[o],i=!1,l=0;l<this.state.options.length;l++)if(this.state.options[l].value==a){i=!0;break}i||n.push(a)}0<n.length&&(this.props.textAsValue?(r=this.state.options,n.forEach(function(e){r.push({value:e,text:e})})):((s={model:this.state.dataModel}).filters=[{column:"__id",term:"in",value:n}],this.state.isFetching=!0,this.state.getAdditionalDataForControl(this,s,function(e){e=e.items,t.addAdditionalOptions(e)})))}else{for(var s,c=!1,u=0;u<this.state.options.length;u++)if(this.state.options[u].value==this.props.value){c=!0;break}c||(this.props.textAsValue?this.state.options.push({value:t.props.value,text:t.props.value}):((s={model:this.state.dataModel}).filters=[{column:"__id",term:"=",value:t.props.value}],this.state.isFetching=!0,this.state.getAdditionalDataForControl(this,s,function(e){e=e.items,t.addAdditionalOptions(e)})))}}},{key:"addAdditionalOptions",value:function(e){if(this.state.isFetching=!1,Array.isArray(e)&&e.length){for(var t=this.state.options,r=e.length-1;0<=r;r--){for(var n=!1,o=0;o<t.length;o++)if(t[o].key==e[r].key){n=!0;break}n||t.unshift(e[r])}this.forceUpdate()}}},{key:"getCollumnsForFilter",value:function(){if(this.props.columns){var e=new RegExp(" asc","gi"),t=this.props.columns.replace(e,""),e=new RegExp(" desc","gi"),t=t.replace(e,"");return e=new RegExp(" ","gi"),t.replace(e,"")}}}],$e((e=i).prototype,t),$e(e,r),i}();function tt(e){return(tt="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function rt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function nt(e,t){return(nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ot(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function at(e){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function it(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var lt=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nt(e,t)}(o,c.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=at(r);return function(e,t){if(t&&("object"===tt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ot(e)}(this,n?(e=at(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function o(e){var r;return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),it(ot(r=t.call(this,e)),"onChange",function(e,t){t.name,t=t.value,1!=r.state.opendialog?he(r.props.handleEvent)&&r.props.handleEvent({e:e,key:r.props.name,propertyName:r.props.propertyName,eventName:"onItemClick",parameters:{target:t}}):r.state.opendialog=!1}),it(ot(r),"onMouseDown",function(e){r.state.opendialog=!Boolean(r.state.opendialog)}),r.state={},r}return rt(o.prototype,[{key:"render",value:function(){var e,n={};for(e in this.props)"imageUrl"!==e&&"defaultValue"!==e&&"value"!==e&&"handleEvent"!==e&&"items"!==e&&"propertyName"!==e&&(n[e]=this.props[e]);return n.options=[],this.props.items.forEach(function(e){var t=!1;if(void 0!==e.visibleCondition&&null!==e.visibleCondition&&""!==e.visibleCondition){var r="return "+e.visibleCondition;try{new Function("",r)()||(t=!0)}catch(e){}}t||n.options.push({value:e.target,text:e.title,target:e.target})}),n.value="",n.onChange=this.onChange,W("dropdown-trigger",{controlProps:n,onMouseDown:this.onMouseDown,props:this.props})}}]),o}();function st(e){return(st="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function ct(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ut(e,t){return(ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ft(e){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var dt=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ut(e,t)}(a,c.Component);var e,r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=ft(r);return function(e,t){if(t&&("object"===st(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return pt(e)}(this,n?(e=ft(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function a(e){var i,t,r,n;return function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),n=function(e,t){var r,n=i.props.additionalParams.handleEvent,o=i.props.onSuccess,a=i.props.onFail;(n||o||a)&&(t.success?(r={name:e.name,size:e.size,token:t.result.properties.Token,success:t.success,properties:t.result.properties},o?o(i.props.name,i.props.propertyName,r):n&&n({key:i.props.name,eventName:"success",name:i.props.name,propertyName:i.props.propertyName,value:t.message,parameters:r})):(t={name:e.name,size:e.size,message:t.message,success:t.success,details:t.details},a?a(i.props.name,i.props.propertyName,t):n&&n({key:i.props.name,eventName:"fail",name:i.props.name,propertyName:i.props.propertyName,parameters:t})),i.props.addRemoveLinks&&setTimeout(function(){e._removeLink.click()},500))},(r="fileUploadSuccess")in(t=pt(i=o.call(this,e)))?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,i.state={commands:e.commands,states:e.states},i}return e=[{key:"componentDidMount",value:function(){this.isMount=!0}},{key:"componentWillUnmount",value:function(){this.isMount=!1}},{key:"render",value:function(){var e=this.props.additionalParams.parentItem,t=void 0;this.props.iconFiletypes&&(o=this.props.iconFiletypes.split(","),Array.isArray(o)&&0<o.length&&(t=[],o.forEach(function(e){t.push(e.trim())})));var r={addRemoveLinks:this.props.addRemoveLinks,autoProcessQueue:this.props.autoProcessQueue&&he(this.props.postUrl)},n={iconFiletypes:t,showFiletypeIcon:this.props.showFiletypeIcon,postUrl:de(this.props.postUrl)?"no-url":this.props.postUrl},o={success:this.fileUploadSuccess};return W("dropzone",{componentConfig:n,djsConfig:r,eventHandlers:o,isForm:this.isForm(e),props:this.props})}},{key:"isForm",value:function(e){return e&&("form"===e["data-buildertype"]||"formgroup"===e["data-buildertype"])}},{key:"getEvents",value:function(){return["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","removedfile","thumbnail","error","processing","uploadprogress","sending","success","complete","canceled","maxfilesreached","maxfilesexceeded","processingmultiple","sendingmultiple","successmultiple","completemultiple","canceledmultiple","totaluploadprogress","reset","queuecompleted"]}}],ct(a.prototype,e),a}();function ht(e){return(ht="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function yt(e){return function(e){if(Array.isArray(e))return mt(e)}(e)||function(){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}()||function(e){if(e){if("string"==typeof e)return mt(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?mt(e,void 0):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function bt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function vt(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?bt(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):bt(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function gt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wt(e,t){return(wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ot(e){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ct=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wt(e,t)}(o,c.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Ot(r);return function(e,t){if(t&&("object"===ht(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}()}(this,n?(e=Ot(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function o(e){var n;return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(n=t.call(this,e)).state={},n.props.events.forEach(function(e){var t,r=n.props.data[e]||{triggers:[]};(de(r)||(t=r).actions||t.parameters||t.targets||de(r.triggers[0]))&&(r=n.props.data[e]={active:r.active||!1,triggers:[{actions:r.actions||[],parameters:r.parameters||[{name:"",value:""}],targets:r.targets||[]}]},n.handleChange(e,{},{name:"triggers",checked:r.active||!1,value:r.triggers}))}),n}return gt(o.prototype,[{key:"render",value:function(){var n=[];Array.isArray(this.props.actions)&&this.props.actions.forEach(function(e){"string"==typeof e?n.push({text:e,value:e}):n.push(vt(vt({},e),{},{value:e.text}))});var r=this.props.data,e=this.props.events,o=yt(this.props.targets);return e.forEach(function(e){var t;he(r)&&(t=r[e])&&t.triggers&&Array.isArray(t.triggers)&&t.triggers.forEach(function(e){e.actions&&e.actions.forEach(function(e){for(var t=!1,r=0;r<n.length;r++)if(e==n[r].value){t=!0;break}t||n.push({text:e,value:e})}),e.targets&&e.targets.forEach(function(e){for(var t=!1,r=0;r<o.length;r++)if(e===o[r].value){t=!0;break}t||o.push({text:e,value:e})})})}),W("events-editor",{actionOptions:[].concat(n),targetOptions:yt(o),items:this.items,me:this,props:this.props})}},{key:"initNewTrigger",value:function(e){var t=this.props.data;t&&(t[e]||(t[e]={}),de((t=t[e]).triggers)&&(t.triggers=[]),t.triggers.push({actions:[],targets:[],parameters:[{name:"",value:""}]}),this.handleChange(e,{},{name:"triggers",checked:t.active||!1,value:t.triggers}))}},{key:"handleChange",value:function(e,t,r){var n=r.name,o=r.value,a=r.checked;de(r=this.props.data[e])&&(this.props.data[e]=r={triggers:[]}),de(o)&&he(a)?r[n]=a:r[n]=o,he(this.props.onChange)&&this.props.onChange(t,{name:this.props.name,value:this.props.data})}},{key:"actionsOnAddItem",value:function(e,t){t=t.value,he(this.props.onAdditionActions)&&this.props.onAdditionActions(e,{value:t})}}]),o}();function St(e){return(St="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function Et(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function jt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function kt(e,t){return(kt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xt(e){return(xt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Rt=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kt(e,t)}(o,c.Component);var e,r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=xt(r);return function(e,t){if(t&&("object"===St(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Pt(e)}(this,n?(e=xt(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function o(e){var n;return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),_t(Pt(n=t.call(this,e)),"onDropzoneUploadSuccess",function(e,t,r){n.onFileUploaded(r)}),_t(Pt(n),"onDropzoneUploadFail",function(e,t,r){n.onFail(r)}),_t(Pt(n),"onCollectionEditorChange",function(e){var t=e.eventName,r=e.parameters,e=e.value;"onDelete"===t&&n.props.additionalParams.handleEvent({key:n.props.name,propertyName:n.props.propertyName,eventName:t,parameters:r}),"onChange"===t&&n.props.additionalParams.handleEvent({syntheticEvent:null,key:n.props.name,eventName:t,name:n.props.name,value:e,propertyName:n.props.propertyName})}),_t(Pt(n),"onUploadChange",function(e,t){t=t.parameters,n.onFileUploaded(t)}),_t(Pt(n),"onUploadFail",function(e,t){n.onFail(t)}),_t(Pt(n),"nameGetter",function(e){return e[n.props.columns.find(function(e){return"Name"===e.property}).field]}),_t(Pt(n),"contentTypeGetter",function(e){return e[n.props.columns.find(function(e){return"ContentType"===e.property}).field]}),_t(Pt(n),"setDisabled",function(e){n.setState({disabled:!n.state.disabled})}),n.state={},n}return e=[{key:"onFileUploaded",value:function(e){var t,r=this.props.value?function(e){if(Array.isArray(e))return Et(e)}(t=this.props.value)||function(){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}()||function(e){if(e){if("string"==typeof e)return Et(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Et(e,void 0):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}():[],n=e.properties,o={__id:"CLIENT_"+we.a.v1()};this.props.columns.filter(function(e){return e.field}).forEach(function(e){o[e.field]=n[e.property]}),r.push(o),this.props.additionalParams.handleEvent({syntheticEvent:null,key:this.props.name,eventName:"onChange",name:this.props.name,value:r,propertyName:this.props.propertyName}),this.props.additionalParams.handleEvent({syntheticEvent:null,key:this.props.name,eventName:"onUploadSuccess",name:this.props.name,parameters:e,propertyName:this.props.propertyName})}},{key:"onFail",value:function(e){this.props.additionalParams.handleEvent({syntheticEvent:null,key:this.props.name,eventName:"onUploadFail",name:this.props.name,parameters:e,propertyName:this.props.propertyName})}},{key:"render",value:function(){var r=this,n=[];this.props.columns.filter(function(e){return e.showcolumn}).forEach(function(e){var t={key:e.field,name:e.title,control:e.control};"Token"===e.property&&(t.additionalData={customNameGetter:r.nameGetter,customContentTypeGetter:r.contentTypeGetter}),n.push(t)});var e={readOnly:this.props.readOnly,value:this.props.value,idField:this.props.idField,downloadUrl:this.props.downloadUrl,columns:n,handleEvent:this.onCollectionEditorChange};return W("files",{editorProps:e,onDropzoneUploadSuccess:this.onDropzoneUploadSuccess,onDropzoneUploadFail:this.onDropzoneUploadFail,onUploadChange:this.onUploadChange,onUploadFail:this.onUploadFail,state:this.state,props:this.props})}}],jt(o.prototype,e),o}();function Dt(e){return(Dt="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function Tt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ft(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function At(e,t,r){return t&&Ft(e.prototype,t),r&&Ft(e,r),e}var It=(At(Bt,null,[{key:"Greater",get:function(){return">"}},{key:"Less",get:function(){return">"}},{key:"Equal",get:function(){return"="}},{key:"GreaterOrEqual",get:function(){return">="}},{key:"LessOrEqual",get:function(){return"<="}},{key:"NotEqual",get:function(){return"!="}},{key:"Like",get:function(){return"like"}},{key:"StartsWith",get:function(){return"like*"}},{key:"EndsWith",get:function(){return"*like"}},{key:"IsGreater",value:function(e){return e===Bt.Greater}},{key:"IsLess",value:function(e){return e===Bt.Less}},{key:"IsEqual",value:function(e){return e===Bt.Equal}},{key:"IsGreaterOrEqual",value:function(e){return e===Bt.GreaterOrEqual}},{key:"IsLessOrEqual",value:function(e){return e===Bt.LessOrEqual}},{key:"IsNotEqual",value:function(e){return e===Bt.NotEqual}},{key:"IsLike",value:function(e){return e.toLowerCase()===Bt.Like||"*like*"===e.toLowerCase()}},{key:"IsStartsWith",value:function(e){return e.toLowerCase()===Bt.StartsWith}},{key:"IsEndsWith",value:function(e){return e.toLowerCase()===Bt.EndsWith}},{key:"Evaluate",value:function(e,t,r){if(Bt.IsGreater(r))return Bt.compareWithTypeCheck(e,t,function(e,t){return t<e});if(Bt.IsLess(r))return Bt.compareWithTypeCheck(e,t,function(e,t){return e<t});if(Bt.IsEqual(r))return Bt.compareWithTypeCheck(e,t,function(e,t){return e===t});if(Bt.IsGreaterOrEqual(r))return Bt.compareWithTypeCheck(e,t,function(e,t){return t<=e});if(Bt.IsLessOrEqual(r))return Bt.compareWithTypeCheck(e,t,function(e,t){return e<=t});if(Bt.IsNotEqual(r))return Bt.compareWithTypeCheck(e,t,function(e,t){return e!==t});if(Bt.IsLike(r))return Bt.likeCompare(e,t,function(e,t){return 0<=e.indexOf(t)});if(Bt.IsStartsWith(r))return Bt.likeCompare(e,t,function(e,t){return e.startsWith(t)});if(Bt.IsEndsWith(r))return Bt.likeCompare(e,t,function(e,t){return e.endsWith(t)});throw"Unknown term "+r}},{key:"likeCompare",value:function(e,t,r){return null===e&&null===t||void 0===e&&void 0===t||null!=e&&null!=t&&r(e.toString().toLowerCase(),t.toString().toLowerCase())}},{key:"compareWithTypeCheck",value:function(e,t,r){return null===e&&null===t||void 0===e&&void 0===t||null!=e&&null!=t&&(e instanceof Date&&"string"==typeof t?r(e.getTime(),new Date(t).getTime()):"string"==typeof e&&t instanceof Date?r(new Date(e).getTime(),t.getTime()):e instanceof Date&&t instanceof Date?r(e.getTime(),t.getTime()):Dt(e)===Dt(t)?r(e,t):r(e,"number"==typeof e&&"string"==typeof t?parseFloat(t):"string"==typeof e&&"number"==typeof t?t.toString():t))}}]),Bt),Lt=(At(Nt,[{key:"AddFilter",value:function(e){var r,t,n,o=this,a=e.names,i=e.expected,l=e.term,s=e.id;a.length<1||(r=1===a.length?a[0]:a.sort().join(","),this._innerFilter.hasOwnProperty(r)?t=this._innerFilter[r]:((t=this._innerFilter[r]={}).funcs=[],t.items=[],t.test=function(t){return o._innerFilter[r].funcs.every(function(e){return e(t)})}),n=function(e,t){var r=Object.keys(e).find(function(e){return e.toString().toLowerCase()===t.toLowerCase()});return void 0!==r&&It.Evaluate(e[r],i,l)},e=1===a.length?function(e){return n(e,a[0])}:function(t){return a.some(function(e){return n(t,e)})},t.funcs.push(e),t.items.push({expected:i,term:l,id:s}))}},{key:"RemoveFilter",value:function(e){var t,r,n,o=this,a=e.name,i=e.id;void 0!==a&&(r=Array.isArray(a)?(t=1===a.length?a[0]:a.sort().join(","),a):[t=a]),void 0!==a&&void 0===i?delete this._innerFilter[t]:void 0===a&&void 0===i?this._innerFilter={}:(n=function(e,t,r){var n;!o._innerFilter.hasOwnProperty(e)||(n=o._innerFilter[e].items.filter(function(e){return e.id!==r})).length<o._innerFilter[e].items.length&&(delete o._innerFilter[e],n.forEach(function(e){o.AddFilter({names:t,expected:e.expected,term:e.term,id:e.id})}))},void 0!==a&&void 0!==i?n(t,r,i):Object.keys(this._innerFilter).forEach(function(e){n(e,e.split(","),i)}))}},{key:"IsRowMatched",value:function(e){var t=Object.keys(this._innerFilter);if(t.length<=0)return!0;for(var r=0;r<t.length;r++)if(!this._innerFilter[t[r]].test(e))return!1;return!0}},{key:"GetFilterAsObjects",value:function(){var e=this;if(void 0===this._innerFilter)return[];var r=[];return Object.keys(this._innerFilter).forEach(function(t){e._innerFilter[t].items.forEach(function(e){r.push({column:t,value:e.expected,term:e.term})})}),r}}]),Nt);function Nt(e,r){var n=this;if(Tt(this,Nt),this._innerFilter={},void 0!==e&&Array.isArray(e)){if(void 0===r||!Array.isArray(r))throw"columns must be array";e.forEach(function(e){var t;void 0!==e&&(t="*"===e.column?r:e.column.split(",").map(function(e){return e.trim()}),n.AddFilter({names:t,expected:e.value,term:e.term}))})}}function Bt(){Tt(this,Bt)}function Vt(e){return(Vt="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function Mt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Ut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Wt(e,t,r){return t&&zt(e.prototype,t),r&&zt(e,r),e}function Ht(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gt(e,t)}function Gt(e,t){return(Gt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qt(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Kt(r);return function(e,t){if(t&&("object"===Vt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}()}(this,n?(e=Kt(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function Kt(e){return(Kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Jt=function(){Ht(t,c.Component);var e=qt(t);function t(){return Ut(this,t),e.apply(this,arguments)}return Wt(t,[{key:"render",value:function(){return W("checkbox-formatter",{props:this.props})}}]),t}(),$t=function(){Ht(t,c.Component);var e=qt(t);function t(){return Ut(this,t),e.apply(this,arguments)}return Wt(t,[{key:"render",value:function(){return W("number-formatter",{props:this.props})}}]),t}(),Yt=function(){Ht(t,c.Component);var e=qt(t);function t(){return Ut(this,t),e.apply(this,arguments)}return Wt(t,[{key:"render",value:function(){var e,t=Ne()(this.props.value),r="";return t.isValid()&&(e=Be("L"),r=t.format(e)),W("date-formatter",{props:this.props,strValue:r})}}]),t}(),Qt=function(){Ht(t,c.Component);var e=qt(t);function t(){return Ut(this,t),e.apply(this,arguments)}return Wt(t,[{key:"render",value:function(){var e,t,r,n=Ne()(this.props.value),o="";return n.isValid()&&(r="DD.MM.YYYY HH:mm",(e=Be())&&(t=Ve("HH:mm"),r="".concat(e," ").concat(t)),o=n.format(r)),W("datetime-formatter",{props:this.props,strValue:o})}}]),t}(),Zt=function(){Ht(t,c.Component);var e=qt(t);function t(){return Ut(this,t),e.apply(this,arguments)}return Wt(t,[{key:"render",value:function(){var e,t=Ne()(this.props.value),r="";return t.isValid()&&(e=he(window.DWKitLang)&&he(window.DWKitLang.common)&&he(window.DWKitLang.common.timeFormat)?window.DWKitLang.common.timeFormat:"HH:mm",r=t.format(e)),W("time-formatter",{props:this.props,strValue:r})}}]),t}(),Xt=function(){Ht(i,c.Component);var r=qt(i);function i(e){var t;Ut(this,i),(t=r.call(this,e)).state={items:[],sort:"",defaultSort:e.defaultSort,filter:e.filter,pageSize:20,selectedIndexes:[],rowsCount:i.staticIsServerMode(e)?void 0:0};try{t.state.isrtl="rtl"==getComputedStyle(document.getElementsByTagName("html")[0]).direction}catch(e){}return t}return Wt(i,[{key:"isEditFormModal",value:function(){return"modal"===this.props.editFormShowType}},{key:"isEditFormSidebar",value:function(){return"sidebar"===this.props.editFormShowType}},{key:"isServerMode",value:function(){return i.staticIsServerMode(this.props)}},{key:"refresh",value:function(){var e;this.isServerMode()?this.setState({items:[],selectedIndexes:[],rowsCount:void 0}):(e=Array.isArray(this.props.value)?i.staticGetSortedAndFilteredItems(this.props.value,this.state.filter,this.state.sort,this.props.defaultSort):[],this.setState({items:e,rowsCount:e.length,selectedIndexes:[],originalItems:this.props.value}))}},{key:"resetSelection",value:function(){this.setState({selectedIndexes:[]})}},{key:"render",value:function(){return W("grid-view",{gridColumns:this.getColumns(),gridProps:this.getGridPropsByPagerType(this.props.pagerType),me:this,onRowsSelected:this.onRowsSelected.bind(this),onRowsDeselected:this.onRowsDeselected.bind(this),selectBy:{indexes:this.state.selectedIndexes},gridRowGetter:this.gridRowGetter.bind(this),gridOnRowClick:this.gridOnRowClick.bind(this),handleGridSort:this.handleGridSort.bind(this),state:this.state,props:this.props})}},{key:"getColumns",value:function(){var n=this,e=void 0===this.props.columns?[]:Array.isArray(this.props.columns)?this.props.columns:JSON.parse(this.props.columns);return e.forEach(function(r){null!==r.width&&""!==r.width&&void 0!==r.width&&(r.width=Number(r.width)),!1!==r.sortable&&(r.sortable=!n.props.disableSort),r.filterable=Boolean(n.props.filterRow),r.resizable=Boolean(r.resizable),"number"===r.type?r.formatter=$t:"checkbox"===r.type?r.formatter=Jt:"date"===r.type?r.formatter=Yt:"time"===r.type?r.formatter=Zt:"datetime"===r.type?r.formatter=Qt:"custom"===r.type&&(r.getRowMetaData=function(e){return e},r.formatter=function(e){if(de(r.customFormatter)||"function"!=typeof r.customFormatter){if(n.props.placeholders&&Array.isArray(n.props.placeholders[r.key])&&0<n.props.placeholders[r.key].length){var t=n.props.placeholders[r.key][0];return void 0!==t.propertyName&&""!==t.propertyName||(t.propertyName=r.key),z.a.createElement(k,{key:r.key+"_"+e.dependentValues.__id,model:t,parent:n,row:e.dependentValues,errorOnRow:{},name:n.props.name,buildermode:n.props.buildermode,handleChange:function(){},handleEvent:n.props.handleEvent,getAdditionalDataForControl:n.props.getAdditionalDataForControl,readOnly:n.props.readOnly,uploadUrl:n.props.uploadUrl,downloadUrl:n.props.downloadUrl,data:n.props.data,adaptiveViewType:n.props.adaptiveViewType,controlBarParams:n.props.controlBarParams,createControl:n.props.createControl})}return n.props.buildermode?n.props.createBuilderDropzone(n.props.name,n.props.name,void 0,r.key,r.key):""}return r.customFormatter({row:e.dependentValues,value:e.value,column:r})})}),this.state.isrtl?e.reverse():e}},{key:"getGridPropsByPagerType",value:function(){var e,t={};return"server"===this.props.pagerType&&((e=parseInt(this.props.pageSize))&&(this.state.pageSize=e),t.rowRenderer=z.a.createElement(er,{error:this.props.error}),de(this.state.rowsCount)&&(this.state.rowsCount=1)),t}},{key:"getSeletedRowKeys",value:function(){var r=this,n=[];return this.state.selectedIndexes.forEach(function(e){var t;void 0!==(e=r.gridRowGetter(e))&&null!=(t=null==(t=null!==r.props.rowKey&&void 0!==r.props.rowKey&&e.hasOwnProperty(r.props.rowKey)?e[r.props.rowKey]:t)||de(t)?e.__id:t)&&n.push(t)}),n}},{key:"gridRowGetter",value:function(e){if(!(e<0)){var t,r=this.props.pagerType;return"server"===r&&void 0===this.state.items[e]&&(t=this.state.pageSize,this.loadPage(e,t)),"server"===r?this.state.items[e]:function(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Mt(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Mt(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}({},this.state.items[e])}}},{key:"getSort",value:function(){var e=this.state.sort;return""===e&&void 0!==this.props.defaultSort?this.props.defaultSort:e}},{key:"getFilters",value:function(){return void 0!==this.state.filter?this.state.filter.GetFilterAsObjects():[]}},{key:"loadPage",value:function(e,t){for(var r,i=this,n=0;n<t;n++)this.state.items[n+e]={__loading:!0};void 0===this.props.getAdditionalDataForControl?void 0!==console&&console.log("GridView: For paging on server need to set getAdditionalDataForControl func!"):(r=this.getSort(),this.props.getAdditionalDataForControl(this,{startIndex:e,pageSize:t,filters:this.getFilters(),sort:r},function(e){var t=e.sIndex,r=e.pSize,n=e.rowsCount,o=e.items;if(void 0===n||void 0===o)i.state.rowsCount=0,i.setState({rowsCount:0,items:[]});else{i.state.rowsCount=n;for(var a=0;a<r;a++)a<o.length?i.state.items[t+a]=o[a]:i.state.items[t+a]=void 0;i.forceUpdate()}}))}},{key:"gridOnRowClick",value:function(e,t){var r;void 0!==t&&(r=Date.now(),void 0!==this.rowClickTime&&this.rowClickTime.rowIdx===e&&r-this.rowClickTime.time<=1e3?(this.rowClickTime=void 0,this.onRowDblClick(e,t)):(this.rowClickTime={rowIdx:e,time:r},void 0!==this.props.handleEvent&&this.props.handleEvent({key:this.props.name,propertyName:this.props.propertyName,eventName:"onRowClick",parameters:{rowIdx:e,row:t}})))}},{key:"onRowDblClick",value:function(e,t){void 0!==this.props.handleEvent&&this.props.handleEvent({key:this.props.name,propertyName:this.props.propertyName,eventName:"onRowDblClick",parameters:{rowIdx:e,row:t}})}},{key:"onRowsSelected",value:function(e){this.state.selectedIndexes=this.state.selectedIndexes.concat(e.map(function(e){return e.rowIdx})),void 0!==this.props.handleEvent&&this.props.handleEvent({key:this.props.name,eventName:"onSelectionChanged",propertyName:this.props.propertyName,parameters:{selectedIndexes:this.state.selectedIndexes}}),this.forceUpdate()}},{key:"onRowsDeselected",value:function(e){var t=e.map(function(e){return e.rowIdx});this.state.selectedIndexes=this.state.selectedIndexes.filter(function(e){return-1===t.indexOf(e)}),void 0!==this.props.handleEvent&&this.props.handleEvent({key:this.props.name,eventName:"onSelectionChanged",propertyName:this.props.propertyName,parameters:{selectedIndexes:this.state.selectedIndexes}}),this.forceUpdate()}},{key:"handleGridSort",value:function(e,t){var r={};r.sort="NONE"===t?"":e+" "+t,t=this.props.pagerType,r.items="server"===t?[]:i.staticGetSortedAndFilteredItems(this.props.value,this.state.filter,r.sort,this.props.defaultSort),r.selectedIndexes=[],this.setState(r)}},{key:"handleFilterChange",value:function(e){var t={},r=e.column.key,n="columnfilter_"+r;t.filter=void 0!==this.state.filter?this.state.filter:new Lt([],this.props.columns.map(function(e){return e.key})),t.filter.RemoveFilter({name:r,id:n}),""!==e.filterTerm&&t.filter.AddFilter({names:[r],expected:e.filterTerm,term:It.Like,id:n}),i.staticIsServerMode(this.props)?(t.items=[],t.selectedIndexes=[],t.rowsCount=void 0):(t.items=i.staticGetSortedAndFilteredItems(this.props.value,t.filter,this.state.sort,this.props.defaultSort),t.selectedIndexes=[],t.rowsCount=t.items.length),this.setState(t)}},{key:"onClearFilters",value:function(){this.setState({filter:this.props.filter})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidMount",value:function(){this._isMounted=!0,this.recalcSizeParams()}},{key:"recalcSizeParams",value:function(){var e;this._isMounted&&this.props.autoHeight&&(e=window.innerHeight,this.setState({gridHeight:e-this.props.deltaHeight}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var r,n=null,o=t.filter,a=e.filter;return JSON.stringify(o)!==JSON.stringify(a)?(n={filter:e.filter},i.staticIsServerMode(e)?(n.items=[],n.selectedIndexes=t.selectedIndexes,n.rowsCount=void 0):(r=Array.isArray(e.value)?i.staticGetSortedAndFilteredItems(e.value,e.filter,t.sort,e.defaultSort):[],n.items=r,n.selectedIndexes=t.selectedIndexes,n.rowsCount=r.length)):i.staticIsServerMode(e)||t.originalItems===e.value||(n={},r=Array.isArray(e.value)?i.staticGetSortedAndFilteredItems(e.value,t.filter,t.sort,e.defaultSort):[],n.items=r,n.rowsCount=r.length,n.selectedIndexes=t.selectedIndexes,n.originalItems=e.value),n}},{key:"staticIsServerMode",value:function(e){return"server"===e.pagerType}},{key:"staticGetSortedAndFilteredItems",value:function(e,t,r,n){var o=[];if(void 0===e)return o;if(o=void 0!==t?e.filter(function(e){return t.IsRowMatched(e)}):e,"NONE"===(e=r)||""===r){if(void 0===n)return o;e=n}var n=e.indexOf(" "),a=e.substring(0,n),i=e.substring(n+1,e.length);return o.slice(0).sort(function(e,t){return(e=void 0!==e[a]&&null!==e[a]&&void 0!==e[a].toLowerCase?e[a].toLowerCase():e[a])===(t=void 0!==t[a]&&null!==t[a]&&void 0!==t[a].toLowerCase?t[a].toLowerCase():t[a])?0:null==e?1:null==t?-1:"ASC"===i?t<e?1:-1:"DESC"===i?e<t?1:-1:void 0})}}]),i}(),er=function(){Ht(t,c.Component);var e=qt(t);function t(){return Ut(this,t),e.apply(this,arguments)}return Wt(t,[{key:"setScrollLeft",value:function(e){this.row.setScrollLeft(e)}},{key:"getClassName",value:function(){var t=this;return this.props.row.__loading?"dwkit-gridview-rowloading":void 0!==this.props.row.__id&&null!==this.props.row.__id&&void 0!==this.props.error&&null!==this.props.error&&Array.isArray(this.props.error)&&void 0!==this.props.error.find(function(e){return e.__id===t.props.row.__id})?"dwkit-gridview-rowerror":""}},{key:"render",value:function(){return W("row-loading-renderer",{className:this.getClassName(),me:this,props:this.props,row:this.row})}}]),t}();function tr(e){return(tr="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function rr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function nr(e,t){return(nr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function or(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ar(e){return(ar=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ir=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nr(e,t)}(i,c.Component);var e,t,r,n,o,a=(n=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=ar(n);return function(e,t){if(t&&("object"===tr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return or(e)}(this,o?(e=ar(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function i(e){var r,t,n,o;return function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),o=function(e,t){t=t.name,he(r.props.handleEvent)&&0!=r.props.handleEvent({e:e,key:r.props.name,eventName:"onItemClick",parameters:{target:t}})&&r.setState({activeitem:t})},(n="handleItemClick")in(t=or(r=a.call(this,e)))?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,r.state={},he(e.value)?r.state.activeitem=e.value:null!=e.activeitem&&(r.state.activeitem=e.activeitem),r}return r=[{key:"getDerivedStateFromProps",value:function(e,t){return t.activeitem!==e.value?{activeitem:e.value}:null}}],t=[{key:"handleItemClick2",value:function(e,t){this.handleItemClick(t,e),t.preventDefault()}},{key:"render",value:function(){var e=this.props["data-items"];return de(e)||""==e?e=[]:Array.isArray(e)||(e=ve.a.parse(e)),W("menu-group",{handleItemClick:this.handleItemClick,handleItemClick2:this.handleItemClick2,items:e,me:this,props:this.props,state:this.state})}}],rr((e=i).prototype,t),rr(e,r),i}();function lr(e){return(lr="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function sr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function cr(e,t){return(cr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ur(e){return(ur=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pr=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cr(e,t)}(t,c.Component);var r,n,e=(r=t,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=ur(r);return function(e,t){if(t&&("object"===lr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}()}(this,n?(e=ur(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function t(){return function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e.apply(this,arguments)}return sr(t.prototype,[{key:"render",value:function(){var e,t={};for(e in this.props)"additionalParams"!==e&&"items"!==e&&"propertyName"!==e&&(t[e]=this.props[e]);var r=this.props.additionalParams.model,n=this.props.additionalParams.parentItem,o=this.props.additionalParams.handleEvent;return t.defaultValue=r.defaultvalue,t.size=r.size,ye(r.label)&&(t.label=r.label),t.labelPosition=r.labelPosition,t.type=r.type,t.disabled=r.disabled,t.transparent=r.transparent,t.fluid=r.fluid,t.readOnly=r.readOnly||this.props.readOnly,t.placeholder=r.placeholder,null==t.value&&(t.value=""),t.error=Boolean(this.props.error),t.format=r.format||void 0,t.mask=r.mask||void 0,t.onValueChange=function(e){o({key:t.name,propertyName:t.propertyName,eventName:"onChange",name:t.name,value:Number(e.value)})},W("number-format",{isForm:this.isForm(n),props:this.props,propsControl:t})}},{key:"isForm",value:function(e){return null!=e&&("form"===e["data-buildertype"]||"formgroup"===e["data-buildertype"])}}]),t}();function fr(e){return(fr="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function dr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function hr(e,t){return(hr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mr(e){return(mr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var br=r(7),vr=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hr(e,t)}(s,c.Component);var r,n,l=(r=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=mr(r);return function(e,t){if(t&&("object"===fr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return yr(e)}(this,n?(e=mr(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function s(){var n;!function(e){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this);for(var e,t,r,o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return r=function(e,t){var r=t.name,t=t.value;n.props.onChange?n.props.onChange(e,{name:n.props.name,propertyName:n.props.propertyName,value:t}):n.props.handleEvent?n.props.handleEvent({syntheticEvent:e,key:n.props.name,eventName:"onChange",name:r,value:t,propertyName:n.props.propertyName}):console.error("Set onChange property for RadioGroup!")},(t="onChange")in(e=yr(n=l.call.apply(l,[this].concat(a))))?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,n}return dr(s.prototype,[{key:"shouldComponentUpdate",value:function(e){return!br(this.props,e)}},{key:"render",value:function(){return W("radio-group",{props:this.props,onChange:this.onChange.bind(this)})}}]),s}();function gr(e){return(gr="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function wr(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Or(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Cr(e,t){return(Cr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Er(e){return(Er=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var kr=r(7),Pr=r(10),xr=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cr(e,t)}(s,c.Component);var e,t,r,n,o=(r=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Er(r);return function(e,t){if(t&&("object"===gr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Sr(e)}(this,n?(e=Er(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function s(e){var l;return function(e){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this),jr(Sr(l=o.call(this,e)),"handleChange",function(e,t,r){var n=r.name,o=r.propertyName,a=r.value,i=r.checked,r=r.parameters;(l.props.controlProps.handleEvent||l.props.controlProps.buildermode)&&(void 0===o&&(o=n),r&&void 0!==r.index&&((n=l.state.items)[r.index]=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?wr(Object(r),!0).forEach(function(e){jr(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wr(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},e),e=n[r.index]),de(a)&&he(i)?e[o]=i:e[o]=a,l.isServerMode()?l.forceUpdate():(l.sendChangesToParent(),t&&t.preventDefault?t.preventDefault():l.forceUpdate()))}),jr(Sr(l),"loadNextPage",function(){var e=l.state.pageSize,t=0;he(l.state.items)&&(t=l.state.items.length),l.loadPage(t,e)}),l.psTemplate="template",l.state={items:[],sort:"",filter:e.filter,firstLoad:!e.controlProps.buildermode&&s.staticIsServerMode(e),pageSize:e.pageSize||20},l}return t=[{key:"getDerivedStateFromProps",value:function(e,t){var r,n={needUpdate:!1};return kr(t.filter,e.filter)?s.staticIsServerMode(e)||kr(t.originalItems,e.value)||(r=s.staticGetSortedAndFilteredItems(e.value,t.filter,t.sort,e.defaultSort),n.items=r,n.rowsCount=r.length,n.selectedIndexes=[],n.originalItems=s.copyObj(e.value),n.needUpdate=!0):(n.filter=e.filter,n.needUpdate=!0,s.staticIsServerMode(e)?(n.items=[],n.firstLoad=!0,n.rowsCount=void 0):(e=s.staticGetSortedAndFilteredItems(e.value,e.filter,t.sort,e.defaultSort),n.items=e,n.selectedIndexes=[],n.rowsCount=e.length)),n}},{key:"staticIsServerMode",value:function(e){return e.pagerType&&"server"===e.pagerType.toLowerCase()}},{key:"staticCheckData",value:function(e){if(e=e||[],Array.isArray(e))e=Pr(e);else try{e=ve.a.parse(e)}catch(e){}return e}},{key:"staticGetSortedAndFilteredItems",value:function(e,t,r,n){var o=s.staticCheckData(e);if(void 0===o)return o;if(Array.isArray(o)&&0<o.length)for(var a in o)o[a].__originalIndex=a,a++;if(void 0!==t&&(o=o.filter(function(e){return t.IsRowMatched(e)})),"NONE"===(e=r)||""===r){if(void 0===n)return o;e=n}var n=e.indexOf(" "),i=e.substring(0,n),l=e.substring(n+1,e.length);return o.sort(function(e,t){return(e=void 0!==e[i]&&null!==e[i]&&void 0!==e[i].toLowerCase?e[i].toLowerCase():e[i])===(t=void 0!==t[i]&&null!==t[i]&&void 0!==t[i].toLowerCase?t[i].toLowerCase():t[i])?0:null==e?1:null==t?-1:"ASC"===l?t<e?1:-1:"DESC"===l?e<t?1:-1:void 0})}},{key:"copyObj",value:function(e){if(null==e||"object"!=gr(e))return e;var t,r=e.constructor();for(t in e)e.hasOwnProperty(t)&&(r[t]=this.copyObj(e[t]));return r}}],Or((e=s).prototype,[{key:"shouldComponentUpdate",value:function(e,t){return!!t.needUpdate||!kr(this.props,e)}},{key:"render",value:function(){return W("repeater",{isServerMode:this.isServerMode(),loadNextPage:this.loadNextPage,me:this,props:this.props,psTemplate:this.psTemplate,state:this.state,handleChange:this.handleChange})}},{key:"sendChangesToParent",value:function(){var e=s.copyObj(this.state.items);if(Array.isArray(e)&&0<e.length)for(var t in e)delete e[t].__originalIndex;var r="string"==typeof this.props.value?ve.a.stringify(e):e;this.props.controlProps.buildermode?this.props.value=r:this.props.controlProps.handleEvent({syntheticEvent:null,key:this.props.name,propertyName:this.props.propertyName,eventName:"onChange",name:this.name,value:r})}},{key:"loadPage",value:function(o,e){var t,a=this;this.props.controlProps&&void 0!==this.props.controlProps.getAdditionalDataForControl?(""===(t=this.state.sort)&&void 0!==this.props.defaultSort&&(t=this.props.defaultSort),this.state.loading=!0,this.forceUpdate(),this.props.controlProps.getAdditionalDataForControl(this,{startIndex:o,pageSize:e,filters:void 0!==this.state.filter?this.state.filter.GetFilterAsObjects():[],sort:t},function(e){e.sIndex,e.pageSize;var t=e.rowsCount,r=e.items;if(void 0!==t&&void 0!==r&&(a.state.rowsCount=t,a.state.items.length==o))for(var n=0;n<r.length;n++)a.state.items.push(r[n]);a.state.loading=!1,a.forceUpdate()})):void 0!==console&&console.log("Repeater: For paging on server need to set getAdditionalDataForControl func!")}},{key:"isServerMode",value:function(){return s.staticIsServerMode(this.props)}}]),Or(e,t),s}(),_r=r(6);function Rr(e){return(Rr="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function Dr(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Tr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Dr(Object(r),!0).forEach(function(e){Nr(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Dr(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Fr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ar(e,t){return(Ar=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ir(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lr(e){return(Lr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Br=r(7),Vr=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ar(e,t)}(a,c.Component);var r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Lr(r);return function(e,t){if(t&&("object"===Rr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ir(e)}(this,n?(e=Lr(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function a(){var n;!function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Nr(Ir(n=o.call.apply(o,[this].concat(t))),"handleEvent",function(e){e.parameters||(e.parameters={}),e.parameters.row||(e.parameters.row=n.props.item),"onChange"===e.eventName?(e.parameters.index||(e.parameters.index=n.props.index),n.props.handleChange(n.props.item,e.syntheticEvent,e)):(e.parameters.index||(n.props.item&&n.props.item.__originalIndex?e.parameters.index=n.props.item.__originalIndex:e.parameters.index=n.props.index),n.props.controlProps.handleEvent(e))}),Nr(Ir(n),"getAdditionalDataForControl",function(e,t,r){return(t=t||{}).row||(t.row=n.props.item),n.props.controlProps.getAdditionalDataForControl(e,t,r)}),n}return Fr(a.prototype,[{key:"shouldComponentUpdate",value:function(e){return!Br(this.props,e)}},{key:"render",value:function(){var e,t=this.props.controlProps.createBuilderDropzone,r=this.props.model,n=this.props.index+"_",o=this.props.psTemplate,a=this.props.item,i=void 0,l=void 0;return this.props.controlProps.buildermode||(i=(e=Object(_r.checkConditions)({model:r,data:a})).hideControls,l=e.readOnlyControls),l=this.props.controlProps.createControls(this.props.parent,Tr(Tr({},this.props.controlProps),{},{model:r,parentPlaceholder:o,data:a,errors:this.props.errors,needCheckReplace:!this.props.controlProps.buildermode,formData:this.props.data,parentItem:this.props.parentItem,handleEvent:this.handleEvent,getAdditionalDataForControl:this.getAdditionalDataForControl,hideControls:i,readOnlyControls:l})),this.props.includeDropzone&&t&&(0<l.length&&0<r.length&&l.unshift(t(n+"repeter_dropzone_header",this.props.parentItem.key,void 0,void 0,o)),l.push(t(n+"repeter_dropzone_footer",this.props.parentItem.key,r[r.length-1].key,void 0,o))),l}}]),a}(),Mr=r(12),Ur=r.n(Mr);function zr(e){return(zr="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function Wr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Hr(e,t){return(Hr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gr(e){return(Gr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qr=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hr(e,t)}(o,c.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Gr(r);return function(e,t){if(t&&("object"===zr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}()}(this,n?(e=Gr(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function o(e){return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e)).state={value:""},e}return Wr(o.prototype,[{key:"render",value:function(){var e,t={};for(e in this.props)"value"!==e&&"handleEvent"!==e&&(t[e]=this.props[e]);return W("search",{controlProps:t,handleResultSelect:this.handleResultSelect.bind(this),handleSearchChange:this.handleSearchChange.bind(this),state:this.state})}},{key:"resetSearch",value:function(){this.setState({isLoading:!1,results:[]})}},{key:"handleResultSelect",value:function(e,t){t=t.result,he(this.props.handleEvent)&&this.props.handleEvent({key:this.props.name,propertyName:this.props.propertyName,eventName:"onSelect",parameters:t})}},{key:"handleSearchChange",value:function(e,t){var t=t.value,r=this;r.setState({isLoading:!0,value:t}),setTimeout(function(){return null===r.state.value||void 0===r.state.value||r.state.value.length<2?r.resetSearch():void r.search(r.state.value)},200)}},{key:"search",value:function(e){var t=this,r=this.props.url;r+=this.props.url.includes("?")?"&":"?",r+="term="+e,Ur()(r,{credentials:"same-origin"}).then(function(e){return e.json()}).then(function(e){t.setState({isLoading:!1,results:e})}).catch(function(e){de(console)?alert(e):console.error(e)})}}]),o}();function Kr(e){return(Kr="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function Jr(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function $r(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Jr(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Jr(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function Yr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qr(e,t){return(Qr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zr(e){return(Zr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Xr=r(10),en=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qr(e,t)}(o,c.Component);var e,r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Zr(r);return function(e,t){if(t&&("object"===Kr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}()}(this,n?(e=Zr(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function o(e){return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e)).state={},e}return e=[{key:"render",value:function(){var e,n=this,a=this,i={};for(e in this.props)"additionalParams"!==e&&"items"!==e&&"propertyName"!==e&&(i[e]=this.props[e]);var t,r,o=this.props.additionalParams.model,l=this.props.additionalParams.data,s=this.props.additionalParams.errors,c=this.props.additionalParams.children,u=this.props.additionalParams.parentItem,p=this.props.additionalParams.handleEvent,f=o["data-buildertype"];if("header"===f)t=W(f,{props:this.props,propsControl:i,model:o});else if("button"===f)i.floated=o.floated,i.size=""!==o.size?o.size:null,i.content=this.props.content,i.basic=o.basic,i.circular=o.circular,i.compact=o.compact,i.disabled=o.disabled,i.fluid=o.fluid,i.primary=o.primary,i.secondary=o.secondary,i.link=o.link,o.icon&&(i.icon=o.icon),void 0!==p&&(r=i.onClick,i.onClick=function(e){r&&r(e),e.currentTarget&&e.currentTarget.classList&&e.currentTarget.classList.add("loading");var t=p({syntheticEvent:e,key:i.name,eventName:"onClick"});return e.currentTarget&&e.currentTarget.classList&&e.currentTarget.classList.remove("loading"),t}),t=W(f,{propsControl:i,isForm:this.isForm(u)});else if("label"===f)t=W(f,{props:this.props,propsControl:i,model:o});else if("message"===f)t=W(f,{props:this.props,propsControl:i,model:o});else if("input"===f)i.defaultValue=o.defaultvalue,i.size=o.size,ye(o.label)&&(i.label=o.label),i.labelPosition=o.labelPosition,i.placeholder=o.placeholder,i.type=o.type,i.disabled=o.disabled,i.transparent=o.transparent,i.fluid=o.fluid,i.readOnly=o.readOnly||this.props.readOnly,null!=p&&(i.onChange=function(e,t){var r=t.name,n=t.value,o=n;"number"===i.type&&(""==o?o=void 0:"string"!=typeof o||"."!=(t=o[o.length-1])&&","!=t&&(o=Number(o),Number.isNaN(o)&&(o=n))),p({syntheticEvent:e,key:i.name,propertyName:a.props.propertyName,eventName:"onChange",name:r,value:o})}),null==i.value&&(i.value=""),i.error=Boolean(this.props.error),t=W(f,{isForm:this.isForm(u),props:this.props,propsControl:i});else if("textarea"===f)delete i.autoHeight,i.placeholder=o.placeholder,i.rows=null!==o.rows&&void 0!==o.rows?Number(o.rows):void 0,void 0!==o.label&&""!==o.label&&(i.label=o.label),i.readOnly=o.readOnly||this.props.readOnly,null!==p&&(i.onChange=function(e,t){var r=t.name,t=t.value;p({syntheticEvent:e,key:i.name,propertyName:a.props.propertyName,eventName:"onChange",name:r,value:t})}),null==i.value&&(i.value=""),t=W(f,{isForm:this.isForm(u),props:this.props,propsControl:i});else if("checkbox"===f)void 0!==o.label&&""!==o.label&&(i.label=o.label),i.placeholder=o.placeholder,i.type=o.type,i.disabled=o.disabled,i.fitted=o.fitted,i.indeterminate=o.indeterminate,i.readOnly=o.readOnly||this.props.readOnly,i.slider=o.slider,i.toggle=o.toggle,null!==p&&(i.onChange=function(e,t){var r=t.name,t=t.checked;p({syntheticEvent:e,key:i.name,propertyName:a.props.propertyName,eventName:"onChange",name:r,value:t})}),void 0!==l&&(h=l[a.props.propertyName],"boolean"==typeof variable?i.checked=h:i.checked="true"===h||"1"===h||"false"!==h&&"0"!==h&&Boolean(h)),s&&he(s[o.key])&&1==Boolean(s[o.key])&&(ye(i.className)?i.className+=" error":i.className="error"),t=W(f,{isForm:this.isForm(u),propsControl:i});else if("dropdown"===f){var d,h=[];if(void 0!==o["data-elements"]&&(h=Array.isArray(o["data-elements"])?o["data-elements"]:ve.a.parse(o["data-elements"])),void 0!==o.label&&""!==o.label&&(i.label=o.label),o.clearable&&!o.multiple&&(h=Xr(h)).unshift({key:"__reset",value:"",text:"[ Clear ]"}),i.defaultValue=o.defaultvalue,i.placeholder=o.placeholder,i.options=h,i.fluid=o.fluid,i.selection=o.selection,i.clearable=o.clearable,i.multiple=o.multiple,i.search=o.search,i.disabled=o.disabled||o.readOnly||this.props.readOnly,s&&void 0!==s[o.key]&&(i.error=Boolean(i.error)),null!==p&&(i.onChange=function(e,t){var r=t.name,t=t.value;p({syntheticEvent:e,key:i.name,propertyName:a.props.propertyName,eventName:"onChange",name:r,value:t})}),i.allowAdditions=o.allowAddItems,i.allowAdditions&&(i.onAddItem=function(e,t){var r=t.value,t=Xr(i.value);Array.isArray(t)?t.includes(r)||t.push(r):t=[r],i.onChange(e,{name:i.name,value:t})}),i.multiple){if(void 0!==i.value&&null!==i.value||(i.value=[]),!Array.isArray(i.value)){try{d=ve.a.parse(i.value)}catch(e){}Array.isArray(d)||(d=[i.value]),i.value=d}i.allowAdditions&&this.dropdownCheckAdditional(i.value,i.options)}t=W(f,{isForm:this.isForm(u),props:this.props,propsControl:i})}else if("statistic"===f)u=[],void 0!==o["data-elements"]&&(u=Array.isArray(o["data-elements"])?o["data-elements"]:ve.a.parse(o["data-elements"])),t=W(f,{items:u,model:o,propsControl:i});else if("image"===f)t=W(f,{me:a,model:o,props:this.props,propsControl:i});else if("form"===f)t=W(f,{propsControl:i,children:c,model:o});else if("formgroup"===f)t=W(f,{propsControl:i,widths:o.widths,widthsCustom:o.widthsCustom,children:c,orientation:o.orientation});else if("breadcrumb"===f){var y=[];if(Array.isArray(this.props.items))for(var m=0;m<this.props.items.length;m++)!function(e){var t=n.props.items[e],r={key:e};r.active=t.active,r.href=t.url,null!==p&&(r.onClick=function(e){p({syntheticEvent:e,key:i.name,eventName:"onItemClick",parameters:{target:t.url}}),e.preventDefault()}),y.push({childProps:$r({},r),text:he(t.text)?t.text:"<not set>"}),e<n.props.items.length-1&&(e={key:e+"_d"},""!==t.divider&&(e.icon=t.divider),y.push({dividerProps:$r({},e),isDivider:!0}))}(m);t=W(f,{children:y,propsControl:i})}else t=W("unknown",{props:this.props,type:f});return t}},{key:"isForm",value:function(e){return null!=e&&("form"===e["data-buildertype"]||"formgroup"===e["data-buildertype"])}},{key:"dropdownCheckAdditional",value:function(e,n){Array.isArray(e)&&e.forEach(function(e){for(var t=!1,r=0;r<n.length;r++)if(e===n[r].value){t=!0;break}0==t&&n.push({value:e,text:e})})}}],Yr(o.prototype,e),o}();function tn(e){return(tn="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function rn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function nn(e,t){return(nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function on(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function an(e){return(an=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ln(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var sn=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nn(e,t)}(a,c.Component);var r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=an(r);return function(e,t){if(t&&("object"===tn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return on(e)}(this,n?(e=an(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function a(){var n;!function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return ln(on(n=o.call.apply(o,[this].concat(t))),"onUpload",function(e,t){var r=on(n),e={name:e.name,token:t.result.properties.Token,success:t.success,properties:t.result.properties};t.success?r.props.onChange&&r.props.onChange(null,{name:r.props.name,propertyName:r.props.propertyName,value:t.result.properties.Token,parameters:e}):r.props.onUploadFail&&r.props.onUploadFail(null,{name:r.props.name,propertyName:r.props.propertyName,message:t.result.message,details:t.result.details,success:!1})}),ln(on(n),"onClear",function(e){var t=on(n);t.props.onChange&&t.props.onChange(null,{name:t.props.name,propertyName:t.props.propertyName,value:null})}),n}return rn(a.prototype,[{key:"render",value:function(){var e=this.onClear,t=this.onUpload;return W("signature",{handleChange:this.handleChange,me:this,onClear:e,onUpload:t,props:this.props,state:this.state})}}]),a}();function cn(e){return(cn="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function un(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pn(e,t){return(pn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fn(e){return(fn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var dn=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pn(e,t)}(o,c.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=fn(r);return function(e,t){if(t&&("object"===cn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}()}(this,n?(e=fn(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function o(e){return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e)).state={},e}return un(o.prototype,[{key:"render",value:function(){var e={name:this.props.name,className:this.props["style-customcss"],style:this.props.style,"data-buildertype":this.props["data-buildertype"]};return W("static-content",{props:this.props,spanProps:e})}}]),o}();function hn(e){return(hn="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function yn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mn(e,t){return(mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vn(e){return(vn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var wn=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mn(e,t)}(a,c.Component);var e,t,r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=vn(r);return function(e,t){if(t&&("object"===hn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return bn(e)}(this,n?(e=vn(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function a(e){var n;return function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),gn(bn(n=o.call(this,e)),"tabChange",function(e){var t=n.state.activeIndex,r=n.getPanes(n.props["data-panes"]),t=null!=e?e:t+1<r.length?t+1:0;n.onTabChange({},{activeIndex:t})}),gn(bn(n),"onTabChange",function(e,t){t=t.activeIndex,n.setState({activeIndex:t}),n.props.buildermode&&n.forceUpdate(),window&&window.document&&setTimeout(function(){var e=window.document.createEvent("UIEvents");e.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(e)},50),he(n.props.handleEvent)&&n.props.handleEvent({e:e,key:n.props.name,eventName:"onTabChange",parameters:{targetIndex:t,pane:n.props["data-panes"][t]}})}),n.state={activeIndex:0},he(e.value)?n.state.activeitem=e.value:null!=e.activeitem&&(n.state.activeitem=e.activeitem),n}return t=[{key:"getDerivedStateFromProps",value:function(e,t){return t.activeitem!==e.value?{activeitem:e.value}:null}}],yn((e=a).prototype,[{key:"render",value:function(){var e=this.getPanes(this.props["data-panes"]);return W("tab-group",{onTabChange:this.onTabChange,panes:e,activeIndex:this.state.activeIndex,props:this.props})}},{key:"getPanes",value:function(e){var t=[];if(Array.isArray(e))for(var r=0;r<e.length;r++){var n=e[r];if(void 0!==n.visibleCondition&&null!==n.visibleCondition&&""!==n.visibleCondition){var o="return "+n.visibleCondition;try{if(!new Function("data",o)(this.props.data))continue}catch(e){}}t.push({menuItem:n.title,pane:{key:n.psid,className:"top",content:this.renderPanel(n)}})}return t}},{key:"renderPanel",value:function(e){var t,r,n=void 0;return he(this.props.placeholders)&&Array.isArray(this.props.placeholders[e.psid])&&0<this.props.placeholders[e.psid].length?(t=this.props.placeholders[e.psid])&&(n=this.props.createControls(this,{model:t,parentPlaceholder:e.psid,data:this.props.data,formData:this.props.data,errors:this.props.errors,buildermode:this.props.buildermode,parentItem:this.props.model,children:this.props.children,handleEvent:this.props.handleEvent,readOnlyControls:this.props.readOnlyControls,hideControls:this.props.hideControls,getFormFunc:this.props.getFormFunc,getAdditionalDataForControl:this.props.getAdditionalDataForControl,readOnly:this.props.readOnly,disableRefs:this.props.disableRefs,uploadUrl:this.props.uploadUrl,downloadUrl:this.props.downloadUrl,extendedData:this.props.extendedData,controlsToReplace:this.props.controlsToReplace,needCheckReplace:this.props.needCheckReplace,eventOnEdit:this.props.eventOnEdit,eventOnDelete:this.props.eventOnDelete,eventOnCopy:this.props.eventOnCopy,externalControlRender:this.props.externalControlRender,externalControlList:this.props.externalControlList,adaptiveViewType:this.props.adaptiveViewType}),r=e.psid,this.props.buildermode&&this.props.createBuilderDropzone&&(0<n.length&&0<t.length&&n.unshift(this.props.createBuilderDropzone(r+"tab_dropzone_header",this.props.name,void 0,e.title,e.psid)),n.push(this.props.createBuilderDropzone(r+"tab_dropzone_footer",this.props.name,t[t.length-1].key,e.title,e.psid)))):this.props.buildermode&&this.props.createBuilderDropzone&&(n=this.props.createBuilderDropzone("tab_dropzone_footer",this.props.name,void 0,e.title,e.psid)),n}}]),yn(e,t),a}();function On(e){return(On="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function Cn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Sn(e,t){return(Sn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function En(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jn(e){return(jn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var kn=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sn(e,t)}(a,c.Component);var e,t,r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=jn(r);return function(e,t){if(t&&("object"===On(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return En(e)}(this,n?(e=jn(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function a(e){var t,r,n;return function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),t=o.call(this,e),n=function(e){null!=t.props.handleEvent&&t.props.handleEvent({syntheticEvent:e,key:t.props.name,propertyName:t.props.propertyName,eventName:"onClick"})},(e="onClick")in(r=En(t))?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,t.state={},t}return t=[{key:"copyObj",value:function(e){if(null==e||"object"!=On(e))return e;var t,r=e.constructor();for(t in e)e.hasOwnProperty(t)&&(r[t]=this.copyObj(e[t]));return r}}],Cn((e=a).prototype,[{key:"render",value:function(){var e={className:this.props.className,style:this.props.style};return this.props.activeEvent&&(e.onClick=this.onClick.bind(this)),W("card",{props:this.props,propsControls:e,me:this})}},{key:"renderPanel",value:function(e){var t,r,n=void 0;return null!=this.props.placeholders&&Array.isArray(this.props.placeholders[e])&&0<this.props.placeholders[e].length?(t=this.props.placeholders[e])&&(n=this.props.createControls(this,{model:t,parentPlaceholder:e,data:this.props.data,formData:this.props.data,errors:this.props.errors,buildermode:this.props.buildermode,parentItem:this.props.model,children:this.props.children,handleEvent:this.props.handleEvent,hideControls:this.props.hideControls,readOnlyControls:this.props.readOnlyControls,getFormFunc:this.props.getFormFunc,getAdditionalDataForControl:this.props.getAdditionalDataForControl,readOnly:this.props.readOnly,disableRefs:this.props.disableRefs,uploadUrl:this.props.uploadUrl,downloadUrl:this.props.downloadUrl,extendedData:this.props.extendedData,controlsToReplace:this.props.controlsToReplace,needCheckReplace:this.props.needCheckReplace,eventOnEdit:this.props.eventOnEdit,eventOnDelete:this.props.eventOnDelete,eventOnCopy:this.props.eventOnCopy,externalControlRender:this.props.externalControlRender,externalControlList:this.props.externalControlList,adaptiveViewType:this.props.adaptiveViewType}),r=e,this.props.buildermode&&this.props.createBuilderDropzone&&(0<n.length&&0<t.length&&n.unshift(this.props.createBuilderDropzone(r+"tab_dropzone_header",this.props.name,void 0,e,e)),n.push(this.props.createBuilderDropzone(r+"tab_dropzone_footer",this.props.name,t[t.length-1].key,e,e)))):this.props.buildermode&&this.props.createBuilderDropzone&&(n=this.props.createBuilderDropzone("tab_dropzone_footer",this.props.name,void 0,e,e)),n}}]),Cn(e,t),a}();function Pn(e){return(Pn="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function xn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Rn(e,t){return(Rn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tn(e){return(Tn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var An=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rn(e,t)}(a,c.Component);var r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Tn(r);return function(e,t){if(t&&("object"===Pn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Dn(e)}(this,n?(e=Tn(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function a(){var i;!function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Fn(Dn(i=o.call.apply(o,[this].concat(t))),"additionalDataContext",function(){var e,t,r;return null===(e=i.props)||void 0===e||null===(t=e.me)||void 0===t||null===(r=t.props)||void 0===r?void 0:r.row}),Fn(Dn(i),"getCustomFileName",function(){return i.props.additionalData&&i.additionalDataContext()&&i.props.additionalData.customNameGetter?i.props.additionalData.customNameGetter(i.additionalDataContext()):null}),Fn(Dn(i),"getCustomContentType",function(){return i.props.additionalData&&i.additionalDataContext()&&i.props.additionalData.customContentTypeGetter?i.props.additionalData.customContentTypeGetter(i.additionalDataContext()):null}),Fn(Dn(i),"onChange",function(t){var e,r=Dn(i),n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e){if(e){if("string"==typeof e)return xn(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?xn(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}(t.target.files);try{for(n.s();!(e=n.n()).done;){var o=e.value,a=new FormData;a.append(r.props.name,o),window.$.ajax({url:r.props.uploadUrl,type:"POST",processData:!1,contentType:!1,dataType:"json",data:a,success:function(e){e.success?r.props.onChange&&r.props.onChange(t,{name:r.props.name,propertyName:r.props.propertyName,value:e.result.properties.Token,parameters:{success:!0,properties:e.result.properties}}):r.props.onUploadFail&&r.props.onUploadFail(t,{name:r.props.name,propertyName:r.props.propertyName,message:e.message,details:e.details,success:!1})}})}}catch(e){n.e(e)}finally{n.f()}}),Fn(Dn(i),"onClear",function(){i.props.onChange&&i.props.onChange(void 0,{name:i.props.name,propertyName:i.props.propertyName,value:null})}),i}return _n(a.prototype,[{key:"render",value:function(){return W("upload",{getCustomContentType:this.getCustomContentType,getCustomFileName:this.getCustomFileName,me:this,onChange:this.onChange,onClear:this.onClear,props:this.props})}}]),a}();function In(e){return(In="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function Ln(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Nn(e,t){return(Nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vn(e){return(Vn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Un=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nn(e,t)}(o,c.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Vn(r);return function(e,t){if(t&&("object"===In(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Bn(e)}(this,n?(e=Vn(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function o(e){var n;return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),Mn(Bn(n=t.call(this,e)),"selectWorkflowScheme",function(e,t){t=t.value,n.props.handleEvent({key:n.props.name,eventName:"onSchemeSelected",parameters:{scheme:t}})}),Mn(Bn(n),"handleChanged",function(e,t){var r=t.name,t=t.value;n.setState(Mn({},r,t))}),n.state={commands:e.commands,states:e.states,processExists:e.processExists},n.checkGetAdditionalDataForControl(),n}return Ln(o.prototype,[{key:"componentDidMount",value:function(){this.isMount=!0}},{key:"componentWillUnmount",value:function(){this.isMount=!1}},{key:"checkGetAdditionalDataForControl",value:function(){var o=this;this.props.getAdditionalDataForControl||this.props.commands||this.props.states?this.props.getAdditionalDataForControl(this,{loadParameters:!this.props.blockLoadParameters},function(e){var t=e.commands,r=e.states,n=e.processExists,e=e.processParameters;o.setState({commands:t,states:r,processExists:n}),o.props.handleEvent&&o.props.handleEvent({key:o.props.name,eventName:"onReceivedCommands",parameters:{commands:t,states:r,processParameters:e}}),o.isMount&&o.forceUpdate()}):console&&console.log("WorkflowBar: This control requires getAdditionalDataForControl or commands and states not undefined parameters!")}},{key:"onCommand",value:function(e,t){he(this.props.handleEvent)&&(t.currentTarget&&t.currentTarget.classList&&t.currentTarget.classList.add("loading"),this.props.handleEvent({key:this.props.name,eventName:"onCommandClick",parameters:{command:e}}),t.currentTarget&&t.currentTarget.classList&&t.currentTarget.classList.remove("loading"))}},{key:"onSetState",value:function(e){if(he(this.props.handleEvent)){e.currentTarget&&e.currentTarget.classList&&e.currentTarget.classList.add("loading");for(var t=(he(this.state.states)?this.state:this.props).states,r=void 0,n=0;n<t.length;n++)if(t[n].value==this.state.setstate){r=t[n];break}this.props.handleEvent({key:this.props.name,eventName:"onSetStateClick",parameters:{state:r}}),e.currentTarget&&e.currentTarget.classList&&e.currentTarget.classList.remove("loading")}}},{key:"render",value:function(){return W("workflow-bar",{handleChanged:this.handleChanged.bind(this),me:this,props:this.props,selectWorkflowScheme:this.selectWorkflowScheme.bind(this),state:this.state,onCommand:this.onCommand.bind(this),onSetState:this.onSetState.bind(this)})}}]),o}(),zn=r(13),Wn=r.n(zn);var Hn=r(14),Gn=r.n(Hn);function qn(e){return(qn="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function Kn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Jn(e,t){return(Jn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $n(e){return($n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Yn=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jn(e,t)}(o,c.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=$n(r);return function(e,t){if(t&&("object"===qn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}()}(this,n?(e=$n(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function o(e){return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e)).state={},e.controlRef=z.a.createRef(),e.barRef=z.a.createRef(),e}return Kn(o.prototype,[{key:"render",value:function(){return W("control-bar",{props:this.props,onCopyControl:this.onCopyControl.bind(this,this.props.model),me:this})}},{key:"onCopyControl",value:function(e,t){var r=ve.a.stringify(e);(e=document.createElement("textarea")).value=r,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e),r=0<document.getSelection().rangeCount&&document.getSelection().getRangeAt(0),e.select(),document.execCommand("copy"),document.body.removeChild(e),r&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(r))}},{key:"componentDidMount",value:function(){this.updateBarPosition&&(window.addEventListener("resize",this.updateBarPosition),this.updateBarPosition())}},{key:"componentDidUpdate",value:function(){this.updateBarPosition&&this.updateBarPosition()}},{key:"componentWillUnmount",value:function(){this.updateBarPosition&&window.removeEventListener("resize",this.updateBarPosition)}}]),o}();function Qn(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Zn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Qn(Object(r),!0).forEach(function(e){ro(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Qn(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Xn(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e){if(e){if("string"==typeof e)return eo(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?eo(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function eo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function to(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ro(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var no=(Ql=[{key:"isAdaptiveRender",value:function(e,t){return!e["style-adaptive"]||null==t||""===t||!e["style-renderwhen"]||t===e["style-renderwhen"]}},{key:"isForm",value:function(e){return null!=e&&("form"===e["data-buildertype"]||"formgroup"===e["data-buildertype"])}},{key:"getFormattedDate",value:function(e,t){if(null==t)return"";var r,n=void 0,o=e.indexOf(":");return 0<o?(r=e.substring(0,o),n=e.substring(o+1,e.length)):r=e,null==(e=t[r])&&(e=""),he(n)&&("number"==typeof e?e=Gn()(e).format(n):(t=Ne()(e)).isValid()&&(e="local"===n?(r=Be("L"),t.format(r)):t.format(n))),e}},{key:"getStyle",value:function(e,t,r){var n={};return e["style-marginTop"]&&(n.marginTop=e["style-marginTop"]),e["style-marginBottom"]&&(n.marginBottom=e["style-marginBottom"]),e["style-marginLeft"]&&(n.marginLeft=e["style-marginLeft"]),e["style-marginRight"]&&(n.marginRight=e["style-marginRight"]),e["style-width"]&&(n.width=e["style-width"]),e["style-height"]&&(n.height=e["style-height"]),void 0!==e["style-float"]&&(n.float=e["style-float"]),void 0!==e["style-display"]&&(n.display=e["style-display"]),e["style-hidden"]&&(t?n.opacity=.2:n.display="none"),void 0!==e["style-source"]&&oo.getCustomStyle(e["style-source"],n),void 0!==e["style-font-size"]&&(n.fontSize=e["style-font-size"]),e["style-adaptive"]&&void 0!==e["style-mobilesource"]&&"mobile"===r&&oo.getCustomStyle(e["style-mobilesource"],n),n}},{key:"getCustomStyle",value:function(e,r){e.split(";").forEach(function(e){var t=e.split(":");2===t.length&&(e=t[0].replace(/^\s+|\s+$/g,""),r[e]=t[1].replace(/^\s+|\s+$/g,""))})}},{key:"getClassName",value:function(e,t){var r=e["style-customcss"];return t&&he(oo.containers["data-buildertype"])&&(r=(null==r?"":r+" ")+"dwkit-formbuilder-item-container"),1==e["other-required"]&&(t="dwkit-required-field",r=null==r||""==r?t:r+t),1==e["style-hiddeninprint"]?(null==r?"":r+" ")+"dwkit-notprint":r}},{key:"fillDefaultValues",value:function(e,t){for(var r in t)void 0===e[r]&&(e[r]=t[r]);return e}}],al=[{key:"createBuilderDropzone",value:function(t,r,n,e,o){var a="";return W("builder-dropzone",{key:t,elementToInsert:r,elementAfter:n,onChangeDZ:function(e,t){t.name,t=t.value,a=t},onClosePopup:function(){try{var e=ve.a.parse(a);this.builderActions.insert(e,t,r,n,o)}catch(e){}},placeholderKey:o,text:"DROP ZONE"})}},{key:"isContainer",value:function(e){return he(oo.containers[e])}},{key:"getItems",value:function(){return this.items}},{key:"setItems",value:function(e){this.items=e||[]}},{key:"getControlInfoByType",value:function(e,t){var r,n=Xn(this.items);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(o.key===e)return o}}catch(e){n.e(e)}finally{n.f()}if(t=t||function(){if(window.DWKitFormSettings)return window.DWKitFormSettings.externalControlList}()){var a,i=Xn(t);try{for(i.s();!(a=i.n()).done;){var l=a.value;if(l.key===e)return l}}catch(e){i.e(e)}finally{i.f()}}}},{key:"getControlByType",value:function(e,t){return(t=this.getControlInfoByType(e,t))?t.control:null}},{key:"getEditControlByType",value:function(e,t){return(t=this.getControlInfoByType(e,t))?t.editControl:null}},{key:"createControls",value:function(e,t){var r=t.model,n=t.data,o=t.errors,a=t.eventOnEdit,i=t.eventOnDelete,l=t.eventOnCopy,s=t.handleEvent,c=t.parentItem,u=t.getFormFunc,p=t.getAdditionalDataForControl,f=t.buildermode,d=t.hideControls,h=t.readOnlyControls,y=t.readOnly,m=t.disableRefs,b=t.uploadUrl,v=t.downloadUrl,g=t.extendedData,w=t.controlsToReplace,O=t.needCheckReplace,C=t.parentPlaceholder,S=t.formItem,E=t.externalControlRender,j=t.externalControlList,k=t.adaptiveViewType,P=t.formData,x=[];if(null==r)return x;for(var _=0;_<r.length;_++)if(!(Array.isArray(d)&&d.includes(r[_].key)||!f&&!oo.isAdaptiveRender(r[_],k))){var R=void 0,D=r[_]["data-buildertype"];if("customcontrol"===D)if(void 0===r[_].type||""===r[_].type)R=W("empty",{key:r[_].key,text:"Fill Type property for rendering the control."});else{var T=Zn(Zn({},void 0===r[_].props?{}:ve.a.parse(r[_].props)),{},{key:r[_].key,name:r[_].key,className:oo.getClassName(r[_],f),style:oo.getStyle(r[_],f,k),"data-buildertype":r[_]["data-buildertype"],getAdditionalDataForControl:p,uploadUrl:b,downloadUrl:v});(y||Array.isArray(h)&&h.includes(T.key))&&(T.readOnly=!0);var F=r[_].children;if(void 0!==r[_].children)try{F=ve.a.parse(r[_].children)}catch(e){}R=void 0===F||Array.isArray(F)&&0===F.length?z.a.createElement(r[_].type,T):z.a.createElement(r[_].type,T,F)}else if("customblock"===D){var A=[],I=!1,L=!1,N=!1,B=r[_],V=C,T=S;if("form"===r[_].sourceType||void 0===r[_].sourceType)if(void 0!==r[_].children&&""!==r[_].children)A=r[_].children;else{if(void 0===u){console.error('Error: "getFormFunc" parameter is undefined!. Please, set "getFormFunc" parameter for DWKitBuilder or DWKitForm!');continue}void 0!==r[_].formname&&""!==r[_].formname?A=JSON.parse(JSON.stringify(null!==(F=u(r[_].formname))&&void 0!==F?F:{})):I=!0}else if("placeholder"===r[_].sourceType)N=L=void 0!==a,B=c,void 0===V&&(V=r[_].key),void 0!==(T=void 0===T?c:T)&&void 0!==T.placeholders&&void 0!==T.placeholders[r[_].key]&&(A=T.placeholders[r[_].key]);else if(void 0!==r[_].source&&""!==r[_].source)try{A=ve.a.parse(r[_].source)}catch(e){I=!0}else I=!0;I?R=W("empty",{key:r[_].key,text:"Set a form name or source in properties."}):(M=this.createControls(e,{model:A,data:n,errors:o,buildermode:L,eventOnEdit:a,eventOnDelete:i,eventOnCopy:l,parentItem:B,handleEvent:s,getFormFunc:u,getAdditionalDataForControl:p,hideControls:d,readOnlyControls:h,readOnly:y,disableRefs:m,uploadUrl:b,downloadUrl:v,controlsToReplace:w,needCheckReplace:O,parentPlaceholder:V,formItem:T,extendedData:g,externalControlRender:E,externalControlList:j,adaptiveViewType:k,formData:P}),V={key:r[_].key,name:r[_].key,className:oo.getClassName(r[_],f),style:oo.getStyle(r[_],f,k),"data-buildertype":r[_]["data-buildertype"]},N&&(0<(M=void 0===M?[]:M).length&&(N=this.createBuilderDropzone(r[_].key+"_dropzone_footer",void 0===T?void 0:T.key,M[M.length-1].key,r[_].key,r[_].key),M.push(N)),T=this.createBuilderDropzone(r[_].key+"_dropzone_header",void 0===T?void 0:T.key,void 0,r[_].key,r[_].key),M.unshift(T)),R=z.a.createElement(this.getPlatformContainerControl(),V,M),!r[_].children&&A&&(r[_].children=A))}else var M,U=this.getControlByType(D,j),R=null===U?W("null-control",{key:r[_].key,text:"".concat(D," is unsupported")}):this.isContainer(D)?(de(M=S)&&he(c)&&"form"===c.sourceType&&(M=c),(A=void 0)!==r[_].readOnly&&(A=r[_].readOnly),(y||Array.isArray(h)&&h.includes(r[_].key))&&(A=!0),D=f&&("formgroup"===r[_]["data-buildertype"]&&"grouped"!==r[_].orientation||"container"===r[_]["data-buildertype"]&&"flex"===r[_]["style-display"]),A=this.createControls(e,{model:r[_].children,data:n,errors:o,buildermode:f,eventOnEdit:a,eventOnDelete:i,eventOnCopy:l,parentItem:r[_],handleEvent:s,getFormFunc:u,getAdditionalDataForControl:p,hideControls:d,readOnlyControls:h,readOnly:A,disableRefs:m,uploadUrl:b,downloadUrl:v,controlsToReplace:w,needCheckReplace:O,parentPlaceholder:void 0,formItem:M,extendedData:g,externalControlRender:E,externalControlList:j,adaptiveViewType:k,formData:P}),f&&(0<A.length&&(M=D?"...":"... "+r[_].key+" down ...",M=this.createBuilderDropzone(r[_].key+"-dropzone_footer",r[_].key,void 0,M),A.push(M)),D=D?"...":"... "+r[_].key+" up ...",D=this.createBuilderDropzone(r[_].key+"-dropzone_header",r[_].key,void 0,D),A.unshift(D)),this.createControl(e,U,{model:r[_],data:n,errors:o,parentItem:c,buildermode:f,children:A,handleEvent:s,getFormFunc:u,getAdditionalDataForControl:p,hideControls:d,readOnlyControls:h,readOnly:y,disableRefs:m,uploadUrl:b,downloadUrl:v,extendedData:g,parentPlaceholder:C,controlsToReplace:w,needCheckReplace:O,eventOnEdit:a,eventOnDelete:i,eventOnCopy:l,externalControlRender:E,externalControlList:j,adaptiveViewType:k,formData:P})):this.createControl(e,U,{model:r[_],data:n,errors:o,parentItem:c,buildermode:f,handleEvent:s,getFormFunc:u,getAdditionalDataForControl:p,hideControls:d,readOnlyControls:h,readOnly:y,disableRefs:m,uploadUrl:b,downloadUrl:v,extendedData:g,parentPlaceholder:C,controlsToReplace:w,needCheckReplace:O,eventOnEdit:a,eventOnDelete:i,eventOnCopy:l,externalControlRender:E,externalControlList:j,adaptiveViewType:k,formData:P});f?(0<_&&_<r.length&&(U=this.createBuilderDropzone(r[_].key+"-dropzone_bw",void 0===c?void 0:c.key,r[_].key,"...",C),x.push(U)),x.push(z.a.createElement(Yn,{key:R.key+"_controlbar",control:R,text:r[_]["data-buildertype"],model:r[_],parent:e,onDelete:i,onEdit:a,onCopy:l,isGroup:"formgroup"===r[_]["data-buildertype"],builderActions:this.builderActions}))):x.push(R)}return x}},{key:"createControl",value:function(e,t,r){throw r.model,r.data,r.errors,r.parentItem,r.buildermode,r.children,r.handleEvent,r.getAdditionalDataForControl,r.getFormFunc,r.hideControls,r.readOnlyControls,r.readOnly,r.disableRefs,r.uploadUrl,r.downloadUrl,r.extendedData,r.controlsToReplace,r.needCheckReplace,r.eventOnEdit,r.eventOnDelete,r.eventOnCopy,r.externalControlRender,r.externalControlList,r.adaptiveViewType,r.formData,new Error("You must implement this method in subclass")}},{key:"setCreateControlsProps",value:function(e,t){Object.assign(e,t),e.buildermode&&(e.createBuilderDropzone=this.createBuilderDropzone.bind(this)),e.createControls=this.createControls.bind(this)}},{key:"getPlatformContainerControl",value:function(){}}],to((gl=oo).prototype,al),to(gl,Ql),oo);function oo(e,t){!function(e){if(!(e instanceof oo))throw new TypeError("Cannot call a class as a function")}(this),this.builderActions=e,this.items=t||[]}function ao(r,n,e,t,o){var a=2<arguments.length&&void 0!==e?e:null;return((3<arguments.length&&void 0!==t?t:null)||Ur.a)(r,4<arguments.length&&void 0!==o?o:null).then(function(e){var t=e.json();return e.ok?t.then(n):a?t.then(a):void console.log(error+" url: "+r)}).catch(function(e){return a?a(e):void console.log(e+" url: "+r)})}function io(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}ro(no,"containers",{form:"",formgroup:"",grid:"",gridcolumn:"",container:"",div:"",repeater:""});var lo=(io(po.prototype,[{key:"registerItems",value:function(e){lo.items=e}},{key:"getItems",value:function(){return lo.items}}]),new po),so=lo.registerItems,co=lo.getItems,uo=z.a.createContext({visible:!1});function po(){var e;!function(e){if(!(e instanceof po))throw new TypeError("Cannot call a class as a function")}(this),e=[],"items"in this?Object.defineProperty(this,"items",{value:e,enumerable:!0,configurable:!0,writable:!0}):this.items=e}function fo(){!function(e){if(!(e instanceof fo))throw new TypeError("Cannot call a class as a function")}(this)}function ho(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Sc=/{\S[A-z,0-9,_,-,.,:, ,/]+?}/gm,(zs="regexForReplace")in(As=fo)?Object.defineProperty(As,zs,{value:Sc,enumerable:!0,configurable:!0,writable:!0}):As[zs]=Sc;var yo={},mo=(kc=bo,Pc=[{key:"Set",value:function(e,t,r){yo.hasOwnProperty(e)&&clearTimeout(yo[e]),yo[e]=setTimeout(t,r)}},{key:"Clear",value:function(e){yo.hasOwnProperty(e)&&(clearTimeout(yo[e]),delete yo[e])}}],null&&ho(kc.prototype,null),ho(kc,Pc),bo);function bo(){!function(e){if(!(e instanceof bo))throw new TypeError("Cannot call a class as a function")}(this)}function vo(e){return(vo="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function go(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function wo(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Oo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?wo(Object(r),!0).forEach(function(e){ko(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wo(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Co(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function So(e,t){return(So=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Eo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jo(e){return(jo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ko(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(21);var Po=r(7),xo=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&So(e,t)}(i,c.Component);var e,t,r,n,o,a=(n=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=jo(n);return function(e,t){if(t&&("object"===vo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Eo(e)}(this,o?(e=jo(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function i(e){var f;return function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),ko(Eo(f=a.call(this,e)),"_asyncGetData",null),ko(Eo(f),"_asyncGetModel",null),ko(Eo(f),"handleEvent",function(e){e.e;var o,a,i=e.key,t=e.propertyName,l=e.eventName,s=e.parameters,r=e.name,c=e.value,n=e.additionalValues,u=Eo(f),p="onChange"===l;p&&(f.props.onlyExternalDataChanged||(void 0===f.state.data&&(f.state.data={}),(e=f.state.data)[t||i]=c,f.setState({data:e})),void 0!==f.props.dataChanged&&f.props.dataChanged(Eo(f),{key:i,propertyName:t,value:c,additionalValues:n}),f.onConditions(i,l,s,r,c)),void 0===f.props.eventFunc||void 0!==(o=f.findModelItembyKey(i))&&void 0!==o.events&&void 0!==o.events[l]&&o.events[l].active&&(o.events=Object(_r.updateEventsFormat)(o.events),r=o.events[l],a=Oo({},s),Array.isArray(r.triggers)&&0<r.triggers.length&&r.triggers.forEach(function(t){Array.isArray(t.parameters)&&0<t.parameters.length&&t.parameters.forEach(function(e){"string"==typeof e.value?a[e.name]=e.value.replace(fo.regexForReplace,function(e){return u.applySubstitution(e,s?s.row:void 0,u.state.data)}):a[e.name]=e.value});var r=u.findRefs(i),n=c,e=Array.isArray(t.targets)&&0<t.targets.length?function(){return t.targets.forEach(function(e){u.props.eventFunc({key:e,sourceControlRef:r,sourceControlValue:n,controlRef:u.findRefs(e),formName:u.props.formName,component:u,eventName:l,actions:t.actions,parameters:a})})}:function(){return u.props.eventFunc({key:i,sourceControlRef:r,sourceControlValue:n,controlRef:r,formName:u.props.formName,component:u,eventName:l,actions:t.actions,parameters:a})};!p||void 0===o.onChangeTimeout||""===o.onChangeTimeout||Number(o.onChangeTimeout)<1?e():mo.Set(i,e,Number(o.onChangeTimeout))}))}),f.state={data:e.data,model:e.model,extendedData:e.extendedData,controlsToReplace:null,adaptiveViewType:f.getAdaptiveViewType()},f.checkConditions(f.state.model),f.checkLoadedState(f.state.data,f.state.model,!0),f.abortController=new AbortController,f.abortSignal=f.abortController.signal,f}return r=[{key:"getDerivedStateFromProps",value:function(e,t){var r={};e.adaptiveViewType&&t.adaptiveViewType!==e.adaptiveViewType&&(r.adaptiveViewType=e.adaptiveViewType),void 0!==e.modelurl&&""!==e.modelurl&&e.modelurl!==t.modelurl&&(r.modelurl=e.modelurl,r.needFetchModel=!0);var n,o=t.enableCheckConditions;if(void 0!==e.model&&e.model!==t.model&&(r.controlsToReplace=null,r.model=e.model,o=i.hasConditions(e.model)),void 0!==e.dataurl&&""!==e.dataurl&&e.dataurl!==t.dataurl&&(r.dataurl=e.dataurl,r.needFetchData=!0),void 0!==e.data&&(r.data=e.data,e.autoCheckConditions&&o&&(n=Object(_r.checkConditions)({data:r.data,model:r.model||t.model}),r.hideControls=n.hideControls,r.readOnlyControls=n.readOnlyControls),e.autoValidate))if((n=Object(_r.validate)({data:r.data,model:r.model||t.model})).valid)r.errors=void 0;else if(r.errors=n.errors,e.errors)for(var a in e.errors)r.errors[a]=e.errors[a];return e.objectId!==t.objectId&&(r.objectId=e.objectId,r.isLoaded=!1),r}},{key:"hasConditions",value:function(e){var t=!1;if(Array.isArray(e)){var r,n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e){if(e){if("string"==typeof e)return go(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?go(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}(e);try{for(n.s();!(r=n.n()).done;){var o=r.value;if([o["other-visibleConition"],o["other-readOnlyConition"]].some(ye))t=!0;else if(Array.isArray(o.children))t=i.hasConditions(o.children);else if("object"==vo(o.placeholders))for(var a in o.placeholders)t=i.hasConditions(o.placeholders[a]);if(t)break}}catch(e){n.e(e)}finally{n.f()}}return t}}],t=[{key:"createControls",value:function(){throw new Error("Function createControls must be implemented in ancestor!")}},{key:"componentDidMount",value:function(){this.PrepareState()}},{key:"componentDidUpdate",value:function(e,t){var r;this.PrepareState(),Po(t.errors,this.state.errors)||null!==(t=(r=this.props).handleChangeErrors)&&void 0!==t&&t.call(r,this.state.errors)}},{key:"componentWillUnmount",value:function(){(this._asyncGetData||this._asyncGetModel)&&this.abortController.abort()}},{key:"PrepareState",value:function(){var t=this;this.state.needFetchModel&&(t.setState({needFetchModel:!1}),this._asyncGetModel=ao(this.state.modelurl,function(e){t._asyncGetModel=null,t.modelChanged(e)},function(e){t._asyncGetModel=null,t.handleErrEvent(e)},this.props.fetchFunc,{signal:this.abortSignal})),this.state.needFetchData&&(t.setState({needFetchData:!1}),this._asyncGetData=ao(this.state.modelurl,function(e){t._asyncGetData=null,t.dataChanged(e)},function(e){t._asyncGetData=null,t.handleErrEvent(e)},this.props.fetchFunc,{signal:this.abortSignal})),this.checkConditions(this.state.model),this.checkLoadedState(this.state.data,this.state.model)}},{key:"modelChanged",value:function(e){this.setState({model:e,controlsToReplace:null}),this.checkConditions(e)}},{key:"dataChanged",value:function(e){this.setState({data:e}),this.checkLoadedState(e,this.state.model)}},{key:"checkLoadedState",value:function(e,t,r){var n;!this.state.isLoaded&&me(e)&&null!=t&&t.length&&(n={},Object(_r.initDefaultState)({model:t,data:n}),this.state.data=n),this.state.isLoaded||me(e)||null==t||!t.length||(r?this.state.isLoaded=!0:this.setState({isLoaded:!0}),e=Oo({},e),Object(_r.initDefaultState)({model:t,data:e}),null==this||null!==(t=this.props)&&void 0!==t&&t.eventFunc({key:void 0,controlRef:this,formName:this.props.formName,component:this,eventName:"init",actions:["initSystem","init"],parameters:{initialData:e}}))}},{key:"findRefs",value:function(e,t){if(t=t||this.refs){var r=t[e];if(!r)for(var n in t)if(r=t[n].refs?this.findRefs(e,t[n].refs):r)break;return r}}},{key:"checkConditions",value:function(e){this.state.enableCheckConditions=i.hasConditions(e)}},{key:"onConditions",value:function(e,t,r,n,o){var a;this.state.enableCheckConditions&&(this.props.autoCheckConditions&&this.state.enableCheckConditions?(a=Object(_r.checkConditions)({data:this.state.data,model:this.state.model}),this.setState({hideControls:a.hideControls,readOnlyControls:a.readOnlyControls})):this.props.eventFunc({key:e,controlRef:this.findRefs(e),formName:this.props.formName,component:this,eventName:t,actions:["checkConditions"],parameters:r}))}},{key:"handleErrEvent",value:function(e){this.props.eventErrFunc&&this.props.eventErrFunc(this,e)}},{key:"findModelItembyKey",value:function(e,t){void 0===t&&(t=this.state.model);for(var r=0;r<t.length;r++){if(t[r].key===e)return t[r];if(void 0!==t[r].children){var n=this.findModelItembyKey(e,t[r].children);if(void 0!==n)return n}if(void 0!==t[r].placeholders)for(var o in t[r].placeholders)if(void 0!==(o=this.findModelItembyKey(e,t[r].placeholders[o])))return o;if("customblock"===t[r]["data-buildertype"]&&"source"===t[r].sourceType&&null!=t[r].source&&(n=ve.a.parse(t[r].source),void 0!==(n=this.findModelItembyKey(e,n))))return n;if("customblock"===t[r]["data-buildertype"]&&"form"===t[r].sourceType&&void 0!==t[r].formname&&""!==t[r].formname){var a=t[r].children||JSON.parse(JSON.stringify(null!==(a=this.props.getFormFunc(t[r].formname))&&void 0!==a?a:{}));if(void 0!==(a=this.findModelItembyKey(e,a)))return a}}}},{key:"getAdaptiveViewType",value:function(){return"mobile"}},{key:"handleResize",value:function(){var e=this.getAdaptiveViewType();this.state.adaptiveViewType!==e&&this.setState({adaptiveViewType:e})}},{key:"applySubstitution",value:function(e,t,r){var n=e;return null!=t&&"row."==e.slice(1,5)?null==(n=t[e.slice(5,e.length-1)])?"":n:null!=r&&null==(n=r[e.slice(1,e.length-1)])?"":n}}],Co((e=i).prototype,t),Co(e,r),i}();function _o(e){return(_o="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function Ro(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Do(e,t,r){return(Do="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){if(e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Fo(e)););return e}(e,t))return(t=Object.getOwnPropertyDescriptor(e,t)).get?t.get.call(r):t.value})(e,t,r||e)}function To(e,t){return(To=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fo(e){return(Fo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ao=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&To(e,t)}(o,xo);var e,r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Fo(r);return function(e,t){if(t&&("object"===_o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}()}(this,n?(e=Fo(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function o(){return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),t.apply(this,arguments)}return e=[{key:"componentDidMount",value:function(){Do(Fo(o.prototype),"componentDidMount",this).call(this),window.addEventListener&&window.addEventListener("resize",this.handleResize.bind(this))}},{key:"componentWillUnmount",value:function(){Do(Fo(o.prototype),"componentWillUnmount",this).call(this),window.removeEventListener&&window.removeEventListener("resize",this.handleResize.bind(this))}},{key:"getItemsForRender",value:function(){var e=[],t=!1;null!==this.state.model&&void 0!==this.state.model&&(e=null===this.state.controlsToReplace?[]:this.state.controlsToReplace,t=null===this.state.controlsToReplace);var r=this.createControls(this,{model:this.state.model,data:this.state.data,errors:this.state.errors||this.props.errors,handleEvent:this.handleEvent,getFormFunc:this.props.getFormFunc,getAdditionalDataForControl:this.props.getAdditionalDataForControl,hideControls:(this.props.autoCheckConditions?this.state:this.props).hideControls,readOnlyControls:(this.props.autoCheckConditions?this.state:this.props).readOnlyControls,readOnly:this.props.readOnly,uploadUrl:this.props.uploadUrl,downloadUrl:this.props.downloadUrl,extendedData:this.props.extendedData,controlsToReplace:e,needCheckReplace:t,externalControlRender:this.props.externalControlRender,externalControlList:this.props.externalControlList,adaptiveViewType:this.props.adaptiveViewType||this.state.adaptiveViewType});return t&&(this.state.controlsToReplace=e),r}},{key:"getAdaptiveViewType",value:function(){return window.matchMedia&&window.matchMedia("(max-width: 997px)").matches?"mobile":"desktop"}}],Ro(o.prototype,e),o}(),Io=r(1);d("collection-camera",function(e){return z.a.createElement(fe,{name:e.props.colName,error:e.props.errorFlag,value:e.props.value,readOnly:e.props.readOnly,onChange:e.me.handleChange,downloadUrl:e.props.downloadUrl,uploadUrl:e.props.uploadUrl,additionalData:e.props.additionalData,getAdditionalDataForControl:e.props.getAdditionalDataForControl,showPreview:!0,compact:!0,fluid:!0,isForm:!0})}),d("collection-signature",function(e){return z.a.createElement(sn,{name:e.props.colName,error:e.props.errorFlag,value:e.props.value,readOnly:e.props.readOnly,onChange:e.me.handleChange,downloadUrl:e.props.downloadUrl,uploadUrl:e.props.uploadUrl,additionalData:e.props.additionalData,getAdditionalDataForControl:e.props.getAdditionalDataForControl,showPreview:!0,compact:!0,fluid:!0,isForm:!0})});var Lo=r(2);function No(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Bo(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?No(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):No(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}var Vo=Io.Dimensions.get("window").width,Mo=Io.StyleSheet.create({buttonTitle:{fontSize:14},primary:{backgroundColor:"#1262E2"},dwkitFormBuilderHeader:{flex:1,flexDirection:"row",paddingLeft:20,paddingRight:20,height:80},dwkitFormBuilderHeaderLeft:{marginTop:12,width:200,justifyContent:"center"},dwkitFormBuilderHeaderCenter:{marginTop:18,marginRight:3.5,flexDirection:"row",paddingLeft:21,paddingRight:21,justifyContent:"space-between",minWidth:425},dwkitFormBuilderHeaderRight:{paddingRight:4,flex:1,flexDirection:"row-reverse",alignItems:"flex-end",justifyContent:"flex-start",alignSelf:"center",maxWidth:200,marginLeft:"auto"},dwkitFormBuilderHeaderButton:{height:38,minWidth:78},dwkitFormBuilder:{flexDirection:"row"},dwkitFormBuilderContent:{zIndex:1,flexGrow:1,margin:15,width:"calc(100% - 230px)",height:"calc(100vh - 10px)",overflow:"scroll"},dwkitFormBuilderToolbar:{width:200},dwkitFormBuilderZone:{alignItems:"center",padding:8,paddingTop:7,borderStyle:"dashed",borderWidth:1,borderColor:"rgba(0, 0, 0, 0.1)",marginTop:8,marginBottom:8,backgroundColor:"#F4F4F4",height:28},dwkitFormBuilderZoneActive:{backgroundColor:"lightblue"},dwkitFormBuilderZoneHover:{backgroundColor:"blue"},dwkitFormBuilderZoneText:{fontSize:10,fontWeight:"bold",color:"rgba(46, 46, 46, 0.4)"},dwKitModalBody:{padding:20,minWidth:860,backgroundColor:"white",margin:"auto"},dwKitModalHeader:{flexDirection:"row-reverse"},dwKitModalContent:{flexWrap:"wrap",flex:1},dwKitModalActions:{flexDirection:"row",alignSelf:"flex-end",marginTop:20},dwKitModalComponentName:{fontSize:12,backgroundColor:"#e8e8e8",color:"rgba(0, 0, 0, .6)",fontWeight:"700",borderRadius:4,padding:4,margin:4},formGroupEqual:{flexGrow:1,marginBottom:10,marginTop:10,flexDirection:"row"},formGroup:{flexGrow:1,flexWrap:"wrap",alignItems:"stretch"},dragView:Bo({left:0,top:0,width:"100%",height:"100%",zIndex:-1e3},Io.Platform.select({web:{position:"fixed"}})),dwKitMessage:{flexDirection:"row",marginBottom:14,alignItems:"center",paddingTop:14,paddingBottom:14,paddingLeft:21,paddingRight:21,borderStyle:"solid",borderWidth:1,borderRadius:4,borderColor:"#cecfcf"},dwKitMessageContent:{marginLeft:15},dwKitMessageIcon:{width:32,height:32},formGroupWidthEqual:{flexGrow:1},emptyView:{backgroundColor:"#EEF4FD",padding:5,marginTop:5,marginBottom:5},emptyText:{color:"#9B9B9B",textAlign:"center"},fullSize:{width:"100%"},halfSize:{flexDirection:"row",width:"50%"},itemContainer:{backgroundColor:"rgba(0,0,0,0.02)",borderStyle:"solid",borderWidth:1,borderColor:"rgba(18, 98, 226,0.5)",padding:"16px",marginLeft:"0",marginRight:"0",overflow:"hidden"},controlWrapper:{flexGrow:1},controlWrapperHovered:Bo({},Io.Platform.select({web:{outlineStyle:"solid",outlineWidth:2,outlineColor:"rgba(242, 77, 0, 0.5)"}}))});Mo.controlWrapper={flexGrow:1,hovered:{borderStyle:"solid",borderWidth:1,borderColor:"rgba(242, 77, 0, 0.5)"}},Mo.baseMargin={marginBottom:5},Mo.controlParams=function(e){return{style:{flexGrow:e.fluid?1:0,alignSelf:e.fluid?"stretch":e.floated||"flex-start"},props:{appearance:e.secondary?"outline":"filled",status:e.primary||e.secondary?"primary":"basic"}}},Mo.eventsEditor={actions:{flexGrow:1,width:240,maxWidth:240},parameters:{flexGrow:1,width:450,maxWidth:450,marginRight:12},targets:{flexGrow:1,width:240,maxWidth:240},addButton:{appearance:"outline",status:"basic",size:"tiny",style:{padding:5,marginLeft:15,marginRight:40,marginTop:5,backgroundColor:"rgb(247, 249, 252)",borderColor:"rgb(228, 233, 242)"}}};var Uo={flexGrow:1};Mo.layout={elementInRow:{marginRight:10},elementInColumn:{marginBottom:10}},Mo.controls={button:Bo({},Uo),tabBarChild:{marginTop:20},dropzonePopover:{container:{boxShadow:"rgba(18, 83, 204, 0.12) 0px 6px 10px"}},dropdown:Bo({select:Bo(Bo({},Uo),{},{marginLeft:0,marginRight:0,flexShrink:1}),labels:{backdrop:{borderRadius:4,margin:1,padding:4,paddingTop:0,paddingBottom:4,backgroundColor:"color-primary-default"},text:{color:"white"},container:{display:"flex",flexWrap:"wrap",flexDirection:"row"}}},Uo),tooltip:{container:{maxWidth:400<Vo?Vo/2:Vo-20},title:{textAlign:"center"}},dropzoneModalIcons:{width:20,height:20},dwKitInput:Bo({marginBottom:5},Uo),dwKitCheckBox:{marginRight:5,marginTop:5,marginBottom:5}},Mo.repeater=Io.StyleSheet.create({container:{}}),Mo.controlBar={container:{marginTop:4,padding:4,paddingRight:8,paddingLeft:8,flexDirection:"row",justifyContent:"flex-end",opacity:.2,zIndex:100,right:0,position:"absolute",backgroundColor:"white",borderRadius:20},iconTouchable:{marginLeft:8},icon:{top:2,width:15,height:15}},Mo.controlBar.containerHovered=Io.StyleSheet.compose(Mo.controlBar.container,{opacity:1,boxShadow:"0px 6px 10px rgba(18, 83, 204, 0.12), 0px 1px 18px rgba(18, 83, 204, 0.12), 0px 3px 5px rgba(18, 83, 204, 0.15)"}),Mo.formGroupWidthCustom=[];for(var zo=1;zo<=16;zo++)Mo.formGroupWidthCustom[zo]=Io.StyleSheet.create({style:{width:"".concat(6.25*zo,"%")}});Mo.toolbarCssStyles={sectionItem:Bo({cursor:"grab",listStyle:"none",margin:"4px",marginTop:"7.5px",marginBottom:"7.5px",padding:"6px",paddingLeft:"16px",border:"1px solid #FFFFFF",borderRadius:"2px",fontFamily:"'Lato', 'sans-serif'",fontSize:"14px",color:"rgba(255, 255, 255, 0.8)"},Io.StyleSheet.flatten(Mo.primary))},Mo.toolbarStyles=Io.StyleSheet.create({container:Io.StyleSheet.flatten(Mo.primary),sectionList:{padding:10,paddingTop:0},sectionText:{color:"rgba(255, 255, 255, 0.8)"},sectionIcon:{width:22,height:22},toolbarTextView:{flexDirection:"row",flexShrink:1,alignItems:"center"},sectionHeader:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"},sectionHeaderText:{fontSize:16,fontWeight:"bold",padding:6,marginTop:5,marginBottom:5,color:"rgba(255, 255, 255, 1)"},searchContainer:{padding:10,paddingBottom:0},searchResults:{margin:6,opacity:.8}}),Mo.dwKitModalOverlayProps={overlayStyle:{left:0,top:0,width:"100%",height:"100%",overflow:"auto",position:"fixed",backgroundColor:"rgba(255, 255, 255, .35)"},containerStyle:{left:0,top:0,width:"100%",height:"100%",overflow:"auto",position:"fixed"},borderColor:"rgba(0, 0, 0, 1)"},Mo.dwKitButtonProps={containerStyle:{marginRight:4,marginLeft:12},type:"outline"},Mo.grouped={inColumn:{control:{marginLeft:16,marginRight:16},dropzone:{container:{marginTop:0,flexDirection:"row",alignItems:"center"}}}},Mo.dwKitInputProps={containerStyle:{marginBottom:14,flex:1},labelStyle:{fontSize:13,fontWeight:"700",color:"black",marginBottom:4},inputContainerStyle:{borderWidth:1,borderStyle:"solid",borderColor:"rgba(34, 36, 38, .15)",borderRadius:4},inputStyle:{paddingLeft:14,paddingRight:14,paddingTop:9.5,paddingBottom:9.5,fontSize:14,fontWeight:"400",minHeight:38}},Mo.dwKitDisabledInputProps={labelStyle:Bo(Bo({},Mo.dwKitInputProps.labelStyle),{},{color:"#d2d2d2"})},Mo.dwKitCheckDisabledProps={titleProps:{style:{color:"#d2d2d2"}},checkedColor:"#d2d2d2",uncheckedColor:"#d2d2d2"},Mo.dwKitFocusedInputProps={inputContainerStyle:{borderWidth:1,borderStyle:"solid",borderColor:"#85b7d9",borderRadius:4}},Mo.dwKitCheckBoxProps={checkedColor:"black",size:20,containerStyle:{backgroundColor:"white",borderWidth:0,paddingTop:0,paddingBottom:0,paddingLeft:7,paddingRight:7,marginBottom:14},titleProps:{style:{fontSize:14,fontWeight:"500"}}},Mo.dwKitTextareaProps={multiline:!0,numberOfLines:4},Mo.dwKitDropdown={labelStyle:Mo.dwKitInputProps.labelStyle,containerStyle:{paddingLeft:10,paddingRight:10,marginBottom:14,flex:1},dropdown:{style:{borderWidth:1,borderStyle:"solid",borderColor:"rgba(34, 36, 38, .15)",borderRadius:4}}},Mo.dwKitRadioGroup={labelStyle:Mo.dwKitInputProps.labelStyle,containerStyle:Mo.dwKitDropdown.containerStyle},Mo.collectionEditor={container:{flexGrow:1},column:{notLast:{paddingRight:10}},editButtonsColumn:{flexDirection:"row",margin:"auto",marginLeft:0,marginRight:0},editButton:{height:30},icon:{width:20,height:20,marginTop:10},dragIcon:{backgroundImage:"url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iYmxhY2siIHdpZHRoPSIxOHB4IiBoZWlnaHQ9IjE4cHgiPjxwYXRoIGQ9Ik0wIDBoMjR2MjRIMFYweiIgZmlsbD0ibm9uZSIvPjxwYXRoIGQ9Ik0xMSAxOGMwIDEuMS0uOSAyLTIgMnMtMi0uOS0yLTIgLjktMiAyLTIgMiAuOSAyIDJ6bS0yLThjLTEuMSAwLTIgLjktMiAycy45IDIgMiAyIDItLjkgMi0yLS45LTItMi0yem0wLTZjLTEuMSAwLTIgLjktMiAycy45IDIgMiAyIDItLjkgMi0yLS45LTItMi0yem02IDRjMS4xIDAgMi0uOSAyLTJzLS45LTItMi0yLTIgLjktMiAyIC45IDIgMiAyem0wIDJjLTEuMSAwLTIgLjktMiAycy45IDIgMiAyIDItLjkgMi0yLS45LTItMi0yem0wIDZjLTEuMSAwLTIgLjktMiAycy45IDIgMiAyIDItLjkgMi0yLS45LTItMi0yeiIvPjwvc3ZnPg==)",backgroundRepeat:"no-repeat",backgroundSize:"contain",opacity:.6,backgroundPosition:"right",width:15,height:15,cssFloat:"inherit"},input:Bo({minWidth:50,width:"100%"},Uo),addLinkProps:{style:{color:"rgb(242, 77, 0)",fontWeight:"700"}},image:{style:{width:15,height:15}},droppable:{defaultStyle:{backgroundColor:"transparent"},activeStyle:{backgroundColor:"#ffff0059"},hoverStyle:{backgroundColor:"lightgreen"}}},Mo.dictionaryEditor={iconProps:{size:14,containerStyle:{marginLeft:4}}},Mo.containerView={base:{alignSelf:"stretch",flexGrow:1},rows:{flexDirection:"column"},columns:{display:"flex",flexDirection:"row"},columnswrap:{display:"flex",flexDirection:"row",flexWrap:"wrap",alignItems:"flex-start"}};var Wo=Mo;function Ho(){return(Ho=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Go(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function qo(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Go(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Go(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function Ko(e){var t=!0===e.disabled?Wo.dwKitCheckDisabledProps:{},t=qo(qo(qo({},e),Wo.dwKitCheckBoxProps),t);return e.error&&(t.status="danger"),t.style=[Wo.controls.dwKitCheckBox,t.style],z.a.createElement(Lo.CheckBox,Ho({},t,{checked:!!t.checked,children:e.label}))}d("collection-checkbox",function(e){return z.a.createElement(Ko,{name:e.props.colName,checked:e.props.checked,error:e.props.errorFlag,disabled:e.props.disabled,onChange:function(){e.me.handleChange(null,{name:e.props.colName,checked:!e.props.checked})}})}),d("collection-custom-control",function(e){var t=e.props.model;return e.props.createControl(e.props.parent,t["data-buildertype"],{model:t,data:e.props.row,errors:e.props.errorOnRow,parentItem:e.props.name,buildermode:e.props.buildermode,handleEvent:e.handleEvent,getAdditionalDataForControl:e.getAdditionalDataForControl,readOnly:e.props.readOnly,uploadUrl:e.props.uploadUrl,downloadUrl:e.props.downloadUrl,controlsToReplace:[],formData:e.props.data,adaptiveViewType:e.props.adaptiveViewType},e.props.controlBarParams)}),d("collection-date-time",function(e){return z.a.createElement(Ke,{name:e.props.colName,error:e.props.errorFlag,value:e.props.value,disabled:e.props.disabled,onChange:e.me.handleChange,type:e.props.type})});var Jo=function(e){var t=Object.assign({},e);return t.style=Object(Lo.useStyleSheet)(Lo.StyleService.create({st:t.style})).st,z.a.createElement(Io.View,t,e.children)};function $o(e){return($o="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function Yo(){return(Yo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Qo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Zo(e,t){return(Zo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ea(e){return(ea=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ta(t,r,e){var n=void 0;return e?(n=[],Array.isArray(t)&&t.forEach(function(t){var e=r.findIndex(function(e){return e.value===t});void 0===e&&(r.push({text:t,value:t}),e=r.length-1),n.push(new Lo.IndexPath(e))})):0<=(e=r.findIndex(function(e){return e.value===t}))&&(n=new Lo.IndexPath(e)),n}function ra(e,t,r){if(void 0!==e){if(r&&Array.isArray(e)){var n=[];return Array.isArray(e)&&e.forEach(function(e){0<=e.row&&n.push(t[e.row].value)}),n}return void 0!==e.row&&t[e.row]?t[e.row].value:t[e]?t[e].value||t[e].text||t[e]:void 0}}function na(t,r,e,n){var o,a;return void 0===t||Array.isArray(t)&&!t.length?a=function(e){return z.a.createElement(Lo.Text,{appearance:"hint"},n||aa)}:"string"==typeof t||"number"==typeof t?a=(o=r.find(function(e){return e.value===t}))?o.text:t:e&&(a=z.a.createElement(Io.View,null,z.a.createElement(Io.View,{style:Wo.controls.dropdown.labels.container},t.map(function(t){var e=r.find(function(e){return e.value===t});return e&&z.a.createElement(Jo,{style:Wo.controls.dropdown.labels.backdrop},z.a.createElement(Lo.Text,{children:e.text,style:Wo.controls.dropdown.labels.text}))})))),{value:a}}var oa=r(7),aa="",ia=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zo(e,t)}(i,z.a.Component);var e,r,n,a=(r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=ea(r);return function(e,t){if(t&&("object"===$o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Xo(e)}(this,n?(e=ea(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function i(e){var t;!function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),o=function(){var e=t.state.value;return Array.isArray(e)?!(null==e||!e.length):!!e},(n="hasSelectedValue")in(r=Xo(t=a.call(this,e)))?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o;var r=Array.isArray(e.options)?e.options:[],n=ta(e.value,r,e.multiple),o=ra(n,r,e.multiple);return t.state={ids:n,value:o,preview:na(o,r,e.multiple,e.placeholder)},t.onValueChange=e.onValueChange,e.onChange&&(t.onValueChange=e.onChange),t}return e=[{key:"onSelect",value:function(e){var t=(r=[this.state,this.props])[1],r=ra(e,t.options,t.multiple);this.props.onSelect&&this.props.onSelect(e),this.onValueChange(r),this.setState({value:r}),this.setState({ids:ta(r,t.options,t.multiple)}),this.setState({preview:na(r,t.options,t.multiple,t.placeholder)})}},{key:"onChangeText",value:function(t){var e=this.props.options;this.setState({preview:{value:t}}),this.setState({options:t?e.filter(function(e){return e.text&&e.text.toLowerCase().includes(t.toLowerCase())}):e})}},{key:"componentDidUpdate",value:function(){var e=[this.props,this.state],t=e[0],r=e[1];oa(r.value,t.value)&&oa(r.options,t.options)||(r=ra(e=ta(t.value,t.options,t.multiple),t.options,t.multiple),this.setState({options:t.options,value:t.value,ids:e,preview:na(r,t.options,t.multiple,t.placeholder)}))}},{key:"render",value:function(){var t=this,e=this.props,r=Io.StyleSheet.flatten([Wo.controls.dropdown.select,e.style]),n=this.hasSelectedValue()?{accessoryRight:function(e){return z.a.createElement(Io.TouchableOpacity,{onPress:function(){return t.onSelect(void 0)}},z.a.createElement(Lo.Icon,Yo({},e,{name:"close-outline"})))}}:{},o=e.search?Lo.Autocomplete:Lo.Select,a=e.search?Lo.AutocompleteItem:Lo.SelectItem;return z.a.createElement(o,Yo({status:this.props.error?"danger":void 0,label:e.label,style:r},this.props,n,{multiSelect:e.multiple,placeholder:e.placeholder||"",selectedIndex:this.state.ids},this.state.preview,{prompt:e.placeholder,onSelect:this.onSelect.bind(this),onChangeText:this.onChangeText.bind(this)}),this.props.options.map(function(e){var t=e.text||e.title||("string"==typeof e?e:"");return z.a.createElement(a,Yo({key:t,title:t},void 0))}))}},{key:"getMaterialCommunityIconsIcon",value:function(e){return"lightning"==e?"language-javascript":"browser"==e?"file-document-outline":e}}],Qo(i.prototype,e),i}();function la(){return(la=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function sa(e,t){if(!e)return t;switch(e){case"mini":return 8;case"tiny":return 12;case"small":return 16;case"medium":return 24;case"large":return 32;case"huge":return 48;default:return t}}function ca(e){e.className&&delete e.className}function ua(){return(ua=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function pa(e){return z.a.createElement(Lo.Text,ua({style:Io.StyleSheet.compose(e.style,{paddingBottom:4}),category:"label",appearance:"hint"},e))}function fa(e){return(fa="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function da(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ha(){return(ha=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ya(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ma(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ba(e,t,r){return t&&ma(e.prototype,t),r&&ma(e,r),e}function va(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ga(e,t)}function ga(e,t){return(ga=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wa(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Oa(r);return function(e,t){if(t&&("object"===fa(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}()}(this,n?(e=Oa(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function Oa(e){return(Oa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}d("collection-dropdown",function(t){var e=Wo.controlParams(t.props),r=Object.assign({},t.props);return r.style=[e.style,t.props.style],t.props.onChange&&(r.onValueChange=function(e){return t.props.onChange(null,{name:r.name,value:e})}),delete r.onChange,z.a.createElement(ia,la({name:t.props.colName,multiple:t.props.multiple,placeholder:t.props.placeholder,options:t.props.options,error:t.props.errorFlag,value:t.props.value,disabled:t.props.readOnly},r))}),d("label",function(e){var t={backgroundColor:"#e8e8e8",fontSize:sa(e.model.size,14),paddingLeft:10,paddingRight:10,paddingTop:7,paddingBottom:7,marginLeft:2,marginRight:2};return!0===e.model.basic&&(t.backgroundColor="#fff",t.borderColor="rgba(34,36,38,.15)",t.borderWidth=1,t.borderStyle="solid"),e.model.circular&&(t.borderRadius="500rem"),z.a.createElement(Io.View,{style:{flexDirection:"row"}},z.a.createElement(pa,ua({},e.propsControl,{style:Io.StyleSheet.compose(t,e.propsControl.style)}),e.props.content))});var Ca=Io.StyleSheet.create({tr:{flexDirection:"row",alignContent:"stretch",flexGrow:1},td:{flexDirection:"row",flexGrow:1},tHeader:{flexDirection:"row",alignContent:"stretch",flexGrow:1},tBody:{maxWidth:"100%"},table:{alignContent:"stretch"}}),Sa=z.a.createContext({style:{}}),Ea=function(){va(t,c.Component);var e=wa(t);function t(){return ya(this,t),e.apply(this,arguments)}return ba(t,[{key:"render",value:function(){var e=100/this.props.children.length+"%",e={style:Io.StyleSheet.compose({maxWidth:e},this.props.style)};return z.a.createElement(Sa.Provider,{value:e},z.a.createElement(Io.View,ha({},this.props,{style:Ca.tr})))}}]),t}(),ja=function(){va(t,c.Component);var e=wa(t);function t(){return ya(this,t),e.apply(this,arguments)}return ba(t,[{key:"render",value:function(){var t=this;return z.a.createElement(Sa.Consumer,null,function(e){return e=e.style,z.a.createElement(Io.View,ha({},t.props,{style:Io.StyleSheet.compose([Ca.td,e],t.props.style)}))})}}]),t}(),ka=function(){va(t,c.Component);var e=wa(t);function t(){return ya(this,t),e.apply(this,arguments)}return ba(t,[{key:"render",value:function(){return z.a.createElement(Io.View,ha({},this.props,{style:Ca.tbody}))}}]),t}(),Pa=function(){va(t,c.Component);var e=wa(t);function t(){return ya(this,t),e.apply(this,arguments)}return ba(t,[{key:"render",value:function(){return z.a.createElement(Io.View,ha({},this.props,{style:Ca.tHeader}))}}]),t}(),xa=function(){va(t,c.Component);var e=wa(t);function t(){return ya(this,t),e.apply(this,arguments)}return ba(t,[{key:"render",value:function(){return z.a.createElement(Io.View,ha({},this.props,{style:Ca.table}))}}]),t}();function _a(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e){if(e){if("string"==typeof e)return Ra(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Ra(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function Ra(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Da(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ta(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}da(xa,"Tr",Ea),da(xa,"Td",ja),da(xa,"THeader",Pa),da(xa,"TBody",ka);var Fa=(xc=[{key:"registerDroppable",value:function(e,t){var r=this.droppables.indexOf(e);if(0<=r)return this.droppables[r]=e,void(this.layouts[r]=t);this.droppables.push(e),this.layouts.push(t)}},{key:"unregisterDroppable",value:function(e){0<=(e=this.droppables.indexOf(e))&&(this.droppables.splice(e,1),this.layouts.splice(e,1))}},{key:"getZoneIndex",value:function(e){for(var t in this.layouts)if(this.layouts.hasOwnProperty(t)){var r=this.layouts[t];if(e.moveY>r.y&&e.moveY<r.y+r.height&&e.moveX>r.x&&e.moveX<r.x+r.width)return t}return null}},{key:"onBeginDrag",value:function(){var e,t=_a(this.droppables);try{for(t.s();!(e=t.n()).done;)e.value.onBeginDrag()}catch(e){t.e(e)}finally{t.f()}}},{key:"onEndDrag",value:function(e,t){var r,n=_a(this.droppables);try{for(n.s();!(r=n.n()).done;)r.value.onEndDrag()}catch(e){n.e(e)}finally{n.f()}null!==(e=this.getZoneIndex(e))&&this.droppables[e].onDrop(t),this.activeIndex=null}},{key:"onMove",value:function(e){(e=this.getZoneIndex(e))!==this.activeIndex&&(null!==this.activeIndex&&this.droppables[this.activeIndex].onLeave(),null!==e&&this.droppables[e].onEnter(),this.activeIndex=e)}},{key:"hideZones",value:function(){var e,t=_a(this.droppables);try{for(t.s();!(e=t.n()).done;)e.value.hide()}catch(e){t.e(e)}finally{t.f()}}},{key:"showZones",value:function(){var e,t=_a(this.droppables);try{for(t.s();!(e=t.n()).done;)e.value.show()}catch(e){t.e(e)}finally{t.f()}}}],Da(Ia.prototype,xc),Ia),Aa=z.a.createContext({setComponent:function(e){}});function Ia(){!function(e){if(!(e instanceof Ia))throw new TypeError("Cannot call a class as a function")}(this),Ta(this,"droppables",[]),Ta(this,"layouts",[]),Ta(this,"activeIndex",null)}function La(e){return(La="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function Na(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ba(e,t){return(Ba=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Va(e){return(Va=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ma=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ba(e,t)}(o,c.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Va(r);return function(e,t){if(t&&("object"===La(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}()}(this,n?(e=Va(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function o(e){return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e)).deltaX=0,e.deltaY=0,e}return Na(o.prototype,[{key:"onLayout",value:function(e){this.deltaX=this.props.pageX-e.nativeEvent.layout.x,this.deltaY=this.props.pageY-e.nativeEvent.layout.y,this.forceUpdate()}},{key:"render",value:function(){var e={transform:this.props.pan.getTranslateTransform(),zIndex:1e3,position:"absolute",left:this.props.pageX+this.deltaX,top:this.props.pageY+this.deltaY};return z.a.createElement(Io.Animated.View,{style:e,onLayout:this.onLayout.bind(this)},this.props.children)}}]),o}();function Ua(e){return(Ua="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function za(){return(za=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Wa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ha(e,t){return(Ha=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ga(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qa(e){return(qa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ka=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ha(e,t)}(o,c.Component);var e,r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=qa(r);return function(e,t){if(t&&("object"===Ua(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ga(e)}(this,n?(e=qa(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function o(e){return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e)).state={pan:new Io.Animated.ValueXY},e.dragging=!1,e.panResponder=Io.PanResponder.create({onStartShouldSetPanResponder:function(){return!0},onPanResponderGrant:e.onBeginDrag.bind(Ga(e)),onPanResponderMove:e.onMove.bind(Ga(e)),onPanResponderRelease:e.onEndDrag.bind(Ga(e))}),e}return e=[{key:"onMove",value:function(e,t){return this.props.context.onMove(t),Io.Animated.event([null,{dx:this.state.pan.x,dy:this.state.pan.y}])(e,t)}},{key:"onBeginDrag",value:function(){var i=this;return!(!this.setDraggableComponent||!this.instance||(this.instance.measure(function(e,t,r,n,o,a){i.dragging=!0,i.props.context.onBeginDrag(),a=z.a.createElement(Ma,za({},i.props,{pageX:o,pageY:a,pan:i.state.pan})),i.setDraggableComponent(a),i.forceUpdate()}),this.props.onBeginDrag&&this.props.onBeginDrag(),0))}},{key:"onEndDrag",value:function(e,t){this.dragging=!1,this.props.context.onEndDrag(t,this),this.props.onEndDrag&&this.props.onEndDrag(),this.setDraggableComponent(null),Io.Animated.spring(this.state.pan,{toValue:{x:0,y:0},friction:5,useNativeDriver:!1}).start(),this.forceUpdate()}},{key:"getAnimatedView",value:function(){var e=[{transform:this.state.pan.getTranslateTransform()}];return this.dragging&&e.push({zIndex:1e3,position:"absolute"}),z.a.createElement(Io.Animated.View,za({},this.panResponder.panHandlers,{style:e}),this.getChildrenView())}},{key:"getChildrenView",value:function(){return this.props.children}},{key:"draw",value:function(e){return e&&(this.setDraggableComponent=e),this.dragging?this.getChildrenView():this.getAnimatedView()}},{key:"render",value:function(){var t=this;return z.a.createElement(Io.TouchableOpacity,{ref:function(e){t.instance=e}},z.a.createElement(Aa.Consumer,null,function(e){return e=e.setComponent,t.draw(e)}))}}],Wa(o.prototype,e),o}();function Ja(e){return(Ja="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function $a(){return($a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ya(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qa(e,t){return(Qa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Za(e){return(Za=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Xa=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qa(e,t)}(o,c.Component);var e,r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Za(r);return function(e,t){if(t&&("object"===Ja(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}()}(this,n?(e=Za(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function o(e){return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e)).state={hovered:!1,waitForEntity:!1},e}return e=[{key:"componentWillUnmount",value:function(){this.props.context.unregisterDroppable(this)}},{key:"render",value:function(){var t=this;return z.a.createElement(Io.View,$a({},this.props,{onLayout:this.setDropZoneValues.bind(this),ref:function(e){return t.instance=e}}))}},{key:"setDropZoneValues",value:function(e){this.props.context.registerDroppable(this,e.nativeEvent.layout)}},{key:"measure",value:function(){var i=this;this.instance&&this.instance.measure(function(e,t,r,n,o,a){i.props.context.registerDroppable(i,{x:o,y:a,width:r,height:n})})}},{key:"onEnter",value:function(){this.setState({hovered:!0}),this.props.onEnter&&this.props.onEnter()}},{key:"onLeave",value:function(){this.setState({hovered:!1}),this.props.onLeave&&this.props.onLeave()}},{key:"onDrop",value:function(e){this.setState({hovered:!1}),this.props.onDrop&&this.props.onDrop(e)}},{key:"onBeginDrag",value:function(){this.measure(),this.props.onBeginDrag&&this.props.onBeginDrag()}},{key:"onEndDrag",value:function(){this.props.onEndDrag&&this.props.onEndDrag()}},{key:"hide",value:function(){this.props.onHide&&this.props.onHide()}},{key:"show",value:function(){this.props.onShow&&this.props.onShow()}}],Ya(o.prototype,e),o}();function ei(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function ti(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ei(Object(r),!0).forEach(function(e){pi(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ei(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function ri(){return(ri=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ni(e){return(ni="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function oi(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ai(e,t)}function ai(e,t){return(ai=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ii(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=li(r);return function(e,t){if(t&&("object"===ni(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}()}(this,n?(e=li(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function li(e){return(li=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function si(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ci(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ui(e,t,r){return t&&ci(e.prototype,t),r&&ci(e,r),e}function pi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var fi=(ui(yi,[{key:"preventDefault",value:function(){}}]),yi),di=function(){oi(r,c.Component);var t=ii(r);function r(e){return si(this,r),(e=t.call(this,e)).state={active:!1,hover:!1,visible:!0},e}return ui(r,[{key:"onBeginDrag",value:function(){this.setState({active:!0,hovered:!1})}},{key:"onEndDrag",value:function(){this.setState({active:!1,hovered:!1})}},{key:"onEnter",value:function(){this.setState({hovered:!0})}},{key:"onLeave",value:function(){this.setState({hovered:!1})}},{key:"render",value:function(){var e=this.state.active?Wo.collectionEditor.droppable.activeStyle:{},t=this.state.hovered?Wo.collectionEditor.droppable.hoverStyle:{};return z.a.createElement(Xa,{context:this.props.context,onDrop:this.props.onDrop,onBeginDrag:this.onBeginDrag.bind(this),onEndDrag:this.onEndDrag.bind(this),onEnter:this.onEnter.bind(this),onLeave:this.onLeave.bind(this),style:{marginBottom:5,justifyContent:"center"}},z.a.createElement(Io.View,{style:[Wo.collectionEditor.droppable.defaultStyle,e,t]},this.props.children))}}]),r}(),hi=function(){oi(n,c.Component);var r=ii(n);function n(e){var t;return si(this,n),(t=r.call(this,e)).state={context:new Fa},e=e.options.props.columns,t.defaultHeaderStyle={maxWidth:void 0},t.hasNestedCollectionEditor=e.some(function(e){return e.customControl&&"CollectionEditor"==e.customControl.name}),t}return ui(n,[{key:"isDraggable",value:function(){var e=this.props.options;return!e.props.readOnly&&Boolean(e.props.draggable)}},{key:"getDragColumn",value:function(e,t){var r=this;if(this.isDraggable()){var n=this.props.options;return z.a.createElement(di,{context:this.state.context,onDrop:n.onDrop.bind(n.me,t,e,new fi)},z.a.createElement(Io.View,{key:"celldrag"},z.a.createElement(Ka,{context:this.state.context,onBeginDrag:n.onDragStart.bind(n.me,t,e,new fi),onEndDrag:function(){n.onDragEnd(t,e),r.forceUpdate()}},z.a.createElement(Io.View,{style:Wo.collectionEditor.dragIcon}))))}}},{key:"renderHeaderRow",value:function(e){var n=this,t=this.props.options,o=[],a=0,r=!0!==t.props.disableAdd,i=!0!==t.props.disableCopy,l=!0!==t.props.disableDelete;return e.forEach(function(e){var t;"object"===ni(e)?(t=e.name,e.width):t=e,he(t)&&2<=t.length&&(t=t.charAt(0).toUpperCase()+t.slice(1));var r=0==a&&n.isDraggable()?{paddingLeft:15}:{};o.push(z.a.createElement(xa.Td,{key:a,style:[n.defaultHeaderStyle,e.style,r]},z.a.createElement(pa,{style:{fontWeight:"700"}},t))),a++}),!t.props.readOnly&&(r||i||l)&&(e=!!t.props.hierarchical*!t.props.disableAdd*20+20*!t.props.disableCopy+20*!t.props.disableDelete,i="Add",he(l=function(){if(window.DWKitAdminLang&&window.DWKitAdminLang.collectioneditor)return window.DWKitAdminLang.collectioneditor}())&&(i=l.add),o.push(z.a.createElement(xa.Td,{style:{maxWidth:e}},r&&z.a.createElement(Io.TouchableOpacity,{onPress:function(){t.btnAdd.apply(t,arguments),n.forceUpdate()}},z.a.createElement(pa,Wo.collectionEditor.addLinkProps,i))))),z.a.createElement(xa.Tr,{key:"headertr"},o)}},{key:"renderRows",value:function(h,e,r,t,y,n){var m=this,b=this.props.options,v=b.me,o=[];if(null==e)return o;var g=e;de(y)&&(y=0),void 0===n&&(n=""),b.props.filter&&(g=b.getFilteredItems(g,b.props.filter));for(var a=!0!==b.props.disableAdd,i=!0!==b.props.disableCopy,l=!0!==b.props.disableDelete,w=0;w<g.length;w++)if(void 0!==b.props.childrenField||!b.props.hierarchical||g[w][b.props.parentIdField]==t){var s,O=this.getDragColumn(g,w),C=void 0,c=void 0;b.props.hierarchical&&(f=void 0,u=n+String(w+"_"),ye(b.props.parentIdField)?ye(s=g[w][b.props.idField]||g[w].__id)&&0<(c=this.renderRows(h,e,r,s,y+1,u)).length&&(de(s=b.state.expanded[n+w])||s?f=z.a.createElement(Io.TouchableOpacity,{onPress:b.onExpand.bind(b.me,n+w,!1)},z.a.createElement(Io.Image,{source:{uri:"/images/collapse.svg"},style:Wo.collectionEditor.image.style})):(f=z.a.createElement(Io.TouchableOpacity,{onPress:b.onExpand.bind(b.me,n+w,!0)},z.a.createElement(Io.Image,{source:{uri:"/images/expand.svg"},style:Wo.collectionEditor.image.style})),c=void 0)):Array.isArray(g[w][b.props.childrenField])&&0<g[w][b.props.childrenField].length?0<(c=this.renderRows(h,g[w][b.props.childrenField],r,void 0,y+1,u)).length&&(de(p=b.state.expanded[n+w])||p?f=z.a.createElement(Io.TouchableOpacity,{onPress:b.onExpand.bind(b.me,n+w,!1)},z.a.createElement(Io.Image,{source:{uri:"/images/collapse.svg"},style:Wo.collectionEditor.image.style})):(f=z.a.createElement(Io.TouchableOpacity,{onPress:b.onExpand.bind(b.me,n+w,!0)},z.a.createElement(Io.Image,{source:{uri:"/images/expand.svg"},style:Wo.collectionEditor.image.style})),c=void 0)):f=z.a.createElement(Io.Image,{source:{uri:"/images/collapse.svg"},style:Wo.collectionEditor.image.style}),C=z.a.createElement(Io.View,null,f));var S=[],E=void 0;Array.isArray(r)&&0<r.length&&(void 0!==r[0].__id&&null!==r[0].__id?function(){var t=g[w].__id;void 0!==t&&null!=t&&(E=r.find(function(e){return e.__id===t}))}():E=r[w]);for(var u,p,f,d=0;d<h.length;d++)!function(e){var r=void 0,t=b.props.readOnly?"":"input",n=void 0,o=void 0;"object"===ni(h[e])?(r=h[e].key,t=h[e].control,n=h[e].customControl,Array.isArray(h[e].options)&&(o=h[e].options)):r=h[e];var a=void 0;he(E)&&(a=Boolean(E[r]));var i,l,s,c,u,p=e<h.length-1||!b.props.readOnly?ti({},Wo.collectionEditor.column.notLast):{},f=void 0;"checkbox"===t?f=z.a.createElement(j,{key:w+"_"+e,row:g[w],handleChange:b.handleChange,colName:r,checked:g[w][r],errorFlag:a,disabled:b.props.readOnly}):"span"===t?(p.verticalAlign="middle",f=z.a.createElement(Io.Text,{key:w+"_"+e,name:r},g[w][r])):"number"===t?(i=null===g[w][r]||void 0===g[w][r]?"":g[w][r],i={name:r,keyboardType:"numeric",error:a,value:i,disabled:b.props.readOnly},f=z.a.createElement(U,{key:w+"_"+e,row:g[w],inputProps:i,handleChange:b.handleChange})):"date"===t?(i=null===g[w][r]||void 0===g[w][r]?"":g[w][r],f=z.a.createElement(D,{key:w+"_"+e,row:g[w],colName:r,value:i,errorFlag:a,disabled:b.props.readOnly,handleChange:b.handleChange,type:"date"})):"datetime"===t?(l=null===g[w][r]||void 0===g[w][r]?"":g[w][r],f=z.a.createElement(D,{key:w+"_"+e,row:g[w],colName:r,value:l,errorFlag:a,disabled:b.props.readOnly,handleChange:b.handleChange,type:"datetime"})):"dropdown"===t?(l=null==g[w][r]?h[e].multiple?[]:"":g[w][r],f=z.a.createElement(L,{key:w+"_"+e,row:g[w],colName:r,multiple:h[e].multiple,placeholder:h[e].placeholder,errorFlag:a,value:l,options:o,disabled:b.props.readOnly,handleChange:b.handleChange})):"file"===t||"file2"===t?(o=null===g[w][r]||void 0===g[w][r]?"":g[w][r],f=z.a.createElement(J,{key:w+"_"+e,row:g[w],colName:r,errorFlag:a,value:o,disabled:b.props.readOnly,handleChange:b.handleChange,downloadUrl:b.props.downloadUrl,uploadUrl:b.props.uploadUrl,control:t,additionalData:h[e].additionalData})):"camera"===t?(s=null===g[w][r]||void 0===g[w][r]?"":g[w][r],f=z.a.createElement(ee,{key:w+"_"+e,row:g[w],colName:r,errorFlag:a,value:s,disabled:b.props.readOnly,handleChange:b.handleChange,downloadUrl:b.props.downloadUrl,uploadUrl:b.props.uploadUrl,control:t,showPreview:!0,getAdditionalDataForControl:b.props.getAdditionalDataForControl,additionalData:h[e].additionalData})):"signature"===t?(s=null===g[w][r]||void 0===g[w][r]?"":g[w][r],f=z.a.createElement(ae,{key:w+"_"+e,row:g[w],colName:r,errorFlag:a,value:s,disabled:b.props.readOnly,handleChange:b.handleChange,downloadUrl:b.props.downloadUrl,uploadUrl:b.props.uploadUrl,control:t,showPreview:!0,getAdditionalDataForControl:b.props.getAdditionalDataForControl,additionalData:h[e].additionalData})):"custom"===t?n?(u=g[w][r]||"",t={},c=ti(ti({},t=h[e].customControlGetPropsFunc?h[e].customControlGetPropsFunc(g[w]):t),{},{key:w+"_"+e,name:r,error:a,value:u,colName:r,row:g[w],readOnly:b.props.readOnly,onChange:function(e,t){v.handleChange(c.row,e,t=t||{name:r,value:e})}}),f=z.a.createElement(n,c)):he(b.props.placeholders)&&Array.isArray(b.props.placeholders[r])&&0<b.props.placeholders[r].length?(u=b.props.placeholders[r][0])&&(n=g[w],void 0!==u.propertyName&&""!==u.propertyName||(u.propertyName=r),f=z.a.createElement(k,{model:u,parent:b.me,row:n,errorOnRow:E,name:b.props.name,buildermode:b.props.buildermode,handleChange:b.handleChange,handleEvent:b.props.handleEvent,getAdditionalDataForControl:b.props.getAdditionalDataForControl,readOnly:b.props.readOnly,uploadUrl:b.props.uploadUrl,downloadUrl:b.props.downloadUrl,data:b.props.data,adaptiveViewType:b.props.adaptiveViewType,controlBarParams:b.props.controlBarParams,createControl:b.props.createControl})):b.props.buildermode&&b.props.createBuilderDropzone&&(f=b.props.createBuilderDropzone(b.props.name,b.props.name,void 0,r,r)):(d=null===g[w][r]||void 0===g[w][r]?"":g[w][r],d={name:r,dataList:h[e].dataList,error:a,value:d,disabled:b.props.readOnly},f=z.a.createElement(U,{key:w+"_"+e,row:g[w],inputProps:d,handleChange:b.handleChange}));var d=h[e].style;p.maxWidth=m.defaultHeaderStyle.maxWidth,m.hasNestedCollectionEditor&&(p.paddingTop=40),0===e?(y&&(p.paddingLeft=String(15*y+5)+"px"),S.push(z.a.createElement(xa.Td,{key:w+"_"+e+"td",style:[p,d]},C,O,f))):S.push(z.a.createElement(xa.Td,{key:w+"_"+e+"td",style:[p,d]},f))}(d);!b.props.readOnly&&(a||i||l)&&(u=function(e){return z.a.createElement(Io.TouchableOpacity,{onPress:function(){e.handler(),m.forceUpdate()}},z.a.createElement(Lo.Icon,ri({},e,{fill:"#000000",style:Wo.collectionEditor.icon})))},p=[Wo.collectionEditor.editButtonsColumn,this.hasNestedCollectionEditor?{paddingTop:30}:{}],f=15*i+15*l,b.props.hierarchical?(f+=15*a,S.push(z.a.createElement(xa.Td,{key:"celldelete",style:{width:f}},z.a.createElement(Io.View,{style:p},a&&z.a.createElement(u,{key:"addchild",name:"plus-outline",handler:b.btnAddChild.bind(b.me,w,g)}),i&&z.a.createElement(u,{key:"copy",name:"copy-outline",handler:b.btnCopy.bind(b.me,w,g)}),l&&z.a.createElement(u,{key:"delete",name:"close-outline",handler:b.btnDelete.bind(b.me,w,g)}))))):S.push(z.a.createElement(xa.Td,{key:"celldelete",style:{width:f}},z.a.createElement(Io.View,{style:p},i&&z.a.createElement(u,{key:"copy",name:"copy-outline",handler:b.btnCopy.bind(b.me,w,void 0)}),l&&z.a.createElement(u,{key:"delete",name:"close-outline",handler:b.btnDelete.bind(b.me,w,void 0)}))))),o.push(z.a.createElement(xa.Tr,{key:n+w,"data-rowindex":w},S)),o=o.concat(c)}return o}},{key:"render",value:function(){var e=this.props.options,t=e.props.columns,r=e.props.value,n=e.props.error,o=t.length,a=!0!==this.props.disableAdd,i=!0!==this.props.disableCopy,l=!0!==this.props.disableDelete;return!e.props.readOnly&&(a||i||l)&&o++,this.defaultHeaderStyle={maxWidth:100/o+"%"},e.props.collapseAll&&Array.isArray(r)&&e.applyCollapseAll(r),t&&t.length?(r={style:[Wo.collectionEditor.container,e.props.style],onBlur:e.props.onBlur,onClick:e.props.onClick,onFocus:e.props.onFocus,onMouseEnter:e.props.onMouseEnter,onMouseLeave:e.props.onMouseLeave},z.a.createElement(Io.View,r,z.a.createElement(pa,null,e.props.label),z.a.createElement(xa,null,z.a.createElement(xa.THeader,null,this.renderHeaderRow(t)),z.a.createElement(xa.TBody,null,this.renderRows(t,e.state.data,n))))):z.a.createElement(Io.View,null,z.a.createElement(Io.Text,null,"Fill columns property!"))}}]),n}();function yi(){si(this,yi),pi(this,"dataTransfer",{setData:function(){}})}d("collection-editor",function(e){return z.a.createElement(hi,{options:e})});var mi=z.a.createContext({formWidthStyle:null}),bi=z.a.createContext({formSizeStyle:null});function vi(e){return(vi="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function gi(){return(gi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function wi(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Oi(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?wi(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):wi(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function Ci(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Si(e,t){return(Si=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ei(e){return(Ei=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ji=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Si(e,t)}(o,c.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Ei(r);return function(e,t){if(t&&("object"===vi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}()}(this,n?(e=Ei(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function o(e){return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e)).state={hideResults:!0},e}return Ci(o.prototype,[{key:"render",value:function(){var t=this,e=this.props.data,r=this.props.dataList;return z.a.createElement(ia,{options:r,value:e,hideResults:this.state.hideResults,onFocus:function(){return t.setState({hideResults:!1})},onBlur:function(){return t.setState({hideResults:!0})},search:!0,onValueChange:this.props.onChangeText,onSelect:function(e){t.props.onItemPress(r[e])}})}}]),o}();d("collection-input",function(t){function r(e){t.me.handleChange(null,{name:t.props.inputProps.name,value:e})}return z.a.createElement(mi.Consumer,null,function(e){return e.formWidthStyle,z.a.createElement(bi.Consumer,null,function(e){return e.formSize,e=Oi(Oi({},t.props.inputProps),{},{style:Wo.collectionEditor.input}),Array.isArray(e.dataList)?z.a.createElement(ji,{data:e.value,dataList:e.dataList,onChangeText:r,onItemPress:r}):z.a.createElement(Lo.Input,gi({},e,{onChangeText:r}))})})}),d("collection-upload",function(e){return z.a.createElement(An,{name:e.props.colName,error:e.props.errorFlag,value:e.props.value,readOnly:e.props.readOnly,onChange:e.me.handleChange,downloadUrl:e.props.downloadUrl,uploadUrl:e.props.uploadUrl,additionalData:e.props.additionalData,me:e.me,isForm:!0,hideClearButton:"file2"===e.props.control})});var ki=r(3);function Pi(e){return(Pi="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function xi(){return(xi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ri(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Di(e,t,r){return t&&Ri(e.prototype,t),r&&Ri(e,r),e}function Ti(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fi(e,t)}function Fi(e,t){return(Fi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ai(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Ii(r);return function(e,t){if(t&&("object"===Pi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}()}(this,n?(e=Ii(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function Ii(e){return(Ii=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Li=function(){Ti(t,c.Component);var e=Ai(t);function t(){return _i(this,t),e.apply(this,arguments)}return Di(t,[{key:"render",value:function(){var e={paddingHorizontal:4};return this.props.icon?z.a.createElement(ki.Icon,xi({},this.props,{name:this.props.icon,type:"font-awesome",containerStyle:[this.props.style,e]},Wo.collectionEditor.iconProps)):z.a.createElement(ki.Text,xi({},this.props,{style:[this.props.style,e]}),"/")}}]),t}(),Ni=function(){Ti(t,c.Component);var e=Ai(t);function t(){return _i(this,t),e.apply(this,arguments)}return Di(t,[{key:"render",value:function(){var t=this,e=!0===this.props.active?{fontWeight:"600",color:"#1e70bf"}:{color:"#1e70bf"};return z.a.createElement(Io.TouchableOpacity,{onPress:function(e){return t.props.onClick(e)}},z.a.createElement(ki.Text,xi({},this.props,{style:[this.props.style,e]})))}}]),t}();d("breadcrumb",function(e){for(var t=[],r=0;r<e.children.length;r++){var n=e.children[r];n.isDivider?t.push(z.a.createElement(Li,n.dividerProps)):t.push(z.a.createElement(Ni,n.childProps,n.text))}return z.a.createElement(Io.View,xi({},e.propsControl,{style:[e.propsControl.style,{flexDirection:"row",alignItems:"center"}]}),t)});var Bi=new Fa;function Vi(e){return(Vi="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function Mi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ui(e,t){return(Ui=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zi(e){return(zi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Wi=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ui(e,t)}(i,c.Component);var e,t,r,n,o,a=(n=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=zi(n);return function(e,t){if(t&&("object"===Vi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}()}(this,o?(e=zi(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function i(e){return function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),(e=a.call(this,e)).state={active:!1,hover:!1,visible:!0,modalVisible:!1},e}return r=[{key:"attr",value:function(e){if(!de(e))return{value:e}}}],t=[{key:"onBeginDrag",value:function(){this.setState({active:!0,hovered:!1})}},{key:"onEndDrag",value:function(){this.setState({active:!1,hovered:!1})}},{key:"onEnter",value:function(){this.setState({hovered:!0})}},{key:"onLeave",value:function(){this.setState({hovered:!1})}},{key:"onDrop",value:function(e){var t={attributes:{name:i.attr(this.props.name),elementafter:i.attr(this.props.elementAfter),elementtoinsert:i.attr(this.props.elementToInsert),placeholderkey:i.attr(this.props.placeholderKey)}};e.props.onDrop&&e.props.onDrop(this,t)}},{key:"onHide",value:function(){this.setState({visible:!1})}},{key:"onShow",value:function(){this.setState({visible:!0})}},{key:"showModal",value:function(){this.props.options.onChangeDZ(null,{value:""}),this.setState({modalVisible:!0})}},{key:"save",value:function(){this.props.options.onClosePopup(),this.setState({modalVisible:!1})}},{key:"cancel",value:function(){this.setState({modalVisible:!1})}},{key:"drawModal",value:function(e){var t=this;return z.a.createElement(Lo.Tooltip,{appearance:"white",visible:this.state.modalVisible,anchor:e,style:Wo.controls.dropzonePopover.container,onBackdropPress:this.save.bind(this)},z.a.createElement(Io.View,null,z.a.createElement(ki.Input,{multiline:!0,numberOfLines:4,onChangeText:function(e){return t.props.options.onChangeDZ(null,{value:e})},placeholder:"Insert here a model control \n(for copy - double click by control title)"})))}},{key:"render",value:function(){var t=this,r=this.state.active?Wo.dwkitFormBuilderZoneActive:{},n=this.state.hovered?Wo.dwkitFormBuilderZoneHover:{},o=!0===this.state.visible?{}:{display:"none"},a=Wo.dwkitFormBuilderZoneText;return z.a.createElement(Io.TouchableOpacity,{onPress:function(){return t.showModal()}},z.a.createElement(mi.Consumer,null,function(e){return e.isColumn&&(o=[o,Wo.grouped.inColumn.dropzone.container],a=[a,Wo.grouped.inColumn.dropzone.text]),z.a.createElement(Xa,{name:t.props.name,key:t.props.keyValue,elementafter:t.props.elementAfter,elementtoinsert:t.props.elementToInsert,placeholderkey:t.props.placeholderKey,style:[Wo.dwkitFormBuilderZone,o,r,n],onDrop:t.onDrop.bind(t),onBeginDrag:t.onBeginDrag.bind(t),onEndDrag:t.onEndDrag.bind(t),onEnter:t.onEnter.bind(t),onLeave:t.onLeave.bind(t),onHide:t.onHide.bind(t),onShow:t.onShow.bind(t),context:Bi,onPress:t.showModal.bind(t)},z.a.createElement(Io.View,null,t.drawModal(function(){return z.a.createElement(ki.Text,{style:a},t.props.text)})))}))}}],Mi((e=i).prototype,t),Mi(e,r),i}();function Hi(){return(Hi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Gi(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}d("builder-dropzone",function(e){return z.a.createElement(Wi,{name:e.key,key:e.key+"_bdz",keyValue:e.key,elementAfter:e.elementAfter,elementToInsert:e.elementToInsert,placeholderKey:e.placeholderKey,text:e.text,options:e})}),d("button",function(t){var e=Wo.controlParams(t.propsControl),e=function(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Gi(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Gi(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}({onPress:t.propsControl.onClick,children:t.propsControl.content,style:[Wo.baseMargin,{display:"flex"},t.propsControl.style,e.style]},e.props);return t.propsControl.icon&&(e.accessoryLeft=function(e){return z.a.createElement(Lo.Icon,Hi({name:t.propsControl.icon},e))}),z.a.createElement(Lo.Button,e)});var qi=r(9);function Ki(e){var r=e.children,t=e.style,n=e.notStretchItems;return z.a.createElement(Io.View,{style:[{flexDirection:"row"},t]},r.map(function(e,t){return e?z.a.cloneElement(e,{style:[t<r.length-1&&Wo.layout.elementInRow,{flexGrow:n?0:1},e.props.style]}):null}))}function Ji(e){var r=e.children,t=e.style,n=e.notStretchItems;return z.a.createElement(Io.View,{style:[{flexDirection:"column"},t]},r.map(function(e,t){return e?z.a.cloneElement(e,{style:[t<r.length-1&&Wo.layout.elementInColumn,{flexGrow:n?0:1},e.props.style]}):null}))}function $i(e){return z.a.createElement(Io.View,e,e.children,e.isLoading&&z.a.createElement(Yi,null))}var Yi=function(e){return z.a.createElement(Io.View,{style:Qi.container},z.a.createElement(Io.View,{style:Qi.spinnerBox},z.a.createElement(Lo.Spinner,e)))},Qi={container:{width:"100%",height:"100%",alignItems:"center",justifyContent:"center",position:"absolute",backgroundColor:"white",opacity:.6},spinnerBox:{padding:2,backgroundColor:"white",borderRadius:28}};function Zi(e){return(Zi="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function Xi(){return(Xi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function el(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tl(e,t){return(tl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nl(e){return(nl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ol(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var al=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tl(e,t)}(o,z.a.Component);var e,r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=nl(r);return function(e,t){if(t&&("object"===Zi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return rl(e)}(this,n?(e=nl(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function o(e){var n;return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),ol(rl(n=t.call(this,e)),"labels",function(){return n.props.compact?{}:{open:n.props.openLabel||"Open",clear:n.props.clearLabel||"Clear"}}),ol(rl(n),"load",function(){var e=rl(n).props;e.value&&e.getAdditionalDataForControl(rl(n),{type:"fetch",fetchUrl:e.downloadUrl+e.value,fetchOptions:{method:"get"},fetchResponseType:"blob"},function(e){var t=new FileReader;t.readAsDataURL(e),t.onload=function(){n.setState({image:{uri:t.result}}),n.setState({loading:!1})}})}),ol(rl(n),"clear",function(){n.props.clear(),n.setState({image:null})}),ol(rl(n),"openFullscreen",function(){var e=rl(n),t=e.state;e.props.value&&!t.image&&(n.setState({loading:!0}),n.load()),n.setState({fullscreenView:!0})}),ol(rl(n),"fullscreenView",function(){var e=rl(n).state,t=(r=Io.Dimensions.get("window")).width,r=r.height;return z.a.createElement(Io.Modal,null,z.a.createElement($i,{isLoading:e.loading},z.a.createElement(Io.Image,{source:e.image,resizeMode:"contain",style:{backgroundColor:"white",width:t,height:r}}),z.a.createElement(Lo.Button,{onPress:function(){return n.setState({fullscreenView:!1})},accessoryLeft:function(e){return z.a.createElement(Lo.Icon,Xi({},e,{name:"close-outline"}))},appearance:"outline",status:"basic",style:ll})))}),ol(rl(n),"preview",function(){var e=(t=rl(n)).props,t=t.state;return e.showPreview&&z.a.createElement($i,{isLoading:t.loading},z.a.createElement(Io.TouchableOpacity,{onPress:n.openFullscreen},e.compact?z.a.createElement(Lo.Avatar,{source:t.image,shape:"rounded"}):z.a.createElement(Io.Image,{source:t.image,resizeMode:"contain",style:il})))}),n.state={image:null,fullscreenView:!1,loading:!!e.showPreview},e.value&&e.showPreview&&n.load(),n}return e=[{key:"componentDidUpdate",value:function(e){var t=this.props;t.value!==e.value&&(t.value?t.showPreview&&(this.setState({loading:!0}),this.load()):this.setState({image:null}))}},{key:"render",value:function(){var e=this.props,t=this.state,r=this.labels,n=e.showPreview&&!e.compact?Ji:Ki;return z.a.createElement(Io.View,null,z.a.createElement(Io.View,{style:{flexDirection:e.compact?"row":"column"}},t.fullscreenView&&this.fullscreenView(),z.a.createElement(n,{status:"basic",size:"medium",style:{flexGrow:1}},e.showPreview?this.preview():z.a.createElement(Lo.Button,{children:r().open,onPress:this.openFullscreen,status:"basic",size:"medium",accessoryLeft:function(e){return z.a.createElement(Lo.Icon,Xi({},e,{name:"maximize-outline"}))}}),z.a.createElement(Lo.Button,{onPress:this.clear,children:r().clear,accessoryLeft:function(e){return z.a.createElement(Lo.Icon,Xi({},e,{name:"close-outline"}))},status:"basic",size:"medium"}))))}}],el(o.prototype,e),o}(),il={flex:1,height:Io.Dimensions.get("window").height/2,backgroundColor:"white"},ll={position:"absolute",width:40,height:40,borderRadius:40,top:10,right:20};"ios"===Io.Platform.OS&&Io.NativeModules.StatusBarManager.getHeight(function(e){ll.top=10+e.height});var sl=al;function cl(e){return(cl="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function ul(){return(ul=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function pl(e,t,r,n,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return r(e),0}l.done?t(s):Promise.resolve(s).then(n,o)}function fl(l){return function(){var e=this,i=arguments;return new Promise(function(t,r){var n=l.apply(e,i);function o(e){pl(n,t,r,o,a,"next",e)}function a(e){pl(n,t,r,o,a,"throw",e)}o(void 0)})}}function dl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function hl(e,t){return(hl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ml(e){return(ml=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var vl=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hl(e,t)}(o,z.a.Component);var e,r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=ml(r);return function(e,t){if(t&&("object"===cl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return yl(e)}(this,n?(e=ml(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function o(e){var n;return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),bl(yl(n=t.call(this,e)),"labels",function(){return n.props.compact?{}:{takeShot:n.props.shotLabel||"Take shot",getFromGallery:n.props.galleryLabel||"Get from gallery"}}),bl(yl(n),"getFromCamera",fl(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("web"===Io.Platform.OS)return alert("The Camera control works only on mobile devices"),e.abrupt("return");e.next=5;break;case 5:return e.next=7,qi.requestCameraPermissionsAsync();case 7:if(!1===e.sent.granted)return alert("Permission to access camera roll is required!"),e.abrupt("return");e.next=11;break;case 11:return e.next=13,qi.launchCameraAsync({mediaTypes:qi.MediaTypeOptions.Images,allowsEditing:!0,quality:n.props.compression||.75});case 13:(t=e.sent).cancelled||n.upload(t.uri);case 15:case"end":return e.stop()}},e)}))),bl(yl(n),"getFromGallery",fl(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("web"===Io.Platform.OS)return alert("Camera opens only on real mobile device"),e.abrupt("return");e.next=5;break;case 5:return e.next=7,qi.requestCameraRollPermissionsAsync();case 7:if(!1===e.sent.granted)return alert("Permission to access camera roll is required!"),e.abrupt("return");e.next=11;break;case 11:return e.next=13,qi.launchImageLibraryAsync({mediaTypes:qi.MediaTypeOptions.Images,allowsEditing:!0,quality:n.props.compression||.75});case 13:(t=e.sent).cancelled||n.upload(t.uri);case 15:case"end":return e.stop()}},e)}))),bl(yl(n),"upload",function(e){n.setState({loading:!0}),e="android"===Io.Platform.OS?e:e.replace("file://",""),(t=new FormData).append("name","photo.jpg"),t.append("file_attachment",{uri:e,name:"image.jpg",type:"image/jpeg"});var t={method:"post",headers:{"Content-Type":"multipart/form-data"},body:t},r=yl(n);n.props.getAdditionalDataForControl(yl(n),{type:"fetch",fetchUrl:n.props.uploadUrl,fetchOptions:t,fetchResponseType:"json"},function(e){n.setState({loading:!1}),r.props.onUpload({name:"photo.jpg"},e)})}),n.state={loading:!1},n}return e=[{key:"render",value:function(){var e=this.props,t=this.state,r=this.labels,n=e.compact?Lo.ButtonGroup:Ki;return z.a.createElement($i,{isLoading:t.loading},e.value?z.a.createElement(sl,ul({},e,{clear:e.onClear})):z.a.createElement(n,{status:"basic",size:"medium"},z.a.createElement(Lo.Button,{onPress:this.getFromCamera,children:r().takeShot,accessoryLeft:function(e){return z.a.createElement(Lo.Icon,ul({},e,{name:"camera-outline"}))},status:"basic",size:"medium"}),z.a.createElement(Lo.Button,{onPress:this.getFromGallery,children:r().getFromGallery,accessoryLeft:function(e){return z.a.createElement(Lo.Icon,ul({},e,{name:"folder-outline"}))},status:"basic",size:"medium"})))}}],dl(o.prototype,e),o}();d("camera",function(e){var t=e.props,r={width:t.compact&&t.showPreview?130:null};return z.a.createElement(Io.View,{style:r},!!t.label&&z.a.createElement(pa,null,t.label),z.a.createElement(vl,ul({},t,{onUpload:e.onUpload,onClear:e.onClear})))});var gl=r(15),wl=r.n(gl),Ol=r(11);function Cl(e){return(Cl="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function Sl(){return(Sl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function El(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function jl(e,t){return(jl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pl(e){return(Pl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _l=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jl(e,t)}(o,z.a.Component);var e,r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Pl(r);return function(e,t){if(t&&("object"===Cl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return kl(e)}(this,n?(e=Pl(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function o(e){var r;return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),xl(kl(r=t.call(this,e)),"labels",function(){return{draw:r.props.compact?null:r.props.drawLabel||"Draw signature",clearCanvas:r.props.clearCanvasLabel||"Clear canvas",upload:r.props.uploadLabel||"Upload"}}),xl(kl(r),"upload",function(e){r.setState({loading:!0});var t=Ol.cacheDirectory+"sign.png";Ol.writeAsStringAsync(t,e.replace("data:image/png;base64,",""),{encoding:Ol.EncodingType.Base64}).then(function(e){Ol.getInfoAsync(t,{size:!0,md5:!0}).then(function(e){var t="android"===Io.Platform.OS?e.uri:e.uri.replace("file://","");(e=new FormData).append("name",Tl+".jpg"),e.append("file_attachment",{uri:t,name:"image.jpg",type:Dl}),e={method:"post",headers:{"Content-Type":"multipart/form-data"},body:e},r.props.getAdditionalDataForControl(kl(r),{type:"fetch",fetchUrl:r.props.uploadUrl,fetchOptions:e,fetchResponseType:"json"},function(e){r.setState({loading:!1}),r.props.onUpload({name:Tl+".jpg"},e)})})}).catch(function(e){console.log("err",e)}),r.cancel()}),xl(kl(r),"showCanvasModal",function(){"web"!==Io.Platform.OS?r.setState({showCanvas:!0}):alert("Signature opens only on real mobile device")}),xl(kl(r),"clearCanvas",function(){r.ref.current.clearSignature()}),xl(kl(r),"cancel",function(){r.setState({showCanvas:!1})}),xl(kl(r),"canvasModal",function(){var e=(t=kl(r)).state,t=t.labels;return e.showCanvas&&z.a.createElement(Io.Modal,null,z.a.createElement(wl.a,{ref:r.ref,onOK:r.upload,autoClear:!0,backgroundColor:"rgb(255,255,255)",penColor:"black",webStyle:Il,style:{height:Rl}}),z.a.createElement(Ki,{style:{margin:20,position:"absolute",bottom:0,left:0}},z.a.createElement(Lo.Button,{onPress:r.clearCanvas,children:t().clearCanvas,accessoryLeft:function(e){return z.a.createElement(Lo.Icon,Sl({},e,{name:"close-outline"}))},appearance:"outline",status:"primary"}),z.a.createElement(Lo.Button,{onPress:function(){return r.ref.current.readSignature()},children:t().upload,accessoryLeft:function(e){return z.a.createElement(Lo.Icon,Sl({},e,{name:"cloud-upload-outline"}))},status:"primary"})),z.a.createElement(Lo.Button,{onPress:r.cancel,accessoryLeft:function(e){return z.a.createElement(Lo.Icon,Sl({},e,{name:"close-outline"}))},appearance:"outline",status:"basic",style:Fl}))}),r.state={showCanvas:!1,loading:!1},r.ref=z.a.createRef(),r}return e=[{key:"render",value:function(){var e=this.props,t=this.state,r=this.labels;return z.a.createElement($i,{isLoading:t.loading},e.value?z.a.createElement(sl,Sl({},e,{clear:e.onClear})):z.a.createElement(Io.View,null,this.canvasModal(),z.a.createElement(Lo.Button,{onPress:this.showCanvasModal,children:r().draw,accessoryLeft:function(e){return z.a.createElement(Lo.Icon,Sl({},e,{name:"edit-2-outline"}))},status:"basic",size:"medium"})))}}],El(o.prototype,e),o}();d("signature",function(e){var t=e.props,r={width:t.compact&&t.showPreview?130:null};return z.a.createElement(Io.View,{style:r},!!t.label&&z.a.createElement(pa,null,t.label),z.a.createElement(_l,Sl({},t,{onUpload:e.onUpload,onClear:e.onClear})))});var Rl=Io.Dimensions.get("window").height/2,Dl="image/jpeg",Tl="signature-image",Fl={position:"absolute",width:40,height:40,borderRadius:40,top:10,right:20},Al=0;"ios"===Io.Platform.OS&&Io.NativeModules.StatusBarManager.getHeight(function(e){Al=e.height,Fl.top=10+Al});var Il="\n.m-signature-pad--footer {\n    display: none;\n}\n.m-signature-pad--body {\n    top: ".concat(60+Al,"px;\n    bottom: 100px;\n}\n");function Ll(){return(Ll=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Nl(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Bl(e){var t=e.children;return z.a.createElement(uo.Consumer,null,function(e){return(e=e.visible)?z.a.createElement(Io.View,{style:e?Wo.itemContainer:{}},t):t})}function Vl(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}d("checkbox",function(e){var t=function(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Nl(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Nl(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}({},e.propsControl);return t.onChange=!0===e.propsControl.readOnly?void 0:t.onChange.bind(void 0,null,{name:t.name,checked:!t.checked}),!0===e.propsControl.toggle?(t.style=Io.StyleSheet.flatten([t.style,Wo.controls.dwKitCheckBox]),z.a.createElement(Lo.Toggle,Ll({},t,{children:t.label}))):z.a.createElement(Ko,t)}),d("container",function(e){var t=function(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Vl(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Vl(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}({},e.props);return t.notStretchItems=!0,t.style=[Wo.containerView.base,t.style],e.props.childrenView&&t.style.push(Wo.containerView[e.props.childrenView]),delete t.childrenView,e="rows"!==e.props.childrenView&&e.props.childrenView?Ki:Ji,ca(t),z.a.createElement(Bl,null,z.a.createElement(e,t))}),r(23);var Ml=r(16);function Ul(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zl(e){var t,r,p=e.options,n=(t=Object(c.useState)(!1),r=2,(e=function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw o}}return a}}(t,r)||function(e,t){if(e){if("string"==typeof e)return Ul(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ul(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0]),o=e[1],f={form:"",formgroup:"",grid:"",gridcolumn:"",container:"",div:"",repeater:""};function a(e,t){p.props.builderActions.move(p.props.model.key,t)}return p.me.updateBarPosition=function(){p.me.controlRef&&p.me.barRef&&p.me.controlRef.measure(function(s,c,u,e,t,r){p.me.barRef&&p.me.barRef.measure(function(e,t,r,n,o,a){var i=s+u-r;i<15&&(i=15);var l=c-n/2;null!=f[p.props.control.props["data-buildertype"]]&&(l-=20),r=!p.me.state.x||!p.me.state.y,n=1<Math.abs(p.me.state.x-i)||1<Math.abs(p.me.state.y-l),(r||n)&&p.me.setState({x:i,y:l})})})},z.a.createElement(uo.Consumer,null,function(e){var t=e.visible,e=function(e){return o(e),e=[e?Wo.controlBar.containerHovered:Wo.controlBar.container,{left:(e=p.me.state).x+"px",top:e.y+"px",right:"auto"}],t&&z.a.createElement(Io.View,{ref:function(e){p.me.barRef=e},style:e},z.a.createElement(Io.View,{title:p.props.text,style:Wo.controlBar.title},z.a.createElement(ki.Text,{onPress:p.onCopyControl},p.props.model.key)),z.a.createElement(Io.TouchableOpacity,{style:Wo.controlBar.iconTouchable},z.a.createElement(Ka,{onDrop:a,context:Bi},z.a.createElement(Io.Image,{source:{uri:"/images/dwkitbuilder-move.svg"},style:Wo.controlBar.icon}))),z.a.createElement(Io.TouchableOpacity,{style:Wo.controlBar.iconTouchable,onPress:p.props.onEdit.bind(p.props.parent,p.props.model)},z.a.createElement(Io.Image,{source:{uri:"/images/dwkitbuilder-edit.svg"},style:Wo.controlBar.icon})),z.a.createElement(Io.TouchableOpacity,{style:Wo.controlBar.iconTouchable,onPress:p.props.onCopy.bind(p.props.parent,p.props.model)},z.a.createElement(Io.Image,{source:{uri:"/images/dwkitbuilder-copy.svg"},style:Wo.controlBar.icon})),z.a.createElement(Io.TouchableOpacity,{style:Wo.controlBar.iconTouchable,onPress:p.props.onDelete.bind(p.props.parent,p.props.model)},z.a.createElement(Io.Image,{source:{uri:"/images/dwkitbuilder-delete.svg"},style:Wo.controlBar.icon})))};return[z.a.createElement(Io.View,{style:[Wo.controlWrapper,n?Wo.controlWrapperHovered:void 0],ref:function(e){p.me.controlRef=e}},z.a.cloneElement(p.props.control)),z.a.createElement(Ml.Hoverable,null,e)]})}function Wl(e){return(Wl="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function Hl(){return(Hl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Gl(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function ql(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Gl(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Gl(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function Kl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Jl(e,t){return(Jl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $l(e){return($l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}d("control-bar",function(e){return z.a.createElement(zl,{options:e})});var Yl=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jl(e,t)}(o,c.Component);var e,r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=$l(r);return function(e,t){if(t&&("object"===Wl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}()}(this,n?(e=$l(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function o(e){return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e)).state={focused:!1},e}return e=[{key:"onFocus",value:function(){this.setState({focused:!0})}},{key:"onBlur",value:function(){this.setState({focused:!1})}},{key:"render",value:function(){var e=this.state.focused&&!this.props.disabled?Wo.dwKitFocusedInputProps:{},t=this.props.disabled?Wo.dwKitDisabledInputProps:{};return(e=ql(ql(ql(ql(ql({},this.props),Wo.dwKitInputProps),e),t),{},{disabled:this.props.disabled||this.props.readOnly})).onChange&&(e.onChangeText=e.onChange,delete e.onChange),this.props.error&&(e.status="danger"),"number"!=this.props.type?z.a.createElement(Lo.Input,Hl({onFocus:this.onFocus.bind(this),onBlur:this.onBlur.bind(this)},e)):("number"==typeof(t=e.value)&&(t=Number(t).toString()),e.keyboardType&&"default"!=e.keyboardType||(e.keyboardType="decimal-pad"),z.a.createElement(Lo.Input,Hl({onFocus:this.onFocus.bind(this),onBlur:this.onBlur.bind(this),textStyle:{textAlign:"right"}},e,{value:t})))}}],Kl(o.prototype,e),o}(),Ql=r(17),Zl=r.n(Ql);function Xl(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function es(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Xl(Object(r),!0).forEach(function(e){ls(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xl(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function ts(){return(ts=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function rs(e){return(rs="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function ns(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function os(e,t){return(os=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function as(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function is(e){return(is=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ls(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ss=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&os(e,t)}(a,z.a.Component);var e,r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=is(r);return function(e,t){if(t&&("object"===rs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return as(e)}(this,n?(e=is(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function a(e){var t;return function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),ls(as(t=o.call(this,e)),"convertCurrentValue",function(){var e=t.props;if(e.value)return e.datePickerProps&&e.datePickerProps.dateFormat?Ne()(e.value).format(e.datePickerProps.dateFormat):Ne()(e.value).format("YYYY-MM-DD")}),t.state={isDatePickerVisible:!1},t}return e=[{key:"render",value:function(){function t(){n.props.disabled||n.props.readOnly||n.setState({isDatePickerVisible:!0})}function r(e){i(),n.props.disabled||n.props.readOnly||n.props.onValueChange&&n.props.onValueChange(e)}var n=this,e=this.state.isDatePickerVisible,o=this.props,a=Wo.controlParams(o),i=function(){n.setState({isDatePickerVisible:!1})},l=o.value,s=new Date;return"[object Date]"!==Object.prototype.toString.call(l)&&(l=null==l||""==l?s:"object"==rs(l)?Ne()(l).toDate():"string"==typeof l&&(l=Ne()(l))&&l.isValid()?l.toDate():s),z.a.createElement(Io.View,null,z.a.createElement(Io.TouchableOpacity,{onPress:t,accessible:!1},z.a.createElement(Yl,ts({},o,{onFocus:function(){Io.Keyboard.dismiss(),t()},value:o.value?this.convertCurrentValue():void 0,style:[o.style,{display:"flex"},a.style],textStyle:{color:"black"},accessoryRight:function(e){return n.props.disabled||n.props.readOnly?z.a.createElement(Io.View,null):z.a.createElement(Io.View,{style:{display:"flex",flexWrap:"wrap",flexDirection:"row"}},z.a.createElement(Io.TouchableOpacity,{onPress:t,accessible:!1},z.a.createElement(Lo.Icon,ts({},e,{name:"calendar-outline"}))),z.a.createElement(Io.TouchableOpacity,{onPress:function(){return r(null)},accessible:!1},z.a.createElement(Lo.Icon,ts({},e,{name:"close-circle-outline"}))))}}))),z.a.createElement(Zl.a,{date:l,isVisible:e,mode:o.type,onConfirm:r,onCancel:i}))}}],ns(a.prototype,e),a}();function cs(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function us(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?cs(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):cs(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function ps(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function fs(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?ps(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):ps(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function ds(e){return(ds="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function hs(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function ys(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?hs(Object(r),!0).forEach(function(e){gs(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hs(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function ms(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function bs(e,t){return(bs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vs(e){return(vs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gs(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}d("date-picker",function(e){var t=es(es({},e.props),{},{status:e.props.error?"danger":void 0}),r=e.props.onChange||e.props.onValueChange;return r&&(t.onValueChange=function(e){return r(e,{name:t.name,value:e})},delete e.props.onChange),e.props.isForm||(t["data-buildertype"]=e.props.type),Io.Platform.select({native:function(){return z.a.createElement(ss,ts({},t,{datePickerProps:e.datePickerProps}))},default:function(){return z.a.createElement(Yl,ts({type:e.type,value:e.date},t,{placeholder:"Time/Date picker shows only on mobile device"}))}})()}),d("dictionary",function(t){var e=Wo.controlParams(t.propsControl),r=us(us({},t.propsControl),{},{style:[t.propsControl.style,e.style]});return t.propsControl.onChange&&(r.onValueChange=function(e){return t.propsControl.onChange(null,{name:r.name,value:e})}),delete r.onChange,z.a.createElement(ia,r)}),d("dropdown",function(t){var e=Wo.controlParams(t.propsControl),r=fs(fs({},t.propsControl),{},{style:[t.propsControl.style,e.style]});return t.propsControl.onChange&&(r.onValueChange=function(e){return t.propsControl.onChange(null,{name:r.name,value:e})}),delete r.onChange,z.a.createElement(ia,r)}),d("dropzone",function(e){return e.props.readOnly?z.a.createElement(Io.View,null):z.a.createElement(Io.View,null,z.a.createElement(ki.Text,null,"dropzone"))});var ws=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bs(e,t)}(o,c.Component);var e,r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=vs(r);return function(e,t){if(t&&("object"===ds(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}()}(this,n?(e=vs(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function o(){return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),t.apply(this,arguments)}return e=[{key:"render",value:function(){if(!this.props.visible)return null;var e=ys(ys({},Wo.dwKitModalOverlayProps),{},{isVisible:this.props.visible,onRequestClose:this.props.onClose,onBackdropPress:this.props.onClose});return z.a.createElement(ki.Overlay,e,z.a.createElement(Io.View,{style:Wo.dwKitModalBody},this.props.children))}}],ms(o.prototype,e),o}();function Os(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Cs(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Os(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Os(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function Ss(e){return(e=Cs(Cs({},Wo.dwKitButtonProps),e)).children=e.title,e.size||(e.size="small"),e.style=Io.StyleSheet.compose(e.style,Io.StyleSheet.flatten(Wo.controls.button)),z.a.createElement(Lo.Button,e)}function Es(){return(Es=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function js(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function ks(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?js(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):js(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function Ps(){return(Ps=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function xs(){return(xs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _s(e){return Io.Platform.select({native:function(){return z.a.createElement(Io.TouchableOpacity,xs({},e,{onPress:function(){return Io.Linking.openURL(e.href)}}))},default:function(){return z.a.createElement("a",xs({},e,{target:e.target,href:e.href,rel:e.rel,onClick:e.onPress}),e.children)}})()}function Rs(){return(Rs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ds(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Ts(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Ds(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Ds(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function Fs(){return(Fs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}gs(ws,"Header",function(e){return z.a.createElement(Io.View,{style:Wo.dwKitModalHeader},e.children)}),gs(ws,"Content",function(e){return z.a.createElement(Io.View,{style:Wo.dwKitModalContent},e.children)}),gs(ws,"Actions",function(e){return z.a.createElement(Ki,{style:Wo.dwKitModalActions},e.children)}),d("edit-form",function(e){if(de(e.state.item))return z.a.createElement(Io.View,null);var t=e.dwKitControls.getEditControlByType(e.state.item["data-buildertype"],e.props.externalControlList);if(!t)return o="Close",he(e.props.localization)&&(o=e.props.localization.base.closebutton),z.a.createElement(ws,{visible:e.state.open,onClose:e.onClose},z.a.createElement(ws.Header,null,z.a.createElement(ki.Text,null,"Error")),z.a.createElement(ws.Content,null,z.a.createElement(ki.Text,null,"EditForm is not found for this control!")),z.a.createElement(ws.Actions,null,z.a.createElement(Ss,{onPress:e.onClose,title:o})));var r="OK",n="Cancel",o="Question";return he(e.props.localization)&&(r=e.props.localization.base.okbutton,n=e.props.localization.base.cancelbutton,o=e.props.localization.base.questiontitle),z.a.createElement(Io.View,null,z.a.createElement(t,{key:"editform",data:e.state.item,parent:e.parent,open:e.state.open,onSave:e.onSave,onClose:e.onClose,actions:e.props.actions,localization:e.props.localization}),z.a.createElement(ws,{visible:e.state.confirm,onClose:e.confirmHandleCancel},z.a.createElement(ws.Header,null,z.a.createElement(ki.Text,null,o)),z.a.createElement(ws.Content,null,z.a.createElement(ki.Text,null,e.state.confirmtext)),z.a.createElement(ws.Actions,null,z.a.createElement(Ss,{onPress:e.state.confirmHandle,title:r}),z.a.createElement(Ss,{onPress:e.confirmHandleCancel,title:n,appearance:"outline"}))))}),d("empty",function(e){return z.a.createElement(Io.View,{key:e.key,style:Wo.emptyView},z.a.createElement(Io.Text,{style:Wo.emptyText},e.text))}),d("events-editor",function(i){function l(r,n){return function(e){var t=i.me.props.data[r];de(t)&&(i.me.props.data[r]=t={}),t[n]=e,he(i.me.props.onChange)&&i.me.props.onChange(n)(e)}}var e=i.props.data,t=i.props.events,s=[];return t.forEach(function(t){var r,n=he(e)?e[t]:void 0,o={element:ia,props:{className:"dwkit-action-dropdown",multiple:!0}},a={element:Re,props:{className:"parameters-editor",style:{marginRight:40,marginTop:-20}}};s.push(z.a.createElement(Io.View,{key:t+"_events"},z.a.createElement(Ko,{width:3,key:"active",label:z.a.createElement(Lo.Text,n.active?{category:"label",style:{fontSize:14}}:{},t),name:"active",checked:n.active,onChange:(r=t,function(e){var t=i.me.props.data[r];de(t)&&(i.me.props.data[r]=t={}),he(t.active=e)&&(t.active=e),he(i.me.props.onChange)&&i.me.props.onChange("active")(e)})}),n.active&&z.a.createElement(Io.View,{key:"divGroup",style:[Wo.formGroupEqual,{flexDirection:"column",marginBottom:30,marginLeft:15}]},z.a.createElement(Re,{draggable:!0,columns:[{key:"actions",name:"Actions",control:"custom",customControl:o.element,style:Wo.eventsEditor.actions,customControlGetPropsFunc:function(e){return ks({options:i.actionOptions,value:e.actions,onValueChange:l(t,"actions",n.actions)},o.props)}},{key:"parameters",name:"Parameters",control:"custom",customControl:a.element,style:Wo.eventsEditor.parameters,customControlGetPropsFunc:function(e){return ks({value:e.parameters,columns:[{key:"name",name:"Name"},{key:"value",name:"Value"}],onValueChange:l(t,"parameters",n.parameters)},a.props)}},{key:"targets",name:"Targets",control:"custom",customControl:o.element,style:Wo.eventsEditor.targets,customControlGetPropsFunc:function(e){return ks({options:i.targetOptions,value:e.targets,onValueChange:l(t,"targets",n.targets)},o.props)}}],name:"triggers",disableAdd:!0,style:{flexShrink:1},value:n.triggers,onChange:i.me.handleChange.bind(i.me,t)}),z.a.createElement(Lo.Button,Es({onPress:function(){i.me.initNewTrigger.call(i.me,t),i.me.forceUpdate()}},Wo.eventsEditor.addButton),z.a.createElement(Lo.Text,{category:"label",style:{fontSize:18}},"+")))))}),z.a.createElement(Io.View,null,s)}),d("form",function(e){ca(e.propsControl);var t={formSize:e.model.size},r=e.propsControl;return r.style=[Wo.containerView.base,r.style],z.a.createElement(Bl,null,z.a.createElement(bi.Provider,{value:t},z.a.createElement(Io.View,Ps({},r,{children:e.children}))))}),d("formgroup",function(e){var t=e.propsControl;t.style.flexDirection="grouped"===e.orientation?"column":"row",t.style=[Wo.containerView.base,t.style],ca(e.propsControl);var r="custom"===e.widths&&e.widthsCustom&&1<=e.widthsCustom&&e.widthsCustom<=16?Wo.formGroupWidthCustom[e.widthsCustom].style:Wo.formGroupWidthEqual,n="grouped"!==e.orientation;return z.a.createElement(Bl,null,z.a.createElement(mi.Provider,{value:{formWidthStyle:r,isColumn:n}},z.a.createElement(n?Ki:Ji,t,e.children)))}),d("header",function(e){var t={fontSize:sa(e.model.size,24),textAlign:e.model.textAlign},r={fontSize:sa(e.model.size,24)/1.4,textAlign:e.model.textAlign};return z.a.createElement(Io.View,null,z.a.createElement(Lo.Text,{style:t,category:"h1"},e.props.content),z.a.createElement(Lo.Text,{style:r,category:"h6"},e.props.subheader))}),d("image",function(e){var t={width:e.props.style.width,height:e.props.style.height},r=!0===e.model.avatar?{width:28,height:28,borderRadius:"500rem"}:{},n=!0===e.model.bordered?{borderWidth:1,borderColor:"lightgrey"}:{},o=e.props.src;o&&"/"==o[0]&&window.DWKitApp&&window.DWKitApp.backendUrl&&(o=window.DWKitApp.backendUrl+o);var a=void 0;return delete(o=Ts(Ts({},e.propsControl),{},{source:{uri:o}})).src,a=z.a.createElement(ki.Image,Rs({},o,{style:[o.style,r],containerStyle:[t,o.containerStyle,r,n]})),e.props.href&&(a=z.a.createElement(_s,{href:e.props.href},a)),n={flexDirection:"row",flexGrow:1,justifyContent:"center"},"left"===e.model.floated&&(n.justifyContent="flex-start"),"right"===e.model.floated&&(n.justifyContent="flex-end"),"top"===e.model.verticalAlign&&(n.alignItems="flex-start"),"middle"===e.model.verticalAlign&&(n.alignItems="center"),"bottom"===e.model.verticalAlign&&(n.alignItems="flex-end"),z.a.createElement(Io.View,{style:n},a)}),d("input",function(n){var t;return n.propsControl.onChange&&(t=n.propsControl.onChange,n.propsControl.onChange=function(e){return t(e,{name:n.propsControl.name,value:e})}),z.a.createElement(mi.Consumer,null,function(e){var r=e.formWidthStyle;return z.a.createElement(bi.Consumer,null,function(e){return e=e.formSize,t=r,e=e,z.a.createElement(Io.View,{style:[{flexGrow:1},t]},(t=e,e=Wo.controlParams(n.propsControl),n.propsControl.style=[e.style,n.propsControl.style],n.propsControl.keyboardType=n.props.additionalParams.model.keyboardType,t&&(n.propsControl.size=t),n.propsControl.onChange&&(n.propsControl.onChangeText=n.propsControl.onChange,n.propsControl.onValueChange=n.propsControl.onChange,delete n.propsControl.onChange),"file"===n.propsControl.type?(n.propsControl.isForm=n.isForm,z.a.createElement(An,Fs({},n.propsControl,{downloadUrl:n.props.additionalParams.downloadUrl,uploadUrl:n.props.additionalParams.uploadUrl}))):"date"===n.propsControl.type||"time"===n.propsControl.type||"datetime"===n.propsControl.type?(n.propsControl.isForm=n.isForm,z.a.createElement(Ke,n.propsControl)):"number"!==n.propsControl.type?("password"===n.propsControl.type&&(n.propsControl.secureTextEntry=!0),z.a.createElement(Yl,Fs({label:n.propsControl.label},n.propsControl))):(t=Number.isInteger(n.propsControl.value)?n.propsControl.value.toString():n.propsControl.value,z.a.createElement(Yl,Fs({label:n.propsControl.label},n.propsControl,{value:t})))));var t})})});var As=r(18),Is=r.n(As);function Ls(e){var t=Io.StyleSheet.create({a:{fontWeight:"300",color:"#FF3366"}});return z.a.createElement(Is.a,{html:e.content,stylesheet:t})}function Ns(e){return{element:e}}function Bs(e){return z.a.createElement(ki.Text,e)}function Vs(e){var t=!0===e.active?{fontWeight:"600"}:{};return z.a.createElement(Io.View,e,z.a.createElement(ki.Text,{style:[e.style,t]},e.label),e.children)}function Ms(e){return z.a.createElement(ki.ButtonGroup,e)}d("menu-group",function(u){var e,t={};for(e in u.props)"data-items"!==e&&"activeItem"!==e&&"handleEvent"!==e&&"link"!==e&&(t[e]=u.props[e]);return t.buttons=function i(l,s){var c=[];de(s)&&(s="");for(var e=0;e<l.length;e++)!function(e){var t=l[e];if(he(t.visibleCondition)&&null!==t.visibleCondition&&""!==t.visibleCondition){var r="return "+t.visibleCondition;try{if(!new Function("",r)())return}catch(e){}}var n,o=String(s)+String(e),a=z.a.createElement(Ls,{content:t.title});Array.isArray(t.children)&&0<t.children.length?c.push(Ns(function(){return z.a.createElement(Vs,{key:o},z.a.createElement(Bs,null,a),z.a.createElement(Ms,{buttons:i(t.children,o+"_")}))})):(n=u.props.link?z.a.createElement(_s,{style:{color:"inherit"},href:t.target,onPress:u.handleItemClick2.bind(u.me,{name:t.target})},a):a,u.props.link?c.push(Ns(function(){return z.a.createElement(Vs,{key:o,name:t.target,active:u.state.activeitem===t.target},n)})):c.push(Ns(function(){return z.a.createElement(Vs,{key:o,name:t.target,active:u.state.activeitem===t.target,onPress:u.handleItemClick},n)})))}(e);return c}(u.items),z.a.createElement(ki.ButtonGroup,t)});var Us=Io.StyleSheet.create({headerContainerStyle:{flexDirection:"row",marginTop:20},contentContainerStyle:{flexDirection:"row",marginVertical:10}});d("message",function(e){var t,r={fontSize:sa(e.model.size,24)},n={fontSize:sa(e.model.size,24)/1.4};!0!==e.model.error&&!0!==e.model.negative||(t="danger"),!0!==e.model.success&&!0!==e.model.positive||(t="success"),!0===e.model.info&&(t="info"),!0===e.model.warning&&(t="warning");var o=Wo.controlParams(e.propsControl);return e.propsControl.style=[o.style,e.propsControl.style],z.a.createElement(Lo.Card,{style:[e.propsControl.style],status:t},z.a.createElement(Io.View,e.propsControl,z.a.createElement(Lo.Text,{style:r,category:"h6"},e.props.header),z.a.createElement(Lo.Text,{style:[Us.contentStyle,n],category:"s1"},e.props.content)))}),d("null-control",function(e){var t=""+e["data-buildertype"];return z.a.createElement(ki.Text,{style:{color:"red",fontSize:24}},e.text," null-control ",t)});var zs=r(19),Ws=r.n(zs);function Hs(e){return(Hs="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function Gs(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function qs(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Gs(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Gs(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function Ks(){return(Ks=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Js(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $s(e,t){return($s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ys(e){return(Ys=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Qs=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$s(e,t)}(o,z.a.Component);var e,r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Ys(r);return function(e,t){if(t&&("object"===Hs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}()}(this,n?(e=Ys(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function o(e){return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e)).state={value:""},e}return e=[{key:"render",value:function(){var t=this,e=[this.props,this.state],r=e[0],n=e[1];return z.a.createElement(Ws.a,Ks({},r,{displayType:"text",renderText:function(e){return n.value.endsWith(".")&&!e.includes(".")&&(e+="."),!n.value.endsWith(".")&&e.endsWith(".")&&(e=e.slice(0,-1)),z.a.createElement(Yl,Ks({},r,{onChangeText:function(e){return t.setState({value:e})},keyboardType:r.keyboardType||"number-pad",placeholder:r.placeholder,value:e}))},value:n.value}))}}],Js(o.prototype,e),o}();function Zs(t){var e=t.selectedIndex;de(e)&&(e=he(t.selectedValue)?t.items.findIndex(function(e){return e.value===t.selectedValue}):t.items.findIndex(function(e){return!e.value}));var r=t.items.map(function(e){return z.a.createElement(Lo.Radio,{status:t.error?"danger":void 0,children:e.label||e.text})});return z.a.createElement(Io.View,{style:[Wo.dwKitRadioGroup.containerStyle,{paddingLeft:0,marginBottom:0}]},t.label&&z.a.createElement(pa,null,t.label),z.a.createElement(Lo.RadioGroup,{disabled:t.readonly,onChange:function(e){t.onChange(t.items[e].value)},selectedIndex:e,style:t.style},r))}function Xs(){return(Xs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ec(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function tc(e){var t,r,n=e.options.trigger,t=(t=z.a.useState(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw o}}return a}}(t,r)||function(e,t){if(e){if("string"==typeof e)return ec(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ec(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],o=t[1];return z.a.createElement(Lo.Tooltip,Xs({},e,{onBackdropPress:function(){return o(!1)},visible:r,anchor:"button"===n.props["data-buildertype"]?function(){return z.a.cloneElement(n,{onClick:function(){return o(!0)}})}:function(){return z.a.createElement(Io.TouchableWithoutFeedback,{onPress:function(){return o(!0)}},n)}}))}function rc(){return(rc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function nc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function oc(){return(oc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ac(){return(ac=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ic(e){return(ic="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function lc(){return(lc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function sc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function cc(e,t){return(cc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function uc(e){return(uc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}d("number-format",function(e){var t=qs(qs({},e.propsControl),{},{status:e.propsControl.error?"danger":void 0});return(e.propsControl.onChange||e.propsControl.onValueChange)&&(t.onValueChange=e.propsControl.onChange||e.propsControl.onValueChange,delete e.propsControl.onChange),delete t.type,z.a.createElement(Qs,t)}),d("radio-group",function(t){var e="v"===t.props.direction;return z.a.createElement(Io.View,null,z.a.createElement(pa,null,t.props.label),z.a.createElement(Zs,{error:t.props.error,style:t.props.style,vertical:e,items:t.props.items,disabled:t.props.readOnly,name:t.props.name,onChange:function(e){t.onChange(void 0,{name:t.props.name,value:e})},selectedValue:t.props.value,values:t.props.items}))}),d("popup",function(e){return z.a.createElement(tc,{options:e,style:Wo.controls.tooltip.container,placement:e.popupPosition,children:z.a.createElement(Io.View,null,z.a.createElement(Lo.Text,{category:"s1",status:"control",style:Wo.controls.tooltip.title},e.header),z.a.createElement(Lo.Text,{status:"control"},e.content))})}),d("repeater",function(i){function r(e,t,r){if(!i.props.controlProps.buildermode&&""!==i.props["item-visibleCondition"]&&void 0!==i.props["item-visibleCondition"]&&null!==i.props["item-visibleCondition"]){var n="return "+i.props["item-visibleCondition"];try{if(!new Function("data",n)(t))return}catch(e){return}}var o=void 0,a=i.props.controlProps.createBuilderDropzone;return he(i.props.placeholders)&&Array.isArray(i.props.placeholders[i.psTemplate])&&0<i.props.placeholders[i.psTemplate].length?he(n=i.props.placeholders[i.psTemplate])&&(o=z.a.createElement(Vr,{key:e,parent:i.me,model:n,psTemplate:i.psTemplate,item:t,controlProps:i.props.controlProps,includeDropzone:r,errors:Array.isArray(i.props.error)?i.props.error[e]:void 0,index:e,handleChange:i.handleChange,data:i.props.data,parentItem:i.props.model})):r&&a&&(o=a("repeater_dropzone_footer",i.props.model.key,void 0,void 0,i.psTemplate)),o}if(i.isServerMode&&i.state.firstLoad)return i.state.firstLoad=!1,i.loadNextPage(),z.a.createElement(Io.View,{style:i.props.style},i.state.loading&&z.a.createElement(Io.ActivityIndicator,null));var e,t,n,o,a,l=i.props.style;return i.props.childrenView&&(l=Io.StyleSheet.compose(i.props.style,Io.StyleSheet.flatten(Wo.containerView[i.props.childrenView]))),z.a.createElement(Io.View,{style:l},(e=i.state.items,t=i.state.rowsCount,o=i.me,a=[],l=[i.props.slider?Wo.repeater.container.horizontal:Wo.repeater.container.vertical],i.props.style&&l.push(i.props.style),Array.isArray(e)&&0<e.length?a.push(z.a.createElement(Io.FlatList,{data:e,horizontal:i.props.slider,style:l,renderItem:function(e){var t=e.index;return r(t,e=e.item,!t&&o.props.controlProps.buildermode)},keyExtractor:function(e,t){return t}})):i.props.controlProps.buildermode?he(n=r(0,{},!0))&&a.push(n):!i.state.loading&&i.isServerMode&&(!de(n=i.props.noRecordsLabel)&&""!==n||(n="No records. Refresh..."),n=z.a.createElement(Io.View,{key:"norecords"},z.a.createElement(Ss,{onPress:function(){i.state.firstLoad=!0,i.loadNextPage()},title:n})),a.push(n)),!i.state.loading&&i.isServerMode&&t>e.length&&0<e.length&&(!de(e=i.props.loadButtonLabel)&&""!==e||(e="Load more..."),l.height=l.height+40,e=z.a.createElement(Io.View,{key:"loadmore"},z.a.createElement(Ss,{onPress:i.loadNextPage,title:e})),a.push(e)),z.a.createElement(Bl,null,a)),i.state.loading&&z.a.createElement(Io.ActivityIndicator,null))}),d("search",function(a){function i(e){var t=[];if(!e)return t;var r,n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e){if(e){if("string"==typeof e)return nc(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?nc(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}(e);try{for(n.s();!(r=n.n()).done;){var o=r.value;t.push({item:o,title:o.title})}}catch(e){n.e(e)}finally{n.f()}return t}return z.a.createElement(Io.View,null,z.a.createElement(ki.SearchBar,rc({},a.controlProps,{showLoading:a.state.isLoading,onChangeText:function(e){return a.handleSearchChange(null,{value:e})},value:a.state.value})),z.a.createElement(Io.View,null,function(){if(!de(a.state.results)&&null!==a.state.results){var e=function(e){if(!0!==a.controlProps.category)return[{title:"",separator:{title:"Search results"},data:i(e)}];var t,r,n,o=[];for(t in e)e.hasOwnProperty(t)&&(n=i((r=e[t]).results),o.push({title:r.name,separator:r,data:n}));return o}(a.state.results);return z.a.createElement(Io.SectionList,{sections:e,keyExtractor:function(e,t){return e+t},renderItem:function(e){return e=e.item.item,z.a.createElement(Io.View,null,z.a.createElement(ki.Text,{style:{fontWeight:"500"}},e.title),z.a.createElement(ki.Text,null,e.description),z.a.createElement(ki.Image,{source:{uri:e.image},style:{width:32,height:32}}),z.a.createElement(ki.Text,null,e.price))},renderSectionHeader:function(e){return z.a.createElement(ki.Text,{h4:!0},e.section.title)}})}}()))}),d("static-content",function(e){var t=he(e.props.content)?e.props.content.replace("\n","<br/>"):void 0;return t?(ca(e.spanProps),e.props.isHtml?z.a.createElement(Ls,oc({},e.spanProps,{content:e.props.content})):z.a.createElement(Lo.Text,e.spanProps,t)):null}),d("statistic",function(n){var e=[];n.items&&(e=n.items.map(function(e){return t=e,r={fontSize:sa(n.model.size,24)/1.4},e={fontSize:sa(n.model.size,24)},z.a.createElement(Io.View,{style:{margin:10}},z.a.createElement(Lo.Text,{style:e,category:"label"},t.value),z.a.createElement(Lo.Text,{style:r,category:"label",appearance:"hint"},t.label));var t,r}));var t=!0!==n.model.horizontal?{flexDirection:"row"}:{};return z.a.createElement(Io.View,ac({},n.propsControl,{style:[n.propsControl.style,t]}),e)});var pc=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cc(e,t)}(a,c.Component);var e,r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=uc(r);return function(e,t){if(t&&("object"===ic(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}()}(this,n?(e=uc(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function a(e){var t;return function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),(t=o.call(this,e)).state={selectedIndex:e.activeitem||0},t}return e=[{key:"onTabChange",value:function(e){this.setState({selectedIndex:e}),this.props.onTabChange(null,{activeIndex:e})}},{key:"render",value:function(){var e="top"===this.props.model.position?Lo.TabBar:Lo.BottomNavigation,t="top"===this.props.model.position?Lo.Tab:Lo.BottomNavigationTab,r=z.a.createElement(e,{selectedIndex:this.state.selectedIndex,onSelect:this.onTabChange.bind(this)},this.props.panes.map(function(e){return z.a.createElement(t,{title:e.menuItem})})),e=this.props.panes[this.state.selectedIndex].pane,e=z.a.createElement(Io.View,{key:e.key},e.content);return z.a.createElement(Bl,null,z.a.createElement(Io.View,{style:this.props.style},"top"===this.props.model.position?[r,e]:[e,r]))}}],sc(a.prototype,e),a}();function fc(){return(fc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function dc(){return(dc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function hc(){return(hc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function yc(){!function(e){if(!(e instanceof yc))throw new TypeError("Cannot call a class as a function")}(this)}function mc(e){return(mc="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function bc(e,t){return(bc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vc(e){return(vc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Oc(e,t,r){return t&&wc(e.prototype,t),r&&wc(e,r),e}function Cc(e,t,r,n){return{key:e,defaultValue:t,formName:r,value:n}}d("tab-group",function(e){return z.a.createElement(pc,lc({},e.props,{panes:e.panes,onTabChange:e.onTabChange}))}),d("textarea",function(t){var e={multiline:!0,numberOfLines:t.propsControl.rows||3,disabled:t.propsControl.readOnly,onChange:function(e){return t.propsControl.onChange(e,{name:t.propsControl.name,value:e})},value:t.propsControl.value,placeholder:t.propsControl.placeholder,style:{marginTop:7},error:t.propsControl.error,keyboardType:t.props.additionalParams.model.keyboardType};return z.a.createElement(Yl,fc({label:t.propsControl.label},e))}),d("upload",function(a){var e,t,r=a.props.type,n=[],o=a.props.value;return he(o)&&null!=o&&""!==o?(e="Download",t="Clear",he(o=function(){if(window.DWKitAdminLang&&window.DWKitAdminLang.button)return window.DWKitAdminLang.button}())&&(e=o.download,t=o.clear),o=a.props.disabled||a.props.disabled||a.props.hideClearButton,n.push(z.a.createElement(Io.TouchableOpacity,{key:"download",onPress:function(e){e.preventDefault();var e=a.props.value,o=new XMLHttpRequest;o.open("POST",a.props.downloadUrl+e,!0),o.responseType="arraybuffer",o.onload=function(){var e,t=a.getCustomFileName();t||!(e=o.getResponseHeader("Content-Disposition"))||-1===e.indexOf("attachment")||(r=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(e))&&r[1]&&(t=r[1].replace(/['"]/g,""));var r=(r=a.getCustomContentType())||o.getResponseHeader("Content-Type"),n=document.createElement("a");n.setAttribute("href",window.URL.createObjectURL(new Blob([o.response],{type:r}))),n.setAttribute("download",t||"unknown"),document.body.appendChild(n),n.onclick=function(){document.body.removeChild(n)},n.click()},o.send(null)}},z.a.createElement(ki.Text,null,e))),o||(n.push(z.a.createElement(ki.Text,{key:"sparator"},"")),n.push(z.a.createElement(ki.Button,{key:"clear",onPress:a.onClear,title:t})))):a.props.disabled||a.props.readOnly?n.push(z.a.createElement(ki.Text,null)):(t=Io.Platform.select({native:function(){return z.a.createElement(ki.Text,{h1:!0,style:{color:"red"}},"Implement me!")},default:function(){return z.a.createElement(ki.Text,null,"This control is unavailable on web.")}}),n.push(t)),z.a.createElement(Io.View,{"data-buildertype":r},a.props.label&&z.a.createElement(pa,null,a.props.label),n)}),d("workflow-bar",function(o){var e=o.props.style,t=o.state.commands||o.props.commands;o.props.selectedScheme&&t&&(t=t.filter(function(e){return e.scheme===o.props.selectedScheme}));var r=o.state.states||o.props.states;return z.a.createElement(Io.View,{style:e},z.a.createElement(Io.View,{style:{flexDirection:"row"}},function(){if(o.state.processExists||o.props.blockSelectScheme||o.props.schemes.length<=1)return null;var e,t="Select scheme";o.props.selectSchemeDropdown?t=o.props.selectSchemeDropdown:(e=Me())&&e.selectscheme&&(t=e.startworkflow);var r=[];return r.push({value:null,text:""}),o.props.schemes.forEach(function(e){return r.push({value:e,text:e})}),z.a.createElement(L,{key:"setstate",name:"setstate",options:r,placeholder:t,onChange:o.selectWorkflowScheme,value:o.props.selectedScheme,style:Wo.layout.elementInRow})}(),function(e){if(o.props.blockCommands)return null;if(!o.props.blockSelectScheme&&!o.props.selectedScheme&&1<o.props.schemes.length)return null;if(Array.isArray(e)&&0<e.length){var r=[];return e.forEach(function(e){var t=Wo.controlParams({floated:"flex-start",primary:1===e.type,secondary:2===e.type});r.push(z.a.createElement(Lo.Button,dc({key:e.value,onPress:o.onCommand.bind(o.me,e),children:e.text,style:[t.style,Wo.layout.elementInRow]},t.props)))}),r}}(t),function(e){if(!o.props.blockSetState&&Array.isArray(e)&&0<e.length){var t=de(o.state.setstate)||""===o.state.setstate,r="Set state";ye(o.props.setStateButton)?r=o.props.setStateButton:(n=Me())&&(r=n.setstate);var n=Wo.controlParams({floated:"flex-start"});return[z.a.createElement(L,{key:"setstate",name:"setstate",placeholder:"States",options:e,onChange:o.handleChanged,style:Wo.layout.elementInRow}),z.a.createElement(Lo.Button,dc({key:"btnsetstate",disabled:t,onPress:o.onSetState.bind(o.me),children:r,style:[n.style,Wo.layout.elementInRow]},n.props))]}}(r)))}),d("card",function(e){var t=Io.StyleSheet.create({topContainer:{margin:10},card:{},footerContainer:{margin:10}}),r={style:[Wo.baseMargin,t.card],onPress:e.propsControls.onClick},n=e.me.renderPanel("extra");return z.a.createElement(Lo.Card,hc({},r,{header:function(){return z.a.createElement(Io.View,{style:t.topContainer},z.a.createElement(Lo.Text,{category:"h6"},e.props.header),z.a.createElement(Lo.Text,{category:"s1"},e.props.subheader))},footer:function(){return z.a.createElement(Io.View,{style:t.footerContainer},n)}}),e.me.renderPanel("description"))}),so([].concat([{key:"sepContainers",title:"Containers",isseparate:!0,defaultopen:!0},{key:"container",title:"View",control:Ie},{key:"staticcontent",title:"Static Content",control:dn,defaultValues:{content:"Text..."}},{key:"form",title:"Form",control:en},{key:"formgroup",title:"Form Group",control:en,defaultValues:{widths:"equal",orientation:"grouped"}},{key:"tab",title:"Tab",control:wn,defaultValues:{position:"top",panes:[{title:"Tab 1",psid:"t1"},{title:"Tab 2",psid:"t2"},{title:"Tab 3",psid:"t3"}]}},{key:"card",title:"Card",control:kn,defaultValues:{header:"Card",subheader:"Description"}},{key:"customblock",title:"Custom block",control:void 0,defaultValues:{sourceType:"form"}},{key:"sepCollection",title:"Collections",isseparate:!0},{key:"collectioneditor",title:"Collection Editor",control:Re,defaultValues:{columns:[{key:"Id",name:"ID"},{key:"Title",name:"Title"},{key:"Count",name:"Count"}]}},{key:"repeater",title:"Repeater",control:xr,defaultValues:{}},{key:"sepControls",title:"Controls",isseparate:!0},{key:"header",title:"Header",control:en,defaultValues:{content:"Header",size:"medium"}},{key:"input",title:"Input",control:en,defaultValues:{label:"Input",onChangeTimeout:200,fluid:!0}},{key:"numberformat",title:"Number Format",control:pr,defaultValues:{label:"NumberFormat",onChangeTimeout:200}},{key:"textarea",title:"TextArea",control:en,defaultValues:{label:"TextArea"}},{key:"dictionary",title:"Dictionary",control:et,defaultValues:{label:"Dictionary",selection:!0}},{key:"dropdown",title:"Dropdown",control:en,defaultValues:{label:"Dropdown",selection:!0,fluid:!0,"data-elements":[{value:1,text:"Item 1"},{value:2,text:"Item 2"},{value:3,text:"Item 3"}]}},{key:"checkbox",title:"CheckBox",control:en,defaultValues:{label:"Checkbox"}},{key:"radiogroup",title:"Radio group",control:vr,defaultValues:{label:"Radio","data-elements":[{value:1,text:"Item 1"},{value:2,text:"Item 2"},{value:3,text:"Item 3"}]}},{key:"button",title:"Button",control:en,defaultValues:{content:"Button",fluid:!0,floated:"flex-start",basic:!0}},{key:"label",title:"Label",control:en,defaultValues:{content:"Label"}},{key:"message",title:"Message",control:en,defaultValues:{header:"Message",content:"Description...",size:"medium",fluid:!0}},{key:"image",title:"Image",control:en,defaultValues:{src:"/images/unknown.png","style-width":128,"style-height":128}},{key:"camera",title:"Camera",control:fe,defaultValues:{showPreview:!0,compression:.75}},{key:"signature",title:"Signature",control:sn,defaultValues:{showPreview:!0}},{key:"workflowbar",title:"Workflow bar",control:Un,defaultValues:{blockSetState:!0,blockLoadParameters:!0,events:{onCommandClick:{active:!0,actions:["workflowExecuteCommand"]},onSetStateClick:{active:!0,actions:["workflowSetState"]},onSchemeSelected:{active:!0,actions:["workflowSelectScheme"]}}}}]));var Sc=(Oc(Rc,[{key:"build",value:function(){return new this.subType(this.name,this.description,this.values)}},{key:"locKey",value:function(e){return this.name+e}},{key:"description",value:function(e){var t=this.locKey("typedescription");return this.description=Cc(t,e,this.locFormName),this}},{key:"withValue",value:function(e,t,r){return de(this.values)&&(this.values=[]),r=Cc(this.locKey(e),t,this.locFormName,r),this.values.push(r),this}}],[{key:"from",value:function(e){return new Rc(e)}},{key:"enum",value:function(e){return new Rc(e,jc)}}]),Rc),Ec=(Oc(_c,[{key:"getDescription",value:function(){return this.description}},{key:"getValues",value:function(){return this.values}}]),_c),jc=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bc(e,t)}(t,Ec);var r,n,e=(r=t,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=vc(r);return function(e,t){if(t&&("object"===mc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}()}(this,n?(e=vc(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function t(){return gc(this,t),e.apply(this,arguments)}return t}(),kc=Sc.from("any").description("any").build(),Pc=Sc.from("array").description("array of values").build(),xc=Sc.enum("bool").description("true or false").withValue("default","Default").withValue("true","True",!0).withValue("false","False",!0).build(),t=Sc.from("color").description("red|green|rgba(10,20,30,0.5)").build(),be=Sc.from("component").description("react component").build(),ge=Sc.from("function").build(),Le=Sc.from("number").description("any number").build(),Mr=Sc.from("object").description("any object").build(),zn=Sc.from("string").description("any string").build(),Hn=Sc.from("style").description("/*** Example Code ***/\ncolor:red;\npaddingTop:5;").build();function _c(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];gc(this,_c),this.name=e,this.description=t,this.values=r}function Rc(e,t){gc(this,Rc),this.name=e,this.locFormName="_"+this.name+"Type",this.subType=he(t)?t:Ec}function Dc(e){return function(e){if(Array.isArray(e))return Ac(e)}(e)||function(){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}()||Fc(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tc(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Fc(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function Fc(e,t){if(e){if("string"==typeof e)return Ac(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ac(e,t):void 0}}function Ac(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ic(e){var t,r="",n=Tc(e.split(""));try{for(n.s();!(t=n.n()).done;){var o=t.value;o.toUpperCase()===o&&(r+=" "),r+=o}}catch(e){n.e(e)}finally{n.f()}return r.charAt(0).toUpperCase()+r.substr(1)}function Lc(e,t){if(null===t||!(t instanceof Ec))throw new Error("name "+e+" "+t);return{name:e,type:t,defaultLabel:Ic(e)}}function Nc(e,t,r){if(null===t||!(t instanceof Ec))throw new Error("name "+e+" "+t);return{name:e,type:t,defaultValue:r,defaultLabel:Ic(e)}}function Bc(e){var t,r={},n={},o=Tc(e.propertyTypes);try{for(o.s();!(t=o.n()).done;){var a=t.value;he((r[a.name]=a).defaultValue)&&(n[a.name]=a.defaultValue)}}catch(e){o.e(e)}finally{o.f()}return e.propertyByName=r,e.defaultProps=n,e}Vo={renderer:Io.View,propertyTypes:[Lc("onStartShouldSetResponder",ge),Lc("accessible",xc),Lc("accessibilityLabel",zn),Lc("accessibilityHint",zn),Lc("accessibilityRole",zn),Lc("accessibilityState",Mr),Lc("accessibilityValue",Mr),Lc("accessibilityActions",Pc),Lc("onAccessibilityAction",ge),Lc("onAccessibilityTap",ge),Lc("onMagicTap",ge),Lc("onAccessibilityEscape",ge),Lc("accessibilityViewIsModal",xc),Lc("accessibilityElementsHidden",xc),Lc("accessibilityIgnoresInvertColors",xc),Lc("accessibilityLiveRegion",zn),Lc("importantForAccessibility",zn),Lc("hitSlop",Mr),Lc("nativeID",zn),Lc("onLayout",ge),Lc("onMoveShouldSetResponder",ge),Lc("onMoveShouldSetResponderCapture",ge),Lc("onResponderGrant",ge),Lc("onResponderMove",ge),Lc("onResponderReject",ge),Lc("onResponderRelease",ge),Lc("onResponderTerminate",ge),Lc("onResponderTerminationRequest",ge),Lc("onStartShouldSetResponderCapture",ge),Lc("pointerEvents",zn),Lc("removeClippedSubviews",xc),Lc("style",Hn),Lc("testID",zn),Lc("collapsable",xc),Lc("needsOffscreenAlphaCompositing",xc),Lc("renderToHardwareTextureAndroid",xc),Lc("shouldRasterizeIOS",xc),Lc("nextFocusDown",Le),Lc("nextFocusForward",Le),Lc("nextFocusLeft",Le),Lc("nextFocusRight",Le),Lc("nextFocusUp",Le),Lc("focusable",xc)]},Uo={renderer:Io.ActivityIndicator,propertyTypes:[].concat(Dc(Vo.propertyTypes),[Lc("animating",xc),Lc("color",t),Lc("hidesWhenStopped",xc),Lc("size",Le)])},Ea={renderer:Io.Button,propertyTypes:[Nc("onPress",ge,function(){return console.log("Set me a handler!")}),Nc("title",zn,"Button"),Lc("accessibilityLabel",zn),Lc("color",t),Lc("disabled",xc),Lc("testID",zn),Lc("hasTVPreferredFocus",xc),Lc("nextFocusDown",Le),Lc("nextFocusForward",Le),Lc("nextFocusLeft",Le),Lc("nextFocusRight",Le),Lc("nextFocusUp",Le),Lc("touchSoundDisabled",xc)]},ja={renderer:Io.FlatList,propertyTypes:[Lc("renderItem",ge),Lc("data",Pc),Lc("ItemSeparatorComponent",be),Lc("ListEmptyComponent",be),Lc("ListFooterComponent",be),Lc("ListFooterComponentStyle",Hn),Lc("ListHeaderComponent",be),Lc("ListHeaderComponentStyle",Hn),Lc("columnWrapperStyle",Hn),Lc("extraData",kc),Lc("getItemLayout",ge),Lc("horizontal",xc),Lc("initialNumToRender",Le),Lc("initialScrollIndex",Le),Lc("inverted",xc),Lc("keyExtractor",ge),Lc("numColumns",Le),Lc("onEndReached",ge),Lc("onEndReachedThreshold",ge),Lc("onRefresh",ge),Lc("onViewableItemsChanged",ge),Lc("progressViewOffset",Le),Lc("legacyImplementation",xc),Lc("refreshing",xc),Lc("removeClippedSubviews",xc),Lc("viewabilityConfig",Mr),Lc("viewabilityConfigCallbackPairs",Pc)],methods:["scrollToEnd","scrollToIndex","scrollToItem","scrollToOffset","recordInteraction","flashScrollIndicators","getNativeScrollRef","getScrollResponder","getScrollableNode"]},Pa={renderer:Io.Image,propertyTypes:[Nc("style",Hn,{width:128,height:128}),Lc("accessible",xc),Lc("accessibilityLabel",zn),Lc("blurRadius",Le),Lc("capInsets",Mr),Lc("defaultSource",Mr),Lc("fadeDuration",Le),Lc("loadingIndicatorSource",Pc),Lc("onError",ge),Lc("onLayout",ge),Lc("onLoad",ge),Lc("onLoadEnd",ge),Lc("onLoadStart",ge),Lc("onPartialLoad",ge),Lc("onProgress",ge),Lc("progressiveRenderingEnabled",xc),Lc("resizeMethod",Sc.enum("imageResizeMethod").description("Resize mechanism").withValue("default","Default").withValue("auto","Auto","auto").withValue("resize","Resize","resize").withValue("Scale","Scale","scale").build()),Lc("resizeMode",Sc.enum("imageResizeMode").description("Resize mode").withValue("default","Default").withValue("cover","Cover","cover").withValue("contain","Contain","contain").withValue("stretch","Stretch","stretch").withValue("repeat","Repeat","repeat").withValue("center","Center","center").build()),Nc("source",kc,{uri:"/images/unknown.png"}),Lc("testID",zn)]},ka={renderer:Io.ImageBackground,propertyTypes:[].concat(Dc(Pa.propertyTypes),[Lc("imageStyle",Hn),Lc("imageRef",kc)])},al={renderer:Io.KeyboardAvoidingView,propertyTypes:[].concat(Dc(Vo.propertyTypes),[Lc("behavior",zn),Lc("contentContainerStyle",Hn),Lc("enabled",xc),Lc("keyboardVerticalOffset",Le)])},gl={renderer:Io.RefreshControl,propertyTypes:[].concat(Dc(Vo.propertyTypes),[Nc("refreshing",xc,!0),Lc("onRefresh",ge),Lc("colors",Pc),Lc("enabled",xc),Lc("progressBackgroundColor",t),Lc("progressViewOffset",Le),Lc("size",Le),Lc("tintColor",t),Lc("title",zn),Lc("titleColor",t)])},Ql={renderer:Io.SafeAreaView,propertyTypes:[].concat(Dc(Vo.propertyTypes),[Lc("emulateUnlessSupported",xc)])},As={renderer:Io.ScrollView,propertyTypes:[].concat(Dc(Vo.propertyTypes),[Lc("alwaysBounceHorizontal",xc),Lc("alwaysBounceVertical",xc),Lc("automaticallyAdjustContentInsets",xc),Lc("bounces",xc),Lc("bouncesZoom",xc),Lc("canCancelContentTouches",xc),Lc("centerContent",xc),Lc("contentContainerStyle",Hn),Lc("contentInset",Mr),Lc("contentInsetAdjustmentBehavior",zn),Lc("contentOffset",Mr),Lc("decelerationRate",zn),Lc("directionalLockEnabled",xc),Lc("disableIntervalMomentum",xc),Lc("disableScrollViewPanResponder",xc),Lc("endFillColor",t),Lc("fadingEdgeLength",Le),Lc("horizontal",xc),Lc("indicatorStyle",zn),Lc("invertStickyHeaders",xc),Lc("keyboardDismissMode",zn),Lc("keyboardShouldPersistTaps",zn),Lc("maintainVisibleContentPosition",Mr),Lc("maximumZoomScale",Le),Lc("minimumZoomScale",Le),Lc("nestedScrollEnabled",xc),Lc("onContentSizeChange",ge),Lc("onMomentumScrollBegin",ge),Lc("onMomentumScrollEnd",ge),Lc("onScroll",ge),Lc("onScrollBeginDrag",ge),Lc("onScrollEndDrag",ge),Lc("onScrollToTop",ge),Lc("overScrollMode",zn),Lc("pagingEnabled",xc),Lc("persistentScrollbar",xc),Lc("pinchGestureEnabled",xc),Lc("refreshControl",Mr),Lc("removeClippedSubviews",xc),Lc("scrollBarThumbImage",Le),Lc("scrollEnabled",xc),Lc("scrollEventThrottle",Le),Lc("scrollIndicatorInsets",Mr),Lc("scrollPerfTag",zn),Lc("scrollToOverflowEnabled",xc),Lc("scrollsToTop",xc),Lc("showsHorizontalScrollIndicator",xc),Lc("showsVerticalScrollIndicator",xc),Lc("snapToAlignment",zn),Lc("snapToEnd",xc),Lc("snapToInterval",Le),Lc("snapToOffsets",Pc),Lc("snapToStart",xc),Lc("stickyHeaderIndices",Pc),Lc("zoomScale",Le)])},zs={propertyTypes:[].concat(Dc(As.propertyTypes),[Nc("renderItem",ge,function(){return null}),Nc("data",kc,function(){return[]}),Nc("getItem",ge,function(){return null}),Nc("getItemCount",ge,function(){return 0}),Lc("debug",xc),Lc("extraData",kc),Lc("getItemLayout",ge),Lc("initialScrollIndex",Le),Lc("inverted",xc),Lc("CellRendererComponent",kc),Lc("ItemSeparatorComponent",kc),Lc("listKey",zn),Lc("ListEmptyComponent",kc),Lc("ListItemComponent",kc),Lc("ListFooterComponent",kc),Lc("ListFooterComponentStyle",Hn),Lc("ListHeaderComponent",kc),Lc("ListHeaderComponentStyle",Hn),Lc("onRefresh",ge),Lc("onScrollToIndexFailed",ge),Lc("onViewableItemsChanged",ge),Lc("refreshing",xc),Lc("refreshControl",kc),Lc("removeClippedSubviews",xc),Lc("renderScrollComponent",ge),Lc("viewabilityConfig",Mr),Lc("viewabilityConfigCallbackPairs",Pc),Lc("horizontal",xc),Nc("initialNumToRender",Le,0),Lc("keyExtractor",ge),Lc("maxToRenderPerBatch",Le),Lc("onEndReached",ge),Lc("onEndReachedThreshold",Le),Lc("updateCellsBatchingPeriod",Le),Lc("windowSize",Le),Lc("persistentScrollbar",xc),Lc("progressViewOffset",Le)]),renderer:Io.VirtualizedList},d={renderer:Io.SectionList,propertyTypes:[].concat(Dc(As.propertyTypes),Dc(zs.propertyTypes),[Lc("renderItem",ge),Nc("sections",Pc,[]),Lc("extraData",kc),Lc("initialNumToRender",Le),Lc("inverted",xc),Lc("ItemSeparatorComponent",kc),Lc("keyExtractor",ge),Lc("ListEmptyComponent",kc),Lc("ListFooterComponent",kc),Lc("ListHeaderComponent",kc),Lc("onEndReached",ge),Lc("onEndReachedThreshold",Le),Lc("onRefresh",ge),Lc("onViewableItemsChanged",ge),Lc("refreshing",xc),Lc("removeClippedSubviews",xc),Lc("renderSectionFooter",ge),Lc("renderSectionHeader",ge),Lc("SectionSeparatorComponent",kc),Lc("stickySectionHeadersEnabled",xc)])},so={renderer:Io.StatusBar,propertyTypes:[Lc("animated",xc),Lc("backgroundColor",t),Lc("barStyle",zn),Lc("hidden",xc),Lc("networkActivityIndicatorVisible",xc),Lc("showHideTransition",zn),Lc("translucent",xc)]},be={renderer:Io.Switch,propertyTypes:[].concat(Dc(Vo.propertyTypes),[Lc("disabled",xc),Lc("ios_backgroundColor",t),Lc("onChange",ge),Lc("onValueChange",ge),Lc("thumbColor",t),Lc("trackColor",Mr),Lc("value",xc)])},Sc={renderer:Io.Text,getDataProps:function(e){return{children:e.content}},propertyTypes:[Lc("accessibilityHint",zn),Lc("accessibilityLabel",zn),Lc("accessibilityRole",zn),Lc("accessibilityState",Mr),Lc("accessible",xc),Lc("adjustsFontSizeToFit",xc),Lc("allowFontScaling",xc),Lc("dataDetectorType",zn),Lc("disabled",xc),Lc("ellipsizeMode",zn),Lc("maxFontSizeMultiplier",Le),Lc("minimumFontScale",Le),Lc("nativeID",zn),Lc("numberOfLines",Le),Lc("onLayout",ge),Lc("onLongPress",ge),Lc("onMoveShouldSetResponder",ge),Lc("onPress",ge),Lc("onResponderGrant",ge),Lc("onResponderMove",ge),Lc("onResponderRelease",ge),Lc("onResponderTerminate",ge),Lc("onResponderTerminationRequest",ge),Lc("onStartShouldSetResponderCapture",ge),Lc("onTextLayout",ge),Lc("pressRetentionOffset",Mr),Lc("selectable",xc),Lc("selectionColor",t),Lc("style",Hn),Lc("suppressHighlighting",xc),Lc("testID",zn),Lc("textBreakStrategy",zn)]},kc={renderer:Io.TextInput,propertyTypes:[].concat(Dc(Vo.propertyTypes),[Lc("allowFontScaling",xc),Lc("autoCapitalize",zn),Lc("autoCompleteType",zn),Lc("autoCorrect",xc),Lc("autoFocus",xc),Lc("blurOnSubmit",xc),Lc("caretHidden",xc),Lc("clearButtonMode",zn),Lc("clearTextOnFocus",xc),Lc("contextMenuHidden",xc),Lc("dataDetectorTypes",zn),Lc("defaultValue",zn),Lc("disableFullscreenUI",xc),Lc("editable",xc),Lc("enablesReturnKeyAutomatically",xc),Lc("importantForAutofill",zn),Lc("inlineImageLeft",zn),Lc("inlineImagePadding",Le),Lc("inputAccessoryViewID",zn),Lc("keyboardAppearance",zn),Lc("keyboardType",zn),Lc("maxFontSizeMultiplier",Le),Lc("maxLength",Le),Lc("multiline",xc),Lc("numberOfLines",Le),Lc("onBlur",ge),Lc("onChange",ge),Lc("onChangeText",ge),Lc("onContentSizeChange",ge),Lc("onEndEditing",ge),Lc("onFocus",ge),Lc("onKeyPress",ge),Lc("onLayout",ge),Lc("onScroll",ge),Lc("onSelectionChange",ge),Lc("onSubmitEditing",ge),Lc("onTextInput",ge),Lc("placeholder",zn),Lc("placeholderTextColor",t),Lc("returnKeyLabel",zn),Lc("returnKeyType",zn),Lc("rejectResponderTermination",xc),Lc("scrollEnabled",xc),Lc("secureTextEntry",xc),Lc("selection",Mr),Lc("selectionColor",t),Lc("selectTextOnFocus",xc),Lc("showSoftInputOnFocus",xc),Lc("spellCheck",xc),Lc("textAlign",zn),Lc("textContentType",zn),Lc("passwordRules",zn),Lc("style",Hn),Lc("textBreakStrategy",zn),Lc("underlineColorAndroid",t),Lc("value",zn)]),methods:["focus","blur","clear","isFocused"]},zn={renderer:Io.TouchableWithoutFeedback,propertyTypes:[Lc("accessibilityIgnoresInvertColors",xc),Lc("accessible",xc),Lc("accessibilityLabel",zn),Lc("accessibilityHint",zn),Lc("accessibilityRole",zn),Lc("accessibilityState",Mr),Lc("accessibilityActions",Pc),Lc("onAccessibilityAction",ge),Lc("accessibilityValue",Mr),Lc("delayLongPress",Le),Lc("delayPressIn",Le),Lc("delayPressOut",Le),Lc("disabled",xc),Lc("hitSlop",Mr),Lc("onBlur",ge),Lc("onFocus",ge),Lc("onLayout",ge),Lc("onLongPress",ge),Lc("onPress",ge),Lc("onPressIn",ge),Lc("onPressOut",ge),Lc("pressRetentionOffset",Mr),Lc("nativeID",zn),Lc("testID",zn),Lc("touchSoundDisabled",xc),Nc("children",Pc,z.a.createElement(Io.View))]};var Pc={renderer:Io.TouchableHighlight,propertyTypes:[].concat(Dc(zn.propertyTypes),[Lc("activeOpacity",Le),Lc("onHideUnderlay",ge),Lc("onShowUnderlay",ge),Lc("style",Hn),Lc("underlayColor",t),Lc("hasTVPreferredFocus",xc),Lc("nextFocusDown",xc),Lc("nextFocusForward",xc),Lc("nextFocusLeft",xc),Lc("nextFocusRight",xc),Lc("nextFocusUp",xc),Lc("testOnly_pressed",xc),Nc("children",Pc,z.a.createElement(Io.View))])},xc={renderer:Io.TouchableOpacity,propertyTypes:[].concat(Dc(zn.propertyTypes),[Lc("style",Hn),Lc("activeOpacity",Le),Lc("tvParallaxProperties",Mr),Lc("hasTVPreferredFocus",xc),Lc("nextFocusDown",xc),Lc("nextFocusForward",xc),Lc("nextFocusLeft",xc),Lc("nextFocusRight",xc),Lc("nextFocusUp",xc)]),methods:["setOpacityTo"]},Vc={rnactivityindicator:Bc(Uo),rnbutton:Bc(Ea),rnflatlist:Bc(ja),rnimage:Bc(Pa),rnimagebackground:Bc(ka),rnkeyboardavoidingview:Bc(al),rnrefreshcontrol:Bc(gl),rnsafeareaview:Bc(Ql),rnscrollview:Bc(As),rnsectionlist:Bc(d),rnstatusbar:Bc(so),rnswitch:Bc(be),rntext:Bc(Sc),rntextinput:Bc(kc),rntouchablehighlight:Bc(Pc),rntouchableopacity:Bc(xc),rntouchablewithoutfeedback:Bc(zn),rnview:Bc(Vo),rnvirtualizedlist:Bc(zs)};function Mc(e){return(Mc="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function Uc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zc(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Wc(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?zc(Object(r),!0).forEach(function(e){Jc(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zc(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Hc(){return(Hc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Gc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qc(e,t){return(qc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Kc(e){return(Kc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $c=r(24),Yc=r(10),Qc=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qc(e,t)}(o,no);var e,r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=Kc(r);return function(e,t){if(t&&("object"===Mc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}()}(this,n?(e=Kc(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function o(){return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),t.apply(this,arguments)}return e=[{key:"getStyle",value:function(e,t,r){var n=no.getStyle(e,t,r);return["marginTop","marginBottom","marginLeft","marginRight","width","height"].forEach(function(e){return n[e]&&(n[e]=parseFloat(n[e]))}),n}},{key:"getCustomStyle",value:function(e,r){if(no.getCustomStyle(e,r),r){var t,n=["margin","padding","width","height","bottom","top","left","right","flex","zIndex","radius"];for(t in r)!function(t){n.forEach(function(e){!t.toLowerCase().includes(e)||(e=parseFloat(r[t]))&&(r[t]=e)})}(t)}}},{key:"createControl",value:function(e,t,r){var l=r.model,s=r.data,n=r.errors,o=r.parentItem,c=r.buildermode,a=r.children,i=r.handleEvent,u=r.getAdditionalDataForControl,p=r.getFormFunc,f=r.hideControls,d=r.readOnlyControls,h=r.readOnly,y=r.disableRefs,m=r.uploadUrl,b=r.downloadUrl,v=r.extendedData,g=r.controlsToReplace,w=r.needCheckReplace,O=r.eventOnEdit,C=r.eventOnDelete,S=r.eventOnCopy,E=r.externalControlRender,j=r.externalControlList,k=r.adaptiveViewType,P=r.formData,x=void 0,_={key:l.key,name:l.key,style:this.getStyle(l,c,k),"data-buildertype":l["data-buildertype"],propertyName:l.propertyName||l.key};_.key||console.log(l);var R=_["data-buildertype"],D=w||g.includes(l.key);c&&this.isContainer(_["data-buildertype"])&&(_.isContainer=!0),y||(_.ref=l.key),void 0!==l.readOnly&&(_.readOnly=l.readOnly),(h||Array.isArray(d)&&d.includes(l.key))&&(_.readOnly=!0);var T=fo.regexForReplace,r=function n(e){if(!D||null==e||c)return e;function o(e){return null!=P?"row."===e.slice(1,5)?no.getFormattedDate(e.slice(5,e.length-1),s):no.getFormattedDate(e.slice(1,e.length-1),P):no.getFormattedDate(e.slice(1,e.length-1),s)}if(Array.isArray(e)){var a=[],i=!1;return e.forEach(function(e){var t,r={};for(t in e)e.hasOwnProperty(t)&&(void 0!==e[t]&&null!==e[t]&&"string"==typeof e[t]?(r[t]=e[t].replace(T,o),!i&&w&&r[t]!==e[t]&&(i=!0)):Array.isArray(e[t])?r[t]=n(e[t]):r[t]=e[t]);a.push(r)}),i&&g.push(l.key),a}if("string"!=typeof e)return e;var t=e.replace(T,o);return w&&e!==t&&g.push(l.key),t};if(void 0!==s&&(l.propertyName?_.value=s[l.propertyName]:_.value=s[_.key]),null!=n&&(l.propertyName?_.error=n[l.propertyName]:_.error=n[_.key]),t===en)"header"===R?(_.content=r(l.content),_.subheader=r(l.subheader)):"label"===R?_.content=r(l.content):"message"===R?(_.content=r(l.content),_.header=r(l.header),_.fluid=r(l.fluid)):"image"===R?(_.src=r(l.src),_.href=r(l.href)):"breadcrumb"===R?_.items=r(l.items):"button"===R&&(_.content=r(l.content)),x=z.a.createElement(en,Hc({},_,{additionalParams:{model:l,data:s,errors:n,children:a,handleEvent:i,parentItem:o,uploadUrl:m,downloadUrl:b}}));else if(t===pr)_.format=l.format,_.mask=l.mask,_.thousandSeparator=l.thousandSeparator,_.prefix=l.prefix,_.suffix=l.suffix,_.keyboardType=l.keyboardType,x=z.a.createElement(pr,Hc({},_,{additionalParams:{model:l,data:s,errors:n,children:a,handleEvent:i,parentItem:o,uploadUrl:m,downloadUrl:b}}));else if(t===yc)x=this.getControlJsx(t,_,{model:l,data:s,errors:n,children:a,handleEvent:i,parentItem:o,uploadUrl:m,downloadUrl:b});else if(t===et)_.label=l.label,_.defaultValue=l.defaultValue,_.placeholder=l.placeholder,_.disabled=l.disabled,_.fluid=l.fluid,_.selection=l.selection,_.multiple=l.multiple,_.search=l.search,_.dataModel=l.dataModel,_.clearable=l.clearable,_.columns=l.columns,_.paging=l.paging,_.pageSize=l.pageSize,_.getAdditionalDataForControl=u,_.filters=r(l.filters),_.textAsValue=l.textAsValue,l.text&&(_.textFunc=new Function("data","return ".concat(l.text,";"))),n&&void 0!==n[l.key]&&(_.error=n[l.key]),_.handleEvent=i,_.parentIsForm=no.isForm(o),x=z.a.createElement(et,_);else if(t===lt)_.defaultValue=l.defaultValue,_.items=l.items,_.imageUrl=l.imageUrl,_.handleEvent=i,x=z.a.createElement(lt,_);else if(t===qr)_.url=l.url,_.category=l.category,_.placeholder=l.placeholder,_.handleEvent=i,x=z.a.createElement(qr,_);else if(t===vr){var F=[];void 0!==l["data-elements"]&&(F=Array.isArray(l["data-elements"])?l["data-elements"]:ve.a.parse(l["data-elements"])),_.handleEvent=i,n&&void 0!==n[l.key]&&(_.error=n[l.key]),x=z.a.createElement(vr,Hc({},_,{label:l.label,direction:l.direction,placeholder:l.placeholder,items:F}))}else if(t===Re){if(_.columns=l.columns,_.draggable=l.draggable,_.hierarchical=l.hierarchical,_.parentIdField=l.parentIdField,_.idField=l.idField,_.childrenField=l.childrenField,_.collapseAll=l.collapseAll,_.disableAdd=l.disableAdd,_.disableCopy=l.disableCopy,_.disableDelete=l.disableDelete,_.placeholders=Yc(l.placeholders),_.getAdditionalDataForControl=u,_.placeholders&&(_.data=s,_.adaptiveViewType=k,_.controlBarParams={adaptiveViewType:k,eventOnDelete:C,eventOnEdit:O,eventOnCopy:S,parentComponent:e},_.createControl=this.createCollectionEditorControl.bind(this)),_.handleEvent=i,_.downloadUrl=b,_.uploadUrl=m,c&&void 0===_.value&&void 0!==_.columns){_.buildermode=c,_.createBuilderDropzone=no.createBuilderDropzone,_.value=[];for(var A=0;A<5;A++)_.value.push({});if(Boolean(l.hierarchical)&&void 0!==l.parentIdField&&""!==l.parentIdField&&void 0!==l.idField&&""!==l.idField)for(var I=1;I<5;I++){var L=_.value[I];void 0===L[l.idField]&&(L[l.idField]=I);for(var N=0;N<2;N++){var B={};B[l.parentIdField]=L[l.idField],_.value.push(B)}}}void 0!==v&&void 0!==v.filters&&void 0!==v.filters[_.key]&&(_.filter=new Lt(v.filters[_.key],_.columns.map(function(e){return e.key}))),x=z.a.createElement(Re,_)}else if(t===ir)_["data-items"]=r(l.items),_.pointing=l.pointing,_.secondary=l.secondary,_.tabular=l.tabular,_.fluid=l.fluid,_.vertical=l.vertical,_.activeitem=l.activeitem,_.link=l.link,_.handleEvent=i,x=z.a.createElement(ir,_);else if(t===wn)_["data-panes"]=l.panes,_.pointing=l.pointing,_.secondary=l.secondary,_.tabular=l.tabular,_.fluid=l.fluid,_.vertical=l.vertical,_.activeitem=l.activeitem,_.placeholders=l.placeholders,this.setCreateControlsProps(_,{data:s,buildermode:c,model:l,children:a,getFormFunc:p,getAdditionalDataForControl:u,disableRefs:y,uploadUrl:m,downloadUrl:b,extendedData:v,controlsToReplace:g,eventOnEdit:O,eventOnDelete:C,eventOnCopy:S,adaptiveViewType:k,handleEvent:i,externalControlList:j,externalControlRender:E,needCheckReplace:w,readOnly:h,hideControls:f,readOnlyControls:d,errors:n}),x=z.a.createElement(wn,_);else if(t===Un)_.blockSetState=l.blockSetState,_.blockCommands=l.blockCommands,_.setStateButton=l.setStateButton,_.handleEvent=i,_.getAdditionalDataForControl=u,_.blockLoadParameters=void 0===l.blockLoadParameters||l.blockLoadParameters,_.blockSelectScheme=l.blockSelectScheme,_.selectSchemeDropdown=l.selectSchemeDropdown,s&&(_.selectedScheme=s.__wf_selectedscheme),_.schemes=v&&v.schemes||[],n&&void 0!==n[l.key]&&(_.error=n[l.key]),c&&(_.commands=[{value:"approve",text:"Approve",type:1},{value:"back",text:"Back",type:2}],_.states=[{value:"draft",text:"Draft"},{value:"state1",text:"State 1"},{value:"state2",text:"State 2"},{value:"state3",text:"State 3"},{value:"finish",text:"Finish"}],_.schemes=[]),x=z.a.createElement(Un,_);else if(t===Ie){if(_.style&&"flex"===l["style-display"]&&(l["style-display-horizontalalign"]&&(_.style.justifyContent=l["style-display-horizontalalign"]),l["style-display-verticalalign"]?_.style.alignItems=l["style-display-verticalalign"]:_.style.alignItems="baseline"),_.childrenView=l.childrenView,o&&o["children-style-source"]){var V,M={};for(V in this.getCustomStyle(o["children-style-source"],M),M)_.style[V]||(_.style[V]=M[V])}delete _.propertyName,x=z.a.createElement(Ie,Hc({},_,{children:a}))}else t===xr?(_.slider=l.slider,_["item-visibleCondition"]=l["item-visibleCondition"],_.pageSize=l.pageSize,_.pagerType=l.pagerType,_.loadButtonLabel=l.loadButtonLabel,_.noRecordsLabel=l.noRecordsLabel,_.defaultSort=l.defaultSort,void 0!==v&&void 0!==v.filters&&void 0!==v.filters[_.key]&&(_.filter=new Lt(v.filters[_.key],["*"])),_.placeholders=Yc(l.placeholders),_.controlProps={readOnly:"server"===l.pagerType||h},_.model=l,_.data=s,F=_.controlProps,this.setCreateControlsProps(F,{children:a,getFormFunc:p,getAdditionalDataForControl:u,disableRefs:y,uploadUrl:m,downloadUrl:b,extendedData:v,controlsToReplace:g,eventOnEdit:O,eventOnDelete:C,eventOnCopy:S,adaptiveViewType:k,handleEvent:i,externalControlList:j,externalControlRender:E,hideControls:f,readOnlyControls:d,buildermode:c}),_.childrenView=l.childrenView,x=z.a.createElement(xr,_)):t===dn?(_.content=r(l.content),_.isHtml=l.isHtml,x=z.a.createElement(dn,_)):t===dt?(_.iconFiletypes=l.iconFiletypes,_.postUrl=m,_.showFiletypeIcon=l.showFiletypeIcon,_.autoProcessQueue=l.autoProcessQueue,_.addRemoveLinks=l.addRemoveLinks,x=z.a.createElement(dt,Hc({},_,{additionalParams:{model:l,data:s,errors:n,children:a,handleEvent:i,parentItem:o}}))):t===Rt?(_.iconFiletypes=l.iconFiletypes,_.postUrl=m,_.showFiletypeIcon=l.showFiletypeIcon,_.autoProcessQueue=l.autoProcessQueue,_.useDropzone=l.useDropzone,_.columns=l.columns,_.idField=l.idField,_.downloadUrl=b,x=z.a.createElement(Rt,Hc({},_,{additionalParams:{model:l,data:s,errors:n,children:a,handleEvent:i,parentItem:o}}))):t===fe?(_.downloadUrl=b,_.uploadUrl=m,_.showPreview=l.showPreview,_.compact=l.compact,_.compression=l.compression,_.label=l.label,_.shotLabel=l.shotLabel,_.galleryLabel=l.galleryLabel,_.openLabel=l.openLabel,_.clearLabel=l.clearLabel,_.getAdditionalDataForControl=u,null!=i&&(_.onChange=function(e,t){var r=t.name,n=t.value,t=t.parameters;i({syntheticEvent:e,key:_.name,propertyName:_.propertyName,eventName:"onChange",name:r,value:n,parameters:t})}),x=z.a.createElement(fe,Hc({},_,{additionalParams:{model:l,data:s,errors:n,children:a,handleEvent:i,parentItem:o}}))):t===sn?(_.downloadUrl=b,_.uploadUrl=m,_.showPreview=l.showPreview,_.compact=l.compact,_.label=l.label,_.drawLabel=l.drawLabel,_.clearCanvasLabel=l.clearCanvasLabel,_.uploadLabel=l.uploadLabel,_.openLabel=l.openLabel,_.clearLabel=l.clearLabel,_.getAdditionalDataForControl=u,null!=i&&(_.onChange=function(e,t){var r=t.name,n=t.value,t=t.parameters;i({syntheticEvent:e,key:_.name,propertyName:_.propertyName,eventName:"onChange",name:r,value:n,parameters:t})}),x=z.a.createElement(sn,Hc({},_,{additionalParams:{model:l,data:s,errors:n,children:a,handleEvent:i,parentItem:o}}))):t===kn?(_.header=r(l.header),_.subheader=r(l.subheader),_.imgurl=r(l.imgurl),_.placeholders=l.placeholders,_.activeEvent=l.events&&l.events.onClick&&l.events.onClick.active,this.setCreateControlsProps(_,{data:s,buildermode:c,model:l,children:a,getFormFunc:p,getAdditionalDataForControl:u,disableRefs:y,uploadUrl:m,downloadUrl:b,extendedData:v,controlsToReplace:g,eventOnEdit:O,eventOnDelete:C,eventOnCopy:S,adaptiveViewType:k,handleEvent:i,externalControlList:j,externalControlRender:E,needCheckReplace:w,readOnly:h,hideControls:f,readOnlyControls:d,errors:n}),x=z.a.createElement(kn,_)):((E=E||function(){if(window.DWKitFormSettings)return window.DWKitFormSettings.externalControlRender}())&&(_.parentIsForm=no.isForm(o),x=E(e,t,{model:l,data:s,errors:n,parentItem:o,buildermode:c,children:a,handleEvent:i,getAdditionalDataForControl:u,hideControls:f,readOnlyControls:d,readOnly:h,disableRefs:y,uploadUrl:m,downloadUrl:b,extendedData:v,controlsToReplace:g,needCheckReplace:w,eventOnEdit:O,eventOnDelete:C,eventOnCopy:S,controlProps:_,replaceControlValue:r})),x||console.error("Control is unsupported!",t,l));return x}},{key:"isContainer",value:function(e){return he(o.containers[e])}},{key:"getPlatformContainerControl",value:function(){return Io.View}},{key:"getControlJsx",value:function(e,t,r){var n=r.model,o=(r.data,r.errors,r.children),a=(r.handleEvent,r.parentItem,r.uploadUrl,r.downloadUrl,n["data-buildertype"]),i=Vc[a];return i?(r=Object.assign({},i.defaultProps),he(o)&&(r.children=o),a=i.renderer,o=i.getDataProps?i.getDataProps(n):{},(o=Wc(Wc(Wc({},$c(r,t)),this.getControlProps(n,i.propertyTypes)),o)).className&&delete o.className,z.a.createElement(a,o)):W("null-control",{key:n.key,text:"".concat(a," is unsupported")})}},{key:"getControlProps",value:function(e,t){var r,n=e&&e["control-model"]||{},o={},a=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e){if(e){if("string"==typeof e)return Uc(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Uc(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;he(n[i.name])&&(o[i.name]=n[i.name])}}catch(e){a.e(e)}finally{a.f()}return o}},{key:"createCollectionEditorControl",value:function(e,t,r,n){if(a=this.getControlByType(t)){var o=this.createControl(e,a,Wc(Wc({},r),{},{needCheckReplace:!0})),a=[];return r.buildermode?(n=z.a.createElement(Yn,{key:r.model.key+"_controlbar",model:r.model,parent:n.parentComponent,onDelete:n.eventOnDelete,onEdit:n.eventOnEdit,onCopy:n.eventOnCopy,control:o,builderActions:this.builderActions}),a.push(n),a):o}console.error("Control is unsupported!",t,e,r)}}],Gc(o.prototype,e),o}();function Zc(e){return(Zc="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function Xc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function eu(e,t){return(eu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tu(e){return(tu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Jc(Qc,"containers",{form:"",formgroup:"",grid:"",gridcolumn:"",container:"",rnview:"",View:"",repeater:""});var ru=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eu(e,t)}(a,Ao);var r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=tu(r);return function(e,t){if(t&&("object"===Zc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}()}(this,n?(e=tu(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function a(e){!function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this);var t,r=o.call(this,e),n=(e=t=Wn.a.createActions(["add","showEditForm","remove","saveData","save","move","insert"]),t=co(),new Qc(e,t));return r.createControls=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.createControls.apply(n,t)},r}return Xc(a.prototype,[{key:"render",value:function(){var e=this.getItemsForRender();return z.a.createElement(Io.View,{style:{margin:5}},e)}}]),a}();function nu(e){return(nu="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function ou(e,t){return(ou=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function au(e){return(au=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var iu=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ou(e,t)}(t,ru);var r,n,e=(r=t,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=au(r);return function(e,t){if(t&&("object"===nu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}()}(this,n?(e=au(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function t(){return function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e.apply(this,arguments)}return t}();function lu(e){return z.a.createElement(Io.View,null,z.a.createElement(Lo.TabBar,{selectedIndex:e.selectedIndex,onSelect:e.onPress},e.items.map(function(e){return z.a.createElement(Lo.Tab,{title:e})})),z.a.createElement(Io.View,{style:Io.StyleSheet.flatten(Wo.controls.tabBarChild)},e.children))}function su(e){return(su="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function cu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function uu(e,t){return(uu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pu(e){return(pu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var fu=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uu(e,t)}(o,c.Component);var e,r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=pu(r);return function(e,t){if(t&&("object"===su(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}()}(this,n?(e=pu(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function o(){return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),t.apply(this,arguments)}return e=[{key:"render",value:function(){return z.a.createElement(Io.View,{style:Wo.dwKitMessage},this.props.children)}}],cu(o.prototype,e),o}();function du(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function hu(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?du(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):du(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function yu(e){var t={};return e.flex&&(t.flex=e.flex),e=hu(hu({},e),Wo.dwKitTextareaProps),z.a.createElement(Io.View,{style:t},z.a.createElement(Yl,e))}function mu(e){return(mu="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function bu(){return(bu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function vu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gu(e,t){return(gu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wu(e){return(wu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Vo=function(e){return z.a.createElement(Io.View,{style:Wo.dwKitMessageContent},e.children)},(zs="Content")in(r=fu)?Object.defineProperty(r,zs,{value:Vo,enumerable:!0,configurable:!0,writable:!0}):r[zs]=Vo;var Ou=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gu(e,t)}(o,c.Component);var e,r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=wu(r);return function(e,t){if(t&&("object"===mu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}()}(this,n?(e=wu(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function o(){return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),t.apply(this,arguments)}return e=[{key:"render",value:function(){return z.a.createElement(Lo.Text,bu({},this.props,{category:"label",appearance:"hint"}),this.props.children)}}],vu(o.prototype,e),o}();function Cu(e){return(Cu="function"==typeof Symbol&&"symbol"==Pu(Symbol.iterator)?function(e){return Pu(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":Pu(e)})(e)}function Su(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Eu(e,t){return(Eu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ju(e){return(ju=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ku=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Eu(e,t)}(o,c.Component);var e,r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t=ju(r);return function(e,t){if(t&&("object"===Cu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}()}(this,n?(e=ju(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function o(e){return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e)).state={activeItem:"general",defaultValuePreferInt:!1},e.menuItems=[{key:"general",name:"general",content:e.getLocalValue("generaltab","General")},{key:"style",name:"style",content:e.getLocalValue("styletab","Style")},{key:"events",name:"events",content:e.getLocalValue("eventstab","Events")},{key:"other",name:"other",content:e.getLocalValue("othertab","Other")}],e}return e=[{key:"getLocalValue",value:function(e,t,r){var n=this.props.localization,r=he(r)?r:"base";return de(n)||de(n[r])||de(n[r][e])?t:n[r][e]}},{key:"handleItemClick",value:function(e){e=this.menuItems[e],this.setState({activeItem:e.name})}},{key:"getDescription",value:function(){var r=this.state.activeItem,n=0,e=this.menuItems.map(function(e,t){return n=e.name===r?t:n,e.content});return z.a.createElement(lu,{items:e,onPress:this.handleItemClick.bind(this),selectedIndex:n},this.getDetailDescription(r))}},{key:"getDetailDescription",value:function(e){var t;return"general"===e?t=this.getGeneralDescription():"style"===e?t=this.getStyleDescription():"events"===e?t=this.getEventsDescription():"tooltip"===e?t=this.getToolTipDescription():"other"===e&&(t=this.getOtherDescription()),t}},{key:"getGeneralDescription",value:function(){var e=this.props.data,t=this.props.parent.handleTextChange.bind(this.props.parent);return z.a.createElement(Io.View,{key:"generalDescriptionForm",style:Wo.formGroupEqual},z.a.createElement(Yl,{label:"Name",value:e.key,onChange:t("key")}))}},{key:"getStyleDescription",value:function(){var e=this.props.data,t=this.props.parent.handleTextChange.bind(this.props.parent),r=this.props.parent.handleIntChange.bind(this.props.parent);return this.getLocalValue("adaptivedefault","Any"),this.getLocalValue("adaptivedesctop","Desktop"),this.getLocalValue("adaptivemobile","Mobile"),z.a.createElement(Ji,{key:"styleDescriptionForm"},z.a.createElement(Ki,null,z.a.createElement(Yl,{label:this.getLocalValue("widthfield","Width"),placeholder:"100",value:e["style-width"],onChange:r("style-width")}),z.a.createElement(Yl,{label:this.getLocalValue("heightfield","Height"),placeholder:"100",value:e["style-height"],onChange:r("style-height")})),z.a.createElement(Ki,null,z.a.createElement(Yl,{label:this.getLocalValue("margintopfield","Margin Top"),placeholder:"0",value:e["style-marginTop"],onChange:r("style-marginTop")}),z.a.createElement(Yl,{label:this.getLocalValue("marginbottomfield","Margin Bottom"),placeholder:"0",value:e["style-marginBottom"],onChange:r("style-marginBottom")}),z.a.createElement(Yl,{label:this.getLocalValue("marginleftfield","Margin Left"),placeholder:"0",value:e["style-marginLeft"],onChange:r("style-marginLeft")}),z.a.createElement(Yl,{label:this.getLocalValue("marginrightfield","Margin Right"),placeholder:"0",value:e["style-marginRight"],onChange:r("style-marginRight")})),z.a.createElement(yu,{label:this.getLocalValue("stylefield","Style"),placeholder:"/*** Example Code ***/\ncolor:red;\npaddingTop:5px;",value:e["style-source"],onChangeText:t("style-source")}),z.a.createElement(Ko,{label:this.getLocalValue("hiddenfield","Hidden"),checked:e["style-hidden"],onChange:t("style-hidden")}))}},{key:"getEventsList",value:function(){return[]}},{key:"getEventsDescription",value:function(){var e=this.props.data;de(e.events)&&(e.events={});var t,r=this.props.parent.handleTextChange.bind(this.props.parent),n=this.props.parent.handleIntChange.bind(this.props.parent),o=this.props.actions,a=this.getEventsList();if(Array.isArray(a)&&0!==a.length){for(var i=this.props.parent.getControlsList(),l=[],s=0;s<i.length;s++)e.key!=i[s]&&l.push({text:i[s],value:i[s]});t=z.a.createElement(Ct,{key:"events",name:"events",data:e.events,events:a,actions:o,targets:l,onAdditionActions:this.handleAdditionActions.bind(this),onChange:r})}else t=z.a.createElement(fu,null,z.a.createElement(ki.Image,{source:{uri:"/images/dwkitbuilder-info.png"},style:Wo.dwKitMessageIcon}),z.a.createElement(fu.Content,null,z.a.createElement(ki.Text,null,this.getLocalValue("controlhasnoeventsmsg","This control has no events."))));return r=null,a.includes("onChange")&&(r=z.a.createElement(Yl,{placeholder:"0",label:this.getLocalValue("onchangetimeout","onChange timeout"),value:e.onChangeTimeout,onChange:n("onChangeTimeout",!0)})),z.a.createElement(Ji,{key:"eventsDescriptionForm"},z.a.createElement(fu,null,z.a.createElement(ki.Image,{source:{uri:"/images/dwkitbuilder-info.png"},style:{width:32,height:32}}),z.a.createElement(fu.Content,null,z.a.createElement(ki.Text,null,this.getLocalValue("eventsinfomsg","These flags enable processing from this element.")))),r,t)}},{key:"getToolTipDescription",value:function(){var e=[{text:this.getLocalValue("tooltipdefault","Default"),value:""},{text:this.getLocalValue("tooltiptopcenter","Top Center"),value:"top"},{text:this.getLocalValue("tooltiptopleft","Top Left"),value:"top start"},{text:this.getLocalValue("tooltiptopright","Top Right"),value:"top end"},{text:this.getLocalValue("tooltipbottomcenter","Bottom Center"),value:"bottom"},{text:this.getLocalValue("tooltipbottomleft","Bottom Left"),value:"bottom start"},{text:this.getLocalValue("tooltipbottomright","Bottom right"),value:"bottom end"},{text:this.getLocalValue("tooltipleftcenter","Left Center"),value:"left"},{text:this.getLocalValue("tooltiprightright","Right Center"),value:"right"}],t=(this.getLocalValue("tooltipdefault","Default"),this.getLocalValue("tooltiphover","Hover"),this.getLocalValue("tooltipclick","Click"),this.getLocalValue("tooltipfocus","Focus"),this.props.data),r=this.props.parent.handleTextChange.bind(this.props.parent);return z.a.createElement(Ji,{key:"tooltipDescriptionForm"},z.a.createElement(Ko,{label:this.getLocalValue("tooltipenabledfield","Enabled"),checked:t["tooltip-enabled"],onChange:r("tooltip-enabled")}),z.a.createElement(Ki,null,z.a.createElement(Yl,{label:this.getLocalValue("tooltipheaderfield","Tooltip Header"),value:t["tooltip-header"],onChange:r("tooltip-header"),disabled:!t["tooltip-enabled"]}),z.a.createElement(Yl,{label:this.getLocalValue("tooltipcontentfield","Tooltip Content"),value:t["tooltip-content"],onChange:r("tooltip-content"),disabled:!t["tooltip-enabled"]})),z.a.createElement(ia,{options:e,placeholder:"Default",label:this.getLocalValue("tooltippositionfield","Tooptip position"),value:t["tooltip-position"],onChange:r("tooltip-position"),disabled:!t["tooltip-enabled"]}),z.a.createElement(Io.View,{style:{marginTop:30}},z.a.createElement(Ou,null,this.getLocalValue("errortooltipfield","Error-tooltip")),z.a.createElement(Lo.Divider,{style:{marginBottom:10}}),z.a.createElement(Ki,null,z.a.createElement(Ko,{label:this.getLocalValue("errortooltipdisabledfield","Disable error tooptip"),checked:t["tooltip-errordisabled"],onChange:r("tooltip-errordisabled")}),z.a.createElement(ia,{options:e,placeholder:"Default",label:this.getLocalValue("errortooltippositionfield","Error tooptip position"),value:t["tooltip-errorposition"],onChange:r("tooltip-errorposition")}))))}},{key:"getOtherDescription",value:function(){var e=this.props.data,t=this.props.parent.handleTextChange.bind(this.props.parent),r=this.props.parent.handleIntChange.bind(this.props.parent),r=this.state.defaultValuePreferInt?r:t;return z.a.createElement(Ji,{key:"otherDescriptionForm"},z.a.createElement(Yl,{label:this.getLocalValue("propertynamefield","Property Name"),value:e.propertyName,onChange:t("propertyName")}),z.a.createElement(Ko,{label:this.getLocalValue("requiredfield","Required"),checked:e["other-required"],onChange:t("other-required")}),z.a.createElement(Yl,{label:this.getLocalValue("defaultvaluefield","Default value"),value:e.defaultValue,onChange:r("defaultValue")}),z.a.createElement(yu,{label:this.getLocalValue("customvalidationfield","Custom Validation"),placeholder:"/*** Example Code ***/\nvalue > 10 ? true : 'Must be more 10'",value:e["other-customValidation"],onChangeText:t("other-customValidation")}),z.a.createElement(yu,{label:this.getLocalValue("visibleconditionfield","Visible condition"),placeholder:"/*** Example Code ***/\ndata.type == 1 ? true : false",value:e["other-visibleConition"],onChangeText:t("other-visibleConition")}),z.a.createElement(yu,{label:this.getLocalValue("readonlyconditionfield","ReadOnly condition"),placeholder:"/*** Example Code ***/\ndata.type == 1 ? true : false",value:e["other-readOnlyConition"],onChangeText:t("other-readOnlyConition")}))}},{key:"render",value:function(){var t=this;return z.a.createElement(ws,{visible:this.props.open,onClose:this.props.onClose.bind(this.props.parent)},z.a.createElement(ws.Header,null,z.a.createElement(ki.Text,{style:Wo.dwKitModalComponentName},this.props.data["data-buildertype"])),z.a.createElement(ws.Content,null,this.getDescription()),z.a.createElement(ws.Actions,null,z.a.createElement(Ss,{onPress:function(){var e;t.beforeSave(),(e=t.props.onSave.bind(t.props.parent)).call.apply(e,arguments)},title:this.getLocalValue("savebutton","Save"),type:"solid"}),z.a.createElement(Ss,{onPress:this.props.onClose.bind(this.props.parent),appearance:"outline",title:this.getLocalValue("cancelbutton","Cancel")})))}},{key:"beforeSave",value:function(){}},{key:"checkActionsList",value:function(e){for(var t=!1,r=0;r<this.props.actions.length;r++)if(this.props.actions[r]==e){t=!0;break}t||this.props.actions.push({text:e,value:e})}},{key:"handleAdditionActions",value:function(e,t){t=t.value,this.checkActionsList(t),this.forceUpdate()}}],Su(o.prototype,e),o}()}],E={},C.m=S,C.c=E,C.d=function(e,t,r){C.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},C.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},C.t=function(t,e){if(1&e&&(t=C(t)),8&e)return t;if(4&e&&"object"==Pu(t)&&t&&t.__esModule)return t;var r=Object.create(null);if(C.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)C.d(r,n,function(e){return t[e]}.bind(null,n));return r},C.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return C.d(t,"a",t),t},C.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},C.p="",C(C.s=25);function C(e){if(E[e])return E[e].exports;var t=E[e]={i:e,l:!1,exports:{}};return S[e].call(t.exports,t,t.exports,C),t.l=!0,t.exports}var S,E},"object"==Pu(n)&&"object"==Pu(e)?e.exports=r(o(0),o(3),o(23),o(10),o(4),o(24),o(16),o(12),o(25),o(9),o(26),o(27),o(32),o(33),o(34),o(35),o(36),o(37),o(38),o(11)):(t=[o(0),o(3),o(23),o(10),o(4),o(24),o(16),o(12),o(25),o(9),o(26),o(27),o(32),o(33),o(34),o(35),o(36),o(37),o(38),o(11)],void 0===(r="function"==typeof(r=r)?r.apply(n,t):r)||(e.exports=r))}.call(this,o(47)(e))},function(e,t){e.exports=F},function(e,t){e.exports=A},function(e,t){e.exports=I},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,d="function"!=typeof Object.create&&"~";function o(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(){}a.prototype._events=void 0,a.prototype.eventNames=function(){var e,t=this._events,r=[];if(!t)return r;for(e in t)n.call(t,e)&&r.push(d?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},a.prototype.listeners=function(e,t){var r=this._events&&this._events[d?d+e:e];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var n=0,o=r.length,a=new Array(o);n<o;n++)a[n]=r[n].fn;return a},a.prototype.emit=function(e,t,r,n,o,a){var i=d?d+e:e;if(!this._events||!this._events[i])return!1;var l,s=this._events[i],c=arguments.length;if("function"==typeof s.fn){switch(s.once&&this.removeListener(e,s.fn,void 0,!0),c){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,t),!0;case 3:return s.fn.call(s.context,t,r),!0;case 4:return s.fn.call(s.context,t,r,n),!0;case 5:return s.fn.call(s.context,t,r,n,o),!0;case 6:return s.fn.call(s.context,t,r,n,o,a),!0}for(f=1,l=new Array(c-1);f<c;f++)l[f-1]=arguments[f];s.fn.apply(s.context,l)}else for(var u,p=s.length,f=0;f<p;f++)switch(s[f].once&&this.removeListener(e,s[f].fn,void 0,!0),c){case 1:s[f].fn.call(s[f].context);break;case 2:s[f].fn.call(s[f].context,t);break;case 3:s[f].fn.call(s[f].context,t,r);break;default:if(!l)for(u=1,l=new Array(c-1);u<c;u++)l[u-1]=arguments[u];s[f].fn.apply(s[f].context,l)}return!0},a.prototype.on=function(e,t,r){r=new o(t,r||this),e=d?d+e:e;return this._events||(this._events=d?{}:Object.create(null)),this._events[e]?this._events[e].fn?this._events[e]=[this._events[e],r]:this._events[e].push(r):this._events[e]=r,this},a.prototype.once=function(e,t,r){r=new o(t,r||this,!0),e=d?d+e:e;return this._events||(this._events=d?{}:Object.create(null)),this._events[e]?this._events[e].fn?this._events[e]=[this._events[e],r]:this._events[e].push(r):this._events[e]=r,this},a.prototype.removeListener=function(e,t,r,n){e=d?d+e:e;if(!this._events||!this._events[e])return this;var o=this._events[e],a=[];if(t)if(o.fn)(o.fn!==t||n&&!o.once||r&&o.context!==r)&&a.push(o);else for(var i=0,l=o.length;i<l;i++)(o[i].fn!==t||n&&!o[i].once||r&&o[i].context!==r)&&a.push(o[i]);return a.length?this._events[e]=1===a.length?a[0]:a:delete this._events[e],this},a.prototype.removeAllListeners=function(e){return this._events&&(e?delete this._events[d?d+e:e]:this._events=d?{}:Object.create(null)),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prototype.setMaxListeners=function(){return this},a.prefixed=d,e.exports=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mix=function(e){var o={init:[],preEmit:[],shouldEmit:[]},t=function t(r){var n={};return r.mixins&&r.mixins.forEach(function(e){a.extend(n,t(e))}),a.extend(n,r),Object.keys(o).forEach(function(e){r.hasOwnProperty(e)&&o[e].push(r[e])}),n}(e);1<o.init.length&&(t.init=function(){var t=arguments;o.init.forEach(function(e){e.apply(this,t)},this)});1<o.preEmit.length&&(t.preEmit=function(){return o.preEmit.reduce(function(e,t){t=t.apply(this,e);return void 0===t?e:[t]}.bind(this),arguments)});1<o.shouldEmit.length&&(t.shouldEmit=function(){var t=arguments;return!o.shouldEmit.some(function(e){return!e.apply(this,t)},this)});return Object.keys(o).forEach(function(e){1===o[e].length&&(t[e]=o[e][0])}),t};var a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(r(5))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bindMethods=function(e,t){for(var r in t){var n;Object.getOwnPropertyDescriptor&&Object.defineProperty?(n=Object.getOwnPropertyDescriptor(t,r)).value&&"function"==typeof n.value&&t.hasOwnProperty(r)&&(e[r]=t[r].bind(e)):"function"==typeof(n=t[r])&&t.hasOwnProperty(r)&&(e[r]=n.bind(e))}return e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAction=function e(t){t=t||{};u.isObject(t)||(t={actionName:t});for(var r in p)if(!h[r]&&f[r])throw new Error("Cannot override API method "+r+" in Reflux.ActionMethods. Use another method name or override it on Reflux.PublisherMethods instead.");for(var n in t)if(!h[n]&&f[n])throw new Error("Cannot override API method "+n+" in action creation. Use another method name or override it on Reflux.PublisherMethods instead.");t.children=t.children||[];t.asyncResult&&(t.children=t.children.concat(["completed","failed"]));var o=0,a={};for(;o<t.children.length;o++){var i=t.children[o],l="string"==typeof i?i:i.actionName;a[l]=e(i)}var s=u.extend({eventLabel:"action",emitter:new u.EventEmitter,_isAction:!0},f,p,t);var c=function e(){var t,r=!1;for(t in e.childActions){r=!0;break}var n=!e.sync&&void 0!==e.sync||r,n=n?"triggerAsync":"trigger";return e[n].apply(e,arguments)};u.extend(c,a,s);d.addAction(c);return c};var u=n(r(5)),p=n(r(28)),f=n(r(19)),d=n(r(18));function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}var h={preEmit:1,shouldEmit:1}},function(e,t,r){var n=r(8),o=r(20),a=r(5);e.exports=function(e,r){return a.throwIf(void 0===r,"Reflux.connect() requires a key."),{getInitialState:function(){return a.isFunction(e.getInitialState)?a.object([r],[e.getInitialState()]):{}},componentDidMount:function(){var t=this;a.extend(t,n),this.listenTo(e,function(e){t.setState(a.object([r],[e]))})},componentWillUnmount:o.componentWillUnmount}}},function(e,t,r){var a=r(8),i=r(20),l=r(5);e.exports=function(r,n,o){return l.throwIf(l.isFunction(n),"Reflux.connectFilter() requires a key."),{getInitialState:function(){if(!l.isFunction(r.getInitialState))return{};var e=o.call(this,r.getInitialState());return void 0!==e?l.object([n],[e]):{}},componentDidMount:function(){var t=this;l.extend(this,a),this.listenTo(r,function(e){e=o.call(t,e);t.setState(l.object([n],[e]))})},componentWillUnmount:i.componentWillUnmount}}},function(e,t,r){var o=r(8);e.exports=function(t,r,n){return{componentDidMount:function(){for(var e in o)if(this[e]!==o[e]){if(this[e])throw"Can't have other property '"+e+"' when using Reflux.listenTo!";this[e]=o[e]}this.listenTo(t,r,n)},componentWillUnmount:o.stopListeningToAll}}},function(e,t,r){var n=r(8);e.exports=function(t){return{componentDidMount:function(){for(var e in n)if(this[e]!==n[e]){if(this[e])throw"Can't have other property '"+e+"' when using Reflux.listenToMany!";this[e]=n[e]}this.listenToMany(t)},componentWillUnmount:n.stopListeningToAll}}},function(e,t,r){var n=r(17);if(n.defineReact=r(57),n.utils.inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},"undefined"!=typeof React&&React)n.defineReact(React);else try{var o=r(0);n.defineReact(o)}catch(e){}},function(e,t,r){var i,p=r(17),l=!1;function f(e,t){if(!e)return t;for(var r=!1,n={},o=0,a=e.length;o<a;o++){var i=e[o];t.hasOwnProperty(i)&&(r=!0,n[i]=t[i])}return!!r&&n}e.exports=function t(e,r,n){var o;try{i=e||i||React,o=n||i.Component}catch(e){return}if(i&&o&&(!l||n)){var a=function(e,t,r){o.call(this,e,t,r)};if(p.utils.inherits(a,o),(e=a.prototype).storeKeys=null,e.componentWillMount=function(){if(this.store&&(Array.isArray(this.stores)?this.stores.unshift(this.store):this.stores=[this.store]),this.stores){this.__storeunsubscribes__=this.__storeunsubscribes__||[];for(var t=this.setState.bind(this),e=function(e){(e=f(this.storeKeys,e))&&t(e)}.bind(this),r=0,n=this.stores.length;r<n;r++){var o=this.stores[r];if("function"==typeof o){var a=o.id;if(o.singleton||(o.singleton=new o,a&&(p.stores[a]=o.singleton)),this.stores[r]=o=o.singleton,(o.id=a)&&p.GlobalState[a]){for(var i in p.GlobalState[a])o.state[i]=p.GlobalState[a][i];p.GlobalState[a]=o.state}else a&&(p.GlobalState[a]=o.state)}p.serverMode||this.__storeunsubscribes__.push(o.listen(e));var l=f(this.storeKeys,o.state);l&&this.setState(l)}}this.__readytomap__=!0;var s=this.__delayedmaps__;if(s)for(var c=0,u=s.length;c<u;c++)s[c].func(s[c].state);this.__delayedmaps__=null},e.componentWillUnmount=function(){if(this.__storeunsubscribes__)for(var e=0,t=this.__storeunsubscribes__.length;e<t;e++)this.__storeunsubscribes__[e]();this.__readytomap__=!1},e.mapStoreToState=function(e,n){"function"==typeof e&&(e=e.singleton||p.initStore(e));var o=this;function t(e){if(e=n.call(o,e)){var t,r=!1;for(t in e){r=!0;break}r&&o.setState(e)}}this.__storeunsubscribes__=this.__storeunsubscribes__||[],this.__storeunsubscribes__.push(e.listen(t)),this.__readytomap__?t(e.state):(this.__delayedmaps__=this.__delayedmaps__||[],this.__delayedmaps__.push({func:t,state:e.state}))},a.extend=function(e){return t(null,0,e)},n)return a;p.Component=a,i.PureComponent&&(p.PureComponent=a.extend(i.PureComponent)),e=(a=function(){this.__store__=p.createStore(),this.state={};var e,r=this;for(e in this.__store__)!function(t){Object.defineProperty(r,t,{get:function(){return r.__store__[t]},set:function(e){r.__store__[t]=e}})}(e)}).prototype,Object.defineProperty(e,"listenables",{get:function(){return this.__listenables__},set:function(e){var r={};Array.isArray(e)?e.forEach(function(e){for(var t in e)r[t]=e[t]}):r=e,this.__listenables__=r,this.listenToMany(r)},enumerable:!0,configurable:!0}),e.setState=function(e){for(var t in e)this.state[t]=e[t];this.id&&(p.GlobalState[this.id]=this.state),this.trigger(e)},Object.defineProperty(a,"isES6Store",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(a,"state",{get:function(){if(!this.singleton)throw new Error("Reflux.Store.state is inaccessible before the store has been initialized.");return this.singleton.state},enumerable:!0,configurable:!0}),p.Store=a,p.GlobalState=p.GlobalState||{},p.stores={},p.getGlobalState=function(){return function e(t,r){if(null===t||"object"!=typeof t)return t;if(t.constructor!==Object&&t.constructor!==Array)return t;if(t.constructor===Date||t.constructor===RegExp||t.constructor===Function||t.constructor===String||t.constructor===Number||t.constructor===Boolean)return new t.constructor(t);for(var n in r=r||new t.constructor,t)r[n]=void 0===r[n]?e(t[n],null):r[n];return r}(p.GlobalState)},p.setGlobalState=function(e){for(var t in e)p.stores[t]?p.stores[t].setState(e[t]):p.GlobalState[t]=e[t]},p.initializeGlobalStore=p.initStore=function(e){var t=e.id;if(e.singleton)return e.singleton;if(!t)return e.singleton=new e,e.singleton;var r=e.singleton=new e;if((p.stores[t]=r).id=t,p.GlobalState[t]){for(var n in p.GlobalState[t])r.state[n]=p.GlobalState[t][n];p.GlobalState[t]=r.state}else p.GlobalState[t]=r.state;return r},l=!0}}},function(e,t,r){"use strict";r.r(t),r.d(t,"Actions",function(){return L}),r.d(t,"API",function(){return le}),r.d(t,"ApplicationRouter",function(){return un}),r.d(t,"FlowContent",function(){return zt}),r.d(t,"FormContent",function(){return At}),r.d(t,"WorkflowContent",function(){return Yt}),r.d(t,"ScreenContent",function(){return en}),r.d(t,"NotificationComponent",function(){return rr}),r.d(t,"SignalRConnector",function(){return fn}),r.d(t,"StateBindedForm",function(){return pr}),r.d(t,"Store",function(){return V}),r.d(t,"Thunks",function(){return dt}),r.d(t,"DWKitAppForm",function(){return qe}),r.d(t,"oidcClient",function(){return kn}),r.d(t,"navigate",function(){return rn}),r.d(t,"navigationRef",function(){return tn});var a=r(0),l=r.n(a),n=r(13),b=r.n(n),o=r(6),L=Object(o.createActions)({UPDATESTATE:function(e){return{stateDelta:e}},APP:{USERINFO:{FETCH:{BEGIN:void 0,SUCCESS:function(e){return{user:e}},FAILURE:function(e,t){return{error:e,details:t}}}},CLEARERRORS:void 0,FAILURE:function(e,t,r){return{error:e,details:t,level:r}},FETCHBEGIN:void 0,RESETFETCHCOUNT:void 0,IMPERSONATEDUSERIDFROMURL:void 0,SETAUTH:function(e){return{type:e}},FORM:{MODEL:{FETCH:{BEGIN:void 0,SUCCESS:function(e,t,r,n,o){return{model:e,name:r,modalId:n,formParams:o,mapping:t}},FAILURE:function(e,t){return{error:e,details:t}}},CHANGE:function(e,t){return{name:e,modalId:t}}},DATA:{FETCH:{BEGIN:void 0,SUCCESS:function(e,t,r){return{data:e,isNew:r,modalId:t}},FAILURE:function(e,t){return{error:e,details:t}}},UPDATE:function(e,t,r,n){return{key:e,value:t,modalId:r,additionalValues:n}},SAVE:{BEGIN:void 0,SUCCESS:function(e,t,r){return{data:e,url:r,modalId:t}},FAILURE:function(e,t,r,n){return{error:e,details:t,level:r,formerrors:n}}},DELETE:{BEGIN:void 0,SUCCESS:function(e){return{name:e}},FAILURE:function(e,t,r,n){return{error:e,details:t,level:r,formerrors:n}}},UPDATEFROMCHILD:function(e,t,r){return{key:e,value:t,modalId:r}},UPDATEMODALFILTER:function(e,t){return{filter:e,modalId:t}},SETPROCESSPARAMETERS:function(e,t){return{modalId:e,parameters:t}}},CLEAR:function(e){return{modalId:e}},REFRESH:function(e){return{modalId:e}}}},ROUTER:{PUSH:function(e){return{newurl:e}},REDIRECT:function(e){return{newurl:e}},REFRESH:function(){return{newurl:"refresh"}},RELOAD:function(){return{newurl:"reload"}},ROUTECHANGED:function(e,t,r){return{history:e,location:t,changeRefreshKey:r}},CHANGEURLFILTER:function(e,t){return{newfilter:e,clearCommand:t}},SETSCREEN:function(e){return{screen:e}}},SETTINGS:{SET:function(e,t){return{key:e,value:t}}}}),i=r(11),s=r.n(i),c=r(14),t=r(39),n=r(40),i=r.n(n),u={app:{user:null,impersonatedUserId:null,fetchCount:0,error:void 0,errorDetails:void 0,modals:{models:{},windows:{},order:[]},form:{models:{model:null,mapping:null,hideControls:null,readOnlyControls:null,readOnly:null},filters:{main:null},data:{isDirty:!1,isNew:!1,original:null,modified:null},errors:null,formParams:{schemes:null,securityGroup:void 0,permissions:null,name:null}},authType:"identityserver",screens:[]},router:{history:null,redirect:null,location:null,push:null,refreshKey:null,screen:null},settings:{backendUrl:"",fetchOptions:void 0,form:"form",flow:"flow",workflow:"workflow",accountget:"/account/get",uiform:"/ui/form",uiflow:"/ui/flow",uiworkflow:"/ui/workflow",dataget:"/data/get",datachange:"/data/change",datadelete:"/data/delete",datadictionary:"/data/dictionary",dataupload:"/data/upload/",datadownload:"/data/download/",dataexport:"/data/export",workflowget:"/workflow/get",workflowexecute:"/workflow/execute",workflowset:"/workflow/set",notificationhub:"/hubs/notifications",executeaction:"/actions/execute",mobile:!1}};function p(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach(function(e){y(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}n={failure:function(e,t){var r=t.payload,n=r.error,o=r.details,a=r.level,t=r.formerrors,r=t?t.modalId:null;return h(h({},e),{},r?{fetchCount:e.fetchCount<=0?0:e.fetchCount-1,error:n,errorLevel:a,errorDetails:o,modals:h(h({},e.modals),{},{windows:h(h({},e.modals.windows),{},y({},r,h(h({},e.modals.windows[r]),{},{errors:t?t.errors:null})))})}:{fetchCount:e.fetchCount<=0?0:e.fetchCount-1,error:n,errorLevel:a,errorDetails:o,form:h(h({},e.form),{},{errors:t?t.errors:null})})}},n={CLEAR:function(e,t){t=t.payload.modalId;return h(h({},e),{},t?{modals:h(h({},e.modals),{},{windows:h(h({},e.modals.windows),{},y({},t,h(h({},e.modals.windows[t]),{},{data:h(h({},e.modals.windows[t].data),{},{isDirty:!1,original:null,modified:null})})))})}:{form:h({},u.app.form)})},MODEL:{FETCH:{BEGIN:function(e){return h(h({},e),{},{fetchCount:e.fetchCount+1})},SUCCESS:function(e,t){var r=t.payload,n=r.model,o=r.name,a=r.formParams,t=r.mapping;if(r.modalId){r=h(h({},e),{},{fetchCount:e.fetchCount<=0?0:e.fetchCount-1});return r.modals.models[o]={model:n,mapping:t,formParams:a},r}return h(h({},e),{},{fetchCount:e.fetchCount<=0?0:e.fetchCount-1,form:h(h({},e.form),{},{models:h(h({},e.form.models),{},{model:n,mapping:t}),formParams:a})})},FAILURE:function(e,t){var r=t.payload,t=r.error,r=r.details;return h(h({},e),{},{fetchCount:e.fetchCount<=0?0:e.fetchCount-1,error:t,errorDetails:r})}},CHANGE:function(e,t){var r=t.payload,t=r.name,r=r.modalId;return r&&e.modals.windows[r]?h(h({},e),{},{modals:h(h({},e.modals),{},{windows:h(h({},e.modals.windows),{},y({},r,h(h({},e.modals.windows[r]),{},{name:t})))})}):e}},DATA:{FETCH:{BEGIN:function(e){return h(h({},e),{},{fetchCount:e.fetchCount+1})},SUCCESS:function(e,t){var r=t.payload,n=r.data,o=r.modalId,t=r.isNew;o&&e.modals.windows[o]&&((a=e.modals.windows[o].data)&&a.isNew&&(t=!0)),t&&(n.__id="CLIENT__"+J());var r=Q(n),a=(o?e.modals.windows[o]:e.form).data;if(Z(a.original,n),Z(a.modified,r),o)return h(h({},e),{},{fetchCount:e.fetchCount<=0?0:e.fetchCount-1,modals:h(h({},e.modals),{},{windows:h(h({},e.modals.windows),{},y({},o,h(h({},e.modals.windows[o]),{},{errors:null,data:h(h({},e.modals.windows[o].data),{},{isDirty:!1,isNew:!!t,original:n,modified:r})})))})});var i,l=h({},e.modals.windows);for(i in l)l.hasOwnProperty(i)&&(l[i]=h(h({},l[i]),{},{errors:null}));return h(h({},e),{},{fetchCount:e.fetchCount<=0?0:e.fetchCount-1,form:h(h({},e.form),{},{data:h(h({},e.form.data),{},{isDirty:!1,isNew:!!t,original:n,modified:r}),errors:null}),modals:h(h({},e.modals),{},{windows:l})})},FAILURE:function(e,t){var r=t.payload,t=r.error,r=r.details;return h(h({},e),{},{fetchCount:e.fetchCount<=0?0:e.fetchCount-1,error:t,errorDetails:r})}},UPDATEFROMCHILD:function(e,t){function r(e,t){if(Array.isArray(e)){var r=p(e),n=r.findIndex(function(e){return e.__id===t.__id});return 0<=n?r[n]=K(r[n],t):r.push(t),r}return K(e,t)}var n=t.payload,o=n.key,a=n.value,i=n.modalId,t=(!!i?e.modals.windows[i]:e.form).data,n=r(o?t.modified[o]:t.modified,a),t=r(o?t.original[o]:t.original,a);if(i){a=h({},e),i=a.modals.windows[i].data;return o?(i.modified[o]=n,i.original[o]=t):(i.modified=n,i.original=t),a}return h(h({},e),{},o?{form:h(h({},e.form),{},{data:h(h({},e.form.data),{},{modified:h(h({},e.form.data.modified),{},y({},o,n)),original:h(h({},e.form.data.original),{},y({},o,t))})})}:{form:h(h({},e.form),{},{data:h(h({},e.form.data),{},{modified:n,original:t})})})},UPDATEMODALFILTER:function(e,t){var r=t.payload,t=r.filter,r=r.modalId;return h(h({},e),{},{modals:h(h({},e.modals),{},{windows:h(h({},e.modals.windows),{},y({},r,h(h({},e.modals.windows[r]),{},{data:h(h({},e.modals.windows[r].data),{},{filter:t})})))})})},SETPROCESSPARAMETERS:function(e,t){var r=t.payload,n=r.parameters,t=r.modalId;if(n){var r=(t?e.modals.windows[t]:e.form).data,o=h({},r.modified),a=h({},r.original);return Object.keys(o).filter(function(e){return e.startsWith("_wp")}).forEach(function(e){delete o[e]}),Object.keys(a).filter(function(e){return e.startsWith("_wp")}).forEach(function(e){delete a[e]}),Object.keys(n).forEach(function(e){o["_wp".concat(e)]=a["_wp".concat(e)]=n[e]}),h(h({},e),{},t?{modals:h(h({},e.modals),{},{windows:h(h({},e.modals.windows),{},y({},t,h(h({},e.modals.windows[t]),{},{data:h(h({},e.modals.windows[t].data),{},{modified:o,original:a})})))})}:{form:h(h({},e.form),{},{data:h(h({},e.form.data),{},{modified:o,original:a})})})}},UPDATE:function(e,t){var r,n=t.payload,o=n.key,a=n.value,i=n.modalId,l=n.additionalValues,s=null,s=o?((r={})[o]=a,l&&!Array.isArray(l)&&Object.keys(l).forEach(function(e){r["".concat(o,"_").concat(e)]=l[e]}),K((i?e.modals.windows[i]:e.form).data.modified,r)):a;if(i){t=h({},e);t.modals.windows[i]||(t.modals.windows[i]={});n=t.modals.windows[i].data;return n?(a=t.modals.windows[i].data.original,H(s,a)?n.isDirty=!!n.isNew&&n.isDirty:n.isDirty=!0,n.modified=s,n.additionalValues[o]=l):((n=new{original:null,modified:s,isDirty:!0,isNew:!0,additionalValues:{}}).additionalValues[o]=l,t.modals.windows[i].data=n),t}s=H(s,e.form.data.original)?h(h({},e),{},{form:h(h({},e.form),{},{data:h(h({},e.form.data),{},{isDirty:!!e.form.data.isNew&&e.form.data.isDirty,modified:s}),errors:null})}):h(h({},e),{},{form:h(h({},e.form),{},{data:h(h({},e.form.data),{},{isDirty:!0,modified:s})})});return s},SAVE:{BEGIN:function(e){return h(h({},e),{},{fetchCount:e.fetchCount+1})},SUCCESS:function(e,t){var r=t.payload,t=r.data,r=r.modalId,e=h(h({},e),{},{fetchCount:e.fetchCount<=0?0:e.fetchCount-1,form:h({},e.form)});return r?e.modals.windows[r]&&(e.modals.windows[r].errors=null,(r=e.modals.windows[r].data).isNew=!1,r.isDirty=!1,null!==t&&(Z(r.modified,t),r.modified=t),r.original=Q(r.modified)):(e.form.errors=null,e.form.data.isNew=!1,e.form.data.isDirty=!1,null!==t&&(Z(e.form.data.modified,t),e.form.data.modified=t),e.form.data.original=e.form.data.modified,Object.values(e.modals.windows).forEach(function(e){e=e.data;e.isNew=!1,e.isDirty=!1,e.original=Q(e.modified)})),e},FAILURE:n.failure},DELETE:{BEGIN:function(e){return h(h({},e),{},{fetchCount:e.fetchCount+1})},SUCCESS:function(e,t){t.payload;return h(h({},e),{},{fetchCount:e.fetchCount<=0?0:e.fetchCount-1})},FAILURE:n.failure}}};function m(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function v(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?m(Object(o),!0).forEach(function(e){var t,r;t=n,e=o[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):m(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}var g=Object(o.handleActions)({APP:{USERINFO:{FETCH:{BEGIN:function(e){return v(v({},e),{},{fetchCount:e.fetchCount+1})},SUCCESS:function(e,t){t=t.payload.user;return v(v({},e),{},{user:t,fetchCount:e.fetchCount<=0?0:e.fetchCount-1})},FAILURE:function(e,t){var r=t.payload,t=r.error,r=r.details;return v(v({},e),{},{error:t,errorDetails:r,fetchCount:e.fetchCount<=0?0:e.fetchCount-1})}}},CLEARERRORS:function(e){return v(v({},e),{},{error:void 0,errorLevel:void 0,errorDetails:void 0})},FAILURE:function(e,t){var r=t.payload,n=r.error,t=r.details,r=r.level;return v(v({},e),{},{error:n,errorLevel:r,errorDetails:t,fetchCount:e.fetchCount<=0?0:e.fetchCount-1})},FETCHBEGIN:function(e){return v(v({},e),{},{fetchCount:e.fetchCount+1})},RESETFETCHCOUNT:function(e){return v(v({},e),{},{fetchCount:0})},FORM:n,IMPERSONATEDUSERIDFROMURL:function(e){return v(v({},e),{},{impersonatedUserId:dt.common.getParameterFormUrlOrCookie("impersonatedUserId")})},SETAUTH:function(e,t){t=t.payload.type;return v(v({},e),{},{authType:t})}}},u.app),w=Object(o.handleActions)({UPDATESTATE:function(e,t){t=t.payload.stateDelta;if(!t||G(t))return e;var r=K(e,t);return Object.keys(r.app.modals.windows).forEach(function(e){r.app.modals.windows[e]||delete r.app.modals.windows[e]}),r}},u),O=["copy"];function C(e){var t={urlFilter:null,type:null,name:null,options:null,command:null};if(e){e="string"==typeof e?e:e.pathname;return e.includes("?")?S(e.split("?")[0],t):S(e,t)}return t}function S(e,t){var r=e.split("/");return 1<r.length&&(t.type=r[1]),2<r.length&&(t.name=r[2]),3<r.length&&(t.urlFilter=r[3]),5===r.length&&(e=r[4],O.includes(e)?t.command=e:t.options=e),5<r.length&&(t.command=r[4],t.options=r[5]),t}function E(e,t,r){r=!(2<arguments.length&&void 0!==r)||r,e=e.split("/");return 3<e.length?e[3]=t:e.push(t),r&&4<e.length&&O.includes(e[4])&&(5===e.length?e.pop():e.slice(4,1)),e.join("/")}var N={filterFromLocation:function(e){return C(e).urlFilter},formFilterFromLocation:function(e){var t=V.getState(),r=C(e),e=r.type,r=r.urlFilter;return!e||e!==t.settings.form&&e!==t.settings.flow&&e!==t.settings.workflow?null:r},typeFromLocation:function(e){var t=C(e),e=t.type;t.name;return e},nameFromLocation:function(e,t){var r=C(e),e=r.type,r=r.name;return e&&e.toLowerCase()===t?r:null},changeFilter:function(e,t,r){var n=e.pathname;if(n.includes("?")){e=n.split("?");return"".concat(E(e[0],t,r),"?").concat(e[1])}return E(n,t,r)},formDataFromLocation:function(e){var t=C(e),r=t.urlFilter,e=t.options;return t.type!==V.getState().settings.form?{urlFilter:null,options:null}:{urlFilter:r,options:e}},deconstructLocation:C,getParamValue:function(e,t){return!e||!e.search||e.search.length<2?null:new URLSearchParams(e.search.substring(1)).get(t)}},j={getWindowLocation:function(){return window.location},setCurrentLocation:function(e){return window.location.href=e},loadScript:function(e,t){var r;window.document&&((r=window.document.createElement("script")).src="data:text/javascript,"+encodeURIComponent(e),window.document.body.appendChild(r),t&&t())},openExcel:function(e,t){var r=document.createElement("a"),t=new Blob([t],{type:"application/vnd.ms-excel"}),e=e.fileName||e.propertyName+".xlsx";r.setAttribute("href",window.URL.createObjectURL(t)),r.setAttribute("download",e),document.body.appendChild(r),r.onclick=function(){return window.document.body.removeChild(r)},r.click()},getCookie:function(){return window.document&&window.document.cookie},setCookie:function(e){window.document&&(window.document.cookie=e)}};function k(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function P(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?k(Object(o),!0).forEach(function(e){var t,r;t=n,e=o[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):k(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}var x=Object(o.handleActions)({ROUTER:{ROUTECHANGED:function(e,t){var r=t.payload,n=r.history,t=r.location,r=r.changeRefreshKey;return P(P({},e),{},{push:null,redirect:null,refresh:null,reload:null,history:n,location:t,refreshKey:r?J():e.refreshKey})},PUSH:function(e,t){t=t.payload.newurl;return P(P({},e),{},{push:t,redirect:null,refresh:null,reload:null})},REDIRECT:function(e,t){t=t.payload.newurl;return P(P({},e),{},{redirect:t,push:null,refresh:null,reload:null})},REFRESH:function(e,t){t=t.payload.newurl;return P(P({},e),{},{refresh:t,reload:null,redirect:null,push:null})},RELOAD:function(e,t){t=t.payload.newurl;return P(P({},e),{},{reload:t,refresh:null,redirect:null,push:null})},CHANGEURLFILTER:function(e,t){var r=t.payload,n=r.newfilter,t=r.clearCommand,r=j.getWindowLocation();return P(P({},e),{},{redirect:N.changeFilter(r,n,t),push:null,refresh:null,reload:null})},SETSCREEN:function(e,t){t=t.payload.screen;return P(P({},e),{},{screen:t})}}},u.router);function _(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function R(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_(Object(r),!0).forEach(function(e){D(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var T=Object(o.handleActions)({SETTINGS:{SET:function(e,t){var r=t.payload,t=r.key,r=r.value;return R(R({},e),{},D({},t,r))}}},u.settings),F={preFetchUser:function(){return Promise.resolve()},logoff:function(){var e=j.getWindowLocation();j.setCurrentLocation(e.href)},onLogon:function(){}},A={cookie:F},I={get:function(e){e=e.getState().app.authType,e=A[e];return e||F},addProvider:function(e,t){return A[e]=t}},B=(Object(c.combineReducers)({"":w,app:g,router:x,settings:T}),Object(c.createStore)(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0;return"UPDATESTATE"===t.type?w(e,t):{app:g(e.app,t,e),router:x(e.router,t,e),settings:T(e.settings,t,e)}},u,Object(t.composeWithDevTools)(Object(c.applyMiddleware)(i.a))));B.getState().app.addQueryParams=function(e){for(var t in B.additionalParams||(B.additionalParams={}),e)B.additionalParams[t]=e[t]},B.resetForm=function(e){var t=B.getState();t.app.form=u.app.form,e&&(t.app.modals.models={})},B.logoff=function(){I.get(B).logoff().then(function(){B.resetStateInStorage()}).catch(function(e){B.dispatch(L.app.failure("Logoff failed",e.message,1))})},B.login=function(r){I.get(B).onLogon().then(function(){B.dispatch(dt.userinfo.fetch(function(e){r&&r(e);var t=B.getState().settings.router;t&&t.userLoaded&&t.userLoaded(e)}))}).catch(function(e){B.dispatch(L.app.failure("Logon failed",e.message,1))})},B.signinRedirect=function(){I.get(B).signinRedirect()},B.encodeQueryData=function(e){var t,r=[],n=B.getState();for(t in n.app.impersonatedUserId&&r.push("impersonatedUserId="+encodeURIComponent(n.app.impersonatedUserId)),e)e.hasOwnProperty(t)&&r.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return r.join("&")},B.getAuthState=function(){var e=I.get(B);return null==e.getAuthState&&console.log("getAuthState is not implemented for this auth provider."),e.getAuthState()},B.setAuthState=function(e){var t=I.get(B);return null==t.setAuthState&&console.log("setAuthState is not implemented for this auth provider."),t.setAuthState(e)},B.loadStateFromStorage=function(){console.log("loadStateFromStorage is not implemented for this build.")},B.saveStateToStorage=function(){console.log("loadStateFromStorage is not implemented for this build.")},B.resetStateInStorage=function(){};var V=window.DWKitStore=B;function M(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function U(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?M(Object(r),!0).forEach(function(e){z(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var H=function(e,t){return JSON.stringify(e)===JSON.stringify(t)};function G(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return;return 1}function q(e,t){return t}var K=function(e,t){return s()(e,t,{arrayMerge:q})},J=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},$=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)(Z|([+\-])(\d{2}):(\d{2}))$/;function Y(e,t){return"string"==typeof t&&$.test(t)?new Date(t):t}function Q(e){var t,r,n=U({},e);for(t in n)Array.isArray(n[t])&&(r=[],e[t].forEach(function(e){"object"===W(e)?r.push(U({},e)):r.push(e)}),n[t]=r);return n}function Z(t,r){t&&Object.keys(t).filter(function(e){return e.startsWith("_wp")}).forEach(function(e){r[e]=t[e]})}function X(){return window.DWKitAdminLang}function ee(e,t){var r=t.model,n=t.data,o=t.mapping,a=t.hideControls,i=t.readOnlyControls,l=t.readOnly,s=t.filters,t=t.errors;return function t(r){return Object.keys(r).forEach(function(e){r[e]&&"object"===W(r[e])?t(r[e]):void 0===r[e]&&delete r[e]}),r}(e?{app:{modals:{models:z({},V.getState().app.modals.windows[e].name,{model:r,mapping:o}),windows:z({},e,{data:{modified:n},hideControls:a,readOnlyControls:i,readOnly:l,filters:s,errors:t})}}}:{app:{form:{data:{modified:n},models:{model:r,mapping:o,hideControls:a,readOnlyControls:i,readOnly:l},filters:s,errors:t}}})}var te,re=r(2),t=r(4),ne=r.n(t),oe=function(e,t,r,o,n,a){var i=new FormData;i.append("request",JSON.stringify(t));t=V.getState().settings,e=t.executeaction+"?"+V.encodeQueryData({name:e});a&&(e+="&useServerCodeActionRequest=true"),t.mobile&&(e+="&mobile=true");i=(i=dt.configuredFetch(e,{method:"post",body:i})).then(function(e){return e.json()});if(r&&(i=i.then(function(e){var t=r(e);return void 0!==t?t:e})),n&&(i=i.then(function(e){if(null!=e){if(e.success){var t={},r=!1,n=e.result;return null==n?{}:(n.hasOwnProperty("data")&&(t.data=n.data,r=!0),n.hasOwnProperty("stateDelta")&&(t.stateDelta=n.stateDelta,r=!0),r||(t.stateDelta=n),o&&V.dispatch(actions.updatestate(t.stateDelta)),t)}if(!o)throw{level:1,message:e.message,details:e.details};V.dispatch(actions.app.failure(e.message,e.details,1))}return{}})),!o)return i},ae={getModelConrol:function(e,t){for(var r in e){var n=e[r];if(n.key==t)return n;if(n.children&&0<n.children.length){r=ae.getModelConrol(n.children,t);if(null!=r)return r}if(n.placeholders)for(var o in n.placeholders){o=ae.getModelConrol(n.placeholders[o],t);if(null!=o)return o}}},changeModelControl:function(e,t,r,n){return ae.changeModelControls(e,[{key:t,name:r,value:n}])},changeModelControls:function(e,t){function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];e.key==n.key&&(e[n.name]=n.value)}if(null!=e.children&&0<e.children.length)for(var o in e.children)i(e.children[o],t);if(null!=e.placeholders&&0<e.placeholders.length)for(var a in e.placeholders)i(e.placeholders[a],t)}var r,n=e.modalId?e.state.app.modals.windows[e.modalId].name:null,o=(e.modalId?e.state.app.modals.models[n]:e.state.app.form.models).model;for(r in o)i(o[r],t);return ee(e.modalId,{model:o})},setDataField:function(e,t,r){V.dispatch(L.app.form.data.update(e,t,r))},rewriteControlModel:function(e,t,r){var n=V.getState(),o=r?n.app.modals.windows[r].name:null,n=(r?n.app.modals.models[o]:n.app.form.models).model,a=ae.getModelConrol(n,e),i=t(a);if(i!==a)for(var l in i)a[l]=i[l]},clearErrors:function(){V.dispatch(L.app.clearerrors())},forceUpdate:function(){V.dispatch(L.updatestate({}))},redirectToForm:function(e,t){ae.redirect("form",e,t)},redirectToFlow:function(e,t){ae.redirect("flow",e,t)},redirectToUrl:function(e){V.dispatch(L.router.push(e))},redirect:function(e,t,r){t="/"+e+"/"+t;null!=r&&(t+="/"+r),V.dispatch(L.router.push(t))},formValidate:function(e){return Te.validate(e)},createElement:function(e,t,r){return l.a.createElement(e,t,r)},checkRole:function(e){return De.checkRole(e,V.getState())},checkPermission:function(e,t){return De.checkPermission(e,V.getState(),t)},callUrl:function(e,t,r){var n=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],t=dt.configuredFetch(e,t);return n&&(t=t.then(function(e){return e.json()})),t=r?t.then(function(e){return r(e)}):t},callServerCodeAction:function(e,t,r,n,o){return oe(e,t,r,!1,n,o)},callServerCodeActionDispatch:function(e,t,r,n){oe(e,t,r,!0,autoResultProcessing,useServerCodeActionRequest)},openModal:function(e,t,r){var n=r.type,o=r.viewType,a=r.sidebarWidth,i=r.sidebarFrom,l=r.onOpenFunc,s=r.onCloseFunc,c=r.callContext,u=r.closeOnOutsideClick,p=r.data,f=V.getState(),r=f.app.modals.order.length?f.app.modals.order[f.app.modals.order.length-1]:null;return Te.openModal({modalId:r,state:f,controlRef:void 0,parameters:{filter:t,name:e,type:n,viewType:o,sidebarSettings:{from:i,width:a},onOpenFunc:l,onCloseFunc:s,closeOnOutsideClick:u,data:p},callContext:c})},openModalDispatch:function(e,t,r){var n=r.type,o=r.viewType,a=r.sidebarWidth,i=r.sidebarFrom,l=r.onOpenFunc,s=r.onCloseFunc,c=r.callContext,u=r.closeOnOutsideClick,r=r.data,r=ae.openModal(e,t,{type:n,viewType:o,sidebarWidth:a,sidebarFrom:i,onOpenFunc:l,onCloseFunc:s,callContext:c,closeOnOutsideClick:u,data:r});"function"==typeof r?r(V.dispatch).then(function(e){e&&e.stateDelta&&V.dispatch(L.updatestate(e.stateDelta))}):V.dispatch(L.updatestate(r))},executeActions:function(e){return dt.form.executeActions(e)},executeActionsDispatch:function(e){V.dispatch(dt.form.executeActions(e))},setCookie:function(e,t){dt.common.setCookie(e,t)},getCookie:function(e){return dt.common.getCookie(e)},getParameterFormUrlOrCookie:function(e){return dt.common.getParameterFormUrlOrCookie(e)},setAuth:function(e){V.dispatch(L.app.setauth(e))},loadBackendScript:function(e,t,r){return dt.configuredFetch(e,t).then(function(e){return e.text()}).then(function(e){j.loadScript(e,r)}).catch(function(e){console.error(e)})},convertToState:ee,getWindowState:(te=function(e,t){return getWindowState(e,t)},ie.toString=function(){return te.toString()},ie),validate:function(e,t,r){r=r||V.getState(),e=e||(t?r.app.modals.models[r.app.modals.windows[t].name]:r.app.form).data.modified;for(var n=!0,o={},a=t?De.getControlsForValidate(r.app.modals.models[r.app.modals.windows[t].name].model):De.getControlsForValidate(r.app.form.models.model),i=0;i<a.length;i++){var l=a[i].propertyName||a[i].key,s=De.validate(a[i],e[l],e);s&&(o[l]=s,n=!1)}return n?null:o},loadImage:function(e,r){e=V.getState().settings.datadownload+e;ae.callUrl(e,void 0,void 0,!1).then(function(e){return e.blob()}).then(function(e){var t;0==e.size?r(void 0):((t=new FileReader).onload=function(){r(this.result)},t.readAsDataURL(e))})}};function ie(e,t){return te.apply(this,arguments)}var le=ae;function se(e){return function(e){if(Array.isArray(e))return ce(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ce(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ce(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ue={open:function(e,t,r,n,o,a,i,l,s,c,u,p,f,d){null===n&&(n=void 0);var h="form"===l,y="flow"===l,m="workflow"===l,b=h?t.app.modals.models[r]:null,v=se(t.app.modals.order),g=r+"_"+v.length;v.push(g);var w={};return w[g]={id:g,parentId:e,data:{isDirty:!1,isNew:a,original:n,modified:n,additionalValues:{},filter:o,property:i},errors:null,name:h?r:null,type:l,viewType:s,sidebarSettings:c,onOpenFunc:u,onCloseFunc:p,preventLoad:void 0!==n,flowName:y?r:void 0,schemeName:m?r:void 0,keyIndex:0,callContext:f,closeOnOutsideClick:d},h?!b&&h?function(e){return dt.form.fetchform(r,g)(e).then(function(){if(w[g].onOpenFunc&&!w[g].onOpenFunc(g,w[g],t))return{};return re.Promise.resolve({stateDelta:{app:{modals:{windows:w,order:v}}}})})}:{app:{modals:{windows:w,order:v}}}:m?function(e){return dt.form.fetchworkflow(r,o,w[g],a&&!!o)(e).then(function(){if(w[g].onOpenFunc&&!w[g].onOpenFunc(g,w[g],t))return{};return re.Promise.resolve({stateDelta:{app:{modals:{windows:w,order:v}}}})})}:function(e){return dt.form.fetchflow(r,o,w[g],a&&!!o)(e).then(function(){if(w[g].onOpenFunc&&!w[g].onOpenFunc(g,w[g],t))return{};return re.Promise.resolve({stateDelta:{app:{modals:{windows:w,order:v}}}})})}}};function pe(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function fe(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?pe(Object(o),!0).forEach(function(e){var t,r;t=n,e=o[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):pe(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}var de={edit:function(e){var t=e.state,r=e.controlRef,n=e.parameters,e=e.modalId;return de.operation({state:t,controlRef:r,parameters:n,modalId:e,op:"edit"})},create:function(e){var t=e.state,r=e.controlRef,n=e.parameters,e=e.modalId;return de.operation({state:t,controlRef:r,parameters:n,modalId:e,op:"create"})},copy:function(e){var t=e.state,r=e.controlRef,n=e.parameters,e=e.modalId;return de.operation({state:t,controlRef:r,parameters:n,modalId:e,op:"copy"})},operation:function(e){var t=e.state,r=e.controlRef,n=e.parameters,o=e.modalId,a=e.op,i=r.props,l="copy"===a,s="create"===a,c=void 0!==r.props.editType||"form"===r.props.editType,u=i.editForm;"flow"===r.props.editType?u=i.editFlow:"workflow"===r.props.editType&&(u=i.editWorkflow);var p=null,f=null,e=de.getSelectedRow({parameters:n,controlRef:r});if(!e&&!s)return{};a=r.props.name,i=r.props.propertyName&&""!=r.props.propertyName?r.props.propertyName:a,p=!s&&e.__loaded&&c?(c=t.app.modals.models[u],i=(o?t.app.modals.model[t.app.modals.windows[o].name]:t.app.form.models).mapping.toData[i],c=c.mapping.toForm,f=de.mapRow(de.mapRow(e,i),c),l&&(f.__id="CLIENT_"+J()),f.__id):s?null:e.__id;s&&((f=fe({},n)).__id||(f.__id="CLIENT_"+J()));return ue.open(o,t,u,f,p,l||s,a,r.props.editType||"form",r.props.editFormShowType,{from:r.props.sidebarDirection,width:n.sidebarWidth},void 0,function(e){var t=V.getState();V.dispatch(dt.form.executeActions({actions:["modalClosed"],controlRef:r,formName:t.app.modals.windows[e.modalId].name,modalId:o,parameters:e})),null!=r&&null!=r.props.handleEvent&&r.props.handleEvent({key:r.props.name,eventName:"onModalClosed",parameters:e})})},mapRow:function(e,r,n){var t,o={};for(t in e)!function(t){t.startsWith("__")&&(o[t]=e[t]),r&&r[t]&&(o[r[t]]=e[t],n&&n[t]&&Object.keys(n[t]).forEach(function(e){o["".concat(r[t],"_").concat(e)]=n[t][e]}))}(t);return o},getSelectedRow:function(e){var t=e.parameters,r=e.controlRef,n=-1;if("object"===W(e=t.rowIdx)&&null===e||void 0===e?0<r.state.selectedIndexes.length&&(n=r.state.selectedIndexes[0]):n=t.rowIdx,!(n<0))return r.state.items[n]}},he=de;function ye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var me=new(function(){function n(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),r={},(t="map")in(e=this)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}var e,t,r;return e=n,(t=[{key:"register",value:function(e,t){if(me.map[e])throw new Error("Component "+e+" already registered!");me.map[e]=t}},{key:"draw",value:function(e,t){var r=me.map[e];if(!r)throw new Error("Cannot find draw function for ".concat(e,", ").concat(t));return r(t)}}])&&ye(e.prototype,t),r&&ye(e,r),n}()),c=me.register,be=me.draw;function ve(e,t,r){return be("alert",{message:e,type:t,props:r})}function ge(e,t){return ve(e,"error",t)}function we(e,t){return ve(e,"success",t)}var i=r(41),Oe=r.n(i);function Ce(e){return function(e){if(Array.isArray(e))return Se(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Se(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Se(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ee(e){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function ke(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?je(Object(r),!0).forEach(function(e){Pe(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):je(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xe(e,n){var o=e.key,t=e.actions,a=e.controlRef,i=e.sourceControlRef,l=e.sourceControlValue,s=e.parameters,c=e.component,u=e.formName,p=e.schemeName,f=e.modalId,r=e.callContext;function d(e){return f?e.app.modals.windows[f]:e.app.form}if(!t||t.length<1)return re.Promise.resolve();var h,e=null==u?"":u.toLowerCase(),y=window.globalUserActions,m=window.DWKitApp.ActionHandlers?window.DWKitApp.ActionHandlers[e]:void 0,b=V.getState(),v=ke({},b),g=null===(e=d(v)).data.modified||void 0===e.data.modified?{}:JSON.parse(JSON.stringify(e.data.modified)),w=null===e.data.original?null:ke({},e.data.original),O=null,C={},S=r||{};for(h in t)!function(e){var r=t[e];O=O?O.then(function(e){var t=e.data,e=e.stateDelta;return e&&(C=K(C,e),v=K(v,e)),_e(o,r,y,m,a,i,l,s,t,w,v,c,u,p,f,n,S)}):_e(o,r,y,m,a,i,l,s,g,w,v,c,u,p,f,n,S)}(h);return O=O.then(function(e){var t=e.data,r=e.stateDelta;r&&(C=K(C,r));e=d(b);f?H(e.data.modified,t)||((r={app:{modals:{windows:Pe({},f,{})}}}).app.modals.windows[f].data={modified:t},C=K(C,r)):H(e.data.modified,t)||(C=K(C,{app:{form:{data:{modified:t}}}})),G(C)||n(L.updatestate(C))})}function _e(e,t,r,n,o,a,i,l,s,c,u,p,f,d,h,y,m){function b(e){return{data:e&&e.data?e.data:s,stateDelta:e&&e.stateDelta?e.stateDelta:null}}var v=null;if(!(v=(v=!(v=n?n[t]:v)&&r?r[t]:v)||Te[t]))return le.callServerCodeAction(t,{data:s,parameters:l,formName:f,modalId:h},void 0,!0,!0).then(b);t=null;try{t=v({key:e,data:s,originalData:c,state:u,component:p,formName:f,schemeName:d,controlRef:o,sourceControlRef:a,sourceControlValue:i,parameters:l,modalId:h,callContext:m})}catch(e){return re.Promise.reject(e)}return t&&t.then instanceof Function?t.then(b):t instanceof Function?t(y).then(function(e){return re.Promise.resolve({data:e&&e.data?e.data:s,stateDelta:e&&e.stateDelta?e.stateDelta:null})}):re.Promise.resolve({data:s,stateDelta:t})}var Re=r(16),De={getControlsForValidate:function(e){var n=[];return e.forEach(function(e){var t;if((!0===e["other-required"]||void 0!==e["other-customValidation"]&&""!==e["other-customValidation"])&&n.push(e),void 0!==e.children&&0<e.children.length&&(t=De.getControlsForValidate(e.children),n=n.concat(t)),void 0!==e.placeholders)if("collectioneditor"===e["data-buildertype"])n.push(e);else for(var r in e.placeholders){r=De.getControlsForValidate(e.placeholders[r]);n=n.concat(r)}"customblock"===e["data-buildertype"]&&"source"===e.sourceType&&null!=e.source&&(t=ne.a.parse(e.source),t=De.getControlsForValidate(t),n=n.concat(t))}),n},validate:function(e,t,r){var n=void 0;if(!0===e["other-required"]&&(null==t||""===t||"collectioneditor"===e["data-buildertype"]&&Array.isArray(t)&&0===t.length))n="This field is required!";else if(void 0!==e["other-customValidation"]&&""!==e["other-customValidation"]){var o="return "+e["other-customValidation"],r=new Function("value, data",o)(t,r);"boolean"==typeof r?!1===r&&(n=!0):n=r}else if("collectioneditor"===e["data-buildertype"]&&Array.isArray(t)&&0<t.length&&Array.isArray(e.columns)){var a,i=[],l=!1;for(a in t){var s=t[a];if(null!=s){var c,u={__id:s.__id},p=!1;for(c in e.columns){var f,d=e.columns[c];"custom"==d.control&&e.placeholders&&(f=e.placeholders[d.key],Array.isArray(f)&&0<f.length&&((f=De.validate(f[0],s[d.key],s))&&(p=!0,u[d.key]=f)))}p&&(l=!0,i.push(u))}}l&&(n=i)}return n},initDefaultState:function(e,t){if(Array.isArray(e)&&void 0!==t)for(var r,n=0;n<e.length;n++){if(void 0!==e[n].defaultValue&&""!==e[n].defaultValue&&(t[e[n].propertyName||e[n].key]=e[n].defaultValue),Array.isArray(e[n].children)&&De.initDefaultState(e[n].children,t),void 0!==e[n].placeholders)for(var o in e[n].placeholders)De.initDefaultState(e[n].placeholders[o],t);"customblock"===e[n]["data-buildertype"]&&"source"===e[n].sourceType&&null!=e[n].source&&(r=ne.a.parse(e[n].source),De.initDefaultState(r,t))}},initDefaultStateFormUrl:function(e){void 0===e&&(e={});var t=function(e){if(window.location&&window.location.href.href){e=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null==e?null:decodeURI(e[1])||0}return null}("defaultvalues");if(t){var r=void 0;try{r=ne.a.parse(t)}catch(e){}if(r&&"object"===Ee(r))for(var n in r)void 0!==r[n]&&(e[n]=r[n])}return e},checkPermission:function(e,t,r){var n=(r?t.app.modals.models[t.app.modals.windows[r].name]:t.app.form).formParams.permissions;if(Array.isArray(n))for(var o=0;o<n.length;o++)if(n[o].code===e)return 1===n[o].accessType||0===n[o].accessType;return!1},checkRole:function(e,t){return void 0!==t.app.user&&void 0!==t.app.user.roles&&t.app.user.roles.includes(e)},checkConditions:function(e){var t=e.model,r=e.data,n=e.state,o=e.modalId,a={hideControls:[],readOnlyControls:[]};if(null===t||null===r)return a;for(var i=0;i<t.length;i++){var l,s=t[i]["other-visibleConition"];if(void 0!==s&&""!==s&&(new Function("data, checkPermission, checkRole","return "+s)(r,function(e){return De.checkPermission(e,n,o)},function(e){return De.checkRole(e,n)})||a.hideControls.push(t[i].key)),void 0!==(s=t[i]["other-readOnlyConition"])&&""!==s&&(new Function("data, checkPermission, checkRole","return "+s)(r,function(e){return De.checkPermission(e,n,o)},function(e){return De.checkRole(e,n)})&&a.readOnlyControls.push(t[i].key)),Array.isArray(t[i].children)&&(l=De.checkConditions({model:t[i].children,data:r,state:n,modalId:o}),a={hideControls:a.hideControls.concat(l.hideControls),readOnlyControls:a.readOnlyControls.concat(l.readOnlyControls)}),void 0!==t[i].placeholders)for(var c in t[i].placeholders){c=De.checkConditions({model:t[i].placeholders[c],data:r,state:n,modalId:o});a={hideControls:a.hideControls.concat(c.hideControls),readOnlyControls:a.readOnlyControls.concat(c.readOnlyControls)}}"customblock"===t[i]["data-buildertype"]&&"source"===t[i].sourceType&&null!=t[i].source&&(l=ne.a.parse(t[i].source),l=De.checkConditions({model:l,data:r,state:n,modalId:o}),a={hideControls:a.hideControls.concat(l.hideControls),readOnlyControls:a.readOnlyControls.concat(l.readOnlyControls)})}return a}},Te={initSystem:function(e){var t=e.state,r=e.data,n=e.modalId,o=(n?t.app.modals.models[t.app.modals.windows[n].name]:t.app.form.models).model,a=(n?t.app.modals.models[t.app.modals.windows[n].name]:t.app.form).formParams,i=null;if(a&&a.securityGroup){var l=a.permissions;if(Array.isArray(l))for(var i=!0,s=0;s<l.length;s++)if("Edit"===l[s].code){1==l[s].accessType&&(i=!1);break}}if((n?t.app.modals.windows[n]:t.app.form).data.isNew){e=r;De.initDefaultState(o,e),De.initDefaultStateFormUrl(e);a=De.checkConditions({model:o,data:e,state:t,modalId:n});return n?{app:{modals:{windows:Pe({},n,{data:{original:e,modified:e},hideControls:a.hideControls,readOnlyControls:a.readOnlyControls,readOnly:i})}}}:{app:{form:{data:{original:e,modified:e},models:{hideControls:a.hideControls,readOnlyControls:a.readOnlyControls,readOnly:i}}}}}t=De.checkConditions({model:o,data:r,state:t,modalId:n});return n?{app:{modals:{windows:Pe({},n,{hideControls:t.hideControls,readOnlyControls:t.readOnlyControls,readOnly:i})}}}:{app:{form:{models:{hideControls:t.hideControls,readOnlyControls:t.readOnlyControls,readOnly:i}}}}},init:function(e){},dataReceived:function(e){},modalClosed:function(e){},checkConditions:function(e){var t=e.data,r=e.state,n=e.modalId,e=(n?r.app.modals.models[r.app.modals.windows[n].name]:r.app.form.models).model,r=De.checkConditions({model:e,data:t,state:r,modalId:n});return n?{app:{modals:{windows:Pe({},n,{hideControls:r.hideControls,readOnlyControls:r.readOnlyControls})}}}:{app:{form:{models:{hideControls:r.hideControls,readOnlyControls:r.readOnlyControls}}}}},workflowExecuteCommand:function(e){var o=e.formName,a=e.state,s=e.parameters,c=e.modalId,u=e.callContext,p=e.schemeName,f=e.data,d=u.commandFormResult&&u.commandFormResult.commandParams?u.commandFormResult.commandParams:null;return function(i){i(L.app.form.data.fetch.begin());var r=c?a.app.modals.windows[c]:a.app.form,l=(null!=s.row&&null!=s.row.__id?s.row:f).__id;l||(e=j.getWindowLocation(),l=c?r.data.filter:N.filterFromLocation(e));var n,t,e={command:s.command.value,name:o,id:l};return p&&(e.schemeName=p),d&&(n={},t=u.commandFormResult.model,Object.keys(d).forEach(function(e){le.getModelConrol(t,e)&&(n[e]=d[e])}),Object.keys(r.data.modified).filter(function(e){return e.startsWith("_wp")}).forEach(function(e){var t=e.substring(3);n[t]||Re(r.data.modified[e],r.data.original[e])||(n[t]=r.data.modified[e])}),Object.keys(n).length&&(e.data=JSON.stringify(n))),dt.configuredFetch(V.getState().settings.workflowexecute+"?"+V.encodeQueryData(e),{method:"post"}).then(function(e){return e.json()}).then(function(e){if(e.success){var t="The command execution has been completed!";if(void 0!==X()&&(t=X().msg.commandexecutioncompleted),i(L.app.resetfetchcount()),we(t),p){var r=e.item,n=(r&&r.entity,r?r.entityId:null),o=null!=n,a={};return o&&n!=l&&o&&(t={},c?t.app={modals:{windows:Pe({},c,{data:{filter:o?n:void 0}})}}:(r=j.getWindowLocation(),t.router={push:o?N.changeFilter(r,n):void 0}),a.stateDelta=t),re.Promise.resolve(a)}}else i(L.app.form.data.save.failure(e.message,e.details))}).catch(function(e){i(L.app.form.data.save.failure(e.message,e.stack))})}},workflowSetState:function(e){var a=e.formName,i=e.state,l=(e.controlRef,e.parameters),s=e.modalId,c=e.schemeName;return function(r){r(L.app.form.data.fetch.begin());var e,n=s?i.app.modals.windows[s]:i.app.form,t=(null!=l.row&&null!=l.row.__id?l.row:n.data.modified).__id;t||(e=j.getWindowLocation(),t=s?n.data.filter:N.filterFromLocation(e));t={state:l.state.value,name:a,id:t};c&&(t.schemeName=c);var o={};return Object.keys(n.data.modified).filter(function(e){return e.startsWith("_wp")}).forEach(function(e){var t=e.substring(3);Re(n.data.modified[e],n.data.original[e])||(o[t]=n.data.modified[e])}),Object.keys(o).length&&(t.data=JSON.stringify(o)),dt.configuredFetch(V.getState().settings.workflowset+"?"+V.encodeQueryData(t),{method:"post"}).then(function(e){return e.json()}).then(function(e){var t;e.success?(r(L.app.resetfetchcount()),t="The new state was set!",we(t=void 0!==X()?X().msg.newstateset:t)):r(L.app.form.data.save.failure(e.message,e.details))}).catch(function(e){r(L.app.form.data.save.failure(e.message,e.stack))})}},workflowSelectScheme:function(e){var t=e.modalId,e=e.parameters.scheme;return t?{app:{modals:{windows:Pe({},t,{data:{modified:{__wf_selectedscheme:e}}})}}}:{app:{form:{data:{modified:{__wf_selectedscheme:e}}}}}},save:function(e){var t=e.formName,r=e.modalId,n=e.state,o=e.data,e=e.schemeName;return dt.form.savedata({formName:t,modalId:r,state:n,data:o,schemeName:e})},delete:function(e){var t=e.formName,r=e.data,e=e.schemeName;return dt.common.deleteByIds(t,null,r.__id,void 0,e)},exit:function(e){var t=e.state,r=e.modalId,e=e.parameters;if(t.settings.mobile)return{router:{push:"/"}};if(r){var n=ke({},t.app.modals.windows);if(null!=n[r]&&null!=n[r].onCloseFunc){var o=n[r].onCloseFunc({modalId:r,modal:n[r],state:t});if(0==o)return{};if("object"===Ee(o))return o}o=Ce(t.app.modals.order);return o.pop(),n[r]=null,{app:{modals:{windows:n,order:o}}}}n="/",o=function(e){e=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null==e?null:decodeURI(e[1])||0}("backurl");return o?n=o:e&&e.target&&(n=e.target),{router:{push:n}}},confirm:function(e){e=e.parameters;function t(e,t,r){var n=e,e=window.DWKitLang;return n=(n=n&&e&&e.msg&&e.msg[n]?e.msg[n]:n)||(X()&&X().confirm[t]?X().confirm[t]:r)}var r={title:t(e.confirmTitle,"title","Confirm"),text:t(e.confirmText,"text","Please confirm the action"),ok:t(e.confirmOk,"ok","Ok"),cancel:t(e.confirmCancel,"cancel","Cancel")};return function(e){return be("confirm",{messages:r})}},apply:function(e){var t=e.state,r=e.modalId;if(!r)return{};var n=t.app.modals.windows[r],o=n.data;if(!o||!o.isDirty&&!o.isNew)return{};var a=null,i=null,e=null,r=!!n.parentId;e=r?(i=(c=t.app.modals.windows[n.parentId]).name,a=c.data,t.app.modals.models[i].model):(a=t.app.form.data,t.app.form.models.model);var l=o.modified,s=o.additionalValues,c=o.property,u=c;!u||(o=le.getModelConrol(e,c))&&o.propertyName&&""!=o.propertyName&&(u=o.propertyName);function p(e,t){t=he.mapRow(he.mapRow(t,f,s),d);var r=e.findIndex(function(e){return e.__id===t.__id});0<=r?(e[r]=K(e[r],t),e[r].__loaded=!0):(t.__loaded=!0,e.push(t))}var f=t.app.modals.models[n.name].mapping.toData,d=(r?t.app.modals.models[i]:t.app.form.models).mapping.toForm[u],h=null;if(!u)throw Error("apply action: propertyName is not defined");e=le.getModelConrol(e,c);if("gridview"===e["data-buildertype"]&&"server"===e.pagerType)throw Error("Can't apply to gridview with server paging! Use a custom CodeActions for changing data in DB.");c=Array.isArray(l),e=a.modified[u],a=Array.isArray(e);if(!c&&a)p(h=e,l);else if(c&&a)for(var h=e,y=0;l.length,y++;)p(h,l[y]);else{if(c&&!a)throw Error("apply action: source data are array but target data is not array, can not merge");c||a||(h=K(e,l))}return function(e){return dt.form.updateData(u,h,n.parentId)(e)}},redirect:function(e){e.state;e=e.parameters;if(void 0!==e&&void 0!==e.target)return e.target.includes("http://")||e.target.includes("https://")?void j.setCurrentLocation(e.target):{app:{modals:u.app.modals},router:{redirect:null,push:e.target}};console.error("For call 'redirect' action you need to set the 'target' parameter!")},refresh:function(e){var t=e.state,e=e.modalId;return e?{app:{modals:{windows:Pe({},e,{keyIndex:t.app.modals.windows[e].keyIndex+1})}}}:{router:{refresh:"refresh"}}},reload:function(){return{router:{reload:"reload"}}},loadRecord:function(e){var t=e.parameters;return null!=t.urlFilter?function(e){return e(L.router.changeurlfilter(t.urlFilter)),re.Promise.resolve()}:t.row&&t.row.__id?function(e){return e(L.router.changeurlfilter(t.row.__id)),re.Promise.resolve()}:(null!=console&&console.log("This action uses parameters.row.__id or parameters.urlFilter. Fill one of them."),{})},validate:function(e){for(var t=e.data,r=(e.originalData,e.state),n=(e.component,e.controlRef,e.eventArgs,e.modalId),o=(e.callContext,!0),a={},i=n?De.getControlsForValidate(r.app.modals.models[r.app.modals.windows[n].name].model):De.getControlsForValidate(r.app.form.models.model),l=0;l<i.length;l++){var s=i[l].propertyName||i[l].key,c=De.validate(i[l],t[s],t);c&&(a[s]=c,o=!1)}if(o)return ee(n,{errors:null});r="Check errors on the form!";throw{level:1,message:r=void 0!==X()?X().msg.checkerrorsonform:r,formerrors:{modalId:n,errors:o?null:a}}},createElement:function(e){var t=e.data,r=(e.model,e.controlRef),n=(e.state,e.parameters),o=e.modelId;if(void 0===n)return{};if(!r)throw{level:1,message:"Fill targets for the createElement event!"};if(r.isServerMode&&r.isServerMode())throw{level:1,message:"The createElement event does not work in Server pagination!"};var a=r.props.propertyName&&""!==r.props.propertyName?r.props.propertyName:r.props.name,e=t[a];Array.isArray(e)||(e=t[a]=[]);var i=r.props.columns;if(Array.isArray(i)){var l,s={__id:"CLIENT_"+J()};for(l in n){for(var c=!1,u=0;u<i.length;u++)if(i[u].key.toLowerCase()===l.toLowerCase()){s[i[u].key]=n[l],c=!0;break}!1===c&&(s[l]=n[l])}e.push(s)}else{r=ke({},n);r.__id||(r.__id="CLIENT_"+J()),e.push(r)}return ee(o,{data:t})},deleteElement:function(e){var t=e.data,r=(e.model,e.controlRef),n=(e.state,e.parameters),o=e.modelId;if(void 0===n)return{};if(!r)throw{level:1,message:"Fill targets for the createElement event!"};e=r.props.propertyName&&""!==r.props.propertyName?r.props.propertyName:r.props.name,r=t[e],n=n.index;return Array.isArray(r)&&(r=t[e]).length>n&&r.splice(n,1),ee(o,{data:t})},setFilter:function(e){var t=e.key,r=(e.data,e.originalData,e.state),n=(e.component,e.controlRef,e.eventArgs,e.parameters),o=e.sourceControlRef,a=e.sourceControlValue,i=e.modalId,e=t,t=i?r.app.modals.windows[i]&&r.app.modals.windows[i].filters&&r.app.modals.windows[i].filters.hasOwnProperty(e)?r.app.modals.windows[i].filters[e]:[]:null!==r.app.form.filters.main&&r.app.form.filters.main.hasOwnProperty(e)?r.app.form.filters.main[e]:[],r=t.find(function(e){return e.__controlName===o.props.name});return void 0!==r?r.nextValue=null!=a&&""!==a?a:null:null!=a&&""!==a&&((r={}).column=void 0===n.column?o.props.name:n.column.split(",").map(function(e){return e.trim()}).join(","),r.term=void 0===n.term?"like":n.term,r.nextValue=a,r.value=null,r.__controlName=o.props.name,t.push(r)),i?{app:{modals:{windows:Pe({},i,{filters:Pe({},e,t)})}}}:{app:{form:{filters:{main:Pe({},e,t)}}}}},applyFilter:function(e){var t=e.key,r=(e.data,e.originalData,e.state),n=(e.component,e.controlRef,e.eventArgs,e.parameters,e.sourceControlRef,e.sourceControlValue,e.modalId),e=null,t=t;return n?r.app.modals.windows[n]&&r.app.modals.windows[n].filters&&r.app.modals.windows[n].filters.hasOwnProperty(t)&&(e=r.app.modals.windows[n].filters[t]):null!==r.app.form.filters.main&&r.app.form.filters.main.hasOwnProperty(t)&&(e=r.app.form.filters.main[t]),null===e?{}:((e=e.filter(function(e){return null!==e.nextValue})).forEach(function(e){return e.value=e.nextValue}),n?{app:{modals:{windows:Pe({},n,{filters:Pe({},t,e)})}}}:{app:{form:{filters:{main:Pe({},t,e)}}}})},openModal:function(e){var t=e.modalId,r=e.controlRef,n=e.state,o=e.parameters,e=e.callContext;return ue.open(t,n,o.name,o.data,o.filter,!o.filter||o.isCopy,r?r.props.name:null,o.type||"form",o.viewType||"modal",o.sidebarSettings,o.onOpenFunc,o.onCloseFunc,e,o.closeOnOutsideClick)},copy:function(e){var t=e.state,r=e.modalId,e=e.data;if((r?t.app.modals.windows[r]:t.app.form).data.isNew)throw Error("Can't copy new unsaved object");e=e.__id;if(r)return{app:{modals:{windows:Pe({},r,{data:{isNew:!0,filter:e}})}}};t=N.deconstructLocation(t.router.location);return{router:{push:"/".concat(t.type,"/").concat(t.name,"/").concat(e,"/copy")}}},workflowShowCommandForm:function(e){var t=e.state,r=e.parameters,n=e.callContext,o=e.data;if(t.settings.mobile)return{};if(r.command.form&&r.command.form.name){var a=null;return!o||(t=Object.keys(o).filter(function(e){return e.startsWith("_wp")})).length&&(a={},t.forEach(function(e){a[e.substring(3)]=o[e]})),new re.Promise(function(e,t){le.openModalDispatch(r.command.form.name,null,{onCloseFunc:function(){n.commandFormResult||t(),(n.commandFormResult&&n.commandFormResult.cancel?t:e)()},callContext:n,closeOnOutsideClick:!0,data:a})})}return{}},workflowContinueExecution:function(e){var t=e.state,r=e.modalId,n=e.data,o=e.callContext,e=(r?t.app.modals.models[t.app.modals.windows[r].name]:t.app.form.models).model;return o.commandFormResult={commandParams:n,model:e},Te.exit({state:t,modalId:r})},workflowCancelExecution:function(e){var t=e.state,r=e.modalId;return e.callContext.commandFormResult={cancel:!0},Te.exit({state:t,modalId:r})},gridCreate:function(e){var t=e.state,r=e.controlRef,n=e.parameters,e=e.modalId;if(r.isEditFormModal()||r.isEditFormSidebar())return he.create({state:t,controlRef:r,parameters:n,modalId:e});r=r.props;return"flow"!==r.editType?"workflow"!==r.editType?{router:{push:"/form/"+r.editForm+"/"}}:{router:{push:"/workflow/"+r.editWorkflow+"/"}}:{router:{push:"/flow/"+r.editFlow+"/"}}},gridRefresh:function(e){return e.controlRef.refresh(),{}},gridCopy:function(e){var t=e.state,r=e.controlRef,n=e.parameters,e=e.modalId;if(r.isEditFormModal()||r.isEditFormSidebar())return he.copy({state:t,controlRef:r,parameters:n,modalId:e});e=r.props;if(e.editFormShowType&&"Default"!==e.editFormShowType)return{};r=he.getSelectedRow({parameters:n,controlRef:r}),r=r?r.__id:void 0;return r?"flow"!==e.editType?{router:{push:"/form/"+e.editForm+"/"+r+"/copy"}}:{router:{push:"/flow/"+e.editFlow+"/"+r+"/copy"}}:{}},gridDelete:function(e){var t=e.state,r=e.controlRef,n=e.formName,o=e.modalId,a=r.props.propertyName||r.props.name;if(r.isServerMode()){var i=r.getSeletedRowKeys();if(0!==i.length)return i=i.filter(function(e){return null!=e&&!e.toString().startsWith("CLIENT_")}),function(e){return dt.common.deleteByIds(n,a,i,function(){var e="Rows have been deleted!";we(e=void 0!==X()?X().msg.rowsdeleted:e),r.refresh()})(e)};e="Please, select rows for deletion!";ge(e=void 0!==X()?X().msg.selectrowsfordelete:e)}else{var l=r.getSeletedRowKeys();if(0!==l.length){var s=(o?t.app.modals.windows[o]:t.app.form).data.modified[a].filter(function(e){return!l.includes(e.__id)}),s={data:{modified:Pe({},a,s)}};return o?{app:{modals:{windows:Pe({},o,s)}}}:{app:s}}s="Please, select rows for deletion!";ge(s=void 0!==X()?X().msg.selectrowsfordelete:s)}return{}},gridEdit:function(e){var t=e.state,r=e.controlRef,n=e.parameters,e=e.modalId;if(r.isEditFormModal()||r.isEditFormSidebar())return he.edit({state:t,controlRef:r,parameters:n,modalId:e});e=r.props;if(e.editFormShowType&&"Default"!==e.editFormShowType)return{};r=he.getSelectedRow({parameters:n,controlRef:r}),r=r?r.__id:void 0;return r?"flow"!==e.editType?"workflow"!==e.editType?{router:{push:"/form/"+e.editForm+"/"+r+"/"}}:{router:{push:"/workflow/"+e.editWorkflow+"/"+r+"/"}}:{router:{push:"/flow/"+e.editFlow+"/"+r+"/"}}:{}},gridExport:function(e){var o=e.controlRef,a=e.parameters,i=e.modalId,l=e.formName;return function(e){var t=Oe.a.chain(o.props.columns).map(function(e){return e.key+":"+e.name}).join(",").value(),r=o.getSort(),n=o.getFilters();return dt.additional.exportToExcel({type:o.props["data-buildertype"],controlRef:o,modalId:i,formName:l,parameters:a,startIndex:0,cols:t,pagerType:o.props.pagerType,sort:r,filters:n})(e)}},changeModel:function(e){var t=e.controlRef,r=e.state,n=e.parameters,e=e.modalId,o=r.app.form.models.model;if(void 0===n)return{};function a(e,t,r){if(t.key!=e){if(null!=t.children&&0<t.children.length)for(var n in t.children)a(e,t.children[n],r)}else for(var o in r)t[o]=r[o]}var i,l=t.props.name;for(i in o)a(l,o[i],n);return ee(e,{model:o})},setFields:function(e){var t,r,n=e.data,o=e.parameters,e=e.modalId;for(t in o)r=o[t],/^-?\d+(?:[.,]\d*?)?$/.test(r)&&(r=parseFloat(r),!isNaN(r))?n[t]=parseFloat(o[t]):n[t]=o[t];return ee(e,{data:n})},print:function(e){var t=void 0;e.parameters&&e.parameters.title&&(t=e.parameters.title),e.component.print||console.error("Print is unsupported for this component!",e),e.component.print(t)}},t=r(1);function Fe(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Ae(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Fe(Object(o),!0).forEach(function(e){var t,r;t=n,e=o[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Fe(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}i=Object.getPrototypeOf(new XMLHttpRequest);i!==XMLHttpRequest.prototype&&(XMLHttpRequest.prototype=i);var Ie=XMLHttpRequest.prototype.send,Le=XMLHttpRequest.prototype.setRequestHeader,Ne=null,Be=window.fetch,Ve=[],Me=null,Ue=!1;var ze={addRequestCallback:function(e){Ve.push(e)},removeRequestCallback:function(e){!function(e,t){var r=e.indexOf(t);if(!(-1<r))throw new Error("Could not remove "+t+" from array");e.splice(r,1)}(Ve,e)},isWired:function(){return Ue},wire:function(){if(Ue)throw new Error("Ajax interceptor already wired");XMLHttpRequest.prototype.send=function(){!function(e,t){for(var r=0;r<e.length;r++)e[r](t)}(Ve,this),this.authToken&&Le.apply(this,["Authorization",this.authToken]),Ie.apply(this,arguments)},XMLHttpRequest.prototype.setRequestHeader=function(e,t){"Authorization"===e?(this.authToken=t,Ne=this.authToken):Le.apply(this,arguments)},Ue=!0},unwire:function(){if(!Ue)throw new Error("Ajax interceptor not currently wired");XMLHttpRequest.prototype.send=Ie,XMLHttpRequest.prototype.setRequestHeader=Le,Ue=!1},fetch:function(e,t){var r=t||{},t=r.headers||new Headers;return Ne&&t.append("Authorization",Ne),r.headers=t,Be(e,r)},configureHeaders:function(e){var t=null,t=(t=window.globalFetchOptions?window.globalFetchOptions():t)||Ae({},V.getState().settings.fetchOptions),r=e?"Bearer "+e:null;t.headers=Ae(Ae({},t.headers),{},{Authorization:r}),window.globalFetchOptions||V.dispatch(L.settings.set("fetchOptions",t)),Me?ze.removeRequestCallback(Me):ze.wire(),Me=function(e){e.setRequestHeader("Authorization",r)},ze.addRequestCallback(Me)}},We=ze;function He(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Ge(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?He(Object(o),!0).forEach(function(e){var t,r;t=n,e=o[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):He(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function qe(e){e=Ge({},e);return e.fetchFunc=We.fetch,be("dwkit-form",{props:e})}function Ke(e){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Je(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function $e(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Je(Object(r),!0).forEach(function(e){tt(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Je(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Ye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qe(e,t){return(Qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ze(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=et(r);return function(e,t){{if(t&&("object"===Ke(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return Xe(e)}(this,n?(e=et(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function Xe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function et(e){return(et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qe(e,t)}(o,a["Component"]);var e,t,r,n=Ze(o);function o(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),tt(Xe(a=n.call(this,e)),"getAdditionalDataForControl",function(e,t,r){var n=a.props,o=a.state.forCopy||!1;return a.props.additionalFetch(function(){return n.name},n.id,o,e,t,r,a.props.schemeName)}),a.state={},a}return e=o,r=[{key:"getDerivedStateFromProps",value:function(e,t){var r={},n=void 0!==e.filter?e.filter:null,o=null!==t?t.filter:null,a=null,i=e.preventLoad;return!n||o&&H(o,n)?e.preventLoad||null!==n||void 0!==o?!n||!e.isNew||t&&t.isNew||(a={filter:n,forCopy:!0}):i||(a={forCopy:!1}):i||(a={filter:n,forCopy:n&&e.isNew}),null!==(r.childDataRequest=a)&&(r.forCopy=a.forCopy),r.filter=n,r.isNew=e.isNew,r}}],(t=[{key:"componentDidMount",value:function(){this.requestModelAndData()}},{key:"componentDidUpdate",value:function(){this.requestModelAndData()}},{key:"requestModelAndData",value:function(){var e;this.state.childDataRequest&&(e=this.state.childDataRequest,"flow"===this.props.type&&0<this.props.keyIndex?this.props.fetchFlow(this.props.flowName,e.filter,this.props.id,e.forCopy):"workflow"===this.props.type&&0<this.props.keyIndex?this.props.fetchWorkflow(this.props.schemeName,e.filter,this.props.id,e.forCopy):"flow"===this.props.type||this.props.model?this.props.fetchData(null,e.filter,this.props.name,this.props.id,e.forCopy,this.props.schemeName):this.props.fetchForm(this.props.name,e.filter,this.props.id,e.forCopy),this.setState({childDataRequest:null}))}},{key:"render",value:function(){var a=this,i=this.props,e=V.getState().settings,t=e.dataupload,r=e.datadownload;e.backendUrl&&(t=e.backendUrl+t,r=e.backendUrl+r);t={key:"chidForm_"+i.id,formName:i.name,data:i.data,extendedData:{filters:i.controlFilters,schemes:i.schemes},model:this.props.model,errors:i.errors,dataChanged:function(e,t){var r=t.key,n=t.propertyName,o=t.value,t=t.additionalValues;a.props.dataChanged(n||r,o,t,i.id)},eventFunc:function(e){a.props.executeActions($e($e({},e),{},{schemeName:a.props.schemeName,modalId:i.id,callContext:i.callContext}))},getAdditionalDataForControl:this.getAdditionalDataForControl,hideControls:i.hideControls,readOnlyControls:i.readOnlyControls,readOnly:i.readOnly,uploadUrl:t,downloadUrl:r};if(e.userForms){r=t.formName?t.formName.toLowerCase():void 0;if(r&&e.userForms[r]){r=e.userForms[r];return l.a.createElement(r,t)}}return l.a.createElement(qe,t)}}])&&Ye(e.prototype,t),r&&Ye(e,r),o}(),rt=Object(t.connect)(null,function(a){return $e($e({},gt(a)),{},{fetchFlow:function(e,t,r,n){a(dt.form.fetchflow(e,t,r,n)).then(function(){var e=V.getState();a(dt.form.fetchdata(null,t,e.app.modals.windows[r].name,r,n))})},fetchWorkflow:function(t,r,n,o){a(dt.form.fetchworkflow(t,r,n,o)).then(function(){var e=V.getState();a(dt.form.fetchdata(null,r,e.app.modals.windows[n].name,n,o,t))})},fetchForm:function(e,t,r,n){a(dt.form.fetchform(e,r)).then(function(){a(dt.form.fetchdata(null,t,e,r,n))})}})})(i);function nt(e){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ot(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function at(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ot(Object(r),!0).forEach(function(e){it(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ot(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function it(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lt(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,lt)}var st=r(46),ct={credentials:"same-origin"},ut={},pt={configuredFetch:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=V.getState(),n=window.globalFetchOptions?window.globalFetchOptions():r.settings.fetchOptions||{},o=at(at(at({},ct),n),t),n="",t=V.getState().settings;return t.backendUrl&&!e.startsWith("http")&&(n=t.backendUrl),n+=e,b()(n,o,window.globalFetchOptions).then(function(e){if(401===e.status&&(!r.app.user||r.app.user.isAnonymous))throw I.get(V).signinRedirect(),new lt;return e})},userinfo:{fetch:function(r){return function(t){I.get(V).preFetchUser().then(function(){return t(L.app.userinfo.fetch.begin()),pt.configuredFetch(V.getState().settings.accountget).then(function(e){if(200==e.status)return e.json();e="Error status:"+e.status+".";throw new Error(e)}).then(function(e){e.success?(t(L.app.userinfo.fetch.success(e.item)),r&&r(e.item)):t(L.app.userinfo.fetch.failure(e.message,e.details))}).catch(lt,function(){}).catch(function(e){t(L.app.userinfo.fetch.failure(e,"userinfo.fetch"))})})}}},additional:{fetch:function(e){var g=e.type,w=e.controlRef,O=e.formName,C=e.schemeName,S=e.startIndex,E=e.pageSize,j=e.filters,k=e.sort,P=e.callback,x=e.modalId,_=e.forCopy,R=e.row,D=e.loadParameters,T=e.baseLocation,F=e.fetchUrl,A=e.fetchResponseType,I=e.fetchOptions;return function(t){if("dictionary"===g){for(var e=w.props.dataModel,r=w.props.columns.split(",").map(function(e){return e.trim()}),n=[],o=[],a=0;a<r.length;a++){var i=r[a],l=i.split(/\s+/);1===l.length?o.push(i):2===l.length&&(o.push(l[0]),n.push({column:l[0],order:l[1]}))}e={columns:JSON.stringify(o),sort:JSON.stringify(n),name:e};return null!=j&&(e.filter="string"==typeof j?j:JSON.stringify(j)),null!=S&&null!=E&&(e.paging=JSON.stringify({startIndex:S,pageSize:E})),ft.dictionaryFetch(t,e,S,E,P,function(e){return{items:e.item.map(function(e){var t=w.props.textFunc?w.props.textFunc(e.values):e.value;return{key:e.key,text:t,value:e.key,values:e.values}}),count:e.count}})}if("treepicker"===g){for(var s=w.props.dataModel,e=w.props.parentIdField,c=w.props.columns.split(",").map(function(e){return e.trim()}),u=[],p=[],f=0;f<c.length;f++){var d=c[f],h=d.split(/\s+/);1===h.length?p.push(d):2===h.length&&(p.push(h[0]),u.push({column:h[0],order:h[1]}))}s={columns:JSON.stringify(p),sort:JSON.stringify(u),name:s,parent:e};return j&&(s.filter=JSON.stringify(j)),void 0!==S&&E&&(e=w.state.parentIdToFetch,s.paging=JSON.stringify({startIndex:S,pageSize:E,parentId:e})),ft.dictionaryFetch(t,s,S,E,P,function(e){return{items:e.item.map(function(e){return at(at({},e),{},{name:w.props.textFunc?w.props.textFunc(e.values):e.name})}),count:e.count}})}if("gridview"===g){var y=ft.createUrlData({type:g,controlRef:w,formName:O,startIndex:S,pageSize:E,filters:j,sort:k,callback:P,modalId:x,forCopy:_,baseLocation:T}),s=V.getState().settings;return s.mobile&&(y.mobile=s.mobile),pt.configuredFetch(s.dataget+"?"+V.encodeQueryData(y)).then(function(e){return e.json()}).then(function(e){e.success?P({sIndex:S,pSize:E,rowsCount:e.item["__"+y.propertyName+"_totalcount"],items:e.item[y.propertyName]}):t(L.app.form.data.fetch.failure(e.message,e.details))}).catch(function(e){t(L.app.form.data.fetch.failure(e.message,e.stack))})}if("repeater"===g){var m=ft.createUrlData({type:g,controlRef:w,formName:O,startIndex:S,pageSize:E,filters:j,sort:k,callback:P,modalId:x,forCopy:_,baseLocation:T}),b=V.getState().settings;return b.mobile&&(m.mobile=b.mobile),pt.configuredFetch(b.dataget+"?"+V.encodeQueryData(m)).then(function(e){return e.json()}).then(function(e){e.success?P({sIndex:S,pSize:E,rowsCount:e.item["__"+m.propertyName+"_totalcount"],items:e.item[m.propertyName]}):t(L.app.form.data.fetch.failure(e.message,e.details))}).catch(function(e){t(L.app.form.data.fetch.failure(e.message,e.stack))})}if("workflowbar"!==g)return"fetch"===g?"blob"==A?pt.configuredFetch(F,I).then(function(e){return e.blob()}).then(function(e){P(e)}).catch(function(e){t(L.app.form.data.fetch.failure(e.message,e.stack))}):"json"==A?pt.configuredFetch(F,I).then(function(e){return e.json()}).then(function(e){e.success?P(e):t(L.app.form.data.fetch.failure(e.message,e.details))}).catch(function(e){t(L.app.form.data.fetch.failure(e.message,e.stack))}):pt.configuredFetch(F,I).then(function(e){return P(e)}).catch(function(e){t(L.app.form.data.fetch.failure(e.message,e.stack))}):(console.log("TODO: implement getAdditionalDataForControl method for "+g+" control"),Promise.resolve());b=null!=R&&null!=R.__id?R.__id:x?V.getState().app.modals.windows[x].data.filter:(v=V.getState().router.location,N.formFilterFromLocation(v||T));var v={name:O,forCopy:_,loadParameters:D};return C&&(v.schemeName=C),null!==b&&(v.urlFilter=b),ft.buildRequest(t,V.getState().settings.workflowget,v,function(e){return D&&t(L.app.form.data.setprocessparameters(x,e.item.processParameters)),e.item}).then(function(e){e&&P(e)})}},exportToExcel:function(e){var n=e.type,o=e.controlRef,a=e.formName,i=e.startIndex,l=e.filters,s=e.sort,c=e.callback,u=e.modalId,p=e.forCopy,f=e.cols,d=e.pagerType,h=e.parameters;return function(t){var r=ft.createUrlData({type:n,controlRef:o,formName:a,startIndex:i,pageSize:null,filters:l,sort:s,callback:c,modalId:u,forCopy:p,cols:f,pagerType:d,filename:h.filename}),e=V.getState().settings;return e.mobile&&(r.mobile=e.mobile),pt.configuredFetch(e.dataexport+"?"+V.encodeQueryData(r)).then(function(e){return e.blob()}).then(function(e){return j.openExcel(r,e)}).catch(function(e){t(L.app.failure(e.message,e.stack))})}}},form:{clear:function(){return function(e){e(L.app.form.clear())}},fetchform:function(n,o){return function(r){r(L.app.form.model.fetch.begin());var e=V.getState().settings,t={wrapresult:!0,enableSecurity:!0,mobile:e.mobile};return pt.configuredFetch(e.uiform+"/"+n+"?"+V.encodeQueryData(t)).then(function(e){return e.json()}).then(function(e){var t;e.success?(t=e.item,r(L.app.form.model.fetch.success(JSON.parse(t.source),t.mapping,n,o,{schemes:t.schemes,securityGroup:t.securityGroup,permissions:t.permissions,mapping:t.mapping,name:t.name}))):r(L.app.form.model.fetch.failure(e.message,e.details))}).catch(function(e){r(L.app.form.model.fetch.failure(e.message,e.stack))})}},fetchflow:function(r,o,a,i){return function(n){var e=V.getState().settings,t={urlFilter:o};return e.mobile&&(t.mobile=e.mobile),i&&(t.forCopy=i),n(L.app.form.model.fetch.begin()),pt.configuredFetch(e.uiflow+"/"+r+"?"+V.encodeQueryData(t)).then(function(e){return e.json()}).then(function(e){var t,r;e.success?(t=e.item,r=null,a&&("string"==typeof a||a instanceof String?n(L.app.form.model.change(t.name,r=a)):(r=a.id,a.name=t.name)),n(L.app.form.model.fetch.success(JSON.parse(t.source),t.mapping,t.name,r,{schemes:t.schemes,securityGroup:t.securityGroup,permissions:t.permissions,mapping:t.mapping,name:t.name}))):n(L.app.form.model.fetch.failure(e.message,e.details))}).catch(function(e){n(L.app.form.model.fetch.failure(e.message,e.stack))})}},fetchworkflow:function(o,r,a,i){return function(n){var e=V.getState().settings,t={urlFilter:r};return e.mobile&&(t.mobile=e.mobile),i&&(t.forCopy=i),n(L.app.form.model.fetch.begin()),pt.configuredFetch(e.uiworkflow+"/"+o+"?"+V.encodeQueryData(t)).then(function(e){return e.json()}).then(function(e){var t,r;e.success?(t=e.item,r=null,a&&("string"==typeof a||a instanceof String?n(L.app.form.model.change(t.name,r=a)):(r=a.id,a.name=t.name)),n(L.app.form.model.fetch.success(JSON.parse(t.source),t.mapping,t.name,r,{schemes:[o],securityGroup:t.securityGroup,permissions:t.permissions,mapping:t.mapping,name:t.name}))):n(L.app.form.model.fetch.failure(e.message,e.details))}).catch(function(e){n(L.app.form.model.fetch.failure(e.message,e.stack))})}},fetchdata:function(r,o,a,i,l,s){return function(n){n(L.app.form.data.fetch.begin());var e=V.getState().settings,t={name:a};return s&&(t.schemeName=s),r&&(t.filter=JSON.stringify(r)),o&&(t.urlFilter=o),l&&(t.forCopy=!0),e.mobile&&(t.mobile=e.mobile),pt.configuredFetch(e.dataget+"?"+V.encodeQueryData(t)).then(function(e){return e.json()}).then(function(e){var t,r;e.success?(t=l||"object"===nt(e.item)&&!Array.isArray(e.item)&&null===e.item.__id,r=JSON.parse(JSON.stringify(e.item),Y),pt.form.executeActions({formName:a,schemeName:s,eventName:"dataReceived",actions:["dataReceived"],modalId:i,parameters:{data:r}})(n),n(L.app.form.data.fetch.success(r,i,t))):n(L.app.form.data.fetch.failure(e.message,e.details))}).catch(function(e){n(L.app.form.data.fetch.failure(e.message,e.stack))})}},savedata:function(e){var n=e.formName,d=e.modalId,h=e.state,o=e.data,a=e.schemeName;return function(u){var p=(d?h.app.modals.windows[d]:h.app.form).data;u(L.app.form.data.save.begin());var e={};n&&(e.name=n),a&&(e.schemeName=a);var t=new FormData,f=p.isNew;t.append("data",JSON.stringify(o));var r=V.getState().settings;return r.mobile&&(e.mobile=r.mobile),pt.configuredFetch(r.datachange+"?"+V.encodeQueryData(e),{method:"post",body:t}).then(function(e){return e.json()}).then(function(e){if(e.success){var t="The changes have been applied!";X()&&(t=X().msg.savedatasuccess),we(t=void 0!==e.message&&null!==e.message?e.message:t);var r=e.item,n=r?r.entity:null,o=r?r.entityId:null,a=null!=n,i=null!=o;u(a?L.app.form.data.save.success(n,d):L.app.form.data.save.success(null,d)),ft.changeStateWithResult(e),d&&(r=((t=(s=h.app.modals.windows[d]).parentId)?h.app.modals.models[h.app.modals.windows[t].name]:h.app.form.models).model,(r=le.getModelConrol(r,p.property))&&"gridview"===r["data-buildertype"]&&"server"===r.pagerType||(l=null,(r=!!s.parentId)&&(l=h.app.modals.windows[t].name),c=p.property,t=h.app.modals.models[s.name].mapping.toData,l=(r?h.app.modals.models[l]:h.app.form.models).mapping.toForm,c&&(l=l[c]),l=he.mapRow(he.mapRow(n,t,p.additionalValues),l),u(L.app.form.data.updatefromchild(c,l,s.parentId))));var l,s,c={};return f&&(a||i)&&(l={},d?l.app={modals:{windows:it({},d,{data:{filter:i?o:a?n.__id:void 0}})}}:(s=j.getWindowLocation(),l.router={push:i?N.changeFilter(s,o):a?N.changeFilter(s,n.__id):void 0}),c.stateDelta=l),a&&(c.data=n),Promise.resolve(c)}ft.changeStateWithResult(e);n=null!==e.message?e.message:void 0,c=null!==e.details?e.details:void 0;throw null!==e.validationResult&&void 0!==e.validationResult?{level:1,message:n,details:c,formerrors:{modalId:d,errors:e.validationResult}}:{level:1,message:n,details:c}}).catch(function(e){throw e.stack&&!e.details&&(e.details=e.stack),e})}},updateData:function(t,r,n){return function(e){return e(L.app.form.data.update(t,r,n)),Promise.resolve()}},executeActions:function(e){return function(r){xe(e,r).catch(function(e){var t;"object"===nt(e)?(t=e.details,null!=e.stack&&(t=null==t?e.stack:t+"\nStack: "+e.stack),null!=console&&null!=t&&console.log(t),r(L.app.form.data.save.failure(e.message,e.details,e.level,e.formerrors))):r(L.app.form.data.save.failure(e,void 0))})}}},common:{deleteByIds:function(o,a,i,l,s){return function(t){t(L.app.form.data.delete.begin());var e={name:o};a&&(e.propertyName=a),s&&(e.schemeName=s);var r=new FormData;Array.isArray(i)?r.append("data",JSON.stringify(i)):r.append("data",JSON.stringify([i]));var n=V.getState().settings;return n.mobile&&(e.mobile=n.mobile),pt.configuredFetch(n.datadelete+"?"+V.encodeQueryData(e),{method:"post",body:r}).then(function(e){return e.json()}).then(function(e){e.success?(ft.changeStateWithResult(e),t(L.app.form.data.delete.success(o)),l&&l(e)):(ft.changeStateWithResult(e),t(L.app.form.data.delete.failure(null!==e.message?e.message:void 0,null!==e.details?e.details:void 0,void 0,null!==e.validationResult&&void 0!==e.validationResult?{main:e.validationResult}:void 0)))}).catch(function(e){t(L.app.form.data.delete.failure(e.message,e.details))})}},setCookie:function(e,t,r){ft.setCookie(e,t,r)},getCookie:function(e){return ft.getCookie(e)},getParameterFormUrlOrCookie:function(){var e=j.getWindowLocation();return N.getParamValue(e,"impersonatedUserId")||ft.getCookie("impersonatedUserId")}}},ft={createUrlDataForCollections:function(e){e.type;var t=e.controlRef,r=e.formName,n=e.startIndex,o=e.pageSize,a=e.filters,i=e.sort,l=(e.callback,e.modalId),s=e.forCopy,c=e.cols,u=e.pagerType,p=e.filename,e=e.baseLocation,o=o?{startIndex:n,pageSize:o}:void 0,a=a,f=[];i&&i.split(",").forEach(function(e){e=e.trim().split(" ");1<e.length?f.push({column:e[0].trim(),Order:e[1].trim()}):f.push({column:e[0].trim(),Order:"ASC"})});i={};l?i.urlFilter=V.getState().app.modals.windows[l].data.filter:(d=(d=V.getState().router.location)||e,i=N.formDataFromLocation(d));var d=t.props.name,t=t.props.propertyName,r={control:d,propertyName:t||d,name:r&&r.toLowerCase()};return s&&(r.forCopy=s),o&&(r.paging=JSON.stringify(o)),a&&(r.filter=JSON.stringify(a)),f&&(r.sort=JSON.stringify(f)),c&&(r.cols=c),i.options&&(r.options=i.options),i.urlFilter&&(r.urlFilter=i.urlFilter),u&&(r.pagerType=u),p&&(r.fileName=p),r},createUrlData:function(e){switch(e.type){case"gridview":case"repeater":return this.createUrlDataForCollections(e);default:throw new Error("unknown type")}},changeStateWithResult:function(e){void 0!==e.result&&null!==e.result&&V.dispatch(L.updatestate(e.result))},getCookie:function(e){var t=j.getCookie();if(t){e=t.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0}},setCookie:function(e,t,r){var n,o=(r=r||{}).expires;"number"==typeof o&&o&&((n=new Date).setTime(n.getTime()+1e3*o),o=r.expires=n),o&&o.toUTCString&&(r.expires=o.toUTCString());var a,i=e+"="+(t=encodeURIComponent(t));for(a in r){i+="; "+a;var l=r[a];!0!==l&&(i+="="+l)}j.setCookie("".concat(i,"; path=/"))},dictionaryFetch:function(e,t,r,n,o,a){return this.buildRequest(e,V.getState().settings.datadictionary,t,a).then(function(e){e&&o({sIndex:r,pSize:n,rowsCount:e.count,items:e.items})})},buildRequest:function(t,e,r,n){var o=st(r),a=null;return ut[o]?a=ut[o]:(a=pt.configuredFetch(e+"?"+V.encodeQueryData(r)).then(function(e){return e.json()}).then(function(e){return e.success?n(e):void t(L.app.form.data.fetch.failure(e.message,e.details))}).catch(function(e){t(L.app.form.data.fetch.failure(e.message,e.stack))}).finally(function(){ut[o]=void 0}),ut[o]=a),a}},dt=pt;function ht(e){return function(e){if(Array.isArray(e))return yt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return yt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?yt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function mt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function bt(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?mt(Object(o),!0).forEach(function(e){var t,r;t=n,e=o[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):mt(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function vt(e){var t,r=e.app.form.filters.main,n={};if(r)for(var o in r)!r.hasOwnProperty(o)||0<(t=r[o].filter(function(e){return null!==e.value}).map(function(e){return{column:e.column,term:e.term,value:e.value}})).length&&(n[o]=t);var a=e.app.form.data.modified,i=(l=N.deconstructLocation(e.router.location)).urlFilter,l=l.command;return{filter:i,model:e.app.form.models.model,data:null==a?void 0:(Array.isArray(a)?ht:Q)(a),mainControlFilters:n,errors:e.app.form.errors||void 0,hideControls:e.app.form.models.hideControls,readOnlyControls:e.app.form.models.readOnlyControls,readOnly:e.app.form.models.readOnly,dimmed:Object.values(e.app.modals.windows).some(function(e){return"sidebar"===e.type}),selectedScheme:e.app.form.selectedScheme,schemes:null===e.app.form.formParams||void 0===e.app.form.formParams?void 0:e.app.form.formParams.schemes,command:l}}var gt=function(l){return{fetchData:function(e,t,r,n,o,a){l(dt.form.fetchdata(e,t,r,n,o,a))},dataChanged:function(e,t,r,n){l(L.app.form.data.update(e,t,n,r))},executeActions:function(e){l(dt.form.executeActions(e))},additionalFetch:function(e,t,r,n,o,a,i){i=bt(bt({},o),{},{formName:e(),controlRef:n,callback:a,modalId:t,forCopy:r,schemeName:i});!i.type&&n&&n.props&&n.props["data-buildertype"]&&(i.type=n.props["data-buildertype"]),l(dt.additional.fetch(i))}}};function wt(e){return(wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ot(e,t){return(Ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ct(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Et(r);return function(e,t){{if(t&&("object"===wt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return St(e)}(this,n?(e=Et(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function St(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Et(e){return(Et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var kt=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ot(e,t)}(o,a["Component"]);var n=Ct(o);function o(){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return jt(St(a=n.call.apply(n,[this].concat(t))),"getAdditionalDataForControl",function(e,t,r){return t&&!t.baseLocation&&(t.baseLocation=a.props.baseLocation),a.props.additionalFetch(function(){return a.props.formName},null,"copy"===a.props.command,e,t,r,a.props.schemeName)}),jt(St(a),"drawMainForm",function(){if(a.props.preventDrawMainform)return null;var e=V.getState().settings,t=e.dataupload,r=e.datadownload;e.backendUrl&&(t=e.backendUrl+t,r=e.backendUrl+r);t={key:a.props.getMainFormKey(),formName:a.props.formName,objectId:a.props.data?a.props.data.__id:a.props.filter,data:a.props.data,extendedData:{filters:a.props.mainControlFilters,schemes:a.props.schemes},model:a.props.model,errors:a.props.errors,dataChanged:function(e,t){var r=t.key,n=t.propertyName,o=t.value,t=t.additionalValues;a.props.dataChanged(n||r,o,t)},eventFunc:function(e){a.props.schemeName&&(e.schemeName=a.props.schemeName),a.props.executeActions(e)},getAdditionalDataForControl:a.getAdditionalDataForControl,hideControls:a.props.hideControls,readOnlyControls:a.props.readOnlyControls,readOnly:a.props.readOnly,uploadUrl:t,downloadUrl:r};if(e.userForms){r=t.formName?t.formName.toLowerCase():void 0;if(r&&e.userForms[r]){r=e.userForms[r];return l.a.createElement(r,t)}}return l.a.createElement(qe,t)}),a}return o}();function Pt(e){return(Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function _t(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?xt(Object(o),!0).forEach(function(e){var t,r;t=n,e=o[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):xt(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function Rt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Dt(e,t){return(Dt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Tt(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Ft(r);return function(e,t){{if(t&&("object"===Pt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,n?(e=Ft(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function Ft(e){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var i=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dt(e,t)}(o,a["Component"]);var e,t,r,n=Tt(o);function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=n.call(this,e)).state={},e}return e=o,r=[{key:"getDerivedStateFromProps",value:function(e,t){var r={},n=null===e.formName||void 0===e.formName?null:e.formName.toLowerCase(),o=null===t||void 0===t.formName?null:t.formName,a=void 0!==e.filter?e.filter:null,i=null!==t?t.filter:null,l=t?t.command:null;return r.formName=n,r.command=e.command,n!==o?null!==n&&(r.needFetchForm=!0,r.needFetchData=!0):a===i&&l===r.command||(r.filter=e.filter,r.needFetchData=!0),r.refreshKey=e.refreshKey,e.refreshKey!=t.refreshKey&&(r.needFetchForm=!0,r.needFetchData=!0),r}}],(t=[{key:"componentDidMount",value:function(){this.RequestModelAndData()}},{key:"componentDidUpdate",value:function(){this.RequestModelAndData()}},{key:"getMainFormKey",value:function(){return"mainform_"+this.state.formName+"_"+this.props.refreshKey}},{key:"RequestModelAndData",value:function(){this.state.needFetchForm?(this.setState({needFetchForm:!1}),this.props.fetchForm(this.state.formName)):this.state.needFetchData&&null!==this.state.formName&&(this.setState({needFetchData:!1}),this.props.fetchData(null,this.state.filter,this.state.formName,null,"copy"===this.props.command))}},{key:"render",value:function(){var e=_t({},this.props);return e.getMainFormKey=this.getMainFormKey.bind(this),e.preventDrawMainform=!this.state.formName||this.state.needFetchForm,be("content",{key:this.getMainFormKey()+"_formcontent",props:e})}}])&&Rt(e.prototype,t),r&&Rt(e,r),o}(),At=Object(t.connect)(function(e,t){return _t(_t({},vt(e)),{},{formName:t.formName||N.nameFromLocation(e.router.location,e.settings.form),refreshKey:e.router.refreshKey})},function(t){return _t(_t({},gt(t)),{},{fetchForm:function(e){t(dt.form.clear()),t(dt.form.fetchform(e))}})})(i);function It(e){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Nt(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Lt(Object(o),!0).forEach(function(e){var t,r;t=n,e=o[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Lt(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function Bt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Vt(e,t){return(Vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mt(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Ut(r);return function(e,t){{if(t&&("object"===It(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,n?(e=Ut(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function Ut(e){return(Ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var i=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vt(e,t)}(o,a["Component"]);var e,t,r,n=Mt(o);function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=n.call(this,e)).state={},e}return e=o,r=[{key:"getDerivedStateFromProps",value:function(e,t){var r={},n=null===e.flowName||void 0===e.flowName?null:e.flowName.toLowerCase(),o=null===t||void 0===t.flowName?null:t.flowName,a=void 0!==e.filter?e.filter:null,i=null!==t?t.filter:null,l=t?t.command:null;return r.flowName=n,r.command=e.command,n!==o?null!==n&&(r.needFetchFlow=!0,r.needFetchData=!0,r.filter=e.filter):a===i&&l===r.command||(r.filter=e.filter,r.needFetchData=!0),r.refreshKey=e.refreshKey,e.refreshKey!=t.refreshKey&&(r.needFetchForm=!0,r.needFetchData=!0),r}}],(t=[{key:"componentDidMount",value:function(){this.RequestModelAndData()}},{key:"componentDidUpdate",value:function(e,t){this.RequestModelAndData()}},{key:"getMainFormKey",value:function(){return"mainform_"+this.state.flowName+"_"+this.props.refreshKey}},{key:"RequestModelAndData",value:function(){this.state.needFetchFlow?(this.setState({needFetchFlow:!1}),this.props.fetchFlow(this.state.flowName,this.state.filter,"copy"===this.props.command)):this.state.needFetchData&&null!==this.props.formName&&(this.setState({needFetchData:!1}),this.props.fetchData(null,this.state.filter,this.props.formName,null,"copy"===this.props.command))}},{key:"render",value:function(){var e=Nt({},this.props);return e.getMainFormKey=this.getMainFormKey.bind(this),e.preventDrawMainform=!this.state.flowName||this.state.needFetchFlow,be("content",{key:this.getMainFormKey()+"_flowcontent",props:e})}}])&&Bt(e.prototype,t),r&&Bt(e,r),o}(),zt=Object(t.connect)(function(e,t){return Nt(Nt({},vt(e)),{},{flowName:t.flowName||N.nameFromLocation(e.router.location,V.getState().settings.flow),formName:e.app.form.formParams.name,refreshKey:e.router.refreshKey})},function(n){return Nt(Nt({},gt(n)),{},{fetchFlow:function(e,t,r){n(dt.form.clear()),n(dt.form.fetchflow(e,t,null,r))}})})(i);function Wt(e){return(Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ht(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Gt(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Ht(Object(o),!0).forEach(function(e){var t,r;t=n,e=o[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Ht(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function qt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Kt(e,t){return(Kt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jt(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=$t(r);return function(e,t){{if(t&&("object"===Wt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,n?(e=$t(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function $t(e){return($t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var i=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kt(e,t)}(o,a["Component"]);var e,t,r,n=Jt(o);function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=n.call(this,e)).state={},e}return e=o,r=[{key:"getDerivedStateFromProps",value:function(e,t){var r={},n=null===e.schemeName||void 0===e.schemeName?null:e.schemeName.toLowerCase(),o=null===t||void 0===t.schemeName?null:t.schemeName,a=void 0!==e.filter?e.filter:null,i=null!==t?t.filter:null,l=t?t.command:null;return r.schemeName=n,r.command=e.command,n!==o?null!==n&&(r.needFetchWorkflow=!0,r.needFetchData=!0,r.filter=e.filter):a===i&&l===r.command||(r.filter=e.filter,r.needFetchData=!0),r.refreshKey=e.refreshKey,e.refreshKey!=t.refreshKey&&(r.needFetchForm=!0,r.needFetchData=!0),r}}],(t=[{key:"componentDidMount",value:function(){this.RequestModelAndData()}},{key:"componentDidUpdate",value:function(e,t){this.RequestModelAndData()}},{key:"getMainFormKey",value:function(){return"mainform_"+this.state.schemeName+"_"+this.props.refreshKey}},{key:"RequestModelAndData",value:function(){this.state.needFetchWorkflow?(this.setState({needFetchWorkflow:!1}),this.props.fetchWorkflow(this.state.schemeName,this.state.filter,"copy"===this.props.command)):this.state.needFetchData&&null!==this.props.formName&&(this.setState({needFetchData:!1}),this.props.fetchData(null,this.state.filter,this.props.formName,null,"copy"===this.props.command,this.props.schemeName))}},{key:"render",value:function(){var e=Gt({},this.props);return e.getMainFormKey=this.getMainFormKey.bind(this),e.preventDrawMainform=!this.state.schemeName||this.state.needFetchWorkflow,be("content",{key:this.getMainFormKey()+"_workflowcontent",props:e})}}])&&qt(e.prototype,t),r&&qt(e,r),o}(),Yt=Object(t.connect)(function(e,t){return Gt(Gt({},vt(e)),{},{schemeName:t.schemeName||N.nameFromLocation(e.router.location,e.settings.workflow),formName:e.app.form.formParams.name,refreshKey:e.router.refreshKey})},function(n){return Gt(Gt({},gt(n)),{},{fetchWorkflow:function(e,t,r){n(dt.form.clear()),n(dt.form.fetchworkflow(e,t,null,r))}})})(i);function Qt(e){return(Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Xt(e,t){return(Xt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function er(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=tr(r);return function(e,t){{if(t&&("object"===Qt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,n?(e=tr(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function tr(e){return(tr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var i=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xt(e,t)}(o,a["Component"]);var e,t,r,n=er(o);function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=n.call(this,e)).state={fetchCount:0},e}return e=o,r=[{key:"getDerivedStateFromProps",value:function(e,t){var r={};return 0===t.fetchCount&&0<e.fetchCount?(r.fetchCount=e.fetchCount,r.start=!0,r.stop=!1):0<t.fetchCount&&0===e.fetchCount&&(r.fetchCount=0,r.start=!1,r.stop=!0),r.showError||void 0===e.error||(r.showError=!0,r.error=e.error,r.errorLevel=e.errorLevel,r.errorDetails=e.errorDetails),r}}],(t=[{key:"render",value:function(){return null}},{key:"componentDidMount",value:function(){this.StartStopOnFetch(),this.ShowError()}},{key:"componentDidUpdate",value:function(e,t){this.StartStopOnFetch(),this.ShowError()}},{key:"StartStopOnFetch",value:function(){this.state.start?(this.setState({start:!1}),this.onFetchStarted()):this.state.stop&&(this.setState({stop:!1}),this.onFetchFinished())}},{key:"ShowError",value:function(){var e,t;this.state.showError&&(t=this.state.error,this.setState({showError:!1}),1===this.state.errorLevel?(this.state.errorDetails&&(t+="\n"+this.state.errorDetails),this.ShowPopupError(t)):(e=t,void 0!==this.state.errorDetails&&(t="More information in the developer console!",e+=". "+(t=void 0!==X()?X().msg.moreinformation:t)),this.ShowPopupError(e)),this.props.clearErrors())}},{key:"ShowPopupError",value:function(e){var t,r,n=void 0;null!=this.state.prevError&&null!=this.state.prevErrorDate&&(t=new Date,r=this.state.prevErrorDate,n=(t.getTime()-r.getTime())/1e3),null!=n&&this.state.prevError==e&&n<1||ge(e),this.state.prevError=e,this.state.prevErrorDate=new Date}},{key:"onFetchStarted",value:function(){void 0!==this.props.onFetchStarted&&this.props.onFetchStarted()}},{key:"onFetchFinished",value:function(){void 0!==this.props.onFetchFinished&&this.props.onFetchFinished()}}])&&Zt(e.prototype,t),r&&Zt(e,r),o}(),rr=Object(t.connect)(function(e,t){return{fetchCount:e.app.fetchCount,error:e.app.error,errorLevel:e.app.errorLevel,errorDetails:e.app.errorDetails}},function(e,t){return{clearErrors:function(){e(L.app.clearerrors())}}})(i);function nr(e){return(nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function or(){return(or=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ar(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function ir(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?ar(Object(o),!0).forEach(function(e){var t,r;t=n,e=o[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):ar(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function lr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function sr(e,t){return(sr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cr(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=ur(r);return function(e,t){{if(t&&("object"===nr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,n?(e=ur(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function ur(e){return(ur=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var i=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sr(e,t)}(o,a["Component"]);var e,t,r,n=cr(o);function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=n.call(this,e)).state={},e}return e=o,r=[{key:"getDerivedStateFromProps",value:function(e,t){var r={};return e.modelurl||void 0!==e.formName&&""!==e.formName&&e.formName!==t.formName&&(r.formName=e.formName,r.needFetchModel=!0),r}}],(t=[{key:"render",value:function(){var e=ir({},this.props);return void 0===e.key&&(e.key="bindForm"),e.data=this.props.combinedData,l.a.createElement(qe,or({},e,{eventFunc:this.eventFunc.bind(this),getAdditionalDataForControl:this.getAdditionalDataForControl.bind(this),model:this.state.model,data:this.props.combinedData,hideControls:this.state.checkConditions,readOnlyControls:this.state.readOnlyControls}))}},{key:"eventFunc",value:function(e){var t="initSystem";if(Array.isArray(e.actions)&&e.actions.includes(t)){this.initSystem(e);t=e.actions.indexOf(t);if(-1!==t&&e.actions.splice(t,1),0==e.actions.length)return}V.dispatch(dt.form.executeActions(e))}},{key:"getAdditionalDataForControl",value:function(e,t,r){var n=t.startIndex,o=t.pageSize,a=t.filters,i=t.sort,t=(t.model,this.props.formName);V.dispatch(dt.additional.fetch({type:e.props["data-buildertype"],formName:t,controlRef:e,startIndex:n,pageSize:o,filters:a,sort:i,callback:r}))}},{key:"initSystem",value:function(e){var t;this.state.model&&(t=De.checkConditions({model:this.state.model,data:this.props.combinedData}),this.setState({checkConditions:t.checkConditions,readOnlyControls:t.readOnlyControls}))}},{key:"componentDidMount",value:function(){this.PrepareState()}},{key:"componentDidUpdate",value:function(e,t){this.PrepareState()}},{key:"PrepareState",value:function(){var e,t,r=this;this.state.needFetchModel&&(r.setState({needFetchModel:!1}),t={mobile:(e=V.getState().settings).mobile},dt.configuredFetch(e.uiform+"/"+this.props.formName+"?"+V.encodeQueryData(t)).then(function(e){return e.json()}).then(function(e){var t=e,e=De.checkConditions({model:t,data:r.props.combinedData});r.setState({model:t,checkConditions:e.checkConditions,readOnlyControls:e.readOnlyControls})}).catch(function(e){r.props.LogError(e.message,e.stack)}))}}])&&lr(e.prototype,t),r&&lr(e,r),o}(),pr=Object(t.connect)(function(i,e){function t(e,t){for(var r=e.split("."),n=0<r.length?i[r[0]]:null,o=null,a=1;a<r.length&&null!=n;a++)n=n[o=r[a]];return null==n?ir({},t):"object"===nr(n)?ir(ir({},t),n):(t=ir({},t),null!==o&&(t[o]=n),t)}var r,n={},o={};if(null!==e.stateDataPath&&void 0!==e.stateDataPath)if("string"==typeof e.stateDataPath)o=t(e.stateDataPath,o);else if(Array.isArray(e.stateDataPath))for(var a=0;a<e.stateDataPath.length;a++)"string"==typeof e.stateDataPath[a]&&(o=t(e.stateDataPath[a],o));return void 0!==e.data&&null!==e.data&&"object"===nr(e.data)&&(r=e.data,o=ir(ir({},o),r)),n.combinedData=o,n},function(r,e){return{LogError:function(e,t){r(L.app.form.model.fetch.failure(e,t))}}})(i),i=r(42),fr=r.n(i),i=r(21),dr=r.n(i),i=r(12),hr=r.n(i);function yr(e){return(yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mr(){return(mr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function br(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vr(e,t){return(vr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gr(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=wr(r);return function(e,t){{if(t&&("object"===yr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,n?(e=wr(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function wr(e){return(wr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Or={success:{containerStyle:{backgroundColor:"green"}},error:{containerStyle:{backgroundColor:"darkred"}}},Cr=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vr(e,t)}(o,a["Component"]);var e,t,r,n=gr(o);function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=n.call(this,e)).state={visible:!0},e.hiding=!1,e}return e=o,(t=[{key:"componentDidMount",value:function(){var e=this.props.timeout||3e3;setTimeout(this.hide.bind(this),e)}},{key:"hide",value:function(){this.hiding||(this.hiding=!0,this.setState({visible:!1}),this.props.closeHandler&&this.props.closeHandler.onClose())}},{key:"render",value:function(){return l.a.createElement(fr.a,mr({},this.props.snackbarProps,{visible:this.state.visible,message:this.props.message,actionHandler:this.hide.bind(this),action:"close",position:"top",top:50,autoHidingTime:100}))}}])&&br(e.prototype,t),r&&br(e,r),o}();c("alert",function(e){var t={key:hr.a.v1(),message:e.message,closeHandler:{onClose:function(){}},snackbarProps:Or[e.type]},e=l.a.createElement(Cr,t),r=dr.a.set(e);t.closeHandler.onClose=function(){dr.a.remove(r)}});var Sr=r(3);c("confirm",function(e){var r={resolve:function(){},reject:function(){}},t=new Promise(function(e,t){r.resolve=e,r.reject=t});return Sr.Alert.alert(e.messages.title,e.messages.text,[{text:e.messages.cancel,onPress:function(){r.reject()}},{text:e.messages.ok,onPress:function(){r.resolve()}}],{cancelable:!1}),t});var Er=r(10);function jr(e){return(jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kr(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Pr(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?kr(Object(o),!0).forEach(function(e){var t,r;t=n,e=o[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):kr(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function xr(e){return function(e){if(Array.isArray(e))return _r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return _r(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Rr(){return(Rr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Dr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Tr(e,t){return(Tr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fr(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Ar(r);return function(e,t){{if(t&&("object"===jr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,n?(e=Ar(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function Ar(e){return(Ar=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var i=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tr(e,t)}(o,a["Component"]);var e,t,r,n=Fr(o);function o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=n.call(this,e)).state={isrtl:!1,visible:!0};try{e.state.isrtl="rtl"==getComputedStyle(document.getElementsByTagName("html")[0]).direction}catch(e){}return e}return e=o,(t=[{key:"render",value:function(){var a=this,i=this,e=this.props.windowsOrder.map(function(e,t,r){function n(){i.setState({visible:!1}),i.props.executeActions({key:void 0,controlRef:i,formName:i.props.formName,schemeName:i.props.schemeName,component:i,eventName:"exit",actions:["exit"],parameters:void 0,modalId:o.id})}var o=a.props.childWindows[e],e=!0===o.closeOnOutsideClick?n():function(){};if("modal"===o.viewType)return l.a.createElement(Er.Overlay,{isVisible:a.state.visible,key:o.id,onClose:n,onBackdropPress:e},l.a.createElement(rt,Rr({key:o.id+o.keyIndex},o,{model:a.props.childModels[o.name]})));r.length;r="right";return o.sidebarSettings&&(o.sidebarSettings.from&&(r=o.sidebarSettings.from),o.sidebarSettings.width&&o.sidebarSettings.width),a.state.isrtl&&("right"===r?r="left":"left"===r&&(r="right")),l.a.createElement(Er.Overlay,{isVisible:a.state.visible,key:o.id,onClose:n,onBackdropPress:e},l.a.createElement(rt,Rr({key:o.id+o.keyIndex},o,{model:a.props.childModels[o.name]})))});return l.a.createElement(Sr.View,{ref:function(e){return a.el=e}},e)}}])&&Dr(e.prototype,t),r&&Dr(e,r),o}(),Ir=Object(t.connect)(function(e){var t,r=e.app.modals.windows,n=e.app.modals.models,o={},a={};for(t in r)if(r.hasOwnProperty(t)){var i=n[r[t].name],i=null==i?void 0:i.formParams,i=null==i?void 0:i.schemes;a[t]={id:t,errors:r[t].errors,name:r[t].name,viewType:r[t].viewType,sidebarSettings:r[t].sidebarSettings,onOpenFunc:r[t].onOpenFunc,onCloseFunc:r[t].onCloseFunc,schemes:i,isNew:null===r[t].data||void 0===r[t].data?void 0:r[t].data.isNew,hideControls:r[t].hideControls,readOnlyControls:r[t].readOnlyControls,readOnly:r[t].readOnly,preventLoad:r[t].preventLoad,flowName:r[t].flowName,schemeName:r[t].schemeName,keyIndex:r[t].keyIndex,filter:null===r[t].data||void 0===r[t].data?void 0:r[t].data.filter,type:r[t].type,callContext:r[t].callContext,closeOnOutsideClick:void 0===r[t].closeOnOutsideClick||r[t].closeOnOutsideClick},!r[t].data||void 0!==(i=r[t].data.modified)&&(a[t].data=Array.isArray(i)?xr(i):Pr({},i));var l=r[t].filters;if(l){var s,c={};for(s in l)l.hasOwnProperty(s)&&(c[s]=l[s].filter(function(e){return null!==e.value}).map(function(e){return Pr({},e)}));a[t].controlFilters=c}}return Object.keys(n).forEach(function(e){o[e]=n[e].model}),{childModels:o,childWindows:a,windowsOrder:e.app.modals.order}},gt)(i);function Lr(e){return(Lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Br(e,t){return(Br=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vr(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Mr(r);return function(e,t){{if(t&&("object"===Lr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,n?(e=Mr(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function Mr(e){return(Mr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ur=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Br(e,t)}(o,kt);var e,t,r,n=Vr(o);function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),n.apply(this,arguments)}return e=o,(t=[{key:"render",value:function(){return l.a.createElement(Sr.View,null,this.drawMainForm(),l.a.createElement(Ir,null))}}])&&Nr(e.prototype,t),r&&Nr(e,r),o}();function zr(){return(zr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}c("content",function(e){return l.a.createElement(Ur,zr({key:e.key},e.props))});var Wr=r(43);c("dwkit-form",function(e){return l.a.createElement(Wr.DWKitForm,e.props)});var Hr=r(22),c=r(44),Gr=r.n(c);function qr(e){return(qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kr(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Jr(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Kr(Object(o),!0).forEach(function(e){var t,r;t=n,e=o[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Kr(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function $r(){return($r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Yr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qr(e,t){return(Qr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zr(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Xr(r);return function(e,t){{if(t&&("object"===qr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,n?(e=Xr(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function Xr(e){return(Xr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qr(e,t)}(o,a["Component"]);var e,t,r,n=Zr(o);function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=n.call(this,e)).state={},e.navigator=Object(Hr.createStackNavigator)(),e}return e=o,(t=[{key:"render",value:function(){var t=this;if(!this.props.focused)return null;var e=this.navigator,r=this.props.title,n=this.renderComponent();return l.a.createElement(e.Navigator,null,l.a.createElement(e.Screen,{name:"main",options:function(e){e.navigation,e.route;return{headerTitle:r,headerLeft:t.renderHeaderBackButton.bind(t)}}},function(e){return l.a.createElement(l.a.Fragment,null,t.renderActivityIndicator(),l.a.createElement(Sr.ScrollView,null,n))}))}},{key:"renderHeaderBackButton",value:function(){return this.props.showBackButton?l.a.createElement(Hr.HeaderBackButton,{onPress:this.props.goBack.bind(this)}):null}},{key:"renderActivityIndicator",value:function(){if(0==this.props.fetchCount)return null;if(this.props.activityIndicator)return this.props.activityIndicator(this.props);return l.a.createElement(Sr.View,{style:{position:"absolute",zIndex:9999,left:0,right:0,top:0,bottom:0,alignItems:"center",justifyContent:"center"}},l.a.createElement(Sr.ActivityIndicator,{size:"large",animating:!0,color:"#000000"}))}},{key:"renderComponent",value:function(){return this.props.url?l.a.createElement(Gr.a,{javaScriptEnabled:!0,domStorageEnabled:!0,startInLoadingState:!0,source:{uri:this.props.url}}):this.props.type==this.props.flowconst?l.a.createElement(zt,this.props):this.props.type==this.props.workflowconst?l.a.createElement(Yt,this.props):l.a.createElement(At,$r({},this.props,{formName:this.props.defaultForm}))}}])&&Yr(e.prototype,t),r&&Yr(e,r),o}(),en=Object(t.connect)(function(e,t){var r=vt(e),n=t.baseLocation,o=void 0,a=void 0;(n=e.router.location?o="string"==typeof e.router.location?e.router.location:e.router.location.pathname:n)&&(n.startsWith("http://")||n.startsWith("https://"))&&(a=n);var i=t.baseLocation;i&&i.startsWith("/form/")&&(i=N.nameFromLocation(i,"form"));var l=!t.screenName||e.router.screen==t.screenName,t=o&&o!=t.baseLocation;return Jr(Jr({},r),{},{formconst:e.settings.form,flowconst:e.settings.flow,workflowconst:e.settings.workflow,type:N.typeFromLocation(n),refreshKey:e.router.refreshKey,defaultForm:t?void 0:i,url:a,focused:l,showBackButton:t,fetchCount:e.app.fetchCount})},function(e){return Jr(Jr({},gt(e)),{},{goBack:function(){e(L.router.routechanged())}})})(c),tn=a.createRef();function rn(e,t){tn.current&&tn.current.navigate(e,t)}function nn(e){return(nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function on(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function an(e,t){return(an=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ln(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=cn(r);return function(e,t){{if(t&&("object"===nn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined")}return sn(e)}(this,n?(e=cn(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function sn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cn(e){return(cn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&an(e,t)}(o,a["Component"]);var e,t,r,n=ln(o);function o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var t=sn(e=n.call(this,e));return j.setCurrentLocation=function(e){t.props.onRouteChanged({pathname:e},!0)},j.getWindowLocation=function(){return V.getState().router.location},e}return e=o,(t=[{key:"render",value:function(){return this.props.children?l.a.Children.only(this.props.children):null}},{key:"componentDidUpdate",value:function(){var e,t=!1;this.props.push?(e="/"==this.props.push?null:{pathname:this.props.push},this.props.onRouteChanged(e,t=!0)):this.props.redirect?(t=!(location={pathname:this.props.redirect}),this.props.onRouteChanged(location,t)):this.props.reload?(t=!0,this.props.onReload?this.props.onReload():console.log("ApplicationRouter: Need to define handler for onReload"),this.props.onRouteChanged(this.props.location,t)):this.props.refresh&&(t=!0,this.props.onRefresh?this.props.onRefresh():console.log("ApplicationRouter: Need to define handler for onRefresh"),this.props.onRouteChanged(this.props.location,t))}}])&&on(e.prototype,t),r&&on(e,r),o}(),un=Object(t.connect)(function(e,t){return{push:e.router.push,redirect:e.router.redirect,refresh:e.router.refresh,reload:e.router.reload,location:e.router.location}},function(r,e){return{onRouteChanged:function(e,t){r(L.router.routechanged(tn.current,e,t))}}})(c),pn=r(45),fn={connection:null,Connect:function(a){null!==this.connection&&(this.connection.off("StateChange"),this.connection.stop());var e=a.encodeQueryData({}),t=a.getState().settings,r=t.backendUrl;r+=0<e.length?t.notificationhub+"?"+e:t.notificationhub,this.connection=(new pn.HubConnectionBuilder).withUrl(r).configureLogging("none").build(),this.connection.on("StateChange",function(e){if(null!=e&&null!==e.path&&void 0!==e.path&&"string"==typeof e.path){for(var t=e.path.split("."),r={},n=r,o=0;o<t.length;o++)o===t.length-1?n[t[o]]=e.change:(n[t[o]]={},n=n[t[o]]);a.dispatch(L.updatestate(r))}}),this.connection.start()}},dn=r(15),t=r(9),hn=r.n(t);function yn(e,t,r,n,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(n,o)}function mn(l){return function(){var e=this,i=arguments;return new Promise(function(t,r){var n=l.apply(e,i);function o(e){yn(n,t,r,o,a,"next",e)}function a(e){yn(n,t,r,o,a,"throw",e)}o(void 0)})}}function bn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var vn,gn,wn,On=function(){function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r)}var e,t,n,o,a,i,l,s,c,u,p,f,d,h,y,m;return e=r,(t=[{key:"getUser",value:(m=mn(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.openIdConfig){e.next=2;break}throw new Error("OpenID config not loaded yet!");case 2:return t=this.openIdConfig.userinfo_endpoint,e.next=5,this._fetchJsonResult(t);case 5:return(t=e.sent).access_token=this.authState.accessToken,e.abrupt("return",t);case 8:case"end":return e.stop()}},e,this)})),function(){return m.apply(this,arguments)})},{key:"signinRedirect",value:(y=mn(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._getRouter(),e.abrupt("return",t&&t.signinRedirect&&t.signinRedirect());case 2:case"end":return e.stop()}},e,this)})),function(){return y.apply(this,arguments)})},{key:"signoutRedirect",value:(h=mn(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._getRouter(),e.abrupt("return",t&&t.signoutRedirect&&t.signoutRedirect());case 2:case"end":return e.stop()}},e,this)})),function(){return h.apply(this,arguments)})},{key:"removeUser",value:(d=mn(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.revokeToken();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return d.apply(this,arguments)})},{key:"auth",value:(f=mn(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._getConfig(),e.next=3,this.authorizeInternal(t);case 3:return this.authState=e.sent,e.next=6,this._loadConfiguration();case 6:return this.openIdConfig=e.sent,We.configureHeaders(this.authState.accessToken),e.abrupt("return",this.authState);case 9:case"end":return e.stop()}},e,this)})),function(){return f.apply(this,arguments)})},{key:"refreshToken",value:(p=mn(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._refreshTokenExists()){e.next=2;break}return e.abrupt("return");case 2:return t=this._getConfig(),e.next=5,this.refreshInternal(t,{refreshToken:this.authState.refreshToken});case 5:this.authState=e.sent,We.configureHeaders(this.authState.accessToken);case 7:case"end":return e.stop()}},e,this)})),function(){return p.apply(this,arguments)})},{key:"revokeToken",value:(u=mn(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._refreshTokenExists()){e.next=2;break}return e.abrupt("return");case 2:return t=this._getConfig(),e.next=5,this.revokeInternal(t,{tokenToRevoke:this.authState.refreshToken,sendClientId:!0});case 5:this.authState=null,We.configureHeaders(void 0);case 7:case"end":return e.stop()}},e,this)})),function(){return u.apply(this,arguments)})},{key:"_refreshTokenExists",value:function(){return this.authState&&this.authState.refreshToken}},{key:"_loadConfiguration",value:(c=mn(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._getConfig(),t=t.issuer+r._configPath,e.next=4,this._fetchJsonResult(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)})),function(){return c.apply(this,arguments)})},{key:"_fetchJsonResult",value:(s=mn(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b()(t);case 2:if((r=e.sent).ok){e.next=5;break}throw new Error("Received status: "+r.status+", text: "+r.statusText);case 5:return e.next=7,r.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e)})),function(e){return s.apply(this,arguments)})},{key:"_getConfig",value:function(){var e=V.getState().settings,t=hn()(e.oidcConfig);return t.issuer=e.backendUrl,t}},{key:"_getRouter",value:function(){return V.getState().settings.router}},{key:"restore",value:(l=mn(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.authState=t,e.next=3,this._loadConfiguration();case 3:return this.openIdConfig=e.sent,We.configureHeaders(this.authState?this.authState.accessToken:void 0),r=this.openIdConfig.userinfo_endpoint,e.next=8,this._fetchJsonResult(r);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e,this)})),function(e){return l.apply(this,arguments)})},{key:"authorizeInternal",value:(i=mn(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(dn.authorize)(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)})},{key:"refreshInternal",value:(a=mn(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(dn.refresh)(t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(e,t){return a.apply(this,arguments)})},{key:"revokeInternal",value:(o=mn(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(dn.revoke)(t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(e,t){return o.apply(this,arguments)})}])&&bn(e.prototype,t),n&&bn(e,n),r}();function Cn(e,t,r,n,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(n,o)}wn="/.well-known/openid-configuration",(gn="_configPath")in(vn=On)?Object.defineProperty(vn,gn,{value:wn,enumerable:!0,configurable:!0,writable:!0}):vn[gn]=wn;var Sn,En,jn,c=new On,t=(Sn=c,{preFetchUser:function(){return Sn.getUser().then(function(e){return We.configureHeaders(e.access_token),re.Promise.resolve()}).catch(function(){Sn.signinRedirect()})},logoff:function(){return Sn.removeUser().then(function(){We.configureHeaders(void 0),Sn.signoutRedirect()})},onLogon:function(){return Sn.auth().then(function(e){We.configureHeaders(e.access_token)})},signinRedirect:function(){Sn.signinRedirect()},getAuthState:function(){return Sn.authState},setAuthState:(En=regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sn.restore(t).catch(function(e){console.log("oidcClient.restore",e),Sn.signinRedirect()});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}),jn=function(){var e=this,i=arguments;return new Promise(function(t,r){var n=En.apply(e,i);function o(e){Cn(n,t,r,o,a,"next",e)}function a(e){Cn(n,t,r,o,a,"throw",e)}o(void 0)})},function(e){return jn.apply(this,arguments)})});I.addProvider("identityserver",t);var kn=c,c=r(7),Pn=r.n(c);function xn(e,t,r,n,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(n,o)}function _n(l){return function(){var e=this,i=arguments;return new Promise(function(t,r){var n=l.apply(e,i);function o(e){xn(n,t,r,o,a,"next",e)}function a(e){xn(n,t,r,o,a,"throw",e)}o(void 0)})}}j.loadScript=function(e,t){new Function(e)(),t&&t()};c=V.getState().settings;c.mobile=!0,c.oidcConfig={clientId:"mobile",redirectUrl:"dwkit:/oauthredirect",scopes:["openid","profile","offline_access","IdentityServerApi"],dangerouslyAllowInsecureHttpRequests:!0,additionalParameters:{prompt:"login"}},dt.common._setCookie_Values={},Pn.a.getAllKeys().then(function(e){e.forEach(function(t){t.startsWith("@cookie_")&&Pn.a.getItem(t).then(function(e){return dt.common._setCookie_Values[t]=e})})}),dt.common.setCookie=function(e,t){e="@cookie_"+e;return dt.common._setCookie_Values[e]=t,Pn.a.setItem(e,t)},dt.common.getCookie=function(e){return dt.common._setCookie_Values["@cookie_"+e]},V.loadStateFromStorage=_n(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pn.a.getItem("DWKit_GlobalState");case 2:if(!(r=e.sent)){e.next=16;break}if((t=ne.a.parse(r)).app.fetchCount=0,t.app.user)return e.next=9,Pn.a.getItem("DWKit_AuthState");e.next=16;break;case 9:if(r=e.sent)return r=ne.a.parse(r),V.dispatch(L.updatestate(t)),e.next=15,V.setAuthState(r).then(function(){var e=V.getState();return V.dispatch(dt.userinfo.fetch(function(e){var t=V.getState().settings.router;t&&t.userLoaded&&t.userLoaded(e)})),Promise.resolve(e)}).catch(function(e){console.log("Store.setAuthState ERROR",e)});e.next=16;break;case 15:return e.abrupt("return",e.sent);case 16:return e.abrupt("return",Promise.resolve(V.getState()));case 17:case"end":return e.stop()}},e)})),V.saveStateToStorage=_n(regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=V.getAuthState())return e.next=4,Pn.a.setItem("DWKit_AuthState",ne.a.stringify(t));e.next=4;break;case 4:if(!(r=V.getState())){e.next=11;break}for(n in(r=hn()(r)).router)"function"==typeof r.router[n]&&delete r.router[n];return delete r.settings,e.next=11,Pn.a.setItem("DWKit_GlobalState",ne.a.stringify(r));case 11:case"end":return e.stop()}},e)})),V.resetStateInStorage=_n(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pn.a.removeItem("DWKit_AuthState");case 2:return e.next=4,Pn.a.removeItem("DWKit_GlobalState");case 4:case"end":return e.stop()}},e)})),V.setScreen=function(e){V.dispatch(L.router.setscreen(e))},V.switchSceen=function(e){var t=V.getState(),r={app:{form:t.app.form,modals:t.app.modals},router:t.router},n=null;(n=t.app.screens&&t.app.screens[e]?t.app.screens[e]:{app:{form:u.app.form,modals:u.app.modals},router:u.router}).app.screens||(n.app.screens={}),n.app.screens[r.router.screen]=r,n.router.screen=e,V.dispatch(L.updatestate(n))},le.switchSceen=V.switchSceen,Te.navigate=function(e){e.state;e=e.parameters;void 0!==e&&void 0!==e.target?rn(e.target):console.error("For call 'redirect' action you need to set the 'target' parameter!")}}],B={},L.m=N,L.c=B,L.d=function(e,t,r){L.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},L.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},L.t=function(t,e){if(1&e&&(t=L(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(L.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)L.d(r,n,function(e){return t[e]}.bind(null,n));return r},L.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return L.d(t,"a",t),t},L.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},L.p="",L(L.s=58);function L(e){if(B[e])return B[e].exports;var t=B[e]={i:e,l:!1,exports:{}};return N[e].call(t.exports,t,t.exports,L),t.l=!0,t.exports}var N,B});