!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-redux"),require("es6-promise"),require("semantic-ui-react"),require("redux-actions"),require("json5"),require("react-dom"),require("redux"),require("react-fast-compare"),require("draft-js"),require("moment"),require("jquery"),require("uuid"),require("clone"),require("react-data-grid"),require("reflux"),require("draft-convert"),require("react-grid-layout"),require("numeral"),require("react-datepicker"),require("react-dropzone-component"),require("react-number-format"),require("react-slick"),require("isomorphic-fetch"),require("deepmerge"),require("redux-devtools-extension"),require("redux-thunk"),require("lodash"),require("react-modal"),require("react-router-dom"),require("@aspnet/signalr"),require("oidc-client"),require("object-hash")):"function"==typeof define&&define.amd?define(["react","react-redux","es6-promise","semantic-ui-react","redux-actions","json5","react-dom","redux","react-fast-compare","draft-js","moment","jquery","uuid","clone","react-data-grid","reflux","draft-convert","react-grid-layout","numeral","react-datepicker","react-dropzone-component","react-number-format","react-slick","isomorphic-fetch","deepmerge","redux-devtools-extension","redux-thunk","lodash","react-modal","react-router-dom","@aspnet/signalr","oidc-client","object-hash"],t):"object"==typeof exports?exports["optimajet-app"]=t(require("react"),require("react-redux"),require("es6-promise"),require("semantic-ui-react"),require("redux-actions"),require("json5"),require("react-dom"),require("redux"),require("react-fast-compare"),require("draft-js"),require("moment"),require("jquery"),require("uuid"),require("clone"),require("react-data-grid"),require("reflux"),require("draft-convert"),require("react-grid-layout"),require("numeral"),require("react-datepicker"),require("react-dropzone-component"),require("react-number-format"),require("react-slick"),require("isomorphic-fetch"),require("deepmerge"),require("redux-devtools-extension"),require("redux-thunk"),require("lodash"),require("react-modal"),require("react-router-dom"),require("@aspnet/signalr"),require("oidc-client"),require("object-hash")):e["optimajet-app"]=t(e.react,e["react-redux"],e["es6-promise"],e["semantic-ui-react"],e["redux-actions"],e.json5,e["react-dom"],e.redux,e["react-fast-compare"],e["draft-js"],e.moment,e.jquery,e.uuid,e.clone,e["react-data-grid"],e.reflux,e["draft-convert"],e["react-grid-layout"],e.numeral,e["react-datepicker"],e["react-dropzone-component"],e["react-number-format"],e["react-slick"],e["isomorphic-fetch"],e.deepmerge,e["redux-devtools-extension"],e["redux-thunk"],e.lodash,e["react-modal"],e["react-router-dom"],e["@aspnet/signalr"],e["oidc-client"],e["object-hash"])}(window,function(r,n,o,a,i,l,s,c,u,p,d,f,V,h,m,y,v,b,g,w,O,C,k,E,A,S,P,j,R,_,x,D,F){return I={},T.m=N=[function(e,t){e.exports=r},function(e,t){e.exports=n},function(e,t){e.exports=o},function(e,t){e.exports=a},function(e,t){e.exports=i},function(e,t){e.exports=l},function(e,t){e.exports=s},function(e,t){e.exports=c},function(e,t){e.exports=u},function(e,t){e.exports=p},function(e,t){e.exports=d},function(e,t){e.exports=f},function(e,t){e.exports=V},function(e,t){e.exports=h},function(e,t){e.exports=m},function(e,t){e.exports=y},function(e,t){e.exports=v},function(e,t){e.exports=b},function(e,t){e.exports=g},function(e,t){e.exports=w},function(e,t){e.exports=O},function(e,t){e.exports=C},function(e,t){e.exports=k},function(e,t){e.exports=E},function(e,t){e.exports=A},function(e,t){e.exports=S},function(e,t){e.exports=P},function(e,t){e.exports=j},function(e,t){e.exports=R},function(e,n,o){!function(e){var t,r;function wl(e){return(wl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window,r=function(r,n,o,a,i,l,s,c,u,p,d,f,V,h,m,y,v,b,g){return C={},w.m=O=[function(e,t){e.exports=r},function(e,t){e.exports=n},function(e,t){e.exports=o},function(e,t){function o(e){return(o="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}e.exports={initDefaultState:function e(t){var r=t.model,n=t.data;if(Array.isArray(r)&&void 0!==n)for(var o=0;o<r.length;o++){var a=r[o].propertyName||r[o].key;if(r[o].defaultValue&&!n[a]&&(n[a]=r[o].defaultValue),Array.isArray(r[o].children)&&e({model:r[o].children,data:n}),void 0!==r[o].placeholders)for(var i in r[o].placeholders)e({model:r[o].placeholders[i],data:n});"customblock"===r[o]["data-buildertype"]&&"source"===r[o].sourceType&&null!=r[o].source&&e({model:JSON5.parse(r[o].source),data:n})}},initDefaultStateFormUrl:function(e){void 0===e&&(e={});var t,t=null==(t=new RegExp("[?&]defaultvalues=([^&#]*)").exec(window.location.href))?null:decodeURI(t[1])||0;if(t){var r=void 0;try{r=JSON5.parse(t)}catch(e){}if(r&&"object"===o(r))for(var n in r)void 0!==r[n]&&(e[n]=r[n])}return e},validate:function(e){for(var t,r,n,o=e.data,a=!0,i={},l=function n(e){var o=[];return e.forEach(function(e){var t;if((!0===e["other-required"]||void 0!==e["other-customValidation"]&&""!==e["other-customValidation"])&&o.push(e),void 0!==e.children&&0<e.children.length&&(t=n(e.children),o=o.concat(t)),void 0!==e.placeholders)for(var r in e.placeholders)r=n(e.placeholders[r]),o=o.concat(r);"customblock"===e["data-buildertype"]&&"source"===e.sourceType&&null!=e.source&&(t=JSON5.parse(e.source),t=n(t),o=o.concat(t))}),o}(e.model),s=0;s<l.length;s++){var c=l[s].propertyName||l[s].key,u=(t=l[s],r=o?o[c]:void 0,n=o,!(u=u=void 0)===t["other-required"]&&(null==r||""===r||"collectioneditor"===t["data-buildertype"]&&Array.isArray(r)&&0===r.length)?u="This field is required!":void 0!==t["other-customValidation"]&&""!==t["other-customValidation"]&&(t="return "+t["other-customValidation"],"boolean"==typeof(n=new Function("value, data",t)(r,n))?!1===n&&(u=!0):u=n),u);u&&(i[c]=u,a=!1)}return{valid:a,errors:i}},checkConditions:function e(t){var r=t.model,n=t.data,o={hideControls:[],readOnlyControls:[]};if(!r||!n)return o;for(var a=0;a<r.length;a++){var i,l=r[a]["other-visibleConition"];if(void 0!==l&&""!==l&&(new Function("data","return "+l)(n)||o.hideControls.push(r[a].key)),void 0!==(l=r[a]["other-readOnlyConition"])&&""!==l&&new Function("data","return "+l)(n)&&o.readOnlyControls.push(r[a].key),Array.isArray(r[a].children)&&(i=e({model:r[a].children,data:n}),o={hideControls:o.hideControls.concat(i.hideControls),readOnlyControls:o.readOnlyControls.concat(i.readOnlyControls)}),void 0!==r[a].placeholders)for(var s in r[a].placeholders)s=e({model:r[a].placeholders[s],data:n}),o={hideControls:o.hideControls.concat(s.hideControls),readOnlyControls:o.readOnlyControls.concat(s.readOnlyControls)};"customblock"===r[a]["data-buildertype"]&&"source"===r[a].sourceType&&null!=r[a].source&&(i=e({model:JSON5.parse(r[a].source),data:n}),o={hideControls:o.hideControls.concat(i.hideControls),readOnlyControls:o.readOnlyControls.concat(i.readOnlyControls)})}return o},updateEventsFormat:function(n){return n.updated||(Object.keys(n).forEach(function(e){var t,r=n[e];((t=r).actions||r.parameters||r.targets)&&(t={actions:r.actions||[],parameters:r.parameters||[],targets:r.targets||[]},n[e]={active:r.active||!1,triggers:r.actions?[t]:void 0})}),n.updated=!0),n}}},function(e,t){e.exports=a},function(e,t){e.exports=i},function(e,t){e.exports=l},function(e,t){e.exports=s},function(e,t){e.exports=c},function(e,t){e.exports=u},function(e,t){e.exports=p},function(e,t,r){r(23),e.exports=self.fetch.bind(self)},function(e,t){e.exports=d},function(e,t,r){var n,o,a;function i(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return o[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}e.exports=(n=r(0),a={},i.m=o=[function(e,t){e.exports=n},function(e,t,r){e.exports=r(7)()},function(e,t,r){function n(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return o[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var o,a;e.exports=(a={},n.m=o=[function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,"e",function(){return o}),r.d(t,"a",function(){return a}),r.d(t,"f",function(){return i}),r.d(t,"c",function(){return l}),r.d(t,"b",function(){return s}),r.d(t,"d",function(){return c});var o=["user","environment"],a={USER:"user",ENVIRONMENT:"environment"},i=["jpg","png"],l={PNG:"png",JPG:"jpg"},s=(n(t={},"jpg","image/jpeg"),n(t,"png","image/png"),t),c={audio:!1,video:!0}},function(e,t,r){e.exports=r(2)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"FACING_MODES",function(){return a}),r.d(t,"IMAGE_TYPES",function(){return l});var i=r(3),n=r(5),o=i.a.IMAGE_TYPES.PNG,r=(c(s.prototype,[{key:"_getStreamDevice",value:function(n,o){var a=this;return new Promise(function(t,r){var e=i.a.getIdealConstraints(n,o);a.mediaDevices.getUserMedia(e).then(function(e){a._gotStream(e),t(e)}).catch(function(e){r(e)})})}},{key:"_getStreamDeviceMaxResolution",value:function(n){var o=this,e=i.a.getMaxResolutionConstraints(n,this.numberOfMaxResolutionTry);return null!=e?new Promise(function(t,r){o.mediaDevices.getUserMedia(e).then(function(e){o._gotStream(e),t(e)}).catch(function(e){setTimeout(function(){o.numberOfMaxResolutionTry+=1,o._getStreamDeviceMaxResolution(n).catch(function(){r(e)})},20)})}):this._getStreamDevice(n,{})}},{key:"_setVideoSrc",value:function(e){"srcObject"in this.videoElement?this.videoElement.srcObject=e:(e=this.windowURL.createObjectURL(e),this.videoElement.src=e)}},{key:"_setSettings",value:function(e){this.settings=null,0<(e=e&&e.getTracks?e.getTracks():[]).length&&e[0].getSettings&&(this.settings=e[0].getSettings())}},{key:"_gotStream",value:function(e){this.stream=e,this._setSettings(e),this._setVideoSrc(e)}},{key:"getCameraSettings",value:function(){return this.settings}},{key:"startCamera",value:function(e,t){var r=this;return this.stopCamera().then(function(){}).catch(function(){}).then(function(){return r._getStreamDevice(e,t)})}},{key:"startCameraMaxResolution",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.stopCamera().then(function(){}).catch(function(){}).then(function(){return e._getStreamDeviceMaxResolution(t)})}},{key:"getDataUri",value:function(e){return e={sizeFactor:void 0===e.sizeFactor?n.c:e.sizeFactor,imageType:void 0===e.imageType?o:e.imageType,imageCompression:void 0===e.imageCompression?n.a:e.imageCompression,isImageMirror:void 0===e.isImageMirror?n.b:e.isImageMirror},i.a.getDataUri(this.videoElement,e)}},{key:"stopCamera",value:function(){var r=this;return new Promise(function(e,t){r.stream&&(r.stream.getTracks().forEach(function(e){e.stop()}),r.videoElement.src="",r.stream=null,r._setSettings(null),e()),t(Error("no stream to stop!"))})}}]),s),a=i.a.FACING_MODES,l=i.a.IMAGE_TYPES;function s(e){(function(e){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")})(this),this.videoElement=e,this.stream=null,this.numberOfMaxResolutionTry=1,this.settings=null,this.windowURL=i.a.getWindowURL(),this.mediaDevices=i.a.getNavigatorMediaDevices()}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.default=r},function(e,t,r){"use strict";var s=r(4),o=r(0),r=(a(n,[{key:"getDataUri",value:function(e,t){var r=t.sizeFactor,n=t.imageType,o=t.imageCompression,a=t.isImageMirror,i=e.videoWidth,l=e.videoHeight,i=(t=Object(s.b)(i,l,r)).imageWidth,l=t.imageHeight;return(r=document.createElement("canvas")).width=i,r.height=l,t=r.getContext("2d"),a&&t.setTransform(-1,0,0,1,r.width,0),t.drawImage(e,0,0,i,l),Object(s.a)(r,n,o)}},{key:"getWindowURL",value:function(){return window.URL||window.webkitURL||window.mozURL||window.msURL}},{key:"getNavigatorMediaDevices",value:function(){var n,e=null,t=!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia),r=!(!navigator.mozGetUserMedia&&!navigator.webkitGetUserMedia);return t?e=navigator.mediaDevices:r&&(n=navigator.mozGetUserMedia||navigator.webkitGetUserMedia,r={getUserMedia:function(r){return new Promise(function(e,t){n.call(navigator,r,e,t)})}},e=Object.assign(n,r)),e}},{key:"isSupportedFacingMode",value:function(){return n.getNavigatorMediaDevices().getSupportedConstraints().facingMode}},{key:"getIdealConstraints",value:function(e,t){var r={audio:!1,video:{}};if(Object(s.c)(e,t))return o.d;var n=navigator.mediaDevices.getSupportedConstraints();return n.width&&n.height&&n.facingMode?(e&&o.e.includes(e)&&(r.video.facingMode=e),t&&t.width&&(r.video.width=t.width),t&&t.height&&(r.video.height=t.height),r):(console.error("Constraint width height or facingMode not supported!"),o.d)}},{key:"getMaxResolutionConstraints",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],r=n.getIdealConstraints(e);return t>=(e=[{width:{min:640},ideal:{facingMode:e=r.video.facingMode}},{width:{min:800},ideal:{facingMode:e}},{width:{min:900},ideal:{facingMode:e}},{width:{min:1024},ideal:{facingMode:e}},{width:{min:1080},ideal:{facingMode:e}},{width:{min:1280},ideal:{facingMode:e}},{width:{min:1920},ideal:{facingMode:e}},{width:{min:2560},ideal:{facingMode:e}},{width:{min:3840},ideal:{facingMode:e}}]).length?null:(t=e.slice(0,-t),r.video.advanced=t,r)}},{key:"FACING_MODES",get:function(){return o.a}},{key:"IMAGE_TYPES",get:function(){return o.c}}]),n);function n(){!function(e){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.a=r},function(e,t,r){"use strict";function n(e,t){var r={};try{(function(e){if(!(0<=t&&t<=1))throw new Error(t+" is invalid imageCompression, choose between: [0, 1]");if(!o.f.includes(e))throw new Error(e+" is invalid imageType, choose between: "+o.f.join(", "))})(e),r.imageType=e,r.imageCompression=t}catch(e){console.error(e),console.error("default value of "+o.c.PNG+" is used"),r.imageType=o.c.PNG,r.imageCompression=null}return r}t.b=function(e,t,r){return{imageWidth:r=e*parseFloat(r),imageHeight:t/(e/r)}},t.a=function(e,t,r){return n(t,r).imageType===o.c.JPG?r?e.toDataURL(o.b[o.c.JPG],r):e.toDataURL(o.b[o.c.JPG]):e.toDataURL(o.b[t])},t.c=function(e,t){return!(e||t&&!function(e){if("object"===(void 0===e?"undefined":a(e)))for(var t in e)if(e.hasOwnProperty(t))return;return 1}(t))};var o=r(0),a="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)}},function(e,t,r){"use strict";r.d(t,"c",function(){return n}),r.d(t,"a",function(){return o}),r.d(t,"b",function(){return a});var n=1,o=null,a=!1}],n.c=a,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1))},function(e,t,r){e.exports=r(4)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5);r.d(t,"Camera",function(){return n.c}),r.d(t,"FACING_MODES",function(){return n.a}),r.d(t,"IMAGE_TYPES",function(){return n.b}),t.default=n.c},function(e,t,r){"use strict";var n=r(6);r.d(t,"a",function(){return n.a}),r.d(t,"b",function(){return n.b}),t.c=n.c},function(e,t,r){"use strict";function n(r){var e=Object(h.useState)(""),t=(s=O(e,2))[0],n=s[1],o=Object(h.useState)(!0),a=(u=O(o,2))[0],i=u[1],l=Object(h.useState)(""),s=(e=O(l,2))[0],c=e[1],o=Object(h.useRef)(null),u=Object(y.a)(o,r.idealFacingMode,r.idealResolution,r.isMaxResolution),p=(l=O(u,4))[0],d=l[1],f=l[2],V=l[3];return Object(h.useEffect)(function(){p?"function"==typeof r.onCameraStart&&r.onCameraStart(p):"function"==typeof r.onCameraStop&&r.onCameraStop()},[p]),Object(h.useEffect)(function(){d&&(c(d.name+" "+d.message),"function"==typeof r.onCameraError&&r.onCameraError(d))},[d]),Object(h.useEffect)(function(){f&&Object(w.d)(f.message)},[f]),e=Object(w.b)(a,r.isImageMirror),u=Object(w.a)(!a),l=r.isFullscreen?"react-html5-camera-photo-fullscreen":"",m.a.createElement("div",{className:"react-html5-camera-photo "+l},m.a.createElement(g.a,{cssClass:"display-error",isDisplayError:r.isDisplayStartCameraError,errorMsg:s}),m.a.createElement(b.a,{isShowWhiteFlash:!a}),m.a.createElement("img",{style:u,alt:"camera",src:t}),m.a.createElement("video",{style:e,ref:o,autoPlay:!0,muted:"muted",playsInline:!0}),m.a.createElement(v.a,{isClicked:!a,onClick:function(){var e={sizeFactor:r.sizeFactor,imageType:r.imageType,imageCompression:r.imageCompression,isImageMirror:r.isImageMirror},t=V(e);r.isSilentMode||Object(w.c)(),"function"==typeof r.onTakePhoto&&r.onTakePhoto(t),n(t),i(!1),C&&clearTimeout(C),C=setTimeout(function(){i(!0),"function"==typeof r.onTakePhotoAnimationDone&&r.onTakePhotoAnimationDone(t)},900)}}))}var h=r(0),m=r.n(h),o=r(1),a=r.n(o),i=r(2),y=(r.n(i),r(9)),v=r(13),b=r(15),g=r(17),w=r(19),o=r(21);r.n(o),r.o(i,"FACING_MODES")&&r.d(t,"a",function(){return i.FACING_MODES}),r.o(i,"IMAGE_TYPES")&&r.d(t,"b",function(){return i.IMAGE_TYPES});function O(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&l.return&&l.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}var C=null;(t.c=n).propTypes={onTakePhoto:a.a.func,onTakePhotoAnimationDone:a.a.func,onCameraError:a.a.func,idealFacingMode:a.a.string,idealResolution:a.a.object,imageType:a.a.string,isImageMirror:a.a.bool,isSilentMode:a.a.bool,isDisplayStartCameraError:a.a.bool,imageCompression:a.a.number,isMaxResolution:a.a.bool,isFullscreen:a.a.bool,sizeFactor:a.a.number,onCameraStart:a.a.func,onCameraStop:a.a.func},n.defaultProps={isImageMirror:!0,isDisplayStartCameraError:!0}},function(e,t,r){"use strict";function n(){}function o(){}var i=r(8);o.resetWarningCache=n,e.exports=function(){function e(e,t,r,n,o,a){if(a!==i)throw(a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")).name="Invariant Violation",a}function t(){return e}var r={array:e.isRequired=e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:n};return r.PropTypes=r}},function(e,t,r){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,r){"use strict";function p(e){return function(){var l=e.apply(this,arguments);return new Promise(function(a,i){return function t(e,r){try{var n=l[e](r),o=n.value}catch(e){return void i(e)}if(!n.done)return Promise.resolve(o).then(function(e){t("next",e)},function(e){t("throw",e)});a(o)}("next")})}}t.a=function(n,o,a,i){var e=Object(f.useState)(null),l=(r=h(e,2))[0],s=r[1],t=Object(f.useState)(null),r=(e=h(t,2))[0],c=e[1],t=Object(f.useState)(null),t=(e=h(t,2))[0],u=e[1];return Object(f.useEffect)(function(){n&&n.current&&(m=new V.a(n.current))},[n]),Object(f.useEffect)(function(){var e,t,r=(e=p(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(y=!0,e.prev=1,t=null,i)return e.next=6,m.startCameraMaxResolution(o);e.next=9;break;case 6:t=e.sent,e.next=12;break;case 9:return e.next=11,m.startCamera(o,a);case 11:t=e.sent;case 12:s(t),c(null),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),c(e.t0);case 19:case"end":return e.stop()}},e,this,[[1,16]])})),function(){return e.apply(this,arguments)});if(l)return t=p(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,y)return y=!1,e.next=5,m.stopCamera();e.next=5;break;case 5:n&&n.current&&(s(null),u(null)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),u(e.t0);case 11:case"end":return e.stop()}},e,this,[[0,8]])})),function(){return t.apply(this,arguments)};r()},[n,l,o,a,i]),[l,r,t,function(e){return m.getDataUri(e)}]};var t=r(10),d=r.n(t),f=r(0),t=(r.n(f),r(2)),V=r.n(t),h=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&l.return&&l.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},m=null,y=!1},function(e,t,r){e.exports=r(11)},function(e,t,r){var n=function(){return this}()||Function("return this")(),o=n.regeneratorRuntime&&0<=Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime"),a=o&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,e.exports=r(12),o)n.regeneratorRuntime=a;else try{delete n.regeneratorRuntime}catch(e){n.regeneratorRuntime=void 0}},function(S,e){!function(e){"use strict";function a(e,t,r,n){var o,a,i,l,t=t&&t.prototype instanceof c?t:c,t=Object.create(t.prototype),n=new u(n||[]);return t._invoke=(o=e,a=r,i=n,l=w,function(e,t){if(l===C)throw new Error("Generator is already running");if(l===k){if("throw"===e)throw t;return d()}for(i.method=e,i.arg=t;;){var r=i.delegate;if(r){var n=function e(t,r){var n=t.iterator[r.method];if(n!==f)return"throw"===(n=s(n,t.iterator,r.arg)).type?(r.method="throw",r.arg=n.arg,r.delegate=null,E):(n=n.arg)?n.done?(r[t.resultName]=n.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=f),r.delegate=null,E):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,E);if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=f,e(t,r),"throw"===r.method))return E;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}(r,i);if(n){if(n===E)continue;return n}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(l===w)throw l=k,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);if(l=C,"normal"===(n=s(o,a,i)).type){if(l=i.done?k:O,n.arg===E)continue;return{value:n.arg,done:i.done}}"throw"===n.type&&(l=k,i.method="throw",i.arg=n.arg)}}),t}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function c(){}function t(){}function r(){}function n(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function i(i){var t;this._invoke=function(r,n){function e(){return new Promise(function(e,t){!function t(e,r,n,o){if("throw"!==(e=s(i[e],i,r)).type){var a=e.arg;return(r=a.value)&&"object"==wl(r)&&h.call(r,"__await")?Promise.resolve(r.__await).then(function(e){t("next",e,n,o)},function(e){t("throw",e,n,o)}):Promise.resolve(r).then(function(e){a.value=e,n(a)},o)}o(e.arg)}(r,n,e,t)})}return t=t?t.then(e,e):e()}}function o(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function u(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(o,this),this.reset(!0)}function p(t){if(t){if(e=t[m])return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var e,r=-1;return(e=function e(){for(;++r<t.length;)if(h.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=f,e.done=!0,e}).next=e}}return{next:d}}function d(){return{value:f,done:!0}}var f,V=Object.prototype,h=V.hasOwnProperty,m=(b="function"==typeof Symbol?Symbol:{}).iterator||"@@iterator",y=b.asyncIterator||"@@asyncIterator",v=b.toStringTag||"@@toStringTag",b="object"==wl(S),g=e.regeneratorRuntime;if(g)return b&&(S.exports=g);(g=e.regeneratorRuntime=b?S.exports:{}).wrap=a;var w="suspendedStart",O="suspendedYield",C="executing",k="completed",E={};(e={})[m]=function(){return this},(b=(b=Object.getPrototypeOf)&&b(b(p([]))))&&b!==V&&h.call(b,m)&&(e=b);var A=r.prototype=c.prototype=Object.create(e);(t.prototype=A.constructor=r).constructor=t,r[v]=t.displayName="GeneratorFunction",g.isGeneratorFunction=function(e){return!!(e="function"==typeof e&&e.constructor)&&(e===t||"GeneratorFunction"===(e.displayName||e.name))},g.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,r):(e.__proto__=r,v in e||(e[v]="GeneratorFunction")),e.prototype=Object.create(A),e},g.awrap=function(e){return{__await:e}},n(i.prototype),i.prototype[y]=function(){return this},g.AsyncIterator=i,g.async=function(e,t,r,n){var o=new i(a(e,t,r,n));return g.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},n(A),A[v]="Generator",A[m]=function(){return this},A.toString=function(){return"[object Generator]"},g.keys=function(r){var e,n=[];for(e in r)n.push(e);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},g.values=p,u.prototype={constructor:u,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=f,this.done=!1,this.delegate=null,this.method="next",this.arg=f,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&h.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=f)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){function e(e,t){return a.type="throw",a.arg=r,n.next=e,t&&(n.method="next",n.arg=f),!!t}if(this.done)throw r;for(var n=this,t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t],a=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var i=h.call(o,"catchLoc"),l=h.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&h.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}var a=(o=o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc?null:o)?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,E):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n,o=r.completion;return"throw"===o.type&&(n=o.arg,l(r)),n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:p(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=f),E}}}(function(){return this}()||Function("return this")())},function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(1),n=r.n(a),a=r(14);(a=(r.n(a),function(e){var t=e.onClick,r=e.isClicked;return o.a.createElement("div",{id:"container-circles"},o.a.createElement("div",{id:"outer-circle",onClick:function(e){r||t()}},o.a.createElement("div",{id:"inner-circle",className:r?"is-clicked":""})))})).propTypes={onClick:n.a.func.isRequired,isClicked:n.a.bool.isRequired},t.a=a},function(e,t){},function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(1),n=r.n(a),a=r(16);(a=(r.n(a),function(e){return e=e.isShowWhiteFlash,o.a.createElement("div",{id:"white-flash",className:(e?"do-transition":"")+" normal"})})).propTypes={isShowWhiteFlash:n.a.bool.isRequired},t.a=a},function(e,t){},function(e,t,r){"use strict";var n=r(0),o=r.n(n),a=r(1),n=r.n(a),a=r(18);(a=(r.n(a),function(e){var t=e.isDisplayError,r=e.errorMsg,n=e.cssClass;return e=r,t&&e&&0<e.length?(console.log("cssClass",n),o.a.createElement("div",{className:n,id:"display-error"},o.a.createElement("h1",null,"Camera error: ",r))):null})).propTypes={isDisplayError:n.a.bool,errorMsg:n.a.string,cssClass:n.a.string},t.a=a},function(e,t){},function(e,t,r){"use strict";function n(e){return e?{display:"inline-block"}:{display:"none"}}t.a=n,t.b=function(e,t){return Object.assign({},t?{transform:"rotateY(180deg)"}:{transform:"none"},n(e))},t.c=function(){new Audio("data:audio/mp3;base64,"+o.a.base64).play()},t.d=function(e){console.info("react-html5-camera-photo info:",e)};var t=r(20),o=r.n(t)},function(e,t){e.exports={base64:"SUQzBAAAAAAASVRQRTEAAAAcAAADU291bmRKYXkuY29tIFNvdW5kIEVmZmVjdHMAVFNTRQAAAA8AAANMYXZmNTcuNzIuMTAxAAAAAAAAAAAAAAD/+1QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABJbmZvAAAADwAAAB0AACxAAA0NDRUVFR4eHh4nJycvLy8vODg4QUFBQUlJSVJSUlJbW1tjY2NsbGxsdXV1fX19fYaGho+Pj4+Xl5egoKCgqampsbGxurq6usPDw8vLy8vU1NTd3d3d5eXl7u7u7vf39////wAAAABMYXZjNTcuOTMAAAAAAAAAAAAAAAAkAkAAAAAAAAAsQC+b5ZH/+5RkAA/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAAR4RBEitS0FLUmhcO1TSK1JoJrUtC4dpmkUlLQTQUtC4dpqkUkVoJoJpxcO01KKSK1JoJoRcO01i0kUlLGJkCdw7Skpaho4aHGJkCZkO0pIrDBxw0OGHoEzD3aUkVhg4wMHDD0E4tjjUkUgw8YPDhloJxbSaSRSGhxg8YpaCcW00kRSRWpNBOxZ/1VVFlv/9LLLqu//VVVUW//WWWWXd/6VVVVd/+qsssGH/ZZZVVUDt+1VVlli1dIxZZVUDI0RhaqqyzX9GLLLKq/+QtVVGgCAACMZAAY0NkBDHeIlc0SIVc0Kpu8Sudc0SucfQq+iRCd4hOlc0SubvEJ3NHiE76FErnCr13iE74d4hO8Q0SuaJUSuaJXKvEJ330Su8Q0KuaFUJ3iVzcWaJQ7wWYBHSMAgAD4xjjeYxjZ35znnO/zkJOfqQhKnO6B88jTnnOd0IRjhwUZTnO85///znkD/+5Rkrg7gAABpAAAACAAADSAAAAEQ2Y50IITAARuAEEgQjXnhDgIHCKc53IHxdyEbnOehCEkJ+pCelSMp4gHBRQ4HG5CSE8hJCN/U7oIBwONJAAAAABzNHNlZ0RgQYz9Z7iGTHEB/80BaFYCuiQxoNtAsgAYQaVXEGCOw1eAQwscAnqCA4wbgC2AfcLWgsjQU2SxNkDIOQcAICYDsC/QfJunpFwYwiBPhc4QIMLhqQFyQQMafSYToaBt4ucd4uQQUAgwyMNQQuQItic+ghuLAQdlkELTqJsxICMaQ4UERZT0KbbSURTRUOZYcwcwY5MiwoENUDJjGFslwwOn609SlqYXIK0HgXO8XPcbKThcIPIuUVoQiSyXYhB9OtX////+MF0v////zWIAICAEKgAB/mXJmPHgWEBgPOgZOlaYsIFBP+AQ4QLHrqkMPcPAKKBZ7ZFyAhl8AcIGyALmsoLqwDiCwCxhv4aX8i47Q9MOXKIXAEgKFDAxNenFnkHFkEQb/+5RE9QADBV+6LQRgAltMZtWglABa0gEKuaiAC3vAoeM1MAAWYQILzHIICTw5nW7RcBUEpjnkHEoDmA3lH0Xw/cQVFJCxdNqCh2E2Xy+dJs3JsiossdgrUcoTkRIc5t++OWO8ToPJNi5D0XIXSYEJxaidDVAy5PlocIZPW62fVpyLigBQBAHrIuVrJOFrg5pLCcSAkokPocwjSNHPHN0//////////+QhCj7qaGYVYmpqaAAAGq7AwgBlh8VBaQtGWez8jOC40Cs8QWdoEoqxgWS1OGgVhKDhH+mSYIkesyxKFQLAOJPHUkiRlkHQGoXY9YwWxnKGEht1WcAxxbxjowl8ZZOpjMoTFYLhMp1UWNzTcRKlEThVyzRJ9C5JpucTzZNnKasIvafZ4+7b8Nv83+Mazrf1JvUKBJrxNz2pLmfWWKB/Cz8x/7RM5/1Ce/+L76+P5VVv//Of/6N7Pce0F4fxJEPU6bWE3FR6oN5kpCbjkeTdixgeMWuvWJWbPnn/+5RkagAFn1nIzmXgAoEqWPDHsABTQW8/uPeACTkOaPcYsABbsyzEjbu+fchSvlqOGJ9HCWDt1LSxKyl8Ukl5ZzCMTzuj69ziub5eq/GI1/jU05e/Vyef+sLP2UOTjPezyH/2pWN3Kd+UX7tbbLmTSNimTrrEzKqWI82ZXEVz/f+APYQWsTYAFgsDYkDgbEotLbToGU/zJZiBhooccZojHRxKjGTDmIYgELVTQ6I2QqDhXYc7gxAUg/WKLpvmqB/Aa3CjVqNWDqJq6FkPVCvUdaazrdNQLVgv4+X93OD48uq7h+33naGTRWem5b5x8/PzbP34OY+8UeZuq839/vV6xL5/9b/XgaviJ9X39eff////zE3/////R5XdMx9Zlv5kMT+fb+7lKgBsvQwB1JIZFR4wVnWT2FlJ/9ydOZTEtzzjSMAwIrF0HW4nk9iLot6Z7fXzZ9ce865weBD+l9AJVqCZJWiEQsTcMVtf+2qtxuAtqJsBk0mAUCkVg8GmyjH/+5RkCQADSzRfbjFgBDyCa4/GlACMzGFh/PMACSAXa/+SUACjoDx0SmqACERx/bjtG4yJBsfEURAKyS7HTNFQ7ithQtedceTij5ucmkWN8luex6UdfP/y85Ma9PZExfX7fX5N6mDZIDUU5B4GFjoqoho+gmvcXDwfOFEQBAJAImIAIgAEBgoCAACgBWBb6r87R1ptBJTt9CIxPHoSUlxjgK9m/SEj3c159dg8LocfP5dBMH0/+r8bNvCqREJgBAo3AsBPzmJsdpUPjpXS9g9FMzKZrbNwgKTOuEDqnHmTRomLkbR2pd3RDi2Tznwzv//7otGijIoTEh2G3Q46FAgGDpWjmXd5f7f/7jYhgVdpAWecCrcCQt2IrHuQFiFFHxnaDIwAAJAFyyJGMwQlgONtlkI6kliXEWGr3/aI4kBnKOqNM539ilaUrLMZH/lUzP+ubGjlo8qZtgiBDTywUCohJd1f/r7rKml6giMBAAJEqYxixGCLCoy4k/LilUWoA4T/+5RkDIIDKhvW+ekyIkcDiu8kYoQMtHVX56UMiSmMKrj0jJnnxKuJignB5BdoZW+9uSWOWnCfrsssUm7dsQBie/NwY8W5Mcwd2coQYLGa4lTralcVA1UmoIyYTV/+2yAhmrb2/n/usGNZ7WlQTff6IlqcUUhEAJEqA8DKDVVREeIr8esjOrIUkuirufCdazjA811RD9N4LbvbaQCrw4dHvhMDz5A2w6KgoASjBS/Z+oFXtQIWF1JaIlkIxIAVMLauzmL6Rl2Q88yap03k8jXbwTjyBATEib0nyZFm3bJLlisBM01260qLqxtjRyN3m+oeF0gaslaUUUQ+FPb3T5AmE9qgnWRkokRC7/ODQPHdJPvq//9E2/SxEVK8v8htbsiCAAAgWWvTAjwQFpoiNLhYgE54RXwYLM+nGalvD2YxIJBjCwcqYng0c1/O3ts1SX8vgE9ZFUddfs8VPyCUwUA1wwzDBe2/+arbfpkEAAkBTABB0BwGgTAGdBCwAkBHJh7/+5RkDAADMxjUaYxJwkuiap8xIygM4G9Tp5kQmQkTrXzAmmOsHqFdAdFFCiEr5yxbLwZtWEEdVovOs23MAvAStVLKV8IXKgKrT8ncmLedi7bB/cA3VbAaKlqOq5/HaA4InbPz5nmuucADoe6xcBNt7tSPMuqIZAAAJBShDfodhw8JW8ZZJHhUwH3Fw7/DalLuM1CoAAQXCh4QvMhMrHIu0JKhUHpigUiESAQcKQCBYuIlFAIIUGgiPNQr+3/qOciRRBARJTh8shKgNIuRVKUxSdti8UYsSmgfCmU53r4EGDk9h+UaQORLKigsxpCqsGqz2zQThjt29fjfjzCmksKQOfPf4ErnOwvcZIT9DQVP/9TFYZiYuyTT96/zSiWVZKgcauvX/Fd2hVVUNhuyQBJGdRxhU4uKqjyBE8rLjlmFbTMFLMEjhIDHv6NmRNmf/x/F/5cxOiRvEoLByWYmOhp3cSRgUq/7/qoYV0MBAAAAIAdHYSUB4FLQkP5cCxrCATz/+5RkDAADcxrQ+e8ackTCep8wwjpL4TlL56RsgQ2T6HjEiTjmdytbVp+p2hSvFX/J3siqX5Wp2r5mJhZB/SmifjK/QQ4ShGCxzKeZDGcp/kktH8kDWWOSZDARPRv7gK6He3vFplnf/ISQ4UblSirr/7W5uvEVbi7d/41VMOCGZhBRugHYuN2QEgAmo6plMR15BTDpS6GyW+h+zjhlE8LMf//ITt//LrTQsNbb/J9Zyp169ismbG93VWFmoE0ymLyzqiiAgAXG5uD/P1BnCX472hAoSyXQ5JvjJEp2tNIkZx/G6bBA1KGgQYzpIzGm5IWHFI3Mrnvebeakn//f8j/pWaH1rsSqWc2dp0jnbn3/7JmdV7+rm4jPHhXFE1r0tJiYoAAAAigB0SlA5VjmyuiQgE4EkySaHa9QarZQzE+i/c44HSRySJ4CDjRhoytL7p/+PEeSed2CYQgcEgTaIoDtrrpKeaNEABAKbd2LYYyuPAvgvmUzBhOEiQkCUASwM4n/+5RkDwACrRjR+eZCQEOC2f4x5jYL0TlD56RriN8N7HyXiJ54Gw8X6M1cW+MDfWrsKucJQ0gMq/komUNiAq4FSIwOpfEowi0zG6KleQCSwEHCweBskbbnvsRfcri9EggAAUkBeGC1nNGwSq4XGArmaGnlPGbIccshyzql3zEm2iXAZItfIUAwLCoVDYKxffIQWDp2wsVDAJDsKevOnvQcxkqRgBAKSS4GO+X2ZRCBlqF/QtpvneXKjA4qgriVakmnNLSUvMmiVGtept5SCQ5tDuocjzRsk/bPpezir/nVJu2kc4xlwvbaEtJd6zQ6R3eZfPv/ZJ9m7oiBSzn3SsPUuzAigOuJgJs0MnJOxdG1Hos5k5GjucbkewcqlX//d9egcowOwg72yIVFgeHHACCQIp/9PT01NnhGAQAAAknKA6Tbgw7HGWOAnUc4qlQxWxVTQozhF1NqtN4r5ZNzwrSNPp7VsAAhMNBEATOaL/+InKoczbIhOQm8yucxCbkEwBj/+5RkJQACy03O+eEWUj8Cqd0kI2JK7FM957BJCP8LZrDEjRj7MQQulP8iNv1ZQ4OWjvqHfxoAAAVtoBJyKgSboha50SOlHFNhEvo0yk1IDQILHJd8pzLwyCCFsP8b6IUbJYLXxxLBnDxp1STleWZlv/9Kz3aKJGABkluAYT6bKlJ0SsMEFQhDZNG46mJhXjMyWnaEijV2W3UQQjhJ2y0PbgCxKEv/f+ooiGu9UlKa1tKv4sNhxYveU5D+e9J/2/3u9i4YA5osaQqZV7oIAAVOEC1I9By09EwqKkMtLA2RufTbvi1rZ3AWUsGCwYCCGdpMJPBVQLQqxvFCAWEaRqjziYSr/tU5CgK2lSZ5l0MQIByXbAOUTklQFwOgfB8rh4B4jOlhhg7ZuucQTkGoy6+ZAqKKQ6gWMbPkZmZ9al/+kwJlkVSkI3uaVC2PdDdkO2QyMxaaVttL+yKt1NKxBTFCCAVrowyW2stA1KFv0hbLb65ETygHpTFEK1a04Ng4gIb/+5RkOwAC0k7O+YMUUj6BiiwFgg3KmJ8zphhtQRKNZGBmJRA3zVydPlFXGVS////puxqodg5reZNm7/MndWf/JPWm/zFfXM98bBIBmkEAqijiJIAzdzxAOh6LS9CEgB3NmijZQuE95VFuWutlsK2FVMstBJuVY76LLWembjBBYkSAGFCwCSE1Ppa8UNIPf/rQVegNg4JAcJFg6bBbQAIAMCuSFKdNYIqoIFhkZHZCSAvBs6hSPpInc9z4qA4OHAHPHf+l0aFJ/6EAAV2ArBonPBCu1MQoShTe7XNf9XsZ9qpd+AAP+gZLrd1p3akdlU8FYXUqpYXEkAAVGvN3ewT7cvODAwWv/t31+k+EtuUdesnV7G0KUzixLoR06olmbZdiqiqzv7N7ttT6aftruhpizihYWJqUcutcZKiaIBXJKbYkBix6RiszxMK5sJ3Ztcpka/ndJlS85HzhllK4TzomBkODyvw6MKWqB1yAbBMTKNvY95k+RrRGFkLBABAgI4n/+5RkT4QSok5JyeYT4kUDee0Z40mKUJ8YyLypwOeOZChhDhBy6cO3WizCTU0ThVTKhLA6LJCj9VhvNbUxMr572iZ6pVQhrx7L5n3lEWWQSMJMsqkMdU/2ogTDpQ1LUgDmIw0+xSPp8q74NAETGx7fpCHkBgwgHtJJbfdIBQ2Ei9iiS4Fg8HgwECBAIpSoj4KVspVh+KNAkISWq9gdCp655vAt6qxRINC8/20T9M/zI5/3sr5eevDsXTYoZDpVDe4LaAc3X7C+k/mRXV/V5vK5X/MCgvHUGw6tbfym3UZ9VRnJVEgkcSR3dZmtOt37p7dv6f/T6V/5QuVKCHLFJbd+mxP/FHcjQI+/uXECJ7zhGKxohM9ZXlY1KlYdgNDNEOUMYLMaFMiPhVqvdmtZbF0KohuyOtfX+j/+n/xVc7/7fut6xwOQ9a6vx5ougb49A6BJJiQoymSK5RLTnwaC0KFVw9GzUl1d/2ZWq5kZlbpVkQ4EZ1WpHor+uT365V/7vT//+5Rkao9yt1FEAeY+EEBoWIAk4pQJATkOBZhRAQuSIZBzCXDoq+3/8Y3/2M/FBCAObWqHRAAtBiifAQCA1BRpVb52s2S5LI2Dq/8pdzkc9Eo10eK9QbhdwiNCt85vHP1ouZJ3FHtp77tE/0fZHon7N6oJwACADvQx9SohjjDiuogvjxhWFb55pURta2RhcxRyGZ73J0P0VvoiQ4ZlVaNv1djz1ZmtRGX9aKt2/33+1vszag1xXTcAbOWQBd6nCJkAAAwE50ngeCHKFx4NgkajxyDQGDg8gbAB82lgNsldzF0/I1VXDWjZv6losVd/pjqv+mkYxQAgLAqKmFTMqgPTSAlvGL6vsVEwoP4QoNGxYoxifXxK5OK3E9Raod2Xk6CZV263XWvqrscMz9Fa3b0ATfVXh3tQen8E8aMctpDNFg+tKkvaxhtKRI5UCFQOo+ei5Y3ApV5GBuyyL3V5hL1tIrGwRIlHhIqrvQBtZxSWLjrVaqwMSGQ1hqCNaJDGiFH/+5RkhwBSYU3DQUYS4DThKHsAIgQHeGkNgIhqgQQJ4NQAjCJAlFF/+Pt02b8lSSXzdgtLH4ihpv64/LHJp/ekvx66X+Hd5lMVFew/KbF2/CeuO7/xf903H92Cr0eRG0lKHlls5APGEG0b1MrTN/Pxtf92++3b1/ZC7yOuo1L/fUJr99PmOau1+DczWWohH8L0eh/nWTbo8/OvyZ/ccZuEf/+Rn/l/L/M//+ZEqKpH+ZFToqJ+iqi+i/yoi+ip9yhgYMh27OZUWpgoIEd1ITFaxUllRQWcDAaskNCYwCgJAlEQaBsJgsBQSlREGgbCYLBUBAUSiINB2dKnUZK3kSJ1948Y9LNCn/I9c763Wf1AVct8rUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+5REtg5yOQ+/ACAYIkLiWBAEIy5G6UjKQIBcAPWAH5ARjShVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVACCU025+ZGfywyOy3//ksyP+XMmstIyNWCggQNHI1ls////WWRyMmVgYME6GTLJZ///2WWxyNWWSoZGrWyzL/9WVqCBOhkyhgYMI6GrBQUqFpoVFP9bDILCzOLiv/rFRYk//qF+LCrDKm/4o2sVFtbP6hdmLCsyoXUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+5Rkjg/ygl8ruCAaQiiABWAAAAAAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+5RkUY/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+5RkUY/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+5RkUY/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+5RkUY/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+5RkUY/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+5RkUY/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+5RkUY/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+5RkUY/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+5RkUY/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+5RkUY/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+5RkUY/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+5RkUY/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+5RkUY/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU="}},function(e,t){}],i.c=a,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=3))},function(e,t){e.exports=f},function(e,t){e.exports=V},function(e,t){e.exports=h},function(e,t){e.exports=m},function(e,t){e.exports=y},function(e,t){e.exports=v},function(e,t){e.exports=b},function(e,t){e.exports=g},function(e,t,r){var n,o,a,i,l,s;function c(e){if(s[e])return s[e].exports;var t=s[e]={exports:{},id:e,loaded:!1};return l[e].call(t.exports,t,t.exports,c),t.loaded=!0,t.exports}e.exports=(n=r(26),o=r(0),a=r(29),i=r(30),s={},c.m=l=[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=wl(t)&&"function"!=typeof t?e:t}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),e},l=n(r(1)),s=r(2),c=n(s),u=n(r(3)),p=n(r(4));function d(){var e,o;!function(e){if(!(e instanceof d))throw new TypeError("Cannot call a class as a function")}(this);for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=o=a(this,(e=d.__proto__||Object.getPrototypeOf(d)).call.apply(e,[this].concat(r))),o._sigPad=null,o._excludeOurProps=function(){var e=o.props;return e.canvasProps,e.clearOnResize,function(e,t){var r,n={};for(r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["canvasProps","clearOnResize"])},o.getCanvas=function(){return o._canvas},o.getTrimmedCanvas=function(){var e=document.createElement("canvas");return e.width=o._canvas.width,e.height=o._canvas.height,e.getContext("2d").drawImage(o._canvas,0,0),(0,p.default)(e)},o.getSignaturePad=function(){return o._sigPad},o._checkClearOnResize=function(){o.props.clearOnResize&&o._resizeCanvas()},o._resizeCanvas=function(){var e,t=o.props.canvasProps||{},r=t.width,n=t.height;r&&n||(e=o._canvas,t=Math.max(window.devicePixelRatio||1,1),r||(e.width=e.offsetWidth*t),n||(e.height=e.offsetHeight*t),e.getContext("2d").scale(t,t),o.clear())},o.on=function(){return window.addEventListener("resize",o._checkClearOnResize),o._sigPad.on()},o.off=function(){return window.removeEventListener("resize",o._checkClearOnResize),o._sigPad.off()},o.clear=function(){return o._sigPad.clear()},o.isEmpty=function(){return o._sigPad.isEmpty()},o.fromDataURL=function(e,t){return o._sigPad.fromDataURL(e,t)},o.toDataURL=function(e,t){return o._sigPad.toDataURL(e,t)},o.fromData=function(e){return o._sigPad.fromData(e)},o.toData=function(){return o._sigPad.toData()},a(o,e)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(i=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+wl(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(d,s.Component),i(d,[{key:"componentDidMount",value:function(){this._sigPad=new u.default(this._canvas,this._excludeOurProps()),this._resizeCanvas(),this.on()}},{key:"componentWillUnmount",value:function(){this.off()}},{key:"componentDidUpdate",value:function(){Object.assign(this._sigPad,this._excludeOurProps())}},{key:"render",value:function(){var t=this,e=this.props.canvasProps;return c.default.createElement("canvas",o({ref:function(e){t._canvas=e}},e))}}]),d)).propTypes={velocityFilterWeight:l.default.number,minWidth:l.default.number,maxWidth:l.default.number,minDistance:l.default.number,dotSize:l.default.oneOfType([l.default.number,l.default.func]),penColor:l.default.string,throttle:l.default.number,onEnd:l.default.func,onBegin:l.default.func,canvasProps:l.default.object,clearOnResize:l.default.bool},i.defaultProps={clearOnResize:!0},t.default=i},function(e,t){e.exports=n},function(e,t){e.exports=o},function(e,t){e.exports=a},function(e,t){e.exports=i}],c.c=s,c.p="",c(0))},function(e,t,r){"use strict";r.r(t),r.d(t,"Headers",function(){return u}),r.d(t,"Request",function(){return y}),r.d(t,"Response",function(){return b}),r.d(t,"DOMException",function(){return w}),r.d(t,"fetch",function(){return O});var n,o,l="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==l&&l,s={searchParams:"URLSearchParams"in l,iterable:"Symbol"in l&&"iterator"in Symbol,blob:"FileReader"in l&&"Blob"in l&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in l,arrayBuffer:"ArrayBuffer"in l};function a(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function c(e){return"string"!=typeof e?String(e):e}function i(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return s.iterable&&(e[Symbol.iterator]=function(){return e}),e}function u(t){this.map={},t instanceof u?t.forEach(function(e,t){this.append(t,e)},this):Array.isArray(t)?t.forEach(function(e){this.append(e[0],e[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function p(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function d(r){return new Promise(function(e,t){r.onload=function(){e(r.result)},r.onerror=function(){t(r.error)}})}function f(e){var t=new FileReader,r=d(t);return t.readAsArrayBuffer(e),r}function V(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function h(){return this.bodyUsed=!1,this._initBody=function(e){this.bodyUsed=this.bodyUsed,(this._bodyInit=e)?"string"==typeof e?this._bodyText=e:s.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:s.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:s.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():s.arrayBuffer&&s.blob&&e&&DataView.prototype.isPrototypeOf(e)?(this._bodyArrayBuffer=V(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||o(e))?this._bodyArrayBuffer=V(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):s.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s.blob&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=p(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(f)}),this.text=function(){var e,t,r=p(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,r=d(t=new FileReader),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s.formData&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}s.arrayBuffer&&(n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(e){return e&&-1<n.indexOf(Object.prototype.toString.call(e))}),u.prototype.append=function(e,t){e=a(e),t=c(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},u.prototype.delete=function(e){delete this.map[a(e)]},u.prototype.get=function(e){return e=a(e),this.has(e)?this.map[e]:null},u.prototype.has=function(e){return this.map.hasOwnProperty(a(e))},u.prototype.set=function(e,t){this.map[a(e)]=c(t)},u.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},u.prototype.keys=function(){var r=[];return this.forEach(function(e,t){r.push(t)}),i(r)},u.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),i(t)},u.prototype.entries=function(){var r=[];return this.forEach(function(e,t){r.push([t,e])}),i(r)},s.iterable&&(u.prototype[Symbol.iterator]=u.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function y(e,t){if(!(this instanceof y))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,n=(t=t||{}).body;if(e instanceof y){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new u(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new u(t.headers)),this.method=(e=(r=t.method||this.method||"GET").toUpperCase(),-1<m.indexOf(e)?e:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n),"GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache||((t=/([?&])_=[^&]*/).test(this.url)?this.url=this.url.replace(t,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime())}function v(e){var r=new FormData;return e.trim().split("&").forEach(function(e){var t;e&&(e=(t=e.split("=")).shift().replace(/\+/g," "),t=t.join("=").replace(/\+/g," "),r.append(decodeURIComponent(e),decodeURIComponent(t)))}),r}function b(e,t){if(!(this instanceof b))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t=t||{},this.type="default",this.status=void 0===t.status?200:t.status,this.ok=200<=this.status&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new u(t.headers),this.url=t.url||"",this._initBody(e)}y.prototype.clone=function(){return new y(this,{body:this._bodyInit})},h.call(y.prototype),h.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},b.error=function(){var e=new b(null,{status:0,statusText:""});return e.type="error",e};var g=[301,302,303,307,308];b.redirect=function(e,t){if(-1===g.indexOf(t))throw new RangeError("Invalid status code");return new b(null,{status:t,headers:{location:e}})};var w=l.DOMException;try{new w}catch(e){(w=function(e,t){this.message=e,this.name=t,e=Error(e),this.stack=e.stack}).prototype=Object.create(Error.prototype),w.prototype.constructor=w}function O(n,i){return new Promise(function(o,e){var t=new y(n,i);if(t.signal&&t.signal.aborted)return e(new w("Aborted","AbortError"));var a=new XMLHttpRequest;function r(){a.abort()}a.onload=function(){var e,r,t={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",r=new u,e.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e}).forEach(function(e){var t=e.split(":");(e=t.shift().trim())&&(t=t.join(":").trim(),r.append(e,t))}),r)};t.url="responseURL"in a?a.responseURL:t.headers.get("X-Request-URL");var n="response"in a?a.response:a.responseText;setTimeout(function(){o(new b(n,t))},0)},a.onerror=function(){setTimeout(function(){e(new TypeError("Network request failed"))},0)},a.ontimeout=function(){setTimeout(function(){e(new TypeError("Network request failed"))},0)},a.onabort=function(){setTimeout(function(){e(new w("Aborted","AbortError"))},0)},a.open(t.method,function(t){try{return""===t&&l.location.href?l.location.href:t}catch(e){return t}}(t.url),!0),"include"===t.credentials?a.withCredentials=!0:"omit"===t.credentials&&(a.withCredentials=!1),"responseType"in a&&(s.blob?a.responseType="blob":s.arrayBuffer&&t.headers.get("Content-Type")&&-1!==t.headers.get("Content-Type").indexOf("application/octet-stream")&&(a.responseType="arraybuffer")),!i||"object"!=wl(i.headers)||i.headers instanceof u?t.headers.forEach(function(e,t){a.setRequestHeader(t,e)}):Object.getOwnPropertyNames(i.headers).forEach(function(e){a.setRequestHeader(e,c(i.headers[e]))}),t.signal&&(t.signal.addEventListener("abort",r),a.onreadystatechange=function(){4===a.readyState&&t.signal.removeEventListener("abort",r)}),a.send(void 0===t._bodyInit?null:t._bodyInit)})}O.polyfill=!0,l.fetch||(l.fetch=O,l.Headers=u,l.Request=y,l.Response=b)},function(t,r,n){!function(m){var e;void 0===(e="function"==typeof(e=function(){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function e(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(r){var n=t();return function(){var e,t=a(r);return e=n?(e=a(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==wl(e)&&"function"!=typeof e?l(t):e}}function c(e,t,r){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(e){t=Object.getOwnPropertyDescriptor(e,t);return t.get?t.get.call(r):t.value}})(e,t,r||e)}var r,u,p=(e(h,[{key:"addEventListener",value:function(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"removeEventListener",value:function(e,t){if(e in this.listeners)for(var r=this.listeners[e],n=0,o=r.length;n<o;n++)if(r[n]===t)return void r.splice(n,1)}},{key:"dispatchEvent",value:function(t){var r=this;if(t.type in this.listeners){for(var e=this.listeners[t.type],n=0,o=e.length;n<o;n++)!function(e){setTimeout(function(){return e.call(r,t)})}(e[n]);return!t.defaultPrevented}}}]),h),d=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(r,p);var t=s(r);function r(){var e;return n(this,r),(e=t.call(this)).listeners||p.call(l(e)),Object.defineProperty(l(e),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(l(e),"onabort",{value:null,writable:!0,configurable:!0}),e}return e(r,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(e){"abort"===e.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,e)),c(a(r.prototype),"dispatchEvent",this).call(this,e)}}]),r}(),f=(e(V,[{key:"abort",value:function(){var t;try{t=new Event("abort")}catch(e){"undefined"!=typeof document?document.createEvent?(t=document.createEvent("Event")).initEvent("abort",!1,!1):(t=document.createEventObject()).type="abort":t={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(t)}},{key:"toString",value:function(){return"[object AbortController]"}}]),V);function V(){n(this,V),Object.defineProperty(this,"signal",{value:new d,writable:!0,configurable:!0})}function h(){n(this,h),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}"undefined"!=typeof Symbol&&Symbol.toStringTag&&(f.prototype[Symbol.toStringTag]="AbortController",d.prototype[Symbol.toStringTag]="AbortSignal"),r="undefined"!=typeof self?self:m,((u=r).__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),1):"function"==typeof u.Request&&!u.Request.prototype.hasOwnProperty("signal")||!u.AbortController)&&(r.AbortController=f,r.AbortSignal=d)})?e.call(r,n,r,t):e)||(t.exports=e)}.call(this,n(25))},function(e,t){var r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==("undefined"==typeof window?"undefined":wl(window))&&(r=window)}e.exports=r},function(e,t,r){e.exports=r(27)()},function(e,t,r){"use strict";var i=r(28);function n(){}function o(){}o.resetWarningCache=n,e.exports=function(){function e(e,t,r,n,o,a){if(a!==i)throw(a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")).name="Invariant Violation",a}function t(){return e}var r={array:e.isRequired=e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:n};return r.PropTypes=r}},function(e,t,r){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,r){"use strict";
/*!
     * Signature Pad v2.3.2
     * https://github.com/szimek/signature_pad
     *
     * Copyright 2017 Szymon Nowak
     * Released under the MIT license
     *
     * The main idea and some parts of the code (e.g. drawing variable width Bzier curve) are taken from:
     * http://corner.squareup.com/2012/07/smoother-signatures.html
     *
     * Implementation of interpolation using cubic Bzier curves is taken from:
     * http://benknowscode.wordpress.com/2012/09/14/path-interpolation-using-cubic-bezier-and-control-point-estimation-in-javascript
     *
     * Algorithm for approximated length of a Bzier curve is taken from:
     * http://www.lemoda.net/maths/bezier-length/index.html
     *
     */function c(e,t,r){this.x=e,this.y=t,this.time=r||(new Date).getTime()}function n(e,t,r,n){this.startPoint=e,this.control1=t,this.control2=r,this.endPoint=n}function d(e,t){var r,n,o,a,i,l,s,c,u=this;function p(){c=!1===o.leading?0:Date.now(),s=null,l=r.apply(a,i),s||(a=i=null)}this.velocityFilterWeight=(t=t||{}).velocityFilterWeight||.7,this.minWidth=t.minWidth||.5,this.maxWidth=t.maxWidth||2.5,this.throttle="throttle"in t?t.throttle:16,this.minDistance="minDistance"in t?t.minDistance:5,this.throttle?this._strokeMoveUpdate=(r=d.prototype._strokeUpdate,n=this.throttle,s=null,c=0,o={},function(){var e=Date.now(),t=n-(e-(c=!c&&!1===o.leading?e:c));return a=this,i=arguments,t<=0||n<t?(s&&(clearTimeout(s),s=null),c=e,l=r.apply(a,i),s||(a=i=null)):s||!1===o.trailing||(s=setTimeout(p,t)),l}):this._strokeMoveUpdate=d.prototype._strokeUpdate,this.dotSize=t.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=t.penColor||"black",this.backgroundColor=t.backgroundColor||"rgba(0,0,0,0)",this.onBegin=t.onBegin,this.onEnd=t.onEnd,this._canvas=e,this._ctx=e.getContext("2d"),this.clear(),this._handleMouseDown=function(e){1===e.which&&(u._mouseButtonDown=!0,u._strokeBegin(e))},this._handleMouseMove=function(e){u._mouseButtonDown&&u._strokeMoveUpdate(e)},this._handleMouseUp=function(e){1===e.which&&u._mouseButtonDown&&(u._mouseButtonDown=!1,u._strokeEnd(e))},this._handleTouchStart=function(e){1===e.targetTouches.length&&(e=e.changedTouches[0],u._strokeBegin(e))},this._handleTouchMove=function(e){e.preventDefault(),e=e.targetTouches[0],u._strokeMoveUpdate(e)},this._handleTouchEnd=function(e){e.target===u._canvas&&(e.preventDefault(),u._strokeEnd(e))},this.on()}r.r(t),c.prototype.velocityFrom=function(e){return this.time!==e.time?this.distanceTo(e)/(this.time-e.time):1},c.prototype.distanceTo=function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))},c.prototype.equals=function(e){return this.x===e.x&&this.y===e.y&&this.time===e.time},n.prototype.length=function(){for(var e=0,t=void 0,r=void 0,n=0;n<=10;n+=1){var o,a=n/10,i=this._point(a,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),l=this._point(a,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);0<n&&(o=i-t,a=l-r,e+=Math.sqrt(o*o+a*a)),t=i,r=l}return e},n.prototype._point=function(e,t,r,n,o){return t*(1-e)*(1-e)*(1-e)+3*r*(1-e)*(1-e)*e+3*n*(1-e)*e*e+o*e*e*e},d.prototype.clear=function(){var e=this._ctx,t=this._canvas;e.fillStyle=this.backgroundColor,e.clearRect(0,0,t.width,t.height),e.fillRect(0,0,t.width,t.height),this._data=[],this._reset(),this._isEmpty=!0},d.prototype.fromDataURL=function(e){var t=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=new Image,o=r.ratio||window.devicePixelRatio||1,a=r.width||this._canvas.width/o,i=r.height||this._canvas.height/o;this._reset(),n.src=e,n.onload=function(){t._ctx.drawImage(n,0,0,a,i)},this._isEmpty=!1},d.prototype.toDataURL=function(e){var t;if("image/svg+xml"===e)return this._toSVG();for(var r=arguments.length,n=Array(1<r?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return(t=this._canvas).toDataURL.apply(t,[e].concat(n))},d.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()},d.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)},d.prototype.isEmpty=function(){return this._isEmpty},d.prototype._strokeBegin=function(e){this._data.push([]),this._reset(),this._strokeUpdate(e),"function"==typeof this.onBegin&&this.onBegin(e)},d.prototype._strokeUpdate=function(e){var t=e.clientX,r=e.clientY,e=this._createPoint(t,r),t=(r=(t=this._data[this._data.length-1])&&t[t.length-1])&&e.distanceTo(r)<this.minDistance;r&&t||(t=(r=this._addPoint(e)).curve,r=r.widths,t&&r&&this._drawCurve(t,r.start,r.end),this._data[this._data.length-1].push({x:e.x,y:e.y,time:e.time,color:this.penColor}))},d.prototype._strokeEnd=function(e){var t,r=2<this.points.length,n=this.points[0];!r&&n&&this._drawDot(n),n&&(r=(t=this._data[this._data.length-1])[t.length-1],n.equals(r)||t.push({x:n.x,y:n.y,time:n.time,color:this.penColor})),"function"==typeof this.onEnd&&this.onEnd(e)},d.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)},d.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)},d.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor},d.prototype._createPoint=function(e,t,r){var n=this._canvas.getBoundingClientRect();return new c(e-n.left,t-n.top,r||(new Date).getTime())},d.prototype._addPoint=function(e){var t=this.points;if(t.push(e),2<t.length){3===t.length&&t.unshift(t[0]);var r=this._calculateCurveControlPoints(t[0],t[1],t[2]).c2,e=this._calculateCurveControlPoints(t[1],t[2],t[3]).c1,r=new n(t[1],r,e,t[2]),e=this._calculateCurveWidths(r);return t.shift(),{curve:r,widths:e}}return{}},d.prototype._calculateCurveControlPoints=function(e,t,r){var n=e.x-t.x,o=e.y-t.y,a=t.x-r.x,i=t.y-r.y,l=(e.x+t.x)/2,s=(e.y+t.y)/2,e=(t.x+r.x)/2,r=(t.y+r.y)/2,o=Math.sqrt(n*n+o*o),i=Math.sqrt(a*a+i*i);return{c1:new c(l+(i=t.x-(e+(l-e)*(o=i/(o+i)))),s+(o=t.y-(r+(s-r)*o))),c2:new c(e+i,r+o)}},d.prototype._calculateCurveWidths=function(e){var t=e.startPoint,r=e.endPoint,e={start:null,end:null},r=this.velocityFilterWeight*r.velocityFrom(t)+(1-this.velocityFilterWeight)*this._lastVelocity,t=this._strokeWidth(r);return e.start=this._lastWidth,e.end=t,this._lastVelocity=r,this._lastWidth=t,e},d.prototype._strokeWidth=function(e){return Math.max(this.maxWidth/(e+1),this.minWidth)},d.prototype._drawPoint=function(e,t,r){var n=this._ctx;n.moveTo(e,t),n.arc(e,t,r,0,2*Math.PI,!1),this._isEmpty=!1},d.prototype._drawCurve=function(e,t,r){var n=this._ctx,o=r-t,a=Math.floor(e.length());n.beginPath();for(var i=0;i<a;i+=1){var l=i/a,s=l*l,c=s*l,u=1-l,p=u*u,d=p*u,f=d*e.startPoint.x;f+=3*p*l*e.control1.x,f+=3*u*s*e.control2.x,f+=c*e.endPoint.x,d*=e.startPoint.y,d+=3*p*l*e.control1.y,d+=3*u*s*e.control2.y,d+=c*e.endPoint.y,this._drawPoint(f,d,t+c*o)}n.closePath(),n.fill()},d.prototype._drawDot=function(e){var t=this._ctx,r="function"==typeof this.dotSize?this.dotSize():this.dotSize;t.beginPath(),this._drawPoint(e.x,e.y,r),t.closePath(),t.fill()},d.prototype._fromData=function(e,t,r){for(var n=0;n<e.length;n+=1){var o=e[n];if(1<o.length)for(var a=0;a<o.length;a+=1){var i=o[a],l=new c(i.x,i.y,i.time),s=i.color;0===a?(this.penColor=s,this._reset(),this._addPoint(l)):a!==o.length-1&&(l=(i=this._addPoint(l)).curve,i=i.widths,l&&i&&t(l,i,s))}else this._reset(),r(o[0])}},d.prototype._toSVG=function(){var n=this,e=this._data,t=this._canvas,r=Math.max(window.devicePixelRatio||1,1),o=t.width/r,r=t.height/r,a=document.createElementNS("http://www.w3.org/2000/svg","svg");if(a.setAttributeNS(null,"width",t.width),a.setAttributeNS(null,"height",t.height),this._fromData(e,function(e,t,r){var n=document.createElement("path");isNaN(e.control1.x)||isNaN(e.control1.y)||isNaN(e.control2.x)||isNaN(e.control2.y)||(e="M "+e.startPoint.x.toFixed(3)+","+e.startPoint.y.toFixed(3)+" C "+e.control1.x.toFixed(3)+","+e.control1.y.toFixed(3)+" "+e.control2.x.toFixed(3)+","+e.control2.y.toFixed(3)+" "+e.endPoint.x.toFixed(3)+","+e.endPoint.y.toFixed(3),n.setAttribute("d",e),n.setAttribute("stroke-width",(2.25*t.end).toFixed(3)),n.setAttribute("stroke",r),n.setAttribute("fill","none"),n.setAttribute("stroke-linecap","round"),a.appendChild(n))},function(e){var t=document.createElement("circle"),r="function"==typeof n.dotSize?n.dotSize():n.dotSize;t.setAttribute("r",r),t.setAttribute("cx",e.x),t.setAttribute("cy",e.y),t.setAttribute("fill",e.color),a.appendChild(t)}),o='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 '+o+" "+r+'" width="'+o+'" height="'+r+'">',void 0===(r=a.innerHTML)){var i=document.createElement("dummy"),l=a.childNodes;i.innerHTML="";for(var s=0;s<l.length;s+=1)i.appendChild(l[s].cloneNode(!0));r=i.innerHTML}return"data:image/svg+xml;base64,"+btoa(o+r+"</svg>")},d.prototype.fromData=function(e){var r=this;this.clear(),this._fromData(e,function(e,t){return r._drawCurve(e,t.start,t.end)},function(e){return r._drawDot(e)}),this._data=e},d.prototype.toData=function(){return this._data},t.default=d},function(e,t,r){function n(e){if(a[e])return a[e].exports;var t=a[e]={exports:{},id:e,loaded:!1};return o[e].call(t.exports,t,t.exports,n),t.loaded=!0,t.exports}var o,a;e.exports=(a={},n.m=o=[function(e,t){"use strict";function l(e,t,r,n){return n[4*(r*t+e)],n[4*(r*t+e)+1],n[4*(r*t+e)+2],n[4*(r*t+e)+3]}function s(e,t,r,n){for(var o=e?1:-1,a=e?0:r-1;e?a<r:-1<a;a+=o)for(var i=0;i<t;i++)if(l(i,a,t,n))return a;return null}function c(e,t,r,n){for(var o=e?1:-1,a=e?0:t-1;e?a<t:-1<a;a+=o)for(var i=0;i<r;i++)if(l(a,i,t,n))return a;return null}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.getContext("2d"),r=e.width,n=e.height,o=s(!0,r,n,l=t.getImageData(0,0,r,n).data),a=s(!1,r,n,l),i=c(!0,r,n,l),l=c(!1,r,n,l)-i+1,o=t.getImageData(i,o,l,a=a-o+1);return e.width=l,e.height=a,t.clearRect(0,0,l,a),t.putImageData(o,0,0),e}}],n.c=a,n.p="",n(0))},function(e,t,r){"use strict";r.r(t),r.d(t,"DWKitForm",function(){return Vl}),r.d(t,"GridView",function(){return ur}),r.d(t,"CollectionEditor",function(){return Te}),r.d(t,"BaseEditControl",function(){return gl}),r.d(t,"initDefaultState",function(){return Io.initDefaultState}),r.d(t,"initDefaultStateFormUrl",function(){}),r.d(t,"validate",function(){return Io.validate}),r.d(t,"checkConditions",function(){return Io.checkConditions});var c=r(0),z=r.n(c);function o(e){return(o="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=r(8),l=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(s,c.Component);var r,n,l=(r=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=p(r),t=n?(t=p(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t});function s(){var r;!function(e){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this);for(var e,t,n,o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=function(e,t){r.props.handleChange(r.props.row,e,t)},(t="handleChange")in(e=u(r=l.call.apply(l,[this].concat(a))))?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,r}return a(s.prototype,[{key:"shouldComponentUpdate",value:function(e){return!d(this.props,e)}}]),s}();function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=(n(V.prototype,[{key:"register",value:function(e,t){if(s.map[e])throw new Error("Component "+e+" already registered!");s.map[e]=t}},{key:"draw",value:function(e,t){var r=s.map[e];return r?r(t):(r=s.map["null-control"])({"data-buildertype":e,text:"".concat(e," is unsupported")})}}]),new V),f=s.register,K=s.draw;function V(){var e;!function(e){if(!(e instanceof V))throw new TypeError("Cannot call a class as a function")}(this),e={},"map"in this?Object.defineProperty(this,"map",{value:e,enumerable:!0,configurable:!0,writable:!0}):this.map=e}function h(e){return(h="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var T=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,l);var r,n,e=(r=t,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=v(r),t=n?(t=v(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==h(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function t(){return function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e.apply(this,arguments)}return m(t.prototype,[{key:"render",value:function(){return K("collection-checkbox",{me:this,props:this.props})}}]),t}();function b(e){return(b="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var N=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(a,c.Component);var r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=C(r),t=n?(t=C(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==b(t)&&"function"!=typeof t?O(e):t});function a(){var n;!function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return k(O(n=o.call.apply(o,[this].concat(t))),"handleEvent",function(e){e.parameters||(e.parameters={}),e.parameters.row||(e.parameters.row=n.props.row),"onChange"===e.eventName?n.props.handleChange(n.props.row,e.syntheticEvent,e):n.props.handleEvent(e)}),k(O(n),"getAdditionalDataForControl",function(e,t,r){return(t=t||{}).row||(t.row=n.props.row),n.props.getAdditionalDataForControl(e,t,r)}),n}return g(a.prototype,[{key:"render",value:function(){return K("collection-custom-control",{getAdditionalDataForControl:this.getAdditionalDataForControl,handleEvent:this.handleEvent,props:this.props})}}]),a}();function E(e){return(E="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,l);var r,n,e=(r=t,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=P(r),t=n?(t=P(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==E(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function t(){return function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e.apply(this,arguments)}return A(t.prototype,[{key:"render",value:function(){return K("collection-date-time",{me:this,props:this.props})}}]),t}();function j(e){return(j="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function R(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var L=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,l);var r,n,e=(r=t,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=x(r),t=n?(t=x(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==j(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function t(){return function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e.apply(this,arguments)}return R(t.prototype,[{key:"render",value:function(){return K("collection-dropdown",{me:this,props:this.props})}}]),t}();function D(e){return(D="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function F(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var M=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(t,l);var r,n,e=(r=t,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=B(r),t=n?(t=B(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==D(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function t(){return function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e.apply(this,arguments)}return F(t.prototype,[{key:"render",value:function(){return K("collection-input",{me:this,props:this.props})}}]),t}();function q(e){return(q="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function W(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Q=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(t,l);var r,n,e=(r=t,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=H(r),t=n?(t=H(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==q(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function t(){return function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e.apply(this,arguments)}return W(t.prototype,[{key:"render",value:function(){return K("collection-upload",{me:this,props:this.props})}}]),t}();function J(e){return(J="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function Y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ee=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(t,l);var r,n,e=(r=t,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=X(r),t=n?(t=X(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==J(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function t(){return function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e.apply(this,arguments)}return Y(t.prototype,[{key:"render",value:function(){return K("collection-camera",{me:this,props:this.props})}}]),t}();function te(e){return(te="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function re(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ae=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(t,l);var r,n,e=(r=t,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=oe(r),t=n?(t=oe(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==te(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function t(){return function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e.apply(this,arguments)}return re(t.prototype,[{key:"render",value:function(){return K("collection-signature",{me:this,props:this.props})}}]),t}();function ie(e){return(ie="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var de=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(a,c.Component);var r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=ue(r),t=n?(t=ue(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==ie(t)&&"function"!=typeof t?ce(e):t});function a(){var n;!function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return pe(ce(n=o.call.apply(o,[this].concat(t))),"onUpload",function(e,t){var r=ce(n),e={name:e.name,token:t.result.properties.Token,success:t.success,properties:t.result.properties};t.success?r.props.onChange&&r.props.onChange(null,{name:r.props.name,propertyName:r.props.propertyName,value:t.result.properties.Token,parameters:e}):r.props.onUploadFail&&r.props.onUploadFail(null,{name:r.props.name,propertyName:r.props.propertyName,message:t.result.message,details:t.result.details,success:!1})}),pe(ce(n),"onClear",function(e){var t=ce(n);t.props.onChange&&t.props.onChange(null,{name:t.props.name,propertyName:t.props.propertyName,value:null})}),n}return le(a.prototype,[{key:"render",value:function(){var e=this.onClear,t=this.onUpload;return K("camera",{handleChange:this.handleChange,me:this,onClear:e,onUpload:t,props:this.props,state:this.state})}}]),a}();function fe(e){return void 0===e}function Ve(e){return!fe(e)&&null!==e}function he(e){return Ve(e)&&""!==e}function me(e){return(me="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function ye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ve(e,t){return(ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ge=r(8),we=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ve(e,t)}(o,c.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=be(r),t=n?(t=be(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==me(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function o(e){return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e)).state={},e}return ye(o.prototype,[{key:"componentDidMount",value:function(){this.redrawChart()}},{key:"shouldComponentUpdate",value:function(e){return!ge(this.props,e)}},{key:"componentDidUpdate",value:function(){this.redrawChart()}},{key:"componentWillUnmount",value:function(){Ve(this.state.chart)&&this.state.chart.destroy()}},{key:"redrawChart",value:function(){return K("chart-view-redraw-chart",{chartData:this.getChartData(),divId:this.getDivId(),props:this.props,state:this.state})}},{key:"getDivId",value:function(){return"dwkit-chart-"+this.props.name}},{key:"getChartData",value:function(){var e=[];try{e="string"==typeof this.props.value?JSON.parse(this.props.value):this.props.value}catch(e){console.log("Can't parse to JSON",this.props.value,this)}if(this.props.datasetCustom){var t=this,r=[];return{labels:r=Ve(t.props.dataLabels)?t.props.dataLabels.split(","):r,datasets:[{label:t.props.datasetLabel,steppedLine:t.props.datasetSteppedLine,borderColor:t.props.datasetBorderColor,backgroundColor:t.props.datasetBackgroundColor,fill:t.props.datasetFill,borderWidth:t.props.datasetBorderWidth,data:e}]}}return this.copyObj(e)}},{key:"copyObj",value:function(e){if(null==e||"object"!=me(e))return e;var t,r=e.constructor();for(t in e)e.hasOwnProperty(t)&&(r[t]=this.copyObj(e[t]));return r}},{key:"render",value:function(){return K("chart-view",{divId:this.getDivId(),props:this.props,state:this.state})}}]),o}(),Oe=r(2),Ce=r.n(Oe),ke=r(9),Ee=r.n(ke);function Ae(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Se(e){return(Se="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function Pe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function je(e,t){return(je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _e(e){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var De=r(8),Fe=r(10),Te=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&je(e,t)}(a,c.Component);var e,t,r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=_e(r),t=n?(t=_e(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Se(t)&&"function"!=typeof t?Re(e):t});function a(e){var u;return function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),xe(Re(u=o.call(this,e)),"btnAdd",function(){var e=fe(u.props.defaultrow)?{}:u.props.defaultrow;e.__id="CLIENT_"+Ee.a.v1(),u.fillDefaultValues(e,u.props.columns,u.props.placeholders),u.state.data.push(e),u.props.handleEvent&&u.props.handleEvent({key:u.props.name,propertyName:u.props.propertyName,eventName:"onAdd",parameters:{rowIdx:u.state.data.length-1,row:e}}),u.sendChangesToParent()}),xe(Re(u),"handleChange",function(e,t,r){var n=r.name,o=r.propertyName,a=r.value,i=r.checked,l=r.additionalValues;if(u.props.handleEvent||u.props.onChange){var s=o||n;if(fe(a)&&Ve(i)?e[s]=i:e[s]=a,"object"==Se(l))for(var c in l)e[s+"_"+c]=l[c];u.sendChangesToParent(),t&&t.preventDefault?t.preventDefault():u.forceUpdate()}}),u.state={expanded:{},data:[]},u}return t=[{key:"getDerivedStateFromProps",value:function(e,t){var r=null;return De(t.originalValue,e.value)||((r={}).originalValue=Fe(e.value),e=null==e.value?[]:e.value,Array.isArray(e)?(r.data=Fe(e),r.stringmode=!1):(r.data=e.length?Ce.a.parse(e):[],r.stringmode=!0)),r}}],Pe((e=a).prototype,[{key:"applyCollapseAll",value:function(e){for(var t in e)fe(this.state.expanded[t])&&(this.state.expanded[t]=!1)}},{key:"getFilteredItems",value:function(e,t){return void 0===e?[]:void 0!==t?e.filter(function(e){return t.IsRowMatched(e)}):e}},{key:"btnDelete",value:function(e,t){var r;(this.props.handleEvent||this.props.onChange)&&(r=(t=void 0===t?this.state.data:t)[e],t.splice(e,1),this.props.handleEvent&&this.props.handleEvent({key:this.props.name,propertyName:this.props.propertyName,eventName:"onDelete",parameters:{rowIdx:e,row:r}}),this.sendChangesToParent())}},{key:"btnAddChild",value:function(e,t){var r=(t=void 0===t?fe(this.state.data)?[]:this.state.data:t)[e];(e=fe(this.props.defaultrow)?{}:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ae(Object(r),!0).forEach(function(e){xe(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ae(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},this.props.defaultrow)).__id="CLIENT_"+Ee.a.v1(),this.fillDefaultValues(e,this.props.columns,this.props.placeholders),this.props.parentIdField?(e[this.props.parentIdField]=r[this.props.idField]||r.__id,t.push(e)):(Array.isArray(r[this.props.childrenField])||(r[this.props.childrenField]=[]),r[this.props.childrenField].push(e)),this.props.handleEvent&&this.props.handleEvent({key:this.props.name,propertyName:this.props.propertyName,eventName:"onAddChild",parameters:{rowIdx:t.length-1,row:e}}),this.sendChangesToParent()}},{key:"fillDefaultValues",value:function(e,t,r){if(t&&r)for(var n=0;n<t.length;n++){var o=void 0,a=r[o="object"===Se(t[n])?t[n].key:t[n]];Array.isArray(a)&&0<a.length&&(a=a[0])&&(a.propertyName&&(o=a.propertyName),a.defaultValue&&(e[o]=a.defaultValue))}}},{key:"copyForParentId",value:function(t,r,e){var n=this,o=Fe(r);return o.__id="CLIENT_"+Ee.a.v1(),delete o[this.props.idField],o[this.props.parentIdField]=e,t.filter(function(e){return e[n.props.parentIdField]===(r[n.props.idField]||r.__id)}).forEach(function(e){return n.copyForParentId(t,e,o.__id)}),t.push(o),o}},{key:"resetIdsRecursive",value:function(e){var t=this;e.__id="CLIENT_"+Ee.a.v1(),delete e[this.props.idField],Array.isArray(e[this.props.childrenField])&&e[this.props.childrenField].forEach(function(e){return t.resetIdsRecursive(e)})}},{key:"btnCopy",value:function(e,t){var r,e=(t=t||this.state.data)[e];this.props.parentIdField&&e.hasOwnProperty(this.props.parentIdField)?r=this.copyForParentId(t,e,e[this.props.parentIdField]):(r=Fe(e),this.resetIdsRecursive(r),t.push(r)),this.props.handleEvent&&this.props.handleEvent({key:this.props.name,propertyName:this.props.propertyName,eventName:"onCopy",parameters:{rowIdx:t.length-1,row:r}}),this.sendChangesToParent()}},{key:"onExpand",value:function(e,t){this.state.expanded[e]=t,this.forceUpdate()}},{key:"onDragOver",value:function(e){e.preventDefault()}},{key:"onDragStart",value:function(e,t,r){r.dataTransfer.setData("index",e);var n=r.target;(n=(n=n&&n.parentElement)&&n.parentElement)&&r.dataTransfer.setDragImage($(r.target).parent().parent()[0],0,0),this.state.dragElementIndex=e,this.state.dragRows=t}},{key:"onDragEnd",value:function(e,t){this.state.dragElementIndex=void 0,this.state.dragRows=void 0}},{key:"onDrop",value:function(e,t,r){var n=this.state.dragElementIndex,o=this.state.dragRows,e=e,t=t;return Ve(n)&&(e!==n&&(void 0!==this.props.parentIdField&&""!==this.props.parentIdField&&(o[n][this.props.parentIdField]=t[e][this.props.parentIdField]),t.splice(e,0,o.splice(n,1)[0]),this.sendChangesToParent()),r.preventDefault()),!1}},{key:"sendChangesToParent",value:function(){var e=this.state.data,e=this.state.stringmode?e.length?Ce.a.stringify(e):[]:e;this.props.buildermode||(this.props.onChange?this.props.onChange(null,{name:this.props.name,propertyName:this.props.propertyName,value:e}):this.props.handleEvent({syntheticEvent:null,key:this.props.name,eventName:"onChange",name:this.props.name,value:e,propertyName:this.props.propertyName}))}},{key:"render",value:function(){return K("collection-editor",{applyCollapseAll:this.applyCollapseAll,btnAdd:this.btnAdd,btnAddChild:this.btnAddChild,btnCopy:this.btnCopy,btnDelete:this.btnDelete,getFilteredItems:this.getFilteredItems,handleChange:this.handleChange,me:this,onExpand:this.onExpand,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onDragOver:this.onDragOver,onDrop:this.onDrop,props:this.props,state:this.state})}}]),Pe(e,t),a}();function Ne(e){return(Ne="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function Ie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Le(e,t){return(Le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ue(e){return(Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Be=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Le(e,t)}(o,c.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=Ue(r),t=n?(t=Ue(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Ne(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function o(e){return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e)).state={},e}return Ie(o.prototype,[{key:"render",value:function(){return K("container",{props:this.props})}}]),o}(),Me=r(5),ze=r.n(Me);function Ke(e){return window.DWKitLang&&window.DWKitLang.common&&window.DWKitLang.common.dateFormat?window.DWKitLang.common.dateFormat:e}function qe(e){return window.DWKitLang&&window.DWKitLang.common&&window.DWKitLang.common.timeFormat?window.DWKitLang.common.timeFormat:e}function We(){if(window.DWKitAdminLang&&window.DWKitAdminLang.workflowbar)return window.DWKitAdminLang.workflowbar}function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function He(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qe(e,t){return(Qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Je(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ye(e){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ze(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Xe=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qe(e,t)}(o,c.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=Ye(r),t=n?(t=Ye(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Ge(t)&&"function"!=typeof t?Je(e):t});function o(e){var r;return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),Ze(Je(r=t.call(this,e)),"handleChangeRaw",function(e){e=ze()(e.target.value,r.state.dateFormat),r.onChange(e)}),Ze(Je(r),"onChange",function(e){var t;r.props.readOnly||Ve(r.props.onChange)&&((t=null)!=e&&Ve(e)&&(t="date"===r.props.type?e.format("YYYY-MM-DD"):e.toJSON()),r.props.onChange(null,{propertyName:r.props.propertyName,name:r.props.name,value:t}))}),r.state={},r}return He(o.prototype,[{key:"render",value:function(){var e=this.props.type,t=this.props.value?ze()(this.props.value):void 0;t&&!t.isValid()&&(t=void 0);var r={style:this.props.style,className:this.props.className,onBlur:this.props.onBlur,onClick:this.props.onClick,onFocus:this.props.onFocus,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave},n={};return"date"===e?n.dateFormat=Ke("DD.MM.YYYY"):"time"===e?(n.showTimeSelect=!0,n.showTimeSelectOnly=!0,n.timeIntervals=10,n.dateFormat=qe(),n.dateFormat||(n.dateFormat="HH:mm",n.timeFormat="HH:mm")):"datetime"===e&&(n.showTimeSelect=!0,Ke()?n.dateFormat=Ke()+" "+qe("HH:ss"):(n.dateFormat="DD.MM.YYYY HH:mm",n.timeFormat="HH:mm")),this.state.dateFormat=n.dateFormat,K("date-picker",{controlProps:r,date:t,datePickerProps:n,handleChangeRaw:this.handleChangeRaw,onChange:this.onChange,state:this.state,placeholder:this.placeholder,props:this.props})}}]),o}();function $e(e){return($e="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function et(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tt(e,t){return(tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rt(e){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var nt=r(8),ot=r(10),at=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tt(e,t)}(a,c.Component);var e,t,r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=rt(r),t=n?(t=rt(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==$e(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function a(e){var t;return function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),(t=o.call(this,e)).state={options:[],value:t.props.value},t.pageSize=e.pageSize,t.pageSize||(t.pageSize=100),t}return t=[{key:"getDerivedStateFromProps",value:function(e,t){return e.dataModel!==t.dataModel?{getAdditionalDataForControl:e.getAdditionalDataForControl,dataModel:e.dataModel,needFetch:!0,needValueFetch:!0,filters:e.filters}:e.paging&&e.value!==t.value&&void 0!==e.value?{needValueFetch:!0,value:e.value}:e.filters!=t.filters?{needFetch:!0,filters:e.filters}:null}}],et((e=a).prototype,[{key:"componentDidMount",value:function(){this.GetAdditionalData()}},{key:"shouldComponentUpdate",value:function(e,t){return!nt(this.state,t)||!nt(this.props,e)}},{key:"componentDidUpdate",value:function(e,t){this.GetAdditionalData()}},{key:"GetAdditionalData",value:function(){var r,e,n=this;void 0===this.state.dataModel?void 0!==console&&!0===this.props.buildermode&&console.log("Dictionary: Set DataModel label!"):void 0===this.state.getAdditionalDataForControl?void 0!==console&&!0===this.props.buildermode&&console.log("Dictionary: For paging on server need to set getAdditionalDataForControl func!"):this.state.needFetch?(e={model:(r=this).state.dataModel,filters:this.state.filters},this.props.paging&&(e.startIndex=0,e.pageSize=this.pageSize),this.state.isFetching=!0,this.state.needFetch=!1,this.state.getAdditionalDataForControl(this,e,function(e){var t=e.items,e=e.rowsCount;r.setData({items:t,rowsCount:e,page:0},!0),n.state.needValueFetch&&(n.state.needValueFetch=!1,n.loadCurrentValue())})):this.state.needValueFetch&&(this.state.needValueFetch=!1,this.loadCurrentValue())}},{key:"render",value:function(){var e,t=this,r={};for(e in this.props)"parentIsForm"!==e&&"getAdditionalDataForControl"!==e&&"dataModel"!==e&&"clearable"!==e&&"columns"!==e&&"paging"!==e&&"pageSize"!==e&&"handleEvent"!==e&&"propertyName"!==e&&"textAsValue"!==e&&(r[e]=this.props[e]);return this.props.readOnly&&(r.disabled=!0),r.options=this.state.options,r.onChange=this.onChange.bind(this),this.props.paging&&(r.onSearchChange=this.handleSearchChange.bind(this),r.onClose=this.onClose.bind(this),null!=this.state.open&&(this.state.open?r.open=!0:(r.open=!1,this.state.open=void 0,setTimeout(function(){t.forceUpdate()})))),r.multiple&&(void 0!==r.value&&null!==r.value||(r.value=[]),Array.isArray(r.value)||(r.value=this.getArrayValues(r.value))),r.loading=this.state.isFetching,r.searchQuery=this.state.searchQuery,K("dictionary",{propsControl:r,props:this.props})}},{key:"onChange",value:function(e,t){var r,n=this,o=(t.name,t.value),t=!1;this.props.multiple?Array.isArray(o)&&(r=!1,o.forEach(function(e){"string"==typeof e&&0===e.lastIndexOf("__load",0)&&(r=!0)}),r&&(t=!0)):"string"==typeof o&&0===o.lastIndexOf("__load",0)&&(t=!0),t?(this.state.open=!0,this.setState({isFetching:!0}),this.loadNextPage(),o=this.props.value):Ve(this.state.open)&&(this.state.open=!1);var a=null;this.props.textAsValue||(Array.isArray(o)?(a=new Array,o.forEach(function(t){var e;"string"!=typeof t||0!==t.lastIndexOf("__load",0)||0<(e=n.state.options.filter(function(e){return e.key===t})).length&&a.push(e[0].values)})):0<(t=this.state.options.filter(function(e){return e.key===o})).length?a=t[0].values:(t=this.getCollumnsForFilter())&&(a={},t.split(",").forEach(function(e){a[e]=null}))),this.props.handleEvent&&this.props.handleEvent({syntheticEvent:e,key:this.props.name,eventName:"onChange",name:this.props.name,propertyName:this.props.propertyName,value:o,additionalValues:a})}},{key:"onClose",value:function(){1!=this.state.open&&this.state.searchQuery?(this.state.isFetching=!0,this.state.searchQuery="",this.state.lastLoadPage=-1,this.loadNextPage(!0)):!1===this.state.open&&this.forceUpdate()}},{key:"handleSearchChange",value:function(e,t){var r=t.searchQuery,n=this;n.searchTimeout&&clearTimeout(n.searchTimeout),n.searchTimeout=setTimeout(function(){n.searchTimeout=void 0,n.setState({isFetching:!0,searchQuery:r,lastLoadPage:-1}),n.loadNextPage(!0)},100)}},{key:"loadNextPage",value:function(r){var n=this,e={model:this.state.dataModel},o=this.state.lastLoadPage+1;n.state.searchQuery&&(e.filters=[{column:this.getCollumnsForFilter(),term:"like",value:n.state.searchQuery}]),e.startIndex=o*this.pageSize,e.pageSize=this.pageSize,this.state.getAdditionalDataForControl(this,e,function(e){var t=e.items,e=e.rowsCount;n.setData({items:t,rowsCount:e,page:o},r),r&&n.loadCurrentValue()})}},{key:"setData",value:function(e,t){var r,n=e.items,o=e.rowsCount,e=e.page;if(t){if(o>(r=ot(n)).length&&(u=(null!=this.state.searchQuery?this.state.searchQuery:"")+"...",r.push({key:"__load",value:"__load",text:u})),this.props.clearable&&!this.props.multiple&&r.unshift({key:"__reset",value:"",text:"   "}),this.props.multiple)for(var a=this.getArrayValues(this.props.value),i=0;i<a.length;i++)for(var l=a[i],s=0;s<this.state.options.length;s++){var c=this.state.options[s];l==c.value&&r.unshift(c)}}else{var u=void 0;0<(r=this.state.options).length&&"__load"===r[r.length-1].key&&((u=r.pop()).value="__load_"+e);for(var p=0;p<n.length;p++){for(var d=n[p],f=0;f<r.length;f++)if(r[f].key===d.key){r.splice(f,1);break}r.push(d)}void 0!==u&&o>r.length&&r.push(u)}this.props.textAsValue&&r.forEach(function(e){"__load"!=e.key&&(e.value=e.text)}),this.setState({needFetch:!1,options:r,rowsCount:o,isFetching:!1,lastLoadPage:e}),this.props.handleEvent&&this.props.handleEvent({syntheticEvent:void 0,key:this.props.name,eventName:"onDataReceived",name:this.props.name,propertyName:this.props.propertyName,value:this.props.value,parameters:{options:r}})}},{key:"getArrayValues",value:function(e){var t,e=e;if(!Array.isArray(e)){try{t=JSON.parse(e)}catch(e){}e=t=Array.isArray(t)?t:[e]}return e}},{key:"loadCurrentValue",value:function(){var t=this;if(this.props.value)if(this.props.multiple){for(var r,e=this.getArrayValues(this.props.value),n=[],o=0;o<e.length;o++){for(var a=e[o],i=!1,l=0;l<this.state.options.length;l++)if(this.state.options[l].value==a){i=!0;break}i||n.push(a)}0<n.length&&(this.props.textAsValue?(r=this.state.options,n.forEach(function(e){r.push({value:e,text:e})})):((s={model:this.state.dataModel}).filters=[{column:"__id",term:"in",value:n}],this.state.isFetching=!0,this.state.getAdditionalDataForControl(this,s,function(e){e=e.items,t.addAdditionalOptions(e)})))}else{for(var s,c=!1,u=0;u<this.state.options.length;u++)if(this.state.options[u].value==this.props.value){c=!0;break}c||(this.props.textAsValue?this.state.options.push({value:t.props.value,text:t.props.value}):((s={model:this.state.dataModel}).filters=[{column:"__id",term:"=",value:t.props.value}],this.state.isFetching=!0,this.state.getAdditionalDataForControl(this,s,function(e){e=e.items,t.addAdditionalOptions(e)})))}}},{key:"addAdditionalOptions",value:function(e){if(this.state.isFetching=!1,Array.isArray(e)&&e.length){for(var t=this.state.options,r=e.length-1;0<=r;r--){for(var n=!1,o=0;o<t.length;o++)if(t[o].key==e[r].key){n=!0;break}n||t.unshift(e[r])}this.forceUpdate()}}},{key:"getCollumnsForFilter",value:function(){if(this.props.columns){var e=new RegExp(" asc","gi"),t=this.props.columns.replace(e,""),e=new RegExp(" desc","gi"),t=t.replace(e,"");return e=new RegExp(" ","gi"),t.replace(e,"")}}}]),et(e,t),a}();function it(e){return(it="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function lt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function st(e,t){return(st=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ct(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ut(e){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var dt=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&st(e,t)}(o,c.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=ut(r),t=n?(t=ut(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==it(t)&&"function"!=typeof t?ct(e):t});function o(e){var r;return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),pt(ct(r=t.call(this,e)),"onChange",function(e,t){t.name,t=t.value,1!=r.state.opendialog?Ve(r.props.handleEvent)&&r.props.handleEvent({e:e,key:r.props.name,propertyName:r.props.propertyName,eventName:"onItemClick",parameters:{target:t}}):r.state.opendialog=!1}),pt(ct(r),"onMouseDown",function(e){r.state.opendialog=!Boolean(r.state.opendialog)}),r.state={},r}return lt(o.prototype,[{key:"render",value:function(){var e,n={};for(e in this.props)"imageUrl"!==e&&"defaultValue"!==e&&"value"!==e&&"handleEvent"!==e&&"items"!==e&&"propertyName"!==e&&(n[e]=this.props[e]);return n.options=[],this.props.items.forEach(function(e){var t=!1;if(void 0!==e.visibleCondition&&null!==e.visibleCondition&&""!==e.visibleCondition){var r="return "+e.visibleCondition;try{new Function("",r)()||(t=!0)}catch(e){}}t||n.options.push({value:e.target,text:e.title,target:e.target})}),n.value="",n.onChange=this.onChange,K("dropdown-trigger",{controlProps:n,onMouseDown:this.onMouseDown,props:this.props})}}]),o}();function ft(e){return(ft="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function Vt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ht(e,t){return(ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function mt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yt(e){return(yt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var vt=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ht(e,t)}(a,c.Component);var r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=yt(r),t=n?(t=yt(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==ft(t)&&"function"!=typeof t?mt(e):t});function a(e){var i,t,r,n;return function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),n=function(e,t){var r,n=i.props.additionalParams.handleEvent,o=i.props.onSuccess,a=i.props.onFail;(n||o||a)&&(t.success?(r={name:e.name,size:e.size,token:t.result.properties.Token,success:t.success,properties:t.result.properties},o?o(i.props.name,i.props.propertyName,r):n&&n({key:i.props.name,eventName:"success",name:i.props.name,propertyName:i.props.propertyName,value:t.message,parameters:r})):(t={name:e.name,size:e.size,message:t.message,success:t.success,details:t.details},a?a(i.props.name,i.props.propertyName,t):n&&n({key:i.props.name,eventName:"fail",name:i.props.name,propertyName:i.props.propertyName,parameters:t})),i.props.addRemoveLinks&&setTimeout(function(){e._removeLink.click()},500))},(r="fileUploadSuccess")in(t=mt(i=o.call(this,e)))?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,i.state={commands:e.commands,states:e.states},i}return Vt(a.prototype,[{key:"componentDidMount",value:function(){this.isMount=!0}},{key:"componentWillUnmount",value:function(){this.isMount=!1}},{key:"render",value:function(){var e=this.props.additionalParams.parentItem,t=void 0;this.props.iconFiletypes&&(o=this.props.iconFiletypes.split(","),Array.isArray(o)&&0<o.length&&(t=[],o.forEach(function(e){t.push(e.trim())})));var r={addRemoveLinks:this.props.addRemoveLinks,autoProcessQueue:this.props.autoProcessQueue&&Ve(this.props.postUrl)},n={iconFiletypes:t,showFiletypeIcon:this.props.showFiletypeIcon,postUrl:fe(this.props.postUrl)?"no-url":this.props.postUrl},o={success:this.fileUploadSuccess};return K("dropzone",{componentConfig:n,djsConfig:r,eventHandlers:o,isForm:this.isForm(e),props:this.props})}},{key:"isForm",value:function(e){return e&&("form"===e["data-buildertype"]||"formgroup"===e["data-buildertype"])}},{key:"getEvents",value:function(){return["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","removedfile","thumbnail","error","processing","uploadprogress","sending","success","complete","canceled","maxfilesreached","maxfilesexceeded","processingmultiple","sendingmultiple","successmultiple","completemultiple","canceledmultiple","totaluploadprogress","reset","queuecompleted"]}}]),a}();function bt(e){return(bt="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function gt(e){return function(e){if(Array.isArray(e))return wt(e)}(e)||function(){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}()||function(e){if(e){if("string"==typeof e)return wt(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?wt(e,void 0):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ot(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Ct(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Ot(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Ot(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function kt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Et(e,t){return(Et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function At(e){return(At=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var St=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Et(e,t)}(o,c.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=At(r),t=n?(t=At(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==bt(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function o(e){var r;return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(r=t.call(this,e)).state={},r.props.events.forEach(function(e){var t=r.props.data[e]||{triggers:[]};(fe(t)||t.actions||t.parameters||t.targets||fe(t.triggers[0]))&&(t=r.props.data[e]={active:t.active||!1,triggers:[{actions:t.actions||[],parameters:t.parameters||[{name:"",value:""}],targets:t.targets||[]}]},r.handleChange(e,{},{name:"triggers",checked:t.active||!1,value:t.triggers}))}),r}return kt(o.prototype,[{key:"render",value:function(){var n=[];Array.isArray(this.props.actions)&&this.props.actions.forEach(function(e){"string"==typeof e?n.push({text:e,value:e}):n.push(Ct(Ct({},e),{},{value:e.text}))});var r=this.props.data,e=this.props.events,o=gt(this.props.targets);return e.forEach(function(e){var t;Ve(r)&&(t=r[e])&&t.triggers&&Array.isArray(t.triggers)&&t.triggers.forEach(function(e){e.actions&&e.actions.forEach(function(e){for(var t=!1,r=0;r<n.length;r++)if(e==n[r].value){t=!0;break}t||n.push({text:e,value:e})}),e.targets&&e.targets.forEach(function(e){for(var t=!1,r=0;r<o.length;r++)if(e===o[r].value){t=!0;break}t||o.push({text:e,value:e})})})}),K("events-editor",{actionOptions:[].concat(n),targetOptions:gt(o),items:this.items,me:this,props:this.props})}},{key:"initNewTrigger",value:function(e){var t=this.props.data;t&&(t[e]||(t[e]={}),fe((t=t[e]).triggers)&&(t.triggers=[]),t.triggers.push({actions:[],targets:[],parameters:[{name:"",value:""}]}),this.handleChange(e,{},{name:"triggers",checked:t.active||!1,value:t.triggers}))}},{key:"handleChange",value:function(e,t,r){var n=r.name,o=r.value,a=r.checked;fe(r=this.props.data[e])&&(this.props.data[e]=r={triggers:[]}),fe(o)&&Ve(a)?r[n]=a:r[n]=o,Ve(this.props.onChange)&&this.props.onChange(t,{name:this.props.name,value:this.props.data})}},{key:"actionsOnAddItem",value:function(e,t){t=t.value,Ve(this.props.onAdditionActions)&&this.props.onAdditionActions(e,{value:t})}}]),o}();function Pt(e){return(Pt="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Rt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _t(e,t){return(_t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dt(e){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ft(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Tt=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_t(e,t)}(a,c.Component);var r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=Dt(r),t=n?(t=Dt(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Pt(t)&&"function"!=typeof t?xt(e):t});function a(){var n;!function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Ft(xt(n=o.call.apply(o,[this].concat(t))),"onDropzoneUploadSuccess",function(e,t,r){n.onFileUploaded(r)}),Ft(xt(n),"onDropzoneUploadFail",function(e,t,r){n.onFail(r)}),Ft(xt(n),"onCollectionEditorChange",function(e){var t=e.eventName,r=e.parameters,e=e.value;"onDelete"===t&&n.props.additionalParams.handleEvent({key:n.props.name,propertyName:n.props.propertyName,eventName:t,parameters:r}),"onChange"===t&&n.props.additionalParams.handleEvent({syntheticEvent:null,key:n.props.name,eventName:t,name:n.props.name,value:e,propertyName:n.props.propertyName})}),Ft(xt(n),"onUploadChange",function(e,t){t=t.parameters,n.onFileUploaded(t)}),Ft(xt(n),"onUploadFail",function(e,t){n.onFail(t)}),Ft(xt(n),"nameGetter",function(e){return e[n.props.columns.find(function(e){return"Name"===e.property}).field]}),Ft(xt(n),"contentTypeGetter",function(e){return e[n.props.columns.find(function(e){return"ContentType"===e.property}).field]}),n}return Rt(a.prototype,[{key:"onFileUploaded",value:function(e){var t,r=this.props.value?function(e){if(Array.isArray(e))return jt(e)}(t=this.props.value)||function(){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}()||function(e){if(e){if("string"==typeof e)return jt(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?jt(e,void 0):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}():[],n=e.properties,o={__id:"CLIENT_"+Ee.a.v1()};this.props.columns.filter(function(e){return e.field}).forEach(function(e){o[e.field]=n[e.property]}),r.push(o),this.props.additionalParams.handleEvent({syntheticEvent:null,key:this.props.name,eventName:"onChange",name:this.props.name,value:r,propertyName:this.props.propertyName}),this.props.additionalParams.handleEvent({syntheticEvent:null,key:this.props.name,eventName:"onUploadSuccess",name:this.props.name,parameters:e,propertyName:this.props.propertyName})}},{key:"onFail",value:function(e){this.props.additionalParams.handleEvent({syntheticEvent:null,key:this.props.name,eventName:"onUploadFail",name:this.props.name,parameters:e,propertyName:this.props.propertyName})}},{key:"render",value:function(){var r=this,n=[];this.props.columns.filter(function(e){return e.showcolumn}).forEach(function(e){var t={key:e.field,name:e.title,control:e.control};"Token"===e.property&&(t.additionalData={customNameGetter:r.nameGetter,customContentTypeGetter:r.contentTypeGetter}),n.push(t)});var e={readOnly:this.props.readOnly,value:this.props.value,idField:this.props.idField,downloadUrl:this.props.downloadUrl,columns:n,handleEvent:this.onCollectionEditorChange};return K("files",{editorProps:e,onDropzoneUploadSuccess:this.onDropzoneUploadSuccess,onDropzoneUploadFail:this.onDropzoneUploadFail,onUploadChange:this.onUploadChange,onUploadFail:this.onUploadFail,props:this.props})}}]),a}();function Nt(e){return(Nt="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function It(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Lt(e,t){return(Lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ut(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bt(e){return(Bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Mt=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lt(e,t)}(a,c.Component);var r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=Bt(r),t=n?(t=Bt(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Nt(t)&&"function"!=typeof t?Ut(e):t});function a(e){var r,t,n;return function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),r=o.call(this,e),n=function(e){var t;r.props.buildermode?(t=r.props["data-panes"],Array.isArray(t)&&t.forEach(function(t){e.forEach(function(e){t.psid==e.i&&(t.x=e.x,t.y=e.y,t.w=e.w,t.h=e.h)})})):(r.props.draggable||r.props.resizable)&&r.setCookie(window.location.pathname+"_"+r.props.name,JSON.stringify(e)),Ve(r.props.handleEvent)&&r.props.handleEvent({undefined:void 0,key:r.props.name,eventName:"onLayoutChange",parameters:{layout:e}})},(e="onLayoutChange")in(t=Ut(r))?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,r.state={},r}return It(a.prototype,[{key:"render",value:function(){return K("grid-layout",{getCookie:this.getCookie,setCookie:this.setCookie,me:this,onLayoutChange:this.onLayoutChange,props:this.props})}},{key:"getCookie",value:function(e){return(e=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(e[1]):void 0}},{key:"setCookie",value:function(e,t,r){var n,o=(r=r||{}).expires;"number"==typeof o&&o&&((n=new Date).setTime(n.getTime()+1e3*o),o=r.expires=n),o&&o.toUTCString&&(r.expires=o.toUTCString());var a,i=e+"="+(t=encodeURIComponent(t));for(a in r){i+="; "+a;var l=r[a];!0!==l&&(i+="="+l)}document.cookie=i}}]),a}();function zt(e){return(zt="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function Kt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Wt(e,t,r){return t&&qt(e.prototype,t),r&&qt(e,r),e}var Gt=(Wt(Jt,null,[{key:"Greater",get:function(){return">"}},{key:"Less",get:function(){return">"}},{key:"Equal",get:function(){return"="}},{key:"GreaterOrEqual",get:function(){return">="}},{key:"LessOrEqual",get:function(){return"<="}},{key:"NotEqual",get:function(){return"!="}},{key:"Like",get:function(){return"like"}},{key:"StartsWith",get:function(){return"like*"}},{key:"EndsWith",get:function(){return"*like"}},{key:"IsGreater",value:function(e){return e===Jt.Greater}},{key:"IsLess",value:function(e){return e===Jt.Less}},{key:"IsEqual",value:function(e){return e===Jt.Equal}},{key:"IsGreaterOrEqual",value:function(e){return e===Jt.GreaterOrEqual}},{key:"IsLessOrEqual",value:function(e){return e===Jt.LessOrEqual}},{key:"IsNotEqual",value:function(e){return e===Jt.NotEqual}},{key:"IsLike",value:function(e){return e.toLowerCase()===Jt.Like||"*like*"===e.toLowerCase()}},{key:"IsStartsWith",value:function(e){return e.toLowerCase()===Jt.StartsWith}},{key:"IsEndsWith",value:function(e){return e.toLowerCase()===Jt.EndsWith}},{key:"Evaluate",value:function(e,t,r){if(Jt.IsGreater(r))return Jt.compareWithTypeCheck(e,t,function(e,t){return t<e});if(Jt.IsLess(r))return Jt.compareWithTypeCheck(e,t,function(e,t){return e<t});if(Jt.IsEqual(r))return Jt.compareWithTypeCheck(e,t,function(e,t){return e===t});if(Jt.IsGreaterOrEqual(r))return Jt.compareWithTypeCheck(e,t,function(e,t){return t<=e});if(Jt.IsLessOrEqual(r))return Jt.compareWithTypeCheck(e,t,function(e,t){return e<=t});if(Jt.IsNotEqual(r))return Jt.compareWithTypeCheck(e,t,function(e,t){return e!==t});if(Jt.IsLike(r))return Jt.likeCompare(e,t,function(e,t){return 0<=e.indexOf(t)});if(Jt.IsStartsWith(r))return Jt.likeCompare(e,t,function(e,t){return e.startsWith(t)});if(Jt.IsEndsWith(r))return Jt.likeCompare(e,t,function(e,t){return e.endsWith(t)});throw"Unknown term "+r}},{key:"likeCompare",value:function(e,t,r){return null===e&&null===t||void 0===e&&void 0===t||null!=e&&null!=t&&r(e.toString().toLowerCase(),t.toString().toLowerCase())}},{key:"compareWithTypeCheck",value:function(e,t,r){return null===e&&null===t||void 0===e&&void 0===t||null!=e&&null!=t&&(e instanceof Date&&"string"==typeof t?r(e.getTime(),new Date(t).getTime()):"string"==typeof e&&t instanceof Date?r(new Date(e).getTime(),t.getTime()):e instanceof Date&&t instanceof Date?r(e.getTime(),t.getTime()):zt(e)===zt(t)?r(e,t):r(e,"number"==typeof e&&"string"==typeof t?parseFloat(t):"string"==typeof e&&"number"==typeof t?t.toString():t))}}]),Jt),Ht=(Wt(Qt,[{key:"AddFilter",value:function(e){var r,t,n,o=this,a=e.names,i=e.expected,l=e.term,s=e.id;a.length<1||(r=1===a.length?a[0]:a.sort().join(","),this._innerFilter.hasOwnProperty(r)?t=this._innerFilter[r]:((t=this._innerFilter[r]={}).funcs=[],t.items=[],t.test=function(t){return o._innerFilter[r].funcs.every(function(e){return e(t)})}),n=function(e,t){var r=Object.keys(e).find(function(e){return e.toString().toLowerCase()===t.toLowerCase()});return void 0!==r&&Gt.Evaluate(e[r],i,l)},e=1===a.length?function(e){return n(e,a[0])}:function(t){return a.some(function(e){return n(t,e)})},t.funcs.push(e),t.items.push({expected:i,term:l,id:s}))}},{key:"RemoveFilter",value:function(e){var t,r,n,o=this,a=e.name,i=e.id;void 0!==a&&(r=Array.isArray(a)?(t=1===a.length?a[0]:a.sort().join(","),a):[t=a]),void 0!==a&&void 0===i?delete this._innerFilter[t]:void 0===a&&void 0===i?this._innerFilter={}:(n=function(e,t,r){var n;!o._innerFilter.hasOwnProperty(e)||(n=o._innerFilter[e].items.filter(function(e){return e.id!==r})).length<o._innerFilter[e].items.length&&(delete o._innerFilter[e],n.forEach(function(e){o.AddFilter({names:t,expected:e.expected,term:e.term,id:e.id})}))},void 0!==a&&void 0!==i?n(t,r,i):Object.keys(this._innerFilter).forEach(function(e){n(e,e.split(","),i)}))}},{key:"IsRowMatched",value:function(e){var t=Object.keys(this._innerFilter);if(t.length<=0)return!0;for(var r=0;r<t.length;r++)if(!this._innerFilter[t[r]].test(e))return!1;return!0}},{key:"GetFilterAsObjects",value:function(){var e=this;if(void 0===this._innerFilter)return[];var r=[];return Object.keys(this._innerFilter).forEach(function(t){e._innerFilter[t].items.forEach(function(e){r.push({column:t,value:e.expected,term:e.term})})}),r}}]),Qt);function Qt(e,r){var n=this;if(Kt(this,Qt),this._innerFilter={},void 0!==e&&Array.isArray(e)){if(void 0===r||!Array.isArray(r))throw"columns must be array";e.forEach(function(e){var t;void 0!==e&&(t="*"===e.column?r:e.column.split(",").map(function(e){return e.trim()}),n.AddFilter({names:t,expected:e.value,term:e.term}))})}}function Jt(){Kt(this,Jt)}function Yt(e){return(Yt="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function Zt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Xt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function er(e,t,r){return t&&$t(e.prototype,t),r&&$t(e,r),e}function tr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rr(e,t)}function rr(e,t){return(rr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nr(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e=or(r),t=n?(t=or(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Yt(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t}}function or(e){return(or=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ar=function(){tr(t,c.Component);var e=nr(t);function t(){return Xt(this,t),e.apply(this,arguments)}return er(t,[{key:"render",value:function(){return K("checkbox-formatter",{props:this.props})}}]),t}(),ir=function(){tr(t,c.Component);var e=nr(t);function t(){return Xt(this,t),e.apply(this,arguments)}return er(t,[{key:"render",value:function(){return K("number-formatter",{props:this.props})}}]),t}(),lr=function(){tr(t,c.Component);var e=nr(t);function t(){return Xt(this,t),e.apply(this,arguments)}return er(t,[{key:"render",value:function(){var e,t=ze()(this.props.value),r="";return t.isValid()&&(e=Ke("L"),r=t.format(e)),K("date-formatter",{props:this.props,strValue:r})}}]),t}(),sr=function(){tr(t,c.Component);var e=nr(t);function t(){return Xt(this,t),e.apply(this,arguments)}return er(t,[{key:"render",value:function(){var e,t,r,n=ze()(this.props.value),o="";return n.isValid()&&(r="DD.MM.YYYY HH:mm",(e=Ke())&&(t=qe("HH:mm"),r="".concat(e," ").concat(t)),o=n.format(r)),K("datetime-formatter",{props:this.props,strValue:o})}}]),t}(),cr=function(){tr(t,c.Component);var e=nr(t);function t(){return Xt(this,t),e.apply(this,arguments)}return er(t,[{key:"render",value:function(){var e,t=ze()(this.props.value),r="";return t.isValid()&&(e=Ve(window.DWKitLang)&&Ve(window.DWKitLang.common)&&Ve(window.DWKitLang.common.timeFormat)?window.DWKitLang.common.timeFormat:"HH:mm",r=t.format(e)),K("time-formatter",{props:this.props,strValue:r})}}]),t}(),ur=function(){tr(i,c.Component);var r=nr(i);function i(e){var t;Xt(this,i),(t=r.call(this,e)).state={items:[],sort:"",defaultSort:e.defaultSort,filter:e.filter,pageSize:20,selectedIndexes:[],rowsCount:i.staticIsServerMode(e)?void 0:0};try{t.state.isrtl="rtl"==getComputedStyle(document.getElementsByTagName("html")[0]).direction}catch(e){}return t}return er(i,[{key:"isEditFormModal",value:function(){return"modal"===this.props.editFormShowType}},{key:"isEditFormSidebar",value:function(){return"sidebar"===this.props.editFormShowType}},{key:"isServerMode",value:function(){return i.staticIsServerMode(this.props)}},{key:"refresh",value:function(){var e;this.isServerMode()?this.setState({items:[],selectedIndexes:[],rowsCount:void 0}):(e=Array.isArray(this.props.value)?i.staticGetSortedAndFilteredItems(this.props.value,this.state.filter,this.state.sort,this.props.defaultSort):[],this.setState({items:e,rowsCount:e.length,selectedIndexes:[],originalItems:this.props.value}))}},{key:"resetSelection",value:function(){this.setState({selectedIndexes:[]})}},{key:"render",value:function(){return K("grid-view",{gridColumns:this.getColumns(),gridProps:this.getGridPropsByPagerType(this.props.pagerType),me:this,onRowsSelected:this.onRowsSelected.bind(this),onRowsDeselected:this.onRowsDeselected.bind(this),selectBy:{indexes:this.state.selectedIndexes},gridRowGetter:this.gridRowGetter.bind(this),gridOnRowClick:this.gridOnRowClick.bind(this),handleGridSort:this.handleGridSort.bind(this),state:this.state,props:this.props})}},{key:"getColumns",value:function(){var n=this,e=void 0===this.props.columns?[]:Array.isArray(this.props.columns)?this.props.columns:JSON.parse(this.props.columns);return e.forEach(function(r){null!==r.width&&""!==r.width&&void 0!==r.width&&(r.width=Number(r.width)),!1!==r.sortable&&(r.sortable=!n.props.disableSort),r.filterable=Boolean(n.props.filterRow),r.resizable=Boolean(r.resizable),"number"===r.type?r.formatter=ir:"checkbox"===r.type?r.formatter=ar:"date"===r.type?r.formatter=lr:"time"===r.type?r.formatter=cr:"datetime"===r.type?r.formatter=sr:"custom"===r.type&&(r.getRowMetaData=function(e){return e},r.formatter=function(e){if(fe(r.customFormatter)||"function"!=typeof r.customFormatter){if(n.props.placeholders&&Array.isArray(n.props.placeholders[r.key])&&0<n.props.placeholders[r.key].length){var t=n.props.placeholders[r.key][0];return void 0!==t.propertyName&&""!==t.propertyName||(t.propertyName=r.key),z.a.createElement(N,{key:r.key+"_"+e.dependentValues.__id,model:t,parent:n,row:e.dependentValues,errorOnRow:{},name:n.props.name,buildermode:n.props.buildermode,handleChange:function(){},handleEvent:n.props.handleEvent,getAdditionalDataForControl:n.props.getAdditionalDataForControl,readOnly:n.props.readOnly,uploadUrl:n.props.uploadUrl,downloadUrl:n.props.downloadUrl,data:n.props.data,adaptiveViewType:n.props.adaptiveViewType,controlBarParams:n.props.controlBarParams,createControl:n.props.createControl})}return n.props.buildermode?n.props.createBuilderDropzone(n.props.name,n.props.name,void 0,r.key,r.key):""}return r.customFormatter({row:e.dependentValues,value:e.value,column:r})})}),this.state.isrtl?e.reverse():e}},{key:"getGridPropsByPagerType",value:function(){var e,t={};return"server"===this.props.pagerType&&((e=parseInt(this.props.pageSize))&&(this.state.pageSize=e),t.rowRenderer=z.a.createElement(pr,{error:this.props.error}),fe(this.state.rowsCount)&&(this.state.rowsCount=1)),t}},{key:"getSeletedRowKeys",value:function(){var r=this,n=[];return this.state.selectedIndexes.forEach(function(e){var t;void 0!==(e=r.gridRowGetter(e))&&null!=(t=null==(t=null!==r.props.rowKey&&void 0!==r.props.rowKey&&e.hasOwnProperty(r.props.rowKey)?e[r.props.rowKey]:t)||fe(t)?e.__id:t)&&n.push(t)}),n}},{key:"gridRowGetter",value:function(e){if(!(e<0)){var t,r=this.props.pagerType;return"server"===r&&void 0===this.state.items[e]&&(t=this.state.pageSize,this.loadPage(e,t)),"server"===r?this.state.items[e]:function(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Zt(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Zt(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}({},this.state.items[e])}}},{key:"getSort",value:function(){var e=this.state.sort;return""===e&&void 0!==this.props.defaultSort?this.props.defaultSort:e}},{key:"getFilters",value:function(){return void 0!==this.state.filter?this.state.filter.GetFilterAsObjects():[]}},{key:"loadPage",value:function(e,t){for(var r,i=this,n=0;n<t;n++)this.state.items[n+e]={__loading:!0};void 0===this.props.getAdditionalDataForControl?void 0!==console&&console.log("GridView: For paging on server need to set getAdditionalDataForControl func!"):(r=this.getSort(),this.props.getAdditionalDataForControl(this,{startIndex:e,pageSize:t,filters:this.getFilters(),sort:r},function(e){var t=e.sIndex,r=e.pSize,n=e.rowsCount,o=e.items;if(void 0===n||void 0===o)i.state.rowsCount=0,i.setState({rowsCount:0,items:[]});else{i.state.rowsCount=n;for(var a=0;a<r;a++)a<o.length?i.state.items[t+a]=o[a]:i.state.items[t+a]=void 0;i.forceUpdate()}}))}},{key:"gridOnRowClick",value:function(e,t){var r;void 0!==t&&(r=Date.now(),void 0!==this.rowClickTime&&this.rowClickTime.rowIdx===e&&r-this.rowClickTime.time<=1e3?(this.rowClickTime=void 0,this.onRowDblClick(e,t)):(this.rowClickTime={rowIdx:e,time:r},void 0!==this.props.handleEvent&&this.props.handleEvent({key:this.props.name,propertyName:this.props.propertyName,eventName:"onRowClick",parameters:{rowIdx:e,row:t}})))}},{key:"onRowDblClick",value:function(e,t){void 0!==this.props.handleEvent&&this.props.handleEvent({key:this.props.name,propertyName:this.props.propertyName,eventName:"onRowDblClick",parameters:{rowIdx:e,row:t}})}},{key:"onRowsSelected",value:function(e){this.state.selectedIndexes=this.state.selectedIndexes.concat(e.map(function(e){return e.rowIdx})),void 0!==this.props.handleEvent&&this.props.handleEvent({key:this.props.name,eventName:"onSelectionChanged",propertyName:this.props.propertyName,parameters:{selectedIndexes:this.state.selectedIndexes}}),this.forceUpdate()}},{key:"onRowsDeselected",value:function(e){var t=e.map(function(e){return e.rowIdx});this.state.selectedIndexes=this.state.selectedIndexes.filter(function(e){return-1===t.indexOf(e)}),void 0!==this.props.handleEvent&&this.props.handleEvent({key:this.props.name,eventName:"onSelectionChanged",propertyName:this.props.propertyName,parameters:{selectedIndexes:this.state.selectedIndexes}}),this.forceUpdate()}},{key:"handleGridSort",value:function(e,t){var r={};r.sort="NONE"===t?"":e+" "+t,t=this.props.pagerType,r.items="server"===t?[]:i.staticGetSortedAndFilteredItems(this.props.value,this.state.filter,r.sort,this.props.defaultSort),r.selectedIndexes=[],this.setState(r)}},{key:"handleFilterChange",value:function(e){var t={},r=e.column.key,n="columnfilter_"+r;t.filter=void 0!==this.state.filter?this.state.filter:new Ht([],this.props.columns.map(function(e){return e.key})),t.filter.RemoveFilter({name:r,id:n}),""!==e.filterTerm&&t.filter.AddFilter({names:[r],expected:e.filterTerm,term:Gt.Like,id:n}),i.staticIsServerMode(this.props)?(t.items=[],t.selectedIndexes=[],t.rowsCount=void 0):(t.items=i.staticGetSortedAndFilteredItems(this.props.value,t.filter,this.state.sort,this.props.defaultSort),t.selectedIndexes=[],t.rowsCount=t.items.length),this.setState(t)}},{key:"onClearFilters",value:function(){this.setState({filter:this.props.filter})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidMount",value:function(){this._isMounted=!0,this.recalcSizeParams()}},{key:"recalcSizeParams",value:function(){var e;this._isMounted&&this.props.autoHeight&&(e=window.innerHeight,this.setState({gridHeight:e-this.props.deltaHeight}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var r,n=null,o=t.filter,a=e.filter;return JSON.stringify(o)!==JSON.stringify(a)?(n={filter:e.filter},i.staticIsServerMode(e)?(n.items=[],n.selectedIndexes=t.selectedIndexes,n.rowsCount=void 0):(r=Array.isArray(e.value)?i.staticGetSortedAndFilteredItems(e.value,e.filter,t.sort,e.defaultSort):[],n.items=r,n.selectedIndexes=t.selectedIndexes,n.rowsCount=r.length)):i.staticIsServerMode(e)||t.originalItems===e.value||(n={},r=Array.isArray(e.value)?i.staticGetSortedAndFilteredItems(e.value,t.filter,t.sort,e.defaultSort):[],n.items=r,n.rowsCount=r.length,n.selectedIndexes=t.selectedIndexes,n.originalItems=e.value),n}},{key:"staticIsServerMode",value:function(e){return"server"===e.pagerType}},{key:"staticGetSortedAndFilteredItems",value:function(e,t,r,n){var o=[];if(void 0===e)return o;if(o=void 0!==t?e.filter(function(e){return t.IsRowMatched(e)}):e,"NONE"===(e=r)||""===r){if(void 0===n)return o;e=n}var n=e.indexOf(" "),a=e.substring(0,n),i=e.substring(n+1,e.length);return o.slice(0).sort(function(e,t){return(e=void 0!==e[a]&&null!==e[a]&&void 0!==e[a].toLowerCase?e[a].toLowerCase():e[a])===(t=void 0!==t[a]&&null!==t[a]&&void 0!==t[a].toLowerCase?t[a].toLowerCase():t[a])?0:null==e?1:null==t?-1:"ASC"===i?t<e?1:-1:"DESC"===i?e<t?1:-1:void 0})}}]),i}(),pr=function(){tr(t,c.Component);var e=nr(t);function t(){return Xt(this,t),e.apply(this,arguments)}return er(t,[{key:"setScrollLeft",value:function(e){this.row.setScrollLeft(e)}},{key:"getClassName",value:function(){var t=this;return this.props.row.__loading?"dwkit-gridview-rowloading":void 0!==this.props.row.__id&&null!==this.props.row.__id&&void 0!==this.props.error&&null!==this.props.error&&Array.isArray(this.props.error)&&void 0!==this.props.error.find(function(e){return e.__id===t.props.row.__id})?"dwkit-gridview-rowerror":""}},{key:"render",value:function(){return K("row-loading-renderer",{className:this.getClassName(),me:this,props:this.props,row:this.row})}}]),t}();function dr(e){return(dr="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function fr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Vr(e,t){return(Vr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mr(e){return(mr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var yr=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vr(e,t)}(i,c.Component);var e,t,r,n,a=(r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=mr(r),t=n?(t=mr(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==dr(t)&&"function"!=typeof t?hr(e):t});function i(e){var r,t,n,o;return function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),o=function(e,t){t=t.name,Ve(r.props.handleEvent)&&0!=r.props.handleEvent({e:e,key:r.props.name,eventName:"onItemClick",parameters:{target:t}})&&r.setState({activeitem:t})},(n="handleItemClick")in(t=hr(r=a.call(this,e)))?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,r.state={},Ve(e.value)?r.state.activeitem=e.value:null!=e.activeitem&&(r.state.activeitem=e.activeitem),r}return t=[{key:"getDerivedStateFromProps",value:function(e,t){return t.activeitem!==e.value?{activeitem:e.value}:null}}],fr((e=i).prototype,[{key:"handleItemClick2",value:function(e,t){this.handleItemClick(t,e),t.preventDefault()}},{key:"render",value:function(){var e=this.props["data-items"];return fe(e)||""==e?e=[]:Array.isArray(e)||(e=Ce.a.parse(e)),K("menu-group",{handleItemClick:this.handleItemClick,handleItemClick2:this.handleItemClick2,items:e,me:this,props:this.props,state:this.state})}}]),fr(e,t),i}();function vr(e){return(vr="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function br(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gr(e,t){return(gr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wr(e){return(wr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Or=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gr(e,t)}(t,c.Component);var r,n,e=(r=t,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=wr(r),t=n?(t=wr(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==vr(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function t(){return function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e.apply(this,arguments)}return br(t.prototype,[{key:"render",value:function(){var e,t={};for(e in this.props)"additionalParams"!==e&&"items"!==e&&"propertyName"!==e&&(t[e]=this.props[e]);var r=this.props.additionalParams.model,n=this.props.additionalParams.parentItem,o=this.props.additionalParams.handleEvent;return t.defaultValue=r.defaultvalue,t.size=r.size,he(r.label)&&(t.label=r.label),t.labelPosition=r.labelPosition,t.type=r.type,t.disabled=r.disabled,t.transparent=r.transparent,t.fluid=r.fluid,t.readOnly=r.readOnly||this.props.readOnly,t.placeholder=r.placeholder,null==t.value&&(t.value=""),t.error=Boolean(this.props.error),t.format=r.format||void 0,t.mask=r.mask||void 0,t.onValueChange=function(e){o({key:t.name,propertyName:t.propertyName,eventName:"onChange",name:t.name,value:Number(e.value)})},K("number-format",{isForm:this.isForm(n),props:this.props,propsControl:t})}},{key:"isForm",value:function(e){return null!=e&&("form"===e["data-buildertype"]||"formgroup"===e["data-buildertype"])}}]),t}();function Cr(e){return(Cr="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function kr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Er(e,t){return(Er=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ar(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sr(e){return(Sr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Pr=r(8),jr=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Er(e,t)}(s,c.Component);var r,n,l=(r=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=Sr(r),t=n?(t=Sr(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Cr(t)&&"function"!=typeof t?Ar(e):t});function s(){var n;!function(e){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this);for(var e,t,r,o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return r=function(e,t){var r=t.name,t=t.value;n.props.onChange?n.props.onChange(e,{name:n.props.name,propertyName:n.props.propertyName,value:t}):n.props.handleEvent?n.props.handleEvent({syntheticEvent:e,key:n.props.name,eventName:"onChange",name:r,value:t,propertyName:n.props.propertyName}):console.error("Set onChange property for RadioGroup!")},(t="onChange")in(e=Ar(n=l.call.apply(l,[this].concat(a))))?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,n}return kr(s.prototype,[{key:"shouldComponentUpdate",value:function(e){return!Pr(this.props,e)}},{key:"render",value:function(){return K("radio-group",{props:this.props,onChange:this.onChange.bind(this)})}}]),s}();function Rr(e){return(Rr="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function _r(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function xr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Dr(e,t){return(Dr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tr(e){return(Tr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ir=r(8),Lr=r(10),Ur=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dr(e,t)}(s,c.Component);var e,t,r,n,o=(r=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=Tr(r),t=n?(t=Tr(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Rr(t)&&"function"!=typeof t?Fr(e):t});function s(e){var l;return function(e){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this),Nr(Fr(l=o.call(this,e)),"handleChange",function(e,t,r){var n=r.name,o=r.propertyName,a=r.value,i=r.checked,r=r.parameters;(l.props.controlProps.handleEvent||l.props.controlProps.buildermode)&&(void 0===o&&(o=n),r&&void 0!==r.index&&((n=l.state.items)[r.index]=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_r(Object(r),!0).forEach(function(e){Nr(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_r(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},e),e=n[r.index]),fe(a)&&Ve(i)?e[o]=i:e[o]=a,l.isServerMode()?l.forceUpdate():(l.sendChangesToParent(),t&&t.preventDefault?t.preventDefault():l.forceUpdate()))}),Nr(Fr(l),"loadNextPage",function(){var e=l.state.pageSize,t=0;Ve(l.state.items)&&(t=l.state.items.length),l.loadPage(t,e)}),l.psTemplate="template",l.state={items:[],sort:"",filter:e.filter,firstLoad:!e.controlProps.buildermode&&s.staticIsServerMode(e),pageSize:e.pageSize||20},l}return t=[{key:"getDerivedStateFromProps",value:function(e,t){var r,n={needUpdate:!1};return Ir(t.filter,e.filter)?s.staticIsServerMode(e)||Ir(t.originalItems,e.value)||(r=s.staticGetSortedAndFilteredItems(e.value,t.filter,t.sort,e.defaultSort),n.items=r,n.rowsCount=r.length,n.selectedIndexes=[],n.originalItems=s.copyObj(e.value),n.needUpdate=!0):(n.filter=e.filter,n.needUpdate=!0,s.staticIsServerMode(e)?(n.items=[],n.firstLoad=!0,n.rowsCount=void 0):(e=s.staticGetSortedAndFilteredItems(e.value,e.filter,t.sort,e.defaultSort),n.items=e,n.selectedIndexes=[],n.rowsCount=e.length)),n}},{key:"staticIsServerMode",value:function(e){return e.pagerType&&"server"===e.pagerType.toLowerCase()}},{key:"staticCheckData",value:function(e){if(e=e||[],Array.isArray(e))e=Lr(e);else try{e=Ce.a.parse(e)}catch(e){}return e}},{key:"staticGetSortedAndFilteredItems",value:function(e,t,r,n){var o=s.staticCheckData(e);if(void 0===o)return o;if(Array.isArray(o)&&0<o.length)for(var a in o)o[a].__originalIndex=a,a++;if(void 0!==t&&(o=o.filter(function(e){return t.IsRowMatched(e)})),"NONE"===(e=r)||""===r){if(void 0===n)return o;e=n}var n=e.indexOf(" "),i=e.substring(0,n),l=e.substring(n+1,e.length);return o.sort(function(e,t){return(e=void 0!==e[i]&&null!==e[i]&&void 0!==e[i].toLowerCase?e[i].toLowerCase():e[i])===(t=void 0!==t[i]&&null!==t[i]&&void 0!==t[i].toLowerCase?t[i].toLowerCase():t[i])?0:null==e?1:null==t?-1:"ASC"===l?t<e?1:-1:"DESC"===l?e<t?1:-1:void 0})}},{key:"copyObj",value:function(e){if(null==e||"object"!=Rr(e))return e;var t,r=e.constructor();for(t in e)e.hasOwnProperty(t)&&(r[t]=this.copyObj(e[t]));return r}}],xr((e=s).prototype,[{key:"shouldComponentUpdate",value:function(e,t){return!!t.needUpdate||!Ir(this.props,e)}},{key:"render",value:function(){return K("repeater",{isServerMode:this.isServerMode(),loadNextPage:this.loadNextPage,me:this,props:this.props,psTemplate:this.psTemplate,state:this.state,handleChange:this.handleChange})}},{key:"sendChangesToParent",value:function(){var e=s.copyObj(this.state.items);if(Array.isArray(e)&&0<e.length)for(var t in e)delete e[t].__originalIndex;var r="string"==typeof this.props.value?Ce.a.stringify(e):e;this.props.controlProps.buildermode?this.props.value=r:this.props.controlProps.handleEvent({syntheticEvent:null,key:this.props.name,propertyName:this.props.propertyName,eventName:"onChange",name:this.name,value:r})}},{key:"loadPage",value:function(o,e){var t,a=this;this.props.controlProps&&void 0!==this.props.controlProps.getAdditionalDataForControl?(""===(t=this.state.sort)&&void 0!==this.props.defaultSort&&(t=this.props.defaultSort),this.state.loading=!0,this.forceUpdate(),this.props.controlProps.getAdditionalDataForControl(this,{startIndex:o,pageSize:e,filters:void 0!==this.state.filter?this.state.filter.GetFilterAsObjects():[],sort:t},function(e){e.sIndex,e.pageSize;var t=e.rowsCount,r=e.items;if(void 0!==t&&void 0!==r&&(a.state.rowsCount=t,a.state.items.length==o))for(var n=0;n<r.length;n++)a.state.items.push(r[n]);a.state.loading=!1,a.forceUpdate()})):void 0!==console&&console.log("Repeater: For paging on server need to set getAdditionalDataForControl func!")}},{key:"isServerMode",value:function(){return s.staticIsServerMode(this.props)}}]),xr(e,t),s}();function Br(e){return(Br="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function Mr(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function zr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Mr(Object(r),!0).forEach(function(e){Hr(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Mr(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Kr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qr(e,t){return(qr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gr(e){return(Gr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Qr=r(8),Jr=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qr(e,t)}(a,c.Component);var r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=Gr(r),t=n?(t=Gr(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Br(t)&&"function"!=typeof t?Wr(e):t});function a(){var n;!function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Hr(Wr(n=o.call.apply(o,[this].concat(t))),"handleEvent",function(e){e.parameters||(e.parameters={}),e.parameters.row||(e.parameters.row=n.props.item),"onChange"===e.eventName?(e.parameters.index||(e.parameters.index=n.props.index),n.props.handleChange(n.props.item,e.syntheticEvent,e)):(e.parameters.index||(n.props.item&&n.props.item.__originalIndex?e.parameters.index=n.props.item.__originalIndex:e.parameters.index=n.props.index),n.props.controlProps.handleEvent(e))}),Hr(Wr(n),"getAdditionalDataForControl",function(e,t,r){return(t=t||{}).row||(t.row=n.props.item),n.props.controlProps.getAdditionalDataForControl(e,t,r)}),n}return Kr(a.prototype,[{key:"shouldComponentUpdate",value:function(e){return!Qr(this.props,e)}},{key:"render",value:function(){var e=this.props.controlProps.createBuilderDropzone,t=this.props.model,r=this.props.index+"_",n=this.props.psTemplate,o=this.props.controlProps.createControls(this.props.parent,zr(zr({},this.props.controlProps),{},{model:t,parentPlaceholder:n,data:this.props.item,errors:this.props.errors,needCheckReplace:!this.props.controlProps.buildermode,formData:this.props.data,parentItem:this.props.parentItem,handleEvent:this.handleEvent,getAdditionalDataForControl:this.getAdditionalDataForControl}));return this.props.includeDropzone&&e&&(0<o.length&&0<t.length&&o.unshift(e(r+"repeter_dropzone_header",this.props.parentItem.key,void 0,void 0,n)),o.push(e(r+"repeter_dropzone_footer",this.props.parentItem.key,t[t.length-1].key,void 0,n))),o}}]),a}(),Yr=r(11),Zr=r.n(Yr);function Xr(e){return(Xr="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function $r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function en(e,t){return(en=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tn(e){return(tn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var rn=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&en(e,t)}(o,c.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=tn(r),t=n?(t=tn(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Xr(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function o(e){return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e)).state={value:""},e}return $r(o.prototype,[{key:"render",value:function(){var e,t={};for(e in this.props)"value"!==e&&"handleEvent"!==e&&(t[e]=this.props[e]);return K("search",{controlProps:t,handleResultSelect:this.handleResultSelect.bind(this),handleSearchChange:this.handleSearchChange.bind(this),state:this.state})}},{key:"resetSearch",value:function(){this.setState({isLoading:!1,results:[]})}},{key:"handleResultSelect",value:function(e,t){t=t.result,Ve(this.props.handleEvent)&&this.props.handleEvent({key:this.props.name,propertyName:this.props.propertyName,eventName:"onSelect",parameters:t})}},{key:"handleSearchChange",value:function(e,t){var t=t.value,r=this;r.setState({isLoading:!0,value:t}),setTimeout(function(){return null===r.state.value||void 0===r.state.value||r.state.value.length<2?r.resetSearch():void r.search(r.state.value)},200)}},{key:"search",value:function(e){var t=this,r=this.props.url;r+=this.props.url.includes("?")?"&":"?",r+="term="+e,Zr()(r,{credentials:"same-origin"}).then(function(e){return e.json()}).then(function(e){t.setState({isLoading:!1,results:e})}).catch(function(e){fe(console)?alert(e):console.error(e)})}}]),o}();function nn(e){return(nn="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function on(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function an(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?on(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):on(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function ln(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function sn(e,t){return(sn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cn(e){return(cn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var un=r(10),pn=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sn(e,t)}(o,c.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=cn(r),t=n?(t=cn(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==nn(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function o(e){return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e)).state={},e}return ln(o.prototype,[{key:"render",value:function(){var e,n=this,a=this,i={};for(e in this.props)"additionalParams"!==e&&"items"!==e&&"propertyName"!==e&&(i[e]=this.props[e]);var t,r,o=this.props.additionalParams.model,l=this.props.additionalParams.data,s=this.props.additionalParams.errors,c=this.props.additionalParams.children,u=this.props.additionalParams.parentItem,p=this.props.additionalParams.handleEvent,d=o["data-buildertype"];if("header"===d)t=K(d,{props:this.props,propsControl:i,model:o});else if("button"===d)i.floated=o.floated,i.size=""!==o.size?o.size:null,i.content=this.props.content,i.basic=o.basic,i.circular=o.circular,i.compact=o.compact,i.disabled=o.disabled,i.fluid=o.fluid,i.primary=o.primary,i.secondary=o.secondary,i.link=o.link,o.icon&&(i.icon=o.icon),void 0!==p&&(r=i.onClick,i.onClick=function(e){r&&r(e),e.currentTarget&&e.currentTarget.classList&&e.currentTarget.classList.add("loading");var t=p({syntheticEvent:e,key:i.name,eventName:"onClick"});return e.currentTarget&&e.currentTarget.classList&&e.currentTarget.classList.remove("loading"),t}),t=K(d,{propsControl:i,isForm:this.isForm(u)});else if("label"===d)t=K(d,{props:this.props,propsControl:i,model:o});else if("message"===d)t=K(d,{props:this.props,propsControl:i,model:o});else if("input"===d)i.defaultValue=o.defaultvalue,i.size=o.size,he(o.label)&&(i.label=o.label),i.keyboardType=o.keyboardType,i.labelPosition=o.labelPosition,i.placeholder=o.placeholder,i.type=o.type,i.disabled=o.disabled,i.transparent=o.transparent,i.fluid=o.fluid,i.readOnly=o.readOnly||this.props.readOnly,null!=p&&(i.onChange=function(e,t){var r=t.name,n=t.value,o=n;"number"===i.type&&(""==o?o=void 0:"string"!=typeof o||"."!=(t=o[o.length-1])&&","!=t&&(o=Number(o),Number.isNaN(o)&&(o=n))),p({syntheticEvent:e,key:i.name,propertyName:a.props.propertyName,eventName:"onChange",name:r,value:o})}),null==i.value&&(i.value=""),i.error=Boolean(this.props.error),t=K(d,{isForm:this.isForm(u),props:this.props,propsControl:i});else if("textarea"===d)delete i.autoHeight,i.placeholder=o.placeholder,i.keyboardType=o.keyboardType,i.rows=null!==o.rows&&void 0!==o.rows?Number(o.rows):void 0,void 0!==o.label&&""!==o.label&&(i.label=o.label),i.readOnly=o.readOnly||this.props.readOnly,null!==p&&(i.onChange=function(e,t){var r=t.name,t=t.value;p({syntheticEvent:e,key:i.name,propertyName:a.props.propertyName,eventName:"onChange",name:r,value:t})}),null==i.value&&(i.value=""),t=K(d,{isForm:this.isForm(u),props:this.props,propsControl:i});else if("checkbox"===d)void 0!==o.label&&""!==o.label&&(i.label=o.label),i.placeholder=o.placeholder,i.type=o.type,i.disabled=o.disabled,i.fitted=o.fitted,i.indeterminate=o.indeterminate,i.readOnly=o.readOnly||this.props.readOnly,i.slider=o.slider,i.toggle=o.toggle,null!==p&&(i.onChange=function(e,t){var r=t.name,t=t.checked;p({syntheticEvent:e,key:i.name,propertyName:a.props.propertyName,eventName:"onChange",name:r,value:t})}),void 0!==l&&("boolean"==typeof variable?i.checked=l[i.name]:"true"===l[i.name]||"1"===l[i.name]?i.checked=!0:"false"===l[i.name]||"0"===l[i.name]?i.checked=!1:i.checked=Boolean(l[i.name])),s&&Ve(s[o.key])&&1==Boolean(s[o.key])&&(he(i.className)?i.className+=" error":i.className="error"),t=K(d,{isForm:this.isForm(u),propsControl:i});else if("dropdown"===d){var f,l=[];if(void 0!==o["data-elements"]&&(l=Array.isArray(o["data-elements"])?o["data-elements"]:Ce.a.parse(o["data-elements"])),void 0!==o.label&&""!==o.label&&(i.label=o.label),o.clearable&&!o.multiple&&(l=un(l)).unshift({key:"__reset",value:"",text:"   "}),i.defaultValue=o.defaultvalue,i.placeholder=o.placeholder,i.options=l,i.fluid=o.fluid,i.selection=o.selection,i.multiple=o.multiple,i.search=o.search,i.disabled=o.disabled||o.readOnly||this.props.readOnly,s&&void 0!==s[o.key]&&(i.error=Boolean(i.error)),null!==p&&(i.onChange=function(e,t){var r=t.name,t=t.value;p({syntheticEvent:e,key:i.name,propertyName:a.props.propertyName,eventName:"onChange",name:r,value:t})}),i.allowAdditions=o.allowAddItems,i.allowAdditions&&(i.onAddItem=function(e,t){var r=t.value,t=un(i.value);Array.isArray(t)?t.includes(r)||t.push(r):t=[r],i.onChange(e,{name:i.name,value:t})}),i.multiple){if(void 0!==i.value&&null!==i.value||(i.value=[]),!Array.isArray(i.value)){try{f=Ce.a.parse(i.value)}catch(e){}Array.isArray(f)||(f=[i.value]),i.value=f}i.allowAdditions&&this.dropdownCheckAdditional(i.value,i.options)}t=K(d,{isForm:this.isForm(u),props:this.props,propsControl:i})}else if("statistic"===d)u=[],void 0!==o["data-elements"]&&(u=Array.isArray(o["data-elements"])?o["data-elements"]:Ce.a.parse(o["data-elements"])),t=K(d,{items:u,model:o,propsControl:i});else if("image"===d)t=K(d,{me:a,model:o,props:this.props,propsControl:i});else if("form"===d)t=K(d,{propsControl:i,children:c,model:o});else if("formgroup"===d)t=K(d,{propsControl:i,widths:o.widths,widthsCustom:o.widthsCustom,children:c,orientation:o.orientation});else if("breadcrumb"===d){var V=[];if(Array.isArray(this.props.items))for(var h=0;h<this.props.items.length;h++)!function(e){var t=n.props.items[e],r={key:e};r.active=t.active,r.href=t.url,null!==p&&(r.onClick=function(e){p({syntheticEvent:e,key:i.name,eventName:"onItemClick",parameters:{target:t.url}}),e.preventDefault()}),V.push({childProps:an({},r),text:Ve(t.text)?t.text:"<not set>"}),e<n.props.items.length-1&&(e={key:e+"_d"},""!==t.divider&&(e.icon=t.divider),V.push({dividerProps:an({},e),isDivider:!0}))}(h);t=K(d,{children:V,propsControl:i})}else t=K("unknown",{props:this.props,type:d});return t}},{key:"isForm",value:function(e){return null!=e&&("form"===e["data-buildertype"]||"formgroup"===e["data-buildertype"])}},{key:"dropdownCheckAdditional",value:function(e,n){Array.isArray(e)&&e.forEach(function(e){for(var t=!1,r=0;r<n.length;r++)if(e===n[r].value){t=!0;break}0==t&&n.push({value:e,text:e})})}}]),o}();function dn(e){return(dn="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function fn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Vn(e,t){return(Vn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mn(e){return(mn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var vn=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vn(e,t)}(a,c.Component);var r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=mn(r),t=n?(t=mn(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==dn(t)&&"function"!=typeof t?hn(e):t});function a(){var n;!function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return yn(hn(n=o.call.apply(o,[this].concat(t))),"onUpload",function(e,t){var r=hn(n),e={name:e.name,token:t.result.properties.Token,success:t.success,properties:t.result.properties};t.success?r.props.onChange&&r.props.onChange(null,{name:r.props.name,propertyName:r.props.propertyName,value:t.result.properties.Token,parameters:e}):r.props.onUploadFail&&r.props.onUploadFail(null,{name:r.props.name,propertyName:r.props.propertyName,message:t.result.message,details:t.result.details,success:!1})}),yn(hn(n),"onClear",function(e){var t=hn(n);t.props.onChange&&t.props.onChange(null,{name:t.props.name,propertyName:t.props.propertyName,value:null})}),n}return fn(a.prototype,[{key:"render",value:function(){var e=this.onClear,t=this.onUpload;return K("signature",{handleChange:this.handleChange,me:this,onClear:e,onUpload:t,props:this.props,state:this.state})}}]),a}();function bn(e){return(bn="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function gn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wn(e,t){return(wn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function On(e){return(On=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Cn=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wn(e,t)}(o,c.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=On(r),t=n?(t=On(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==bn(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function o(e){return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e)).state={},e}return gn(o.prototype,[{key:"render",value:function(){var e={name:this.props.name,className:this.props["style-customcss"],style:this.props.style,"data-buildertype":this.props["data-buildertype"]};return K("static-content",{props:this.props,spanProps:e})}}]),o}();function kn(e){return(kn="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function En(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function An(e,t){return(An=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pn(e){return(Pn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var jn=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&An(e,t)}(i,c.Component);var e,t,r,n,a=(r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=Pn(r),t=n?(t=Pn(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==kn(t)&&"function"!=typeof t?Sn(e):t});function i(e){var r,t,n,o;return function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),o=function(e,t){t=t.activeIndex,r.props.buildermode&&r.forceUpdate(),window&&window.document&&setTimeout(function(){var e=window.document.createEvent("UIEvents");e.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(e)},50),Ve(r.props.handleEvent)&&r.props.handleEvent({e:e,key:r.props.name,eventName:"onTabChange",parameters:{targetIndex:t,pane:r.props["data-panes"][t]}})},(n="onTabChange")in(t=Sn(r=a.call(this,e)))?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,r.state={},Ve(e.value)?r.state.activeitem=e.value:null!=e.activeitem&&(r.state.activeitem=e.activeitem),r}return t=[{key:"getDerivedStateFromProps",value:function(e,t){return t.activeitem!==e.value?{activeitem:e.value}:null}}],En((e=i).prototype,[{key:"render",value:function(){var e=this.getPanes(this.props["data-panes"]);return K("tab-group",{onTabChange:this.onTabChange,panes:e,props:this.props})}},{key:"getPanes",value:function(e){var t=[];if(Array.isArray(e))for(var r=0;r<e.length;r++){var n=e[r];if(void 0!==n.visibleCondition&&null!==n.visibleCondition&&""!==n.visibleCondition){var o="return "+n.visibleCondition;try{if(!new Function("data",o)(this.props.data))continue}catch(e){}}t.push({menuItem:n.title,pane:{key:n.psid,className:"top",content:this.renderPanel(n)}})}return t}},{key:"renderPanel",value:function(e){var t,r,n=void 0;return Ve(this.props.placeholders)&&Array.isArray(this.props.placeholders[e.psid])&&0<this.props.placeholders[e.psid].length?(t=this.props.placeholders[e.psid])&&(n=this.props.createControls(this,{model:t,parentPlaceholder:e.psid,data:this.props.data,formData:this.props.data,errors:this.props.errors,buildermode:this.props.buildermode,parentItem:this.props.model,children:this.props.children,handleEvent:this.props.handleEvent,readOnlyControls:this.props.readOnlyControls,hideControls:this.props.hideControls,getFormFunc:this.props.getFormFunc,getAdditionalDataForControl:this.props.getAdditionalDataForControl,readOnly:this.props.readOnly,disableRefs:this.props.disableRefs,uploadUrl:this.props.uploadUrl,downloadUrl:this.props.downloadUrl,extendedData:this.props.extendedData,controlsToReplace:this.props.controlsToReplace,needCheckReplace:this.props.needCheckReplace,eventOnEdit:this.props.eventOnEdit,eventOnDelete:this.props.eventOnDelete,eventOnCopy:this.props.eventOnCopy,externalControlRender:this.props.externalControlRender,externalControlList:this.props.externalControlList,adaptiveViewType:this.props.adaptiveViewType}),r=e.psid,this.props.buildermode&&this.props.createBuilderDropzone&&(0<n.length&&0<t.length&&n.unshift(this.props.createBuilderDropzone(r+"tab_dropzone_header",this.props.name,void 0,e.title,e.psid)),n.push(this.props.createBuilderDropzone(r+"tab_dropzone_footer",this.props.name,t[t.length-1].key,e.title,e.psid)))):this.props.buildermode&&this.props.createBuilderDropzone&&(n=this.props.createBuilderDropzone("tab_dropzone_footer",this.props.name,void 0,e.title,e.psid)),n}}]),En(e,t),i}();function Rn(e){return(Rn="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function _n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xn(e,t){return(xn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dn(e){return(Dn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Fn=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xn(e,t)}(o,c.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=Dn(r),t=n?(t=Dn(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Rn(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function o(e){return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e)).state={},e}return _n(o.prototype,[{key:"render",value:function(){var e=this.getPanels(this.props.panels);return K("accordion",{panels:e,props:this.props})}},{key:"getPanels",value:function(e){var t=[];if(Array.isArray(e))for(var r=0;r<e.length;r++){var n=e[r];if(void 0!==n.visibleCondition&&null!==n.visibleCondition&&""!==n.visibleCondition){var o="return "+n.visibleCondition;try{if(!new Function("data",o)(this.props.data))continue}catch(e){}}t.push({key:n.psid,title:n.title,content:{content:this.renderPanel(n)}})}return t}},{key:"renderPanel",value:function(e){var t,r,n=void 0;return Ve(this.props.placeholders)&&Array.isArray(this.props.placeholders[e.psid])&&0<this.props.placeholders[e.psid].length?(t=this.props.placeholders[e.psid])&&(n=this.props.createControls(this,{model:t,parentPlaceholder:e.psid,data:this.props.data,formData:this.props.data,errors:this.props.errors,buildermode:this.props.buildermode,parentItem:this.props.model,children:this.props.children,handleEvent:this.props.handleEvent,readOnlyControls:this.props.readOnlyControls,hideControls:this.props.hideControls,getFormFunc:this.props.getFormFunc,getAdditionalDataForControl:this.props.getAdditionalDataForControl,readOnly:this.props.readOnly,disableRefs:this.props.disableRefs,uploadUrl:this.props.uploadUrl,downloadUrl:this.props.downloadUrl,extendedData:this.props.extendedData,controlsToReplace:this.props.controlsToReplace,needCheckReplace:this.props.needCheckReplace,eventOnEdit:this.props.eventOnEdit,eventOnDelete:this.props.eventOnDelete,eventOnCopy:this.props.eventOnCopy,externalControlRender:this.props.externalControlRender,externalControlList:this.props.externalControlList,adaptiveViewType:this.props.adaptiveViewType}),r=e.psid,this.props.buildermode&&this.props.createBuilderDropzone&&(0<n.length&&0<t.length&&n.unshift(this.props.createBuilderDropzone(r+"tab_dropzone_header",this.props.name,void 0,e.title,e.psid)),n.push(this.props.createBuilderDropzone(r+"tab_dropzone_footer",this.props.name,t[t.length-1].key,e.title,e.psid)))):this.props.buildermode&&this.props.createBuilderDropzone&&(n=this.props.createBuilderDropzone("tab_dropzone_footer",this.props.name,void 0,e.title,e.psid)),n}}]),o}();function Tn(e){return(Tn="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function Nn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function In(e,t){return(In=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ln(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Un(e){return(Un=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Bn=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&In(e,t)}(a,c.Component);var e,t,r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=Un(r),t=n?(t=Un(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Tn(t)&&"function"!=typeof t?Ln(e):t});function a(e){var t,r,n;return function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),t=o.call(this,e),n=function(e){null!=t.props.handleEvent&&t.props.handleEvent({syntheticEvent:e,key:t.props.name,propertyName:t.props.propertyName,eventName:"onClick"})},(e="onClick")in(r=Ln(t))?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,t.state={},t}return t=[{key:"copyObj",value:function(e){if(null==e||"object"!=Tn(e))return e;var t,r=e.constructor();for(t in e)e.hasOwnProperty(t)&&(r[t]=this.copyObj(e[t]));return r}}],Nn((e=a).prototype,[{key:"render",value:function(){var e={className:this.props.className,style:this.props.style};return this.props.activeEvent&&(e.onClick=this.onClick.bind(this)),K("card",{props:this.props,propsControls:e,me:this})}},{key:"renderPanel",value:function(e){var t,r,n=void 0;return null!=this.props.placeholders&&Array.isArray(this.props.placeholders[e])&&0<this.props.placeholders[e].length?(t=this.props.placeholders[e])&&(n=this.props.createControls(this,{model:t,parentPlaceholder:e,data:this.props.data,formData:this.props.data,errors:this.props.errors,buildermode:this.props.buildermode,parentItem:this.props.model,children:this.props.children,handleEvent:this.props.handleEvent,hideControls:this.props.hideControls,readOnlyControls:this.props.readOnlyControls,getFormFunc:this.props.getFormFunc,getAdditionalDataForControl:this.props.getAdditionalDataForControl,readOnly:this.props.readOnly,disableRefs:this.props.disableRefs,uploadUrl:this.props.uploadUrl,downloadUrl:this.props.downloadUrl,extendedData:this.props.extendedData,controlsToReplace:this.props.controlsToReplace,needCheckReplace:this.props.needCheckReplace,eventOnEdit:this.props.eventOnEdit,eventOnDelete:this.props.eventOnDelete,eventOnCopy:this.props.eventOnCopy,externalControlRender:this.props.externalControlRender,externalControlList:this.props.externalControlList,adaptiveViewType:this.props.adaptiveViewType}),r=e,this.props.buildermode&&this.props.createBuilderDropzone&&(0<n.length&&0<t.length&&n.unshift(this.props.createBuilderDropzone(r+"tab_dropzone_header",this.props.name,void 0,e,e)),n.push(this.props.createBuilderDropzone(r+"tab_dropzone_footer",this.props.name,t[t.length-1].key,e,e)))):this.props.buildermode&&this.props.createBuilderDropzone&&(n=this.props.createBuilderDropzone("tab_dropzone_footer",this.props.name,void 0,e,e)),n}}]),Nn(e,t),a}();function Mn(e){return(Mn="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function zn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Kn(e,t){return(Kn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qn(e){return(qn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Wn=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kn(e,t)}(t,c.Component);var r,n,e=(r=t,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=qn(r),t=n?(t=qn(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Mn(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function t(){return function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e.apply(this,arguments)}return zn(t.prototype,[{key:"componentDidMount",value:function(){this.props.onMount(this)}},{key:"render",value:function(){return K("tree-picker-header",{props:this.props})}}]),t}();function Gn(e){return(Gn="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function Hn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Qn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Jn(e,t){return(Jn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zn(e){return(Zn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $n=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jn(e,t)}(a,c.Component);var r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=Zn(r),t=n?(t=Zn(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Gn(t)&&"function"!=typeof t?Yn(e):t});function a(){var i;!function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Xn(Yn(i=o.call.apply(o,[this].concat(t))),"onChange",function(t){var e,r=Yn(i),n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e){if(e){if("string"==typeof e)return Hn(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Hn(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}(t.target.files);try{for(n.s();!(e=n.n()).done;){var o=e.value,a=new FormData;a.append(r.props.name,o),window.$.ajax({url:r.props.uploadUrl,type:"POST",processData:!1,contentType:!1,dataType:"json",data:a,success:function(e){e.success?r.props.onChange&&r.props.onChange(t,{name:r.props.name,propertyName:r.props.propertyName,value:e.result.properties.Token,parameters:{success:!0,properties:e.result.properties}}):r.props.onUploadFail&&r.props.onUploadFail(t,{name:r.props.name,propertyName:r.props.propertyName,message:e.message,details:e.details,success:!1})}})}}catch(e){n.e(e)}finally{n.f()}}),Xn(Yn(i),"onClear",function(){i.props.onChange&&i.props.onChange(void 0,{name:i.props.name,propertyName:i.props.propertyName,value:null})}),i}return Qn(a.prototype,[{key:"getCustomFileName",value:function(){return this.props.additionalData&&this.props.additionalDataContext&&this.props.additionalData.customNameGetter?this.props.additionalData.customNameGetter(this.props.additionalDataContext):null}},{key:"getCustomContentType",value:function(){return this.props.additionalData&&this.props.additionalDataContext&&this.props.additionalData.customContentTypeGetter?this.props.additionalData.customContentTypeGetter(this.props.additionalDataContext):null}},{key:"render",value:function(){return K("upload",{getCustomContentType:this.getCustomContentType,getCustomFileName:this.getCustomFileName,me:this,onChange:this.onChange,onClear:this.onClear,props:this.props})}}]),a}();function eo(e){return(eo="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function to(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ro(e,t){return(ro=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function no(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oo(e){return(oo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ao(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var io=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ro(e,t)}(o,c.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=oo(r),t=n?(t=oo(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==eo(t)&&"function"!=typeof t?no(e):t});function o(e){var n;return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),ao(no(n=t.call(this,e)),"selectWorkflowScheme",function(e,t){t=t.value,n.props.handleEvent({key:n.props.name,eventName:"onSchemeSelected",parameters:{scheme:t}})}),ao(no(n),"handleChanged",function(e,t){var r=t.name,t=t.value;n.setState(ao({},r,t))}),n.state={commands:e.commands,states:e.states,processExists:e.processExists},n.checkGetAdditionalDataForControl(),n}return to(o.prototype,[{key:"componentDidMount",value:function(){this.isMount=!0}},{key:"componentWillUnmount",value:function(){this.isMount=!1}},{key:"checkGetAdditionalDataForControl",value:function(){var o=this;this.props.getAdditionalDataForControl||this.props.commands||this.props.states?this.props.getAdditionalDataForControl(this,{loadParameters:!this.props.blockLoadParameters},function(e){var t=e.commands,r=e.states,n=e.processExists,e=e.processParameters;o.setState({commands:t,states:r,processExists:n}),o.props.handleEvent&&o.props.handleEvent({key:o.props.name,eventName:"onReceivedCommands",parameters:{commands:t,states:r,processParameters:e}}),o.isMount&&o.forceUpdate()}):console&&console.log("WorkflowBar: This control requires getAdditionalDataForControl or commands and states not undefined parameters!")}},{key:"onCommand",value:function(e,t){Ve(this.props.handleEvent)&&(t.currentTarget&&t.currentTarget.classList&&t.currentTarget.classList.add("loading"),this.props.handleEvent({key:this.props.name,eventName:"onCommandClick",parameters:{command:e}}),t.currentTarget&&t.currentTarget.classList&&t.currentTarget.classList.remove("loading"))}},{key:"onSetState",value:function(e){if(Ve(this.props.handleEvent)){e.currentTarget&&e.currentTarget.classList&&e.currentTarget.classList.add("loading");for(var t=(Ve(this.state.states)?this.state:this.props).states,r=void 0,n=0;n<t.length;n++)if(t[n].value==this.state.setstate){r=t[n];break}this.props.handleEvent({key:this.props.name,eventName:"onSetStateClick",parameters:{state:r}}),e.currentTarget&&e.currentTarget.classList&&e.currentTarget.classList.remove("loading")}}},{key:"render",value:function(){return K("workflow-bar",{handleChanged:this.handleChanged.bind(this),me:this,props:this.props,selectWorkflowScheme:this.selectWorkflowScheme.bind(this),state:this.state,onCommand:this.onCommand.bind(this),onSetState:this.onSetState.bind(this)})}}]),o}(),t=r(14),lo=r.n(t).a.createActions(["add","showEditForm","remove","saveData","save","move","insert"]),Oe=r(17),so=r.n(Oe);function co(e){return(co="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function uo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function po(e,t){return(po=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fo(e){return(fo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Vo=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&po(e,t)}(o,c.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=fo(r),t=n?(t=fo(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==co(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function o(e){return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e)).state={},e.controlRef=z.a.createRef(),e.barRef=z.a.createRef(),e}return uo(o.prototype,[{key:"render",value:function(){return K("control-bar",{props:this.props,onCopyControl:this.onCopyControl.bind(this,this.props.model),me:this})}},{key:"onCopyControl",value:function(e,t){var r=Ce.a.stringify(e);(e=document.createElement("textarea")).value=r,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e),r=0<document.getSelection().rangeCount&&document.getSelection().getRangeAt(0),e.select(),document.execCommand("copy"),document.body.removeChild(e),r&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(r))}},{key:"componentDidMount",value:function(){this.updateBarPosition&&(window.addEventListener("resize",this.updateBarPosition),this.updateBarPosition())}},{key:"componentDidUpdate",value:function(){this.updateBarPosition&&this.updateBarPosition()}},{key:"componentWillUnmount",value:function(){this.updateBarPosition&&window.removeEventListener("resize",this.updateBarPosition)}}]),o}();function ho(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function mo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ho(Object(r),!0).forEach(function(e){go(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ho(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function yo(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e){if(e){if("string"==typeof e)return vo(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?vo(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function vo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function bo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function go(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var wo,Oo=(Do=[{key:"isAdaptiveRender",value:function(e,t){return!e["style-adaptive"]||null==t||""===t||!e["style-renderwhen"]||t===e["style-renderwhen"]}},{key:"isForm",value:function(e){return null!=e&&("form"===e["data-buildertype"]||"formgroup"===e["data-buildertype"])}},{key:"getFormattedDate",value:function(e,t){if(null==t)return"";var r,n=void 0,o=e.indexOf(":");return 0<o?(r=e.substring(0,o),n=e.substring(o+1,e.length)):r=e,null==(e=t[r])&&(e=""),Ve(n)&&("number"==typeof e?e=so()(e).format(n):(t=ze()(e)).isValid()&&(e="local"===n?(r=Ke("L"),t.format(r)):t.format(n))),e}},{key:"getStyle",value:function(e,t,r){var n={};return e["style-marginTop"]&&(n.marginTop=e["style-marginTop"]),e["style-marginBottom"]&&(n.marginBottom=e["style-marginBottom"]),e["style-marginLeft"]&&(n.marginLeft=e["style-marginLeft"]),e["style-marginRight"]&&(n.marginRight=e["style-marginRight"]),e["style-width"]&&(n.width=e["style-width"]),e["style-height"]&&(n.height=e["style-height"]),void 0!==e["style-float"]&&(n.float=e["style-float"]),void 0!==e["style-display"]&&(n.display=e["style-display"]),e["style-hidden"]&&(t?n.opacity=.2:n.display="none"),void 0!==e["style-source"]&&Co.getCustomStyle(e["style-source"],n),void 0!==e["style-font-size"]&&(n.fontSize=e["style-font-size"]),e["style-adaptive"]&&void 0!==e["style-mobilesource"]&&"mobile"===r&&Co.getCustomStyle(e["style-mobilesource"],n),n}},{key:"getCustomStyle",value:function(e,r){e.split(";").forEach(function(e){var t=e.split(":");2===t.length&&(e=t[0].replace(/^\s+|\s+$/g,""),r[e]=t[1].replace(/^\s+|\s+$/g,""))})}},{key:"getClassName",value:function(e,t){var r=e["style-customcss"];return t&&Ve(Co.containers["data-buildertype"])&&(r=(null==r?"":r+" ")+"dwkit-formbuilder-item-container"),1==e["other-required"]&&(t="dwkit-required-field",r=null==r||""==r?t:r+t),1==e["style-hiddeninprint"]?(null==r?"":r+" ")+"dwkit-notprint":r}},{key:"fillDefaultValues",value:function(e,t){for(var r in t)void 0===e[r]&&(e[r]=t[r]);return e}},{key:"createBuilderDropzone",value:function(t,r,n,e,o){var a="";return K("builder-dropzone",{key:t,elementToInsert:r,elementAfter:n,onChangeDZ:function(e,t){t.name,t=t.value,a=t},onClosePopup:function(){try{var e=Ce.a.parse(a);lo.insert(e,t,r,n,o)}catch(e){}},placeholderKey:o,text:"DROP ZONE"})}}],bo((Fo=Co).prototype,[{key:"isContainer",value:function(e){return Ve(Co.containers[e])}},{key:"getItems",value:function(){return this.items}},{key:"setItems",value:function(e){this.items=e||[]}},{key:"getControlInfoByType",value:function(e,t){var r,n=yo(this.items);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(o.key===e)return o}}catch(e){n.e(e)}finally{n.f()}if(t=t||function(){if(window.DWKitFormSettings)return window.DWKitFormSettings.externalControlList}()){var a,i=yo(t);try{for(i.s();!(a=i.n()).done;){var l=a.value;if(l.key===e)return l}}catch(e){i.e(e)}finally{i.f()}}}},{key:"getControlByType",value:function(e,t){return(t=this.getControlInfoByType(e,t))?t.control:null}},{key:"getEditControlByType",value:function(e,t){return(t=this.getControlInfoByType(e,t))?t.editControl:null}},{key:"createControls",value:function(e,t){var r=t.model,n=t.data,o=t.errors,a=t.eventOnEdit,i=t.eventOnDelete,l=t.eventOnCopy,s=t.handleEvent,c=t.parentItem,u=t.getFormFunc,p=t.getAdditionalDataForControl,d=t.buildermode,f=t.hideControls,V=t.readOnlyControls,h=t.readOnly,m=t.disableRefs,y=t.uploadUrl,v=t.downloadUrl,b=t.extendedData,g=t.controlsToReplace,w=t.needCheckReplace,O=t.parentPlaceholder,C=t.formItem,k=t.externalControlRender,E=t.externalControlList,A=t.adaptiveViewType,S=t.formData,P=[];if(null==r)return P;for(var j=0;j<r.length;j++)if(!(Array.isArray(f)&&f.includes(r[j].key)||!d&&!Co.isAdaptiveRender(r[j],A))){var R=void 0,_=r[j]["data-buildertype"];if("customcontrol"===_)if(void 0===r[j].type||""===r[j].type)R=K("empty",{key:r[j].key,text:"Fill Type property for rendering the control."});else{var x=mo(mo({},void 0===r[j].props?{}:Ce.a.parse(r[j].props)),{},(go(L={key:r[j].key,name:r[j].key,className:r[j]["style-customcss"]},"className",Co.getClassName(r[j],d)),go(L,"style",Co.getStyle(r[j],d,A)),go(L,"data-buildertype",r[j]["data-buildertype"]),go(L,"getAdditionalDataForControl",p),go(L,"uploadUrl",y),go(L,"downloadUrl",v),L));(h||Array.isArray(V)&&V.includes(x.key))&&(x.readOnly=!0);var D=r[j].children;if(void 0!==r[j].children)try{D=Ce.a.parse(r[j].children)}catch(e){}R=void 0===D||Array.isArray(D)&&0===D.length?z.a.createElement(r[j].type,x):z.a.createElement(r[j].type,x,D)}else if("customblock"===_){var F=[],T=!1,N=!1,I=!1,L=r[j],x=O,D=C;if("form"===r[j].sourceType||void 0===r[j].sourceType)if(void 0!==r[j].children&&""!==r[j].children)F=r[j].children;else{if(void 0===u){console.error('Error: "getFormFunc" parameter is undefined!. Please, set "getFormFunc" parameter for DWKitBuilder or DWKitForm!');continue}void 0!==r[j].formname&&""!==r[j].formname?F=u(r[j].formname):T=!0}else if("placeholder"===r[j].sourceType)I=N=void 0!==a,L=c,void 0===x&&(x=r[j].key),void 0!==(D=void 0===D?c:D)&&void 0!==D.placeholders&&void 0!==D.placeholders[r[j].key]&&(F=D.placeholders[r[j].key]);else if(void 0!==r[j].source&&""!==r[j].source)try{F=Ce.a.parse(r[j].source)}catch(e){T=!0}else T=!0;R=T?K("empty",{key:r[j].key,text:"Set a form name or source in properties."}):(U=this.createControls(e,{model:F,data:n,errors:o,buildermode:N,eventOnEdit:a,eventOnDelete:i,eventOnCopy:l,parentItem:L,handleEvent:s,getFormFunc:u,getAdditionalDataForControl:p,hideControls:f,readOnlyControls:V,readOnly:h,disableRefs:m,uploadUrl:y,downloadUrl:v,controlsToReplace:g,needCheckReplace:w,parentPlaceholder:x,formItem:D,extendedData:b,externalControlRender:k,externalControlList:E,adaptiveViewType:A,formData:S}),B={key:r[j].key,name:r[j].key,className:Co.getClassName(r[j],d),style:Co.getStyle(r[j],d,A),"data-buildertype":r[j]["data-buildertype"]},I&&(0<(U=void 0===U?[]:U).length&&(I=Co.createBuilderDropzone(r[j].key+"_dropzone_footer",void 0===D?void 0:D.key,U[U.length-1].key,r[j].key,r[j].key),U.push(I)),D=Co.createBuilderDropzone(r[j].key+"_dropzone_header",void 0===D?void 0:D.key,void 0,r[j].key,r[j].key),U.unshift(D)),z.a.createElement(this.getPlatformContainerControl(),B,U))}else var U,B,M=this.getControlByType(_,E),R=null===M?K("null-control",{key:r[j].key,text:"".concat(_," is unsupported")}):this.isContainer(_)?(fe(B=C)&&Ve(c)&&"form"===c.sourceType&&(B=c),(U=void 0)!==r[j].readOnly&&(U=r[j].readOnly),(h||Array.isArray(V)&&V.includes(r[j].key))&&(U=!0),_=d&&("formgroup"===r[j]["data-buildertype"]&&"grouped"!==r[j].orientation||"container"===r[j]["data-buildertype"]&&"flex"===r[j]["style-display"]),U=this.createControls(e,{model:r[j].children,data:n,errors:o,buildermode:d,eventOnEdit:a,eventOnDelete:i,eventOnCopy:l,parentItem:r[j],handleEvent:s,getFormFunc:u,getAdditionalDataForControl:p,hideControls:f,readOnlyControls:V,readOnly:U,disableRefs:m,uploadUrl:y,downloadUrl:v,controlsToReplace:g,needCheckReplace:w,parentPlaceholder:void 0,formItem:B,extendedData:b,externalControlRender:k,externalControlList:E,adaptiveViewType:A,formData:S}),d&&(0<U.length&&(B=_?"...":"... "+r[j].key+" down ...",B=Co.createBuilderDropzone(r[j].key+"-dropzone_footer",r[j].key,void 0,B),U.push(B)),_=_?"...":"... "+r[j].key+" up ...",_=Co.createBuilderDropzone(r[j].key+"-dropzone_header",r[j].key,void 0,_),U.unshift(_)),this.createControl(e,M,{model:r[j],data:n,errors:o,parentItem:c,buildermode:d,children:U,handleEvent:s,getFormFunc:u,getAdditionalDataForControl:p,hideControls:f,readOnlyControls:V,readOnly:h,disableRefs:m,uploadUrl:y,downloadUrl:v,extendedData:b,parentPlaceholder:O,controlsToReplace:g,needCheckReplace:w,eventOnEdit:a,eventOnDelete:i,eventOnCopy:l,externalControlRender:k,externalControlList:E,adaptiveViewType:A,formData:S})):this.createControl(e,M,{model:r[j],data:n,errors:o,parentItem:c,buildermode:d,handleEvent:s,getFormFunc:u,getAdditionalDataForControl:p,hideControls:f,readOnlyControls:V,readOnly:h,disableRefs:m,uploadUrl:y,downloadUrl:v,extendedData:b,parentPlaceholder:O,controlsToReplace:g,needCheckReplace:w,eventOnEdit:a,eventOnDelete:i,eventOnCopy:l,externalControlRender:k,externalControlList:E,adaptiveViewType:A,formData:S});d?(0<j&&j<r.length&&(M=Co.createBuilderDropzone(r[j].key+"-dropzone_bw",void 0===c?void 0:c.key,r[j].key,"...",O),P.push(M)),P.push(z.a.createElement(Vo,{key:R.key+"_controlbar",control:R,text:r[j]["data-buildertype"],model:r[j],parent:e,onDelete:i,onEdit:a,onCopy:l,isGroup:"formgroup"===r[j]["data-buildertype"]}))):P.push(R)}return P}},{key:"createControl",value:function(e,t,r){throw r.model,r.data,r.errors,r.parentItem,r.buildermode,r.children,r.handleEvent,r.getAdditionalDataForControl,r.getFormFunc,r.hideControls,r.readOnlyControls,r.readOnly,r.disableRefs,r.uploadUrl,r.downloadUrl,r.extendedData,r.controlsToReplace,r.needCheckReplace,r.eventOnEdit,r.eventOnDelete,r.eventOnCopy,r.externalControlRender,r.externalControlList,r.adaptiveViewType,r.formData,new Error("You must implement this method in subclass")}},{key:"setCreateControlsProps",value:function(e,t){Object.assign(e,t),e.buildermode&&(e.createBuilderDropzone=Co.createBuilderDropzone),e.createControls=this.createControls.bind(this)}},{key:"getPlatformContainerControl",value:function(){}}]),bo(Fo,Do),Co);function Co(){!function(e){if(!(e instanceof Co))throw new TypeError("Cannot call a class as a function")}(this),go(this,"items",[])}function ko(e){return(ko="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function Eo(r,n,e,t,o){var a=2<arguments.length&&void 0!==e?e:null;return((3<arguments.length&&void 0!==t?t:null)||Zr.a)(r,4<arguments.length&&void 0!==o?o:null).then(function(e){var t=e.json();return e.ok?t.then(n):a?t.then(a):void console.log(error+" url: "+r)}).catch(function(e){return a?a(e):void console.log(e+" url: "+r)})}function Ao(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}go(Oo,"containers",{form:"",formgroup:"",grid:"",gridcolumn:"",container:"",div:"",repeater:""}),r(14).createStore({init:function(){this.listenTo(lo.add,this.add),this.listenTo(lo.move,this.move),this.listenTo(lo.remove,this.remove),this.listenTo(lo.save,this.save),this.listenTo(lo.saveData,this._updateOrder),this.listenTo(lo.insert,this.insert),wo=[]},move:function(e,t){var r,n,o,a,i,l,s;null!=t&&(r=this.findItemByKey(e,wo),n=this._excludeItemByKey(e,wo),t.attributes.name&&"dropzone_footer"===t.attributes.name.value?n.push(r):t.attributes.name&&"dropzone_header"===t.attributes.name.value?n.unshift(r):null!=t.attributes.elementtoinsert?null!=(o=null!=(a=t.attributes.elementtoinsert)?this.findItemByKey(a.value,n):o)?(i=(i=void 0)===(e=t.attributes.placeholderkey)?(null==o.children&&(o.children=[]),o.children):(void 0===o.placeholders&&(o.placeholders={}),null==o.placeholders[e.value]&&(o.placeholders[e.value]=[]),o.placeholders[e.value]),null!=t.attributes.name&&t.attributes.name.value.includes("dropzone_footer")?i.push(r):null!=t.attributes.name&&t.attributes.name.value.includes("dropzone_header")?i.unshift(r):null!=(s=t.attributes.elementafter)&&(e=this.findItemByKey(s.value,i),i.splice(i.indexOf(e),0,r))):console.error("ERROR: element is not found",a,r,t):null!=t.attributes.elementafter&&(null!=(l=null!=(s=t.attributes.elementafter)?this.findItemByKey(s.value,n):l)?n.splice(n.indexOf(l),0,r):console.error("ERROR: element is not found",s,r,t)),this.setData(n))},insert:function(e,t,r,n,o){var a,i,l;e&&(this.makeUniqueKeys(e,this.getAllKeys(a=wo)),"dropzone_footer"===t?a.push(e):"dropzone_header"===t?a.unshift(e):r?null!=(l=this.findItemByKey(r,a))?(i=(i=void 0)===o?(null==l.children&&(l.children=[]),l.children):(void 0===l.placeholders&&(l.placeholders={}),null==l.placeholders[o.value]&&(l.placeholders[o.value]=[]),l.placeholders[o.value]),t&&t.includes("dropzone_footer")?i.push(e):t&&t.includes("dropzone_header")?i.unshift(e):null!=n&&(t=this.findItemByKey(n,i),i.splice(i.indexOf(t),0,e))):console.error("ERROR: element is not found",l,e,r):null!=n&&(null!=(r=this.findItemByKey(n,a))?a.splice(a.indexOf(r),0,e):console.error("ERROR: element is not found",n,e)),this.setData(a))},_excludeItemByKey:function(e,t){for(var r=[],n=0;n<t.length;n++)if(t[n].key!=e&&(r.push(t[n]),t[n].children&&(r[r.length-1].children=this._excludeItemByKey(e,t[n].children)),null!=t[n].placeholders))for(var o in t[n].placeholders)Array.isArray(t[n].placeholders[o])&&(r[r.length-1].placeholders[o]=this._excludeItemByKey(e,t[n].placeholders[o]));return r},add:function(e,t){var r,n,o,a,i,l,s,c=Oo.fillDefaultValues({key:this.getDefaultKey(e.key),"data-buildertype":void 0!==e.builderType?e.builderType:e.key},e.defaultValues);null==t?0<wo.length&&"form"===wo[wo.length-1]["data-buildertype"]?(null==(o=wo[wo.length-1]).children&&(o.children=[]),o.children.push(c)):wo.push(c):t.attributes.name&&"dropzone_footer"===t.attributes.name.value?wo.push(c):t.attributes.name&&"dropzone_header"===t.attributes.name.value?wo.unshift(c):null!=t.attributes.elementtoinsert?null!=(r=null!=(n=t.attributes.elementtoinsert)?this.findItemByKey(n.value,wo):r)?(i=(i=void 0)===(o=t.attributes.placeholderkey)?(null==r.children&&(r.children=[]),r.children):(void 0===r.placeholders&&(r.placeholders={}),null==r.placeholders[o.value]&&(r.placeholders[o.value]=[]),r.placeholders[o.value]),null!=t.attributes.name&&t.attributes.name.value.includes("dropzone_footer")?i.push(c):null!=t.attributes.name&&t.attributes.name.value.includes("dropzone_header")?i.unshift(c):(null!=(s=t.attributes.elementafter)&&(a=this.findItemByKey(s.value,i)),i.splice(i.indexOf(a),0,c))):console.error("ERROR: element is not found",n,e,t):null!=t.attributes.elementafter&&(null!=(l=null!=(s=t.attributes.elementafter)?this.findItemByKey(s.value,wo):l)?wo.splice(wo.indexOf(l),0,c):console.error("ERROR: element is not found",s,t)),this.trigger(wo)},remove:function(e){this.removeItemByKey(e.key,wo),this.trigger(wo)},copy:function(e){var t=this.copyObj(e);this.insertAfterKey(t,e.key,wo),this.makeUniqueKeys(t),this.trigger(wo)},getData:function(){return wo},setData:function(e){wo=e,this.trigger(wo)},_updateOrder:function(e){wo=e,this.trigger(wo)},getDefaultKey:function(e){for(var t=1,r=e+"_"+t,n=this.getAllKeys(wo),o=0;o<n.length;o++)n[o]==(r=e+"_"+t)&&(t++,o=-1);return r},getAllKeys:function(e){var t=[];if(null!=e)for(var r=0;r<e.length;r++){var n=e[r];if(t.push(n.key),null!=n.children)var o=this.getAllKeys(n.children),t=t.concat(o);else if(null!=n.placeholders)for(var a in n.placeholders)Array.isArray(n.placeholders[a])&&(a=this.getAllKeys(n.placeholders[a]),t=t.concat(a))}return t},getByKey:function(e){return this.findItemByKey(e,wo)},findItemByKey:function(e,t){for(var r=0;r<t.length;r++){var n,o=t[r];if(o.key==e)return o;if(null!=o.children){if(null!=(n=this.findItemByKey(e,o.children)))return n}else if(null!=o.placeholders)for(var a in o.placeholders)if(Array.isArray(o.placeholders[a])&&null!=(n=this.findItemByKey(e,o.placeholders[a])))return n}},insertAfterKey:function(e,t,r){for(var n=0;n<r.length;n++){var o=r[n];if(o.key==t)return r.splice(n+1,0,e),!0;if(void 0!==o.children&&this.insertAfterKey(e,t,o.children))return!0;if(void 0!==o.placeholders)for(var a in o.placeholders)if(Array.isArray(o.placeholders[a])&&this.insertAfterKey(e,t,o.placeholders[a]))return!0}},updateItemByKey:function(e,t){var r,n=this.getByKey(e);for(r in t)n[r]=t[r];e!=t.key&&this.replaceDepensKeys(e,t.key),this.trigger(wo)},replaceDepensKeys:function(e,t,r){null==r&&(r=wo);for(var n=0;n<r.length;n++){var o=r[n];if(Array.isArray(o["events-onclick-targets"]))for(var a=o["events-onclick-targets"],i=0;i<a.length;i++)a[i]==e&&(a[i]=t);if(null!=o.children&&this.replaceDepensKeys(e,t,o.children),void 0!==o.placeholders)for(var l in o.placeholders)Array.isArray(o.placeholders[l])&&this.replaceDepensKeys(e,t,o.placeholders[l])}},removeItemByKey:function(e,t){for(var r=0;r<t.length;r++){var n=t[r];if(n.key==e){t.splice(r,1);break}if(null!=n.children&&this.removeItemByKey(e,n.children),void 0!==n.placeholders)for(var o in n.placeholders)Array.isArray(n.placeholders[o])&&this.removeItemByKey(e,n.placeholders[o])}},copyObj:function(e){if(null==e||"object"!==ko(e))return e;var t,r=e.constructor();for(t in e)e.hasOwnProperty(t)&&(r[t]=this.copyObj(e[t]));return r},makeUniqueKeys:function(e,t){var r=this,n=e["data-buildertype"];if(n&&e.key&&(!t||t&&t.includes(e.key))&&(e.key=this.getDefaultKey(n)),Array.isArray(e.children)&&e.children.forEach(function(e){r.makeUniqueKeys(e,t)}),void 0!==e.placeholders)for(var o in e.placeholders)Array.isArray(e.placeholders[o])&&e.placeholders[o].forEach(function(e){r.makeUniqueKeys(e,t)})}});var So=(Ao(jo.prototype,[{key:"registerItems",value:function(e){So.items=e}},{key:"getItems",value:function(){return So.items}}]),new jo),ke=So.registerItems,Me=So.getItems,Po=z.a.createContext({visible:!1});function jo(){var e;!function(e){if(!(e instanceof jo))throw new TypeError("Cannot call a class as a function")}(this),e=[],"items"in this?Object.defineProperty(this,"items",{value:e,enumerable:!0,configurable:!0,writable:!0}):this.items=e}var Ro=function t(){!function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this)};function _o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}xo=/{\S[A-z,0-9,_,-,.,:, ,/]+?}/gm,(Fo="regexForReplace")in(Do=Ro)?Object.defineProperty(Do,Fo,{value:xo,enumerable:!0,configurable:!0,writable:!0}):Do[Fo]=xo;var xo,Do,Fo,To={},No=(Do=Lo,Fo=[{key:"Set",value:function(e,t,r){To.hasOwnProperty(e)&&clearTimeout(To[e]),To[e]=setTimeout(t,r)}},{key:"Clear",value:function(e){To.hasOwnProperty(e)&&(clearTimeout(To[e]),delete To[e])}}],(xo=null)&&_o(Do.prototype,xo),_o(Do,Fo),Lo),Io=r(3);function Lo(){!function(e){if(!(e instanceof Lo))throw new TypeError("Cannot call a class as a function")}(this)}function Uo(e){return(Uo="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function Bo(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Mo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Bo(Object(r),!0).forEach(function(e){Go(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bo(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function zo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ko(e,t){return(Ko=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wo(e){return(Wo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Go(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(24);var Ho=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ko(e,t)}(a,c.Component);var e,t,r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=Wo(r),t=n?(t=Wo(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Uo(t)&&"function"!=typeof t?qo(e):t});function a(e){var d;return function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),Go(qo(d=o.call(this,e)),"_asyncGetData",null),Go(qo(d),"_asyncGetModel",null),Go(qo(d),"handleEvent",function(e){e.e;var o,a,i=e.key,t=e.propertyName,l=e.eventName,s=e.parameters,r=e.name,c=e.value,n=e.additionalValues,u=qo(d),p="onChange"===l;p&&(d.props.onlyExternalDataChanged||(void 0===d.state.data&&(d.state.data={}),(e=d.state.data)[t||i]=c,d.setState({data:e})),void 0!==d.props.dataChanged&&d.props.dataChanged(qo(d),{key:i,propertyName:t,value:c,additionalValues:n}),d.onConditions(i,l,s,r,c)),void 0===d.props.eventFunc||void 0!==(o=d.findModelItembyKey(i))&&void 0!==o.events&&void 0!==o.events[l]&&o.events[l].active&&(o.events=Object(Io.updateEventsFormat)(o.events),r=o.events[l],a=Mo({},s),Array.isArray(r.triggers)&&0<r.triggers.length&&r.triggers.forEach(function(t){Array.isArray(t.parameters)&&0<t.parameters.length&&t.parameters.forEach(function(e){"string"==typeof e.value?a[e.name]=e.value.replace(Ro.regexForReplace,function(e){return u.applySubstitution(e,s?s.row:void 0,u.state.data)}):a[e.name]=e.value});var r=u.findRefs(i),n=c,e=Array.isArray(t.targets)&&0<t.targets.length?function(){return t.targets.forEach(function(e){u.props.eventFunc({key:e,sourceControlRef:r,sourceControlValue:n,controlRef:u.findRefs(e),formName:u.props.formName,component:u,eventName:l,actions:t.actions,parameters:a})})}:function(){return u.props.eventFunc({key:i,sourceControlRef:r,sourceControlValue:n,controlRef:r,formName:u.props.formName,component:u,eventName:l,actions:t.actions,parameters:a})};!p||void 0===o.onChangeTimeout||""===o.onChangeTimeout||Number(o.onChangeTimeout)<1?e():No.Set(i,e,Number(o.onChangeTimeout))}))}),d.state={data:e.data,model:e.model,extendedData:e.extendedData,controlsToReplace:null,adaptiveViewType:d.getAdaptiveViewType()},d.checkLoadedState(d.state.data,d.state.model,!0),d.abortController=new AbortController,d.abortSignal=d.abortController.signal,d}return t=[{key:"getDerivedStateFromProps",value:function(e,t){var r,n={};if(e.adaptiveViewType&&t.adaptiveViewType!==e.adaptiveViewType&&(n.adaptiveViewType=e.adaptiveViewType),void 0!==e.modelurl&&""!==e.modelurl&&e.modelurl!==t.modelurl&&(n.modelurl=e.modelurl,n.needFetchModel=!0),void 0!==e.model&&e.model!==t.model&&(n.controlsToReplace=null,n.model=e.model),void 0!==e.dataurl&&""!==e.dataurl&&e.dataurl!==t.dataurl&&(n.dataurl=e.dataurl,n.needFetchData=!0),void 0!==e.data&&(n.data=e.data,e.autoCheckConditions&&t.enableCheckConditions&&(r=Object(Io.checkConditions)({data:n.data,model:n.model||t.model}),n.hideControls=r.hideControls,n.readOnlyControls=r.readOnlyControls),e.autoValidate))if((r=Object(Io.validate)({data:n.data,model:n.model||t.model})).valid)n.errors=void 0;else if(n.errors=r.errors,e.errors)for(var o in e.errors)n.errors[o]=e.errors[o];return e.objectId!==t.objectId&&(n.objectId=e.objectId,n.isLoaded=!1),n}}],zo((e=a).prototype,[{key:"createControls",value:function(){throw new Error("Function createControls must be implemented in ancestor!")}},{key:"componentDidMount",value:function(){this.PrepareState()}},{key:"componentDidUpdate",value:function(e,t){this.PrepareState()}},{key:"componentWillUnmount",value:function(){(this._asyncGetData||this._asyncGetModel)&&this.abortController.abort()}},{key:"PrepareState",value:function(){var t=this;this.state.needFetchModel&&(t.setState({needFetchModel:!1}),this._asyncGetModel=Eo(this.state.modelurl,function(e){t._asyncGetModel=null,t.modelChanged(e)},function(e){t._asyncGetModel=null,t.handleErrEvent(e)},this.props.fetchFunc,{signal:this.abortSignal})),this.state.needFetchData&&(t.setState({needFetchData:!1}),this._asyncGetData=Eo(this.state.modelurl,function(e){t._asyncGetData=null,t.dataChanged(e)},function(e){t._asyncGetData=null,t.handleErrEvent(e)},this.props.fetchFunc,{signal:this.abortSignal})),this.checkConditions(this.state.model),this.checkLoadedState(this.state.data,this.state.model)}},{key:"modelChanged",value:function(e){this.setState({model:e,controlsToReplace:null}),this.checkConditions(e)}},{key:"dataChanged",value:function(e){this.setState({data:e}),this.checkLoadedState(e,this.state.model)}},{key:"checkLoadedState",value:function(e,t,r){this.state.isLoaded||null==e||null==t||(r?this.state.isLoaded=!0:this.setState({isLoaded:!0}),e=Mo({},e),Object(Io.initDefaultState)({model:t,data:e}),this.props.eventFunc({key:void 0,controlRef:this,formName:this.props.formName,component:this,eventName:"init",actions:["initSystem","init"],parameters:{initialData:e}}))}},{key:"findRefs",value:function(e,t){if(t=t||this.refs){var r=t[e];if(!r)for(var n in t)if(r=t[n].refs?this.findRefs(e,t[n].refs):r)break;return r}}},{key:"checkConditions",value:function(e,t){var r=!1;if(Array.isArray(e))for(var n=0;n<e.length;n++){if(void 0!==e[n]["other-visibleConition"]&&""!==e[n]["other-visibleConition"]||void 0!==e[n]["other-readOnlyConition"]&&""!==e[n]["other-readOnlyConition"])r=!0;else if(Array.isArray(e[n].children))r=this.checkConditions(e[n].children,!0);else if("object"==Uo(e[n].placeholders))for(var o in e[n].placeholders)r=this.checkConditions(e[n].placeholders[o],!0);if(r)break}if(t)return r;this.state.enableCheckConditions=r}},{key:"onConditions",value:function(e,t,r,n,o){var a;this.state.enableCheckConditions&&(this.props.autoCheckConditions&&this.state.enableCheckConditions?(a=Object(Io.checkConditions)({data:this.state.data,model:this.state.model}),this.setState({hideControls:a.hideControls,readOnlyControls:a.readOnlyControls})):this.props.eventFunc({key:e,controlRef:this.findRefs(e),formName:this.props.formName,component:this,eventName:t,actions:["checkConditions"],parameters:r}))}},{key:"handleErrEvent",value:function(e){this.props.eventErrFunc&&this.props.eventErrFunc(this,e)}},{key:"findModelItembyKey",value:function(e,t){void 0===t&&(t=this.state.model);for(var r=0;r<t.length;r++){if(t[r].key===e)return t[r];if(void 0!==t[r].children){var n=this.findModelItembyKey(e,t[r].children);if(void 0!==n)return n}if(void 0!==t[r].placeholders)for(var o in t[r].placeholders)if(void 0!==(o=this.findModelItembyKey(e,t[r].placeholders[o])))return o;if("customblock"===t[r]["data-buildertype"]&&"source"===t[r].sourceType&&null!=t[r].source){var a=Ce.a.parse(t[r].source);if(void 0!==(a=this.findModelItembyKey(e,a)))return a}if("customblock"===t[r]["data-buildertype"]&&"form"===t[r].sourceType&&void 0!==t[r].formname&&""!==t[r].formname&&(a=t[r].children||this.props.getFormFunc(t[r].formname),void 0!==(a=this.findModelItembyKey(e,a))))return a}}},{key:"getAdaptiveViewType",value:function(){return"mobile"}},{key:"handleResize",value:function(){var e=this.getAdaptiveViewType();this.state.adaptiveViewType!==e&&this.setState({adaptiveViewType:e})}},{key:"applySubstitution",value:function(e,t,r){var n=e;return null!=t&&"row."==e.slice(1,5)?null==(n=t[e.slice(5,e.length-1)])?"":n:null!=r&&null==(n=r[e.slice(1,e.length-1)])?"":n}}]),zo(e,t),a}();function Qo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Jo(e,t,r){void 0===t[e]&&(t[e]=[]),t[e].push(r)}var Yo=(Qo(Zo.prototype,[{key:"toNested",value:function(e,t){for(var r,n,o,a=0,i=[],l={},s={},c=e.length;a<c;a++)r=(o=e[a])[this.config.id],n=o[this.config.parent],l[r]=o,n===t?i.push(o):void 0!==l[n]?Jo(this.config.children,l[n],o):Jo(n,s,o),this.config.options.deleteParent&&delete o[this.config.parent],void 0!==s[r]&&function(e,t,r){var n=r.length;for(void 0===t[e]&&(t[e]=[]);0<n--;)t[e].push(r.shift())}(this.config.children,o,s[r]);return i}}]),Zo);function Zo(e){!function(e){if(!(e instanceof Zo))throw new TypeError("Cannot call a class as a function")}(this),this.config=e=e||{},this.config.id=e.id||"id",this.config.parent=e.parent||"parent",this.config.children=e.children||"nodes",this.config.options=e.options||{deleteParent:!1}}function Xo(e){return(Xo="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function $o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ea(e,t,r){return(ea="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){if(e=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ra(e)););return e}(e,t))return(t=Object.getOwnPropertyDescriptor(e,t)).get?t.get.call(r):t.value})(e,t,r||e)}function ta(e,t){return(ta=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ra(e){return(ra=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var na=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ta(e,t)}(t,Ho);var r,n,e=(r=t,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=ra(r),t=n?(t=ra(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Xo(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function t(){return function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e.apply(this,arguments)}return $o(t.prototype,[{key:"componentDidMount",value:function(){ea(ra(t.prototype),"componentDidMount",this).call(this),window.addEventListener&&window.addEventListener("resize",this.handleResize.bind(this))}},{key:"componentWillUnmount",value:function(){ea(ra(t.prototype),"componentWillUnmount",this).call(this),window.removeEventListener&&window.removeEventListener("resize",this.handleResize.bind(this))}},{key:"getItemsForRender",value:function(){var e=[],t=!1;null!==this.state.model&&void 0!==this.state.model&&(e=null===this.state.controlsToReplace?[]:this.state.controlsToReplace,t=null===this.state.controlsToReplace);var r=this.createControls(this,{model:this.state.model,data:this.state.data,errors:this.state.errors||this.props.errors,handleEvent:this.handleEvent,getFormFunc:this.props.getFormFunc,getAdditionalDataForControl:this.props.getAdditionalDataForControl,hideControls:(this.props.autoCheckConditions?this.state:this.props).hideControls,readOnlyControls:(this.props.autoCheckConditions?this.state:this.props).readOnlyControls,readOnly:this.props.readOnly,uploadUrl:this.props.uploadUrl,downloadUrl:this.props.downloadUrl,extendedData:this.props.extendedData,controlsToReplace:e,needCheckReplace:t,externalControlRender:this.props.externalControlRender,externalControlList:this.props.externalControlList,adaptiveViewType:this.props.adaptiveViewType||this.state.adaptiveViewType});return t&&(this.state.controlsToReplace=e),r}},{key:"getAdaptiveViewType",value:function(){return window.matchMedia&&window.matchMedia("(max-width: 997px)").matches?"mobile":"desktop"}}]),t}(),oa=r(1),Yr=r(6),aa=r.n(Yr);function ia(e){return(ia="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function la(){return(la=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function sa(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e){if(e){if("string"==typeof e)return ca(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ca(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function ca(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ua(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pa(e,t){return(pa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function da(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fa(e){return(fa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Va(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ha=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pa(e,t)}(a,c.Component);var e,t,r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=fa(r),t=n?(t=fa(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==ia(t)&&"function"!=typeof t?da(e):t});function a(e){var n;return function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),Va(da(n=o.call(this,e)),"onMount",function(e){n.modal=$(aa.a.findDOMNode(e)).parent(),n.count=$(".count",n.modal),n.tabs={tree:$(".tree-tab",n.modal),search:$(".search-tab",n.modal),picked:$(".picked-tab",n.modal)},$(".menu .tree",n.modal).on("click",function(){return n.showTree()}),$(".menu .picked",n.modal).on("click",function(){return n.showPicked()}),$(".search input",n.modal).on("keyup",function(e){return n.showSearch($(e.currentTarget).val())}),n.nodes.length&&(n.props.paging?n.loadCurrentValue():(n.updatePickedNodes(n.getPicked()),n.updatePickedCount()),n.initializeNodes(n.nodes))}),Va(da(n),"pickSearch",function(){$(".search-tab .node:not(.picked) .name",n.modal).trigger("click")}),Va(da(n),"unpickSearch",function(){$(".search-tab .node.picked .name",n.modal).trigger("click")}),Va(da(n),"unpickPicked",function(){$(".picked-tab .node.picked .name",n.modal).trigger("click")}),Va(da(n),"handleOpen",function(){n.state.visible||n.setState({visible:!0})}),Va(da(n),"handleClose",function(){n.setState({visible:!1})}),Va(da(n),"handleSave",function(){var e=n.props.multiple?n.picked.map(function(e){return e.id}):n.picked.length?n.picked[0].id:null,t=n.getAdditionalValues(e);n.onChange(e,t),n.setState({visible:!1})}),Va(da(n),"onDropdownChange",function(e,t){var r=t.value,t=n.getAdditionalValues(r);n.onChange(r,t)}),n.state={visible:!1,value:n.props.value},n.converter=new Yo({children:n.props.childrenKey}),n}return t=[{key:"getDerivedStateFromProps",value:function(e,t){return e.dataModel!==t.dataModel?{getAdditionalDataForControl:e.getAdditionalDataForControl,dataModel:e.dataModel,needFetch:!0,needValueFetch:!0}:e.paging&&e.value!==t.value&&void 0!==e.value?{needValueFetch:!0,value:e.value}:null}}],ua((e=a).prototype,[{key:"componentDidMount",value:function(){this.widget=$(aa.a.findDOMNode(this)),this.nodes=[],this.tabs={},this.picked=[],this.opened=[],this.checkFetch()}},{key:"componentDidUpdate",value:function(e,t){this.checkFetch()}},{key:"checkFetch",value:function(){this.state.needFetch?this.getAdditionalData(null):this.state.needValueFetch&&this.loadCurrentValue()}},{key:"getNodeById",value:function(t){var e=this.recursiveNodeSearch(this.nodes,function(e){return"".concat(e.id)==="".concat(t)});return e.length?e[0]:null}},{key:"getPicked",value:function(){var e=[];return this.props.multiple?this.getArrayValues(this.props.value):(this.props.value&&e.push(this.props.value),e)}},{key:"updatePickedNodes",value:function(e){if(e){this.picked=[];var t,r=sa(e);try{for(r.s();!(t=r.n()).done;){var n=t.value,o=this.recursiveNodeSearch(this.nodes,function(t){return function(e){return"".concat(e.id)==="".concat(t)}}(n));o.length&&this.picked.push(o[0])}}catch(e){r.e(e)}finally{r.f()}}}},{key:"initializeNodes",value:function(e){return e=this.renderTree(e,this.state.rowsCount,null,0,{height:"400px",overflowY:"scroll"}),this.tabs.tree.html(e),this.initializeNodeList(e)}},{key:"recursiveNodeSearch",value:function(e,t){var r=[];if(!Array.isArray(e))return r;for(var n=0,o=Array.from(e);n<o.length;n++){var a=o[n];t(a)&&r.push(a),a[this.props.childrenKey]&&a[this.props.childrenKey].length&&(r=r.concat(this.recursiveNodeSearch(a[this.props.childrenKey],t)))}return r}},{key:"renderTree",value:function(e,t,r,n,o){o=o||{};for(var a=$('<div class="ui tree-picker tree"></div>').css(o),i=0,l=e.length;i<l;i++){var s=e[i],c=this.opened.includes(s.id)?" opened":"";this.props.hidden(s)||(c=$('<div class="node'.concat(c,'" data-id="').concat(s.id,'" data-name="').concat(s.name,'">\n    <div class="head">\n        <i class="add circle icon"></i>\n        <i class="minus circle icon"></i>\n        <i class="radio icon"></i>\n        <a class="name">').concat(s.name,'</a>\n        <i class="checkmark icon"></i>\n    </div>\n    <div class="content').concat(c,'"></div>\n</div>')).appendTo(a),this.props.disabledClause(s)&&c.addClass("disabled"),s[this.props.childrenKey]&&s[this.props.childrenKey].length?$(".content",c).append(this.renderTree(s[this.props.childrenKey],s.rowsCount,s.id,0)):s.hasChild||c.addClass("childless"))}return this.props.paging&&e.length+n<t&&$('<div class="node pager" data-parent-id="'.concat(r,'" data-start-index="').concat(e.length+n,'">\n    <div class="head">\n        <a class="name">...</a>\n    </div>\n</div>')).appendTo(a),a}},{key:"initializeNodeList",value:function(e){var o=this;$(".node",e).each(function(e,t){var r=$(t),t=$(">.head",r),n=$(">.content",r);$(">.name",t).on("click",function(){r.hasClass("pager")?o.pagerClicked(r):o.nodeClicked(r)}),o.nodeIsPicked(r)&&r.addClass("picked"),r.hasClass("childless")||$(">.icon",t).on("click",function(){var t=o.getNodeById(o.getNodeId(r));!t||!t.hasChild||t[o.props.childrenKey]&&t[o.props.childrenKey].length?n.slideToggle():o.getAdditionalData(t.id,r),r.toggleClass("opened"),o.opened.includes(t.id)?o.opened=o.opened.filter(function(e){return e!==t.id}):o.opened.push(t.id)})})}},{key:"pagerClicked",value:function(e){this.getAdditionalData(e.data("parent-id"),e,e.data("start-index"))}},{key:"nodeClicked",value:function(e){if(!e.hasClass("disabled")){if(!this.props.multiple){if(this.picked.length&&this.props.clearable&&this.picked[0].id===this.getNodeId(e))return this.unpickNode(e);$(".node.picked",this.modal).removeClass("picked"),this.picked=[]}return e.toggleClass("picked"),e.hasClass("picked")?this.pickNode(e):this.unpickNode(e)}}},{key:"nodeIsPicked",value:function(t){var r=this;return this.picked.filter(function(e){return"".concat(e.id)===r.getNodeId(t)}).length}},{key:"updatePickedCount",value:function(){return this.picked.length?(this.count.closest(".item").addClass("highlighted"),this.count.html("("+this.picked.length+")")):(this.count.closest(".item").removeClass("highlighted"),this.count.html(""))}},{key:"getNodeId",value:function(e){return e.attr("data-id")}},{key:"pickNode",value:function(e){var t=this.getNodeId(e);return this.picked.push({id:t,name:e.attr("data-name")}),this.updatePickedCount(),$(".node[data-id="+t+"]",this.modal).addClass("picked")}},{key:"unpickNode",value:function(e){var t=this.getNodeId(e);return this.picked=this.picked.filter(function(e){return"".concat(e.id)!=="".concat(t)}),this.updatePickedCount(),$(".node[data-id="+t+"]",this.modal).removeClass("picked")}},{key:"showTree",value:function(){return $(".menu .item",this.modal).removeClass("active"),$(".menu .tree",this.modal).addClass("active"),this.tabs.tree.show(),this.tabs.search.hide(),this.tabs.picked.hide(),this.modal.attr("data-mode","tree")}},{key:"getColumnsForFilter",value:function(){var e=new RegExp(" asc","gi"),t=this.props.columns.replace(e,""),e=new RegExp(" desc","gi"),t=t.replace(e,"");return e=new RegExp(" ","gi"),t.replace(e,"")}},{key:"showSearch",value:function(t){var e,r,n=this;null!==t&&t.length>=this.props.minSearchQueryLength?this.props.paging?(e={model:this.state.dataModel,filters:[{column:this.getColumnsForFilter(),term:"like",value:t}]},this.setState({isFetching:!0},function(){n.state.getAdditionalDataForControl(n,e,function(e){e=e.items,n.setState({isFetching:!1}),n.renderSearchResults(e,t)})})):(r=this.recursiveNodeSearch(this.nodes,function(e){return e.name&&-1<e.name.toLowerCase().indexOf(t.toLowerCase())}),this.renderSearchResults(r,t)):this.showTree()}},{key:"renderSearchResults",value:function(e,r){e=this.renderList(e,{height:"400px",overflowY:"scroll"}),$(".menu .item",this.modal).removeClass("active"),this.tabs.search.show().html(e),this.tabs.tree.hide(),this.tabs.picked.hide(),this.modal.attr("data-mode","search"),this.initializeNodeList(e),$(".name",e).each(function(){var e=$(this).text(),t=RegExp("("+r+")","gi"),e=e.replace(t,"<strong class='search-query'>$1</strong>");$(this).html(e)})}},{key:"showPicked",value:function(){var e=this.renderList(this.picked,{height:"400px",overflowY:"scroll"});return $(".menu .item",this.modal).removeClass("active"),$(".menu .picked",this.modal).addClass("active"),this.tabs.picked.show().html(e),this.tabs.tree.hide(),this.tabs.search.hide(),this.modal.attr("data-mode","picked"),this.initializeNodeList(e)}},{key:"renderList",value:function(e,t){var r,n,o,a,i;for(t=t||{},r=$('<div class="ui tree-picker list"></div>').css(t),a=0,i=e.length;a<i;a++)n=e[a],this.props.hidden(n)||(o=$('<div class="node" data-id="'.concat(n.id,'" data-name="').concat(n.name,'">\n    <div class="head">\n        <a class="name">').concat(n.name,'</a>\n        <i class="checkmark icon"></i>\n    </div>\n    <div class="content"></div>\n</div>')).appendTo(r),this.props.disabledClause(n)&&o.addClass("disabled"));return r}},{key:"getAdditionalData",value:function(r,n){var e,o=this,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;this.state.dataModel?this.state.getAdditionalDataForControl?(e={model:this.state.dataModel},this.props.paging&&(e.startIndex=a,e.pageSize=this.props.pageSize),this.setState({isFetching:!0,needFetch:!1,parentIdToFetch:r},function(){o.state.getAdditionalDataForControl(o,e,function(e){var t=e.items,e=e.rowsCount,t=o.converter.toNested(t,r);o.setData({items:t,rowsCount:e,parentIdToFetch:r},!a),o.props.paging?(e=o.renderTree(t,e,r,a),o.initializeNodeList(e),a?n.replaceWith(e.children()):($(".content",n).append(e),$(">.content",n).slideToggle())):(o.updatePickedNodes(o.getPicked()),o.modal&&o.initializeNodes(o.nodes)),o.state.needValueFetch&&o.loadCurrentValue()})})):this.props.buildermode&&console.log("TreePicker: For paging on server need to set getAdditionalDataForControl func!"):this.props.buildermode&&console.log("TreePicker: Set DataModel label!")}},{key:"loadCurrentValue",value:function(){var t=this;if(this.picked=[],void 0!==this.props.value&&null!==this.props.value)if(this.props.multiple){for(var e,r=this.getArrayValues(this.props.value),n=[],o=0;o<r.length;o++){var a=r[o],i=this.getNodeById(a);i?this.picked.push(i):n.push(a)}0<n.length?((e={model:this.state.dataModel}).filters=[{column:"__id",term:"in",value:n}],this.setState({isFetching:!0},function(){t.state.getAdditionalDataForControl(t,e,function(e){e=e.items,t.addSelectedNodes(e)})})):this.modal&&this.updatePickedCount()}else{var l,s=this.getNodeById(this.props.value);s?(this.picked.push(s),this.modal&&this.updatePickedCount()):((l={model:this.state.dataModel}).filters=[{column:"__id",term:"=",value:this.props.value}],this.setState({isFetching:!0},function(){t.state.getAdditionalDataForControl(t,l,function(e){e=e.items,t.addSelectedNodes(e)})}))}this.state.needValueFetch&&this.setState({needValueFetch:!1})}},{key:"setData",value:function(e,t){var r=e.items,n=e.rowsCount,e=e.parentIdToFetch;t?e?(t=this.getNodeById(e))&&(t[this.props.childrenKey]=r,t.rowsCount=n):(this.nodes=r,this.setState({rowsCount:n})):e?(e=this.getNodeById(e))&&(e[this.props.childrenKey]=e[this.props.childrenKey].concat(r)):this.nodes=this.nodes.concat(r),this.setState({needFetch:!1,isFetching:!1})}},{key:"getArrayValues",value:function(e){var t;if(null==(e=e))return[];if(!Array.isArray(e)){try{t=JSON.parse(e)}catch(e){console.log(e)}e=t=Array.isArray(t)?t:[e]}return e}},{key:"addSelectedNodes",value:function(e){Array.isArray(e)&&e.length&&(this.picked=this.picked.concat(e),this.modal&&this.updatePickedCount(),this.setState({isFetching:!1}))}},{key:"getLocalized",value:function(e,t){return window.DWKitAdminLang&&window.DWKitAdminLang.treepicker?window.DWKitAdminLang.treepicker[e]:t}},{key:"onChange",value:function(e,t){this.props.handleEvent&&this.props.handleEvent({syntheticEvent:null,key:this.props.name,propertyName:this.props.propertyName,eventName:"onChange",name:this.props.name,value:e,additionalValues:t})}},{key:"getAdditionalValues",value:function(t){var r,n,e;return this.nodes.length&&(Array.isArray(t)?(r=t.map(function(e){return"".concat(e)}),n=this.recursiveNodeSearch(this.nodes,function(e){return r.includes("".concat(e.id))}).map(function(e){return e.values})):t?(e=this.recursiveNodeSearch(this.nodes,function(e){return"".concat(e.id)==="".concat(t)})).length&&(n=e[0].values):(e=this.getColumnsForFilter())&&(n={},e.split(",").forEach(function(e){n[e]=null}))),n}},{key:"triggerElement",value:function(){var e,t=this.props.value,r=[];if(this.props.multiple){this.props.value||(t=[]);var n,o=sa(t=Array.isArray(this.props.value)?t:this.getArrayValues(this.props.value));try{for(o.s();!(n=o.n()).done;){var a=n.value,i=this.getNodeById(a);i&&r.push({value:i.id,text:i.name})}}catch(e){o.e(e)}finally{o.f()}}else!t||(e=this.getNodeById(t))&&r.push({value:e.id,text:e.name});return(t={fluid:this.props.fluid,disabled:this.props.disabled,multiple:this.props.multiple,value:t,className:this.props.className,options:r,selection:this.props.selection}).label=this.props.label,t.error=this.props.error,z.a.createElement(oa.Form.Dropdown,la({},t,{onClick:this.handleOpen,onChange:this.onDropdownChange}))}},{key:"render",value:function(){var e="tree-picker ".concat(this.props.modalCssClass);return z.a.createElement(oa.Modal,{style:this.props.modalStyle,className:e,open:this.state.visible,trigger:this.triggerElement()},z.a.createElement(Wn,{name:this.props.label,onMount:this.onMount,selected:this.getLocalized("selected","Selected")}),z.a.createElement("div",{className:"ui search form"},z.a.createElement("div",{className:"field"},z.a.createElement("div",{className:"ui icon input"},z.a.createElement("input",{type:"text",placeholder:this.getLocalized("search","Search")}),z.a.createElement("i",{className:"search icon"})))),z.a.createElement(oa.Modal.Content,null,z.a.createElement("div",{className:" active"},z.a.createElement("div",{className:"ui text loader"},this.getLocalized("loadingData","Loading data"))),z.a.createElement("div",{className:"tree-tab"},z.a.createElement("div",{style:{height:"400px"}})),z.a.createElement("div",{className:"search-tab"}),z.a.createElement("div",{className:"picked-tab"})),z.a.createElement(oa.Modal.Actions,null,z.a.createElement(oa.Button,{onClick:this.pickSearch,className:"pick-search"},z.a.createElement("i",{className:"checkmark icon"}),this.getLocalized("selectAll","Select all")),z.a.createElement(oa.Button,{onClick:this.unpickSearch,className:"unpick-search"},z.a.createElement("i",{className:"remove icon"}),this.getLocalized("removeAll","Remove all")),z.a.createElement(oa.Button,{onClick:this.unpickPicked,className:"unpick-picked"},z.a.createElement("i",{className:"remove icon"}),this.getLocalized("removeAll","Remove all")),z.a.createElement(oa.Button,{onClick:this.handleSave,className:"blue"},this.getLocalized("ok","Ok")),z.a.createElement(oa.Button,{onClick:this.handleClose},this.getLocalized("cancel","Cancel"))))}}]),ua(e,t),a}();Va(ha,"defaultProps",{hidden:function(e){return!1},disabledClause:function(e){return!1},childrenKey:"nodes",multiple:!1,minSearchQueryLength:3,pageSize:100});var ma=r(4),ya=r(15);function va(e){return(va="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function ba(){return(ba=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ga(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Oa(e,t,r){return t&&wa(e.prototype,t),r&&wa(e,r),e}function Ca(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ka(e,t)}function ka(e,t){return(ka=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ea(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e=Sa(r),t=n?(t=Sa(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==va(t)&&"function"!=typeof t?Aa(e):t}}function Aa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sa(e){return(Sa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Pa=function(){Ca(r,c.Component);var t=Ea(r);function r(e){return ga(this,r),(e=t.call(this,e)).state={editorState:ma.EditorState.createEmpty()},e.handleKeyCommand=e._handleKeyCommand.bind(Aa(e)),e.mapKeyToEditorCommand=e._mapKeyToEditorCommand.bind(Aa(e)),e.toggleBlockType=e._toggleBlockType.bind(Aa(e)),e.toggleInlineStyle=e._toggleInlineStyle.bind(Aa(e)),e}return Oa(r,[{key:"render",value:function(){var e,r=this,n={},t={};for(e in this.props)"className"===e||"style"===e?t[e]=this.props[e]:n[e]=this.props[e];var o=this.props.additionalParams.model,a=this.props.additionalParams.handleEvent,i=this.props.additionalParams.parentItem;n.placeholder=o.placeholder,n.onChange=this.onChange=function(e){var t=e.getCurrentContent(),t=Object(ya.convertToHTML)(t);r.setState({editorState:e,value:t}),a({key:n.name,propertyName:n.propertyName,eventName:"onChange",name:n.name,value:t})};var l="dwkit-richtextcontrol RichEditor-root";return t.className?t.className+=" "+l:t.className=l,l=z.a.createElement("div",t,!n.readOnly&&z.a.createElement(Da,{editorState:this.state.editorState,onToggle:this.toggleBlockType}),!n.readOnly&&z.a.createElement(Ta,{editorState:this.state.editorState,onToggle:this.toggleInlineStyle}),z.a.createElement("div",{onClick:this.focus},z.a.createElement(ma.Editor,ba({},n,{editorState:this.state.editorState,blockStyleFn:Ra,customStyleMap:ja,handleKeyCommand:this.handleKeyCommand,keyBindingFn:this.mapKeyToEditorCommand,ref:"editor",spellCheck:!0})))),this.isForm(i)?z.a.createElement(oa.Form.Field,null,z.a.createElement("label",null,o.label),l):l}},{key:"isForm",value:function(e){return null!=e&&("form"===e["data-buildertype"]||"formgroup"===e["data-buildertype"])}},{key:"_handleKeyCommand",value:function(e,t){return!!(e=ma.RichUtils.handleKeyCommand(t,e))&&(this.onChange(e),!0)}},{key:"_mapKeyToEditorCommand",value:function(e){if(9!==e.keyCode)return Object(ma.getDefaultKeyBinding)(e);(e=ma.RichUtils.onTab(e,this.state.editorState,4))!==this.state.editorState&&this.onChange(e)}},{key:"_toggleBlockType",value:function(e){this.onChange(ma.RichUtils.toggleBlockType(this.state.editorState,e))}},{key:"_toggleInlineStyle",value:function(e){this.onChange(ma.RichUtils.toggleInlineStyle(this.state.editorState,e))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.value===t.value)return null;t=ma.EditorState.createEmpty();try{var r=Object(ya.convertFromHTML)(e.value),t=ma.EditorState.createWithContent(r)}catch(e){}return{value:e.value,editorState:t}}}]),r}(),ja={CODE:{backgroundColor:"rgba(0, 0, 0, 0.05)",fontFamily:'"Inconsolata", "Menlo", "Consolas", monospace',fontSize:16,padding:2}};function Ra(e){return"blockquote"!==e.getType()?null:"RichEditor-blockquote"}var _a=function(){Ca(r,z.a.Component);var e=Ea(r);function r(){var t;return ga(this,r),(t=e.call(this)).onToggle=function(e){e.preventDefault(),t.props.onToggle(t.props.style)},t}return Oa(r,[{key:"render",value:function(){var e="RichEditor-styleButton";return this.props.active&&(e+=" RichEditor-activeButton"),z.a.createElement("span",{className:e,onMouseDown:this.onToggle},this.props.label)}}]),r}(),xa=[{label:"H1",style:"header-one"},{label:"H2",style:"header-two"},{label:"UL",style:"unordered-list-item"},{label:"OL",style:"ordered-list-item"}],Da=function(t){var e=t.editorState,r=e.getSelection(),n=e.getCurrentContent().getBlockForKey(r.getStartKey()).getType();return z.a.createElement("div",{className:"RichEditor-controls"},xa.map(function(e){return z.a.createElement(_a,{key:e.label,active:e.style===n,label:e.label,onToggle:t.onToggle,style:e.style})}))},Fa=[{label:"Bold",style:"BOLD"},{label:"Italic",style:"ITALIC"},{label:"Underline",style:"UNDERLINE"},{label:"Code",style:"CODE"}],Ta=function(t){var r=t.editorState.getCurrentInlineStyle();return z.a.createElement("div",{className:"RichEditor-controls"},Fa.map(function(e){return z.a.createElement(_a,{key:e.label,active:r.has(e.style),label:e.label,onToggle:t.onToggle,style:e.style})}))};function Na(e){return(Na="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function Ia(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function La(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Ia(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Ia(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function Ua(){return(Ua=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ba(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ma(e,t){return(Ma=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function za(e){return(za=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ka=r(10),t=new(function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ma(e,t)}(t,Oo);var r,n,e=(r=t,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=za(r),t=n?(t=za(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Na(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function t(){return function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e.apply(this,arguments)}return Ba(t.prototype,[{key:"createControl",value:function(e,t,r){var l=r.model,s=r.data,n=r.errors,o=r.parentItem,c=r.buildermode,a=r.children,i=r.handleEvent,u=r.getAdditionalDataForControl,p=r.getFormFunc,d=r.readOnlyControls,f=r.readOnly,V=r.disableRefs,h=r.uploadUrl,m=r.downloadUrl,y=r.extendedData,v=r.controlsToReplace,b=r.needCheckReplace,g=r.eventOnEdit,w=r.eventOnDelete,O=r.eventOnCopy,C=r.externalControlRender,k=r.externalControlList,E=r.adaptiveViewType,A=r.formData,S=r.hideControls,P=void 0,j={key:l.key,name:l.key,className:Oo.getClassName(l,c),style:Oo.getStyle(l,c,E),"data-buildertype":l["data-buildertype"],propertyName:l.propertyName||l.key};j.key||console.log(l);var R=j["data-buildertype"],_=b||v.includes(l.key);c&&this.isContainer(j["data-buildertype"])&&(j.className=(fe(j.className)?"":j.className+" ")+"dwkit-formbuilder-item-container"),V||(j.ref=l.key),void 0!==l.readOnly&&(j.readOnly=l.readOnly),(f||Array.isArray(d)&&d.includes(l.key))&&(j.readOnly=!0);var x,D=Ro.regexForReplace,r=function n(e){if(!_||null==e||c)return e;function o(e){return null!=A?"row."===e.slice(1,5)?Oo.getFormattedDate(e.slice(5,e.length-1),s):Oo.getFormattedDate(e.slice(1,e.length-1),A):Oo.getFormattedDate(e.slice(1,e.length-1),s)}if(Array.isArray(e)){var a=[],i=!1;return e.forEach(function(e){var t,r={};for(t in e)e.hasOwnProperty(t)&&(void 0!==e[t]&&null!==e[t]&&"string"==typeof e[t]?(r[t]=e[t].replace(D,o),!i&&b&&r[t]!==e[t]&&(i=!0)):Array.isArray(e[t])?r[t]=n(e[t]):r[t]=e[t]);a.push(r)}),i&&v.push(l.key),a}if("string"!=typeof e)return e;var t=e.replace(D,o);return b&&e!==t&&v.push(l.key),t};if(void 0!==s&&(l.propertyName?j.value=s[l.propertyName]:j.value=s[j.key]),null!=n&&(l.propertyName?j.error=n[l.propertyName]:j.error=n[j.key]),t===pn)"header"===R?(j.content=r(l.content),j.subheader=r(l.subheader)):"label"===R?j.content=r(l.content):"message"===R?(j.content=r(l.content),j.header=r(l.header)):"image"===R?(j.src=r(l.src),j.href=r(l.href)):"breadcrumb"===R?j.items=r(l.items):"button"===R&&(j.content=r(l.content)),P=z.a.createElement(pn,Ua({},j,{additionalParams:{model:l,data:s,errors:n,children:a,handleEvent:i,parentItem:o,uploadUrl:h,downloadUrl:m}}));else if(t===de)(j=La(La({},j),l)).uploadUrl=h,j.downloadUrl=m,null!=i&&(j.onChange=function(e,t){var r=t.name,n=t.value,t=t.parameters;i({syntheticEvent:e,key:j.name,propertyName:j.propertyName,eventName:"onChange",name:r,value:n,parameters:t})}),P=z.a.createElement(de,Ua({},j,{additionalParams:{model:l,data:s,errors:n,children:a,handleEvent:i,parentItem:o}}));else if(t===vn)(j=La(La({},j),l)).uploadUrl=h,j.downloadUrl=m,null!=i&&(j.onChange=function(e,t){var r=t.name,n=t.value,t=t.parameters;i({syntheticEvent:e,key:j.name,propertyName:j.propertyName,eventName:"onChange",name:r,value:n,parameters:t})}),P=z.a.createElement(vn,Ua({},j,{additionalParams:{model:l,data:s,errors:n,children:a,handleEvent:i,parentItem:o}}));else if(t===Or)j.format=l.format,j.mask=l.mask,j.thousandSeparator=l.thousandSeparator,j.prefix=l.prefix,j.suffix=l.suffix,P=z.a.createElement(Or,Ua({},j,{additionalParams:{model:l,data:s,errors:n,children:a,handleEvent:i,parentItem:o,uploadUrl:h,downloadUrl:m}}));else if(t===at)j.label=l.label,j.defaultValue=l.defaultValue,j.placeholder=l.placeholder,j.disabled=l.disabled,j.fluid=l.fluid,j.selection=l.selection,j.multiple=l.multiple,j.search=l.search,j.dataModel=l.dataModel,j.clearable=l.clearable,j.columns=l.columns,j.paging=l.paging,j.pageSize=l.pageSize,j.getAdditionalDataForControl=u,j.filters=r(l.filters),j.textAsValue=l.textAsValue,l.text&&(j.textFunc=new Function("data","return ".concat(l.text,";"))),n&&void 0!==n[l.key]&&(j.error=n[l.key]),j.handleEvent=i,j.parentIsForm=Oo.isForm(o),P=z.a.createElement(at,j);else if(t===dt)j.defaultValue=l.defaultValue,j.items=l.items,j.imageUrl=l.imageUrl,j.handleEvent=i,P=z.a.createElement(dt,j);else if(t===rn)j.url=l.url,j.category=l.category,j.handleEvent=i,P=z.a.createElement(rn,j);else if(t===jr)R=[],void 0!==l["data-elements"]&&(R=Array.isArray(l["data-elements"])?l["data-elements"]:Ce.a.parse(l["data-elements"])),j.handleEvent=i,n&&void 0!==n[l.key]&&(j.error=n[l.key]),P=z.a.createElement(jr,Ua({},j,{label:l.label,direction:l.direction,placeholder:l.placeholder,items:R}));else if(t===Te){if(j.columns=l.columns,j.draggable=l.draggable,j.hierarchical=l.hierarchical,j.parentIdField=l.parentIdField,j.idField=l.idField,j.childrenField=l.childrenField,j.collapseAll=l.collapseAll,j.disableAdd=l.disableAdd,j.disableCopy=l.disableCopy,j.disableDelete=l.disableDelete,j.placeholders=Ka(l.placeholders),j.placeholders&&(j.data=s,j.adaptiveViewType=E,j.controlBarParams={adaptiveViewType:E,eventOnDelete:w,eventOnEdit:g,eventOnCopy:O,parentComponent:e},j.getAdditionalDataForControl=u,j.createControl=this.createCollectionEditorControl.bind(this)),j.handleEvent=i,j.downloadUrl=m,j.uploadUrl=h,c&&void 0===j.value&&void 0!==j.columns){for(j.buildermode=c,j.createBuilderDropzone=Oo.createBuilderDropzone,j.value=[],I=0;I<5;I++)j.value.push({});if(Boolean(l.hierarchical)&&void 0!==l.parentIdField&&""!==l.parentIdField&&void 0!==l.idField&&""!==l.idField)for(I=1;I<5;I++){var F=j.value[I];void 0===F[l.idField]&&(F[l.idField]=I);for(var T=0;T<2;T++){var N={};N[l.parentIdField]=F[l.idField],j.value.push(N)}}}void 0!==y&&void 0!==y.filters&&void 0!==y.filters[j.key]&&(j.filter=new Ht(y.filters[j.key],j.columns.map(function(e){return e.key}))),P=z.a.createElement(Te,j)}else if(t===ur){if(j.columns=l.columns,j.multiselect=l.multiselect,j.rowKey=l.rowKey,j.editForm=l.editForm,j.editFlow=l.editFlow,j.editWorkflow=l.editWorkflow,j.editType=l.editType,j.pagerType=l.pagerType,j.pageSize=l.pageSize,j.rowHeight=l.rowHeight,j.headerRowHeight=l.headerRowHeight,j.minHeight=l.minHeight,j.autoHeight=l.autoHeight,j.offSet=l.offSet,j.disableSort=l.disableSort,j.resizeColumns=l.resizeColumns,j.editFormShowType=l.editFormShowType,j.sidebarDirection=l.sidebarDirection,j.getAdditionalDataForControl=u,j.handleEvent=i,j.defaultSort=l.defaultSort,j.uploadUrl=h,j.downloadUrl=m,n&&void 0!==n[l.key]&&(j.error=n[l.key]),c&&void 0===j.value){j.buildermode=c,j.createBuilderDropzone=Oo.createBuilderDropzone,j.value=[];for(var I=0;I<30;I++)!function(){var t={};j.columns.forEach(function(e){t[e.key]=e.key+"_"+I}),j.value.push(t)}()}void 0!==y&&void 0!==y.filters&&void 0!==y.filters[j.key]&&(j.filter=new Ht(y.filters[j.key],j.columns.map(function(e){return e.key}))),j.placeholders=Ka(l.placeholders),j.placeholders&&(j.data=s,j.adaptiveViewType=E,j.controlBarParams={adaptiveViewType:E,eventOnDelete:w,eventOnEdit:g,eventOnCopy:O,parentComponent:e},j.createControl=this.createCollectionEditorControl.bind(this)),P=z.a.createElement(ur,j)}else if(t===yr)j["data-items"]=r(l.items),j.pointing=l.pointing,j.secondary=l.secondary,j.tabular=l.tabular,j.fluid=l.fluid,j.vertical=l.vertical,j.activeitem=l.activeitem,j.link=l.link,j.handleEvent=i,P=z.a.createElement(yr,j);else if(t===jn)j["data-panes"]=l.panes,j.pointing=l.pointing,j.secondary=l.secondary,j.tabular=l.tabular,j.fluid=l.fluid,j.vertical=l.vertical,j.activeitem=l.activeitem,j.placeholders=l.placeholders,this.setCreateControlsProps(j,{data:s,buildermode:c,model:l,children:a,getFormFunc:p,getAdditionalDataForControl:u,disableRefs:V,uploadUrl:h,downloadUrl:m,extendedData:y,controlsToReplace:v,eventOnEdit:g,eventOnDelete:w,eventOnCopy:O,adaptiveViewType:E,handleEvent:i,externalControlList:k,externalControlRender:C,needCheckReplace:b,readOnly:f,readOnlyControls:d,hideControls:S,errors:n}),P=z.a.createElement(jn,j);else if(t===Fn)j.panels=l.panels,j.fluid=l.fluid,j.styled=l.styled,j.placeholders=l.placeholders,this.setCreateControlsProps(j,{data:s,buildermode:c,model:l,children:a,getFormFunc:p,getAdditionalDataForControl:u,disableRefs:V,uploadUrl:h,downloadUrl:m,extendedData:y,controlsToReplace:v,eventOnEdit:g,eventOnDelete:w,eventOnCopy:O,adaptiveViewType:E,handleEvent:i,externalControlList:k,externalControlRender:C,needCheckReplace:b,readOnly:f,readOnlyControls:d,hideControls:S,errors:n}),P=z.a.createElement(Fn,j);else if(t===Mt)j.draggable=l.draggable,j.resizable=l.resizable,j.scroll=l.scroll,j.cols=l.cols,j["data-panes"]=l.panes,j.placeholders=l.placeholders,this.setCreateControlsProps(j,{data:s,buildermode:c,model:l,children:a,getFormFunc:p,getAdditionalDataForControl:u,disableRefs:V,uploadUrl:h,downloadUrl:m,extendedData:y,controlsToReplace:v,eventOnEdit:g,eventOnDelete:w,eventOnCopy:O,adaptiveViewType:E,handleEvent:i,errors:n,readOnlyControls:d,readOnly:f,needCheckReplace:b}),P=z.a.createElement(Mt,j);else if(t===we)j.chartType=l.chartType,j.responsive=l.responsive,j.legendPosition=l.legendPosition,j.title=l.title,j.titleSize=l.titleSize,j.datasetCustom=l.datasetCustom,j.dataLabels=l.dataLabels,j.datasetLabel=l.datasetLabel,j.datasetSteppedLine=l.datasetSteppedLine,j.datasetBorderColor=l.datasetBorderColor,j.datasetFill=l.datasetFill,j.datasetBorderWidth=l.datasetBorderWidth,j.datasetBackgroundColor=l.datasetBackgroundColor,c?j.datasetCustom?j.value=[1,2,3,4,3,2,1]:(S="scatter"!==j.chartType?[6,23,15,3]:[{x:6,y:-12},{x:11,y:1},{x:24,y:5},{x:40,y:32}],j.value={labels:["Q1","Q2","Q3","Q4"],datasets:[{data:S}]}):void 0!==s&&(j.value=s[j.key]),P=z.a.createElement(we,j);else if(t===io)j.blockSetState=l.blockSetState,j.blockCommands=l.blockCommands,j.setStateButton=l.setStateButton,j.handleEvent=i,j.getAdditionalDataForControl=u,j.blockLoadParameters=void 0===l.blockLoadParameters||l.blockLoadParameters,j.blockSelectScheme=l.blockSelectScheme,j.selectSchemeDropdown=l.selectSchemeDropdown,s&&(j.selectedScheme=s.__wf_selectedscheme),j.schemes=y&&y.schemes||[],n&&void 0!==n[l.key]&&(j.error=n[l.key]),c&&(j.commands=[{value:"approve",text:"Approve",type:1},{value:"back",text:"Back",type:2}],j.states=[{value:"draft",text:"Draft"},{value:"state1",text:"State 1"},{value:"state2",text:"State 2"},{value:"state3",text:"State 3"},{value:"finish",text:"Finish"}],j.schemes=[]),P=z.a.createElement(io,j);else if(t===Be){if(j.style&&"flex"===l["style-display"]&&(l["style-display-horizontalalign"]&&(j.style.justifyContent=l["style-display-horizontalalign"]),l["style-display-verticalalign"]?j.style.alignItems=l["style-display-verticalalign"]:j.style.alignItems="baseline"),l.childrenView&&(j.className=(j.className?j.className+" ":"")+"dwkit-container-"+l.childrenView),o&&o["children-style-source"]){var L,U={};for(L in Oo.getCustomStyle(o["children-style-source"],U),U)j.style[L]||(j.style[L]=U[L])}delete j.propertyName,P=z.a.createElement(Be,Ua({},j,{children:a}))}else t===Ur?(j.slider=l.slider,j["item-visibleCondition"]=l["item-visibleCondition"],j.pageSize=l.pageSize,j.pagerType=l.pagerType,j.loadButtonLabel=l.loadButtonLabel,j.noRecordsLabel=l.noRecordsLabel,j.defaultSort=l.defaultSort,void 0!==y&&void 0!==y.filters&&void 0!==y.filters[j.key]&&(j.filter=new Ht(y.filters[j.key],["*"])),j.placeholders=Ka(l.placeholders),j.controlProps={readOnly:"server"===l.pagerType||f},j.model=l,j.data=s,x=j.controlProps,this.setCreateControlsProps(x,{children:a,getAdditionalDataForControl:u,disableRefs:V,uploadUrl:h,downloadUrl:m,extendedData:y,controlsToReplace:v,eventOnEdit:g,eventOnDelete:w,eventOnCopy:O,adaptiveViewType:E,handleEvent:i,externalControlList:k,externalControlRender:C,readOnlyControls:d,buildermode:c}),l.childrenView&&(j.className=(j.className?j.className+" ":"")+"dwkit-container-"+l.childrenView),P=z.a.createElement(Ur,j)):t===Cn?(j.content=r(l.content),j.isHtml=l.isHtml,P=z.a.createElement(Cn,j)):t===vt?(j.iconFiletypes=l.iconFiletypes,j.postUrl=h,j.showFiletypeIcon=l.showFiletypeIcon,j.autoProcessQueue=l.autoProcessQueue,j.addRemoveLinks=l.addRemoveLinks,P=z.a.createElement(vt,Ua({},j,{additionalParams:{model:l,data:s,errors:n,children:a,handleEvent:i,parentItem:o}}))):t===Tt?(j.iconFiletypes=l.iconFiletypes,j.showFiletypeIcon=l.showFiletypeIcon,j.autoProcessQueue=l.autoProcessQueue,j.useDropzone=l.useDropzone,j.columns=l.columns,j.idField=l.idField,j.useCamera=l.useCamera,j.multiple=l.multiple,j.postUrl=h,j.downloadUrl=m,P=z.a.createElement(Tt,Ua({},j,{additionalParams:{model:l,data:s,errors:n,children:a,handleEvent:i,parentItem:o}}))):t===ha?(j.label=l.label,j.defaultValue=l.defaultValue,j.placeholder=l.placeholder,j.selection=l.selection,j.multiple=l.multiple,j.search=l.search,j.dataModel=l.dataModel,j.clearable=l.clearable,j.columns=l.columns,j.paging=l.paging,j.pageSize=l.pageSize,j.parentIdField=l.parentIdField,j.getAdditionalDataForControl=u,j.modalCssClass=l["style-custommodalcss"],j.fluid=l.fluid,j.disabled=l.disabled,j.handleEvent=i,void 0!==l["style-modalsource"]&&(Oo.getCustomStyle(l["style-modalsource"],x={}),j.modalStyle=x),n&&void 0!==n[l.key]&&(j.error=n[l.key]),l.text&&(j.textFunc=new Function("data","return ".concat(l.text,";"))),j.parentIsForm=Oo.isForm(o),P=z.a.createElement(ha,j)):t===Pa?P=z.a.createElement(Pa,Ua({},j,{additionalParams:{model:l,data:s,errors:n,children:a,handleEvent:i,parentItem:o,uploadUrl:h,downloadUrl:m}})):t===Bn?(j.header=r(l.header),j.subheader=r(l.subheader),j.imgurl=r(l.imgurl),j.placeholders=l.placeholders,j.activeEvent=l.events&&l.events.onClick&&l.events.onClick.active,this.setCreateControlsProps(j,{data:s,buildermode:c,model:l,children:a,getFormFunc:p,getAdditionalDataForControl:u,disableRefs:V,uploadUrl:h,downloadUrl:m,extendedData:y,controlsToReplace:v,eventOnEdit:g,eventOnDelete:w,eventOnCopy:O,adaptiveViewType:E,handleEvent:i,externalControlList:k,externalControlRender:C,needCheckReplace:b,readOnly:f,readOnlyControls:d,errors:n}),P=z.a.createElement(Bn,j)):((C=C||function(){if(window.DWKitFormSettings)return window.DWKitFormSettings.externalControlRender}())&&(j.parentIsForm=Oo.isForm(o),P=C(e,t,{model:l,data:s,errors:n,parentItem:o,buildermode:c,children:a,handleEvent:i,getAdditionalDataForControl:u,readOnlyControls:d,readOnly:f,disableRefs:V,uploadUrl:h,downloadUrl:m,extendedData:y,controlsToReplace:v,needCheckReplace:b,eventOnEdit:g,eventOnDelete:w,eventOnCopy:O,controlProps:j,replaceControlValue:r})),P||console.error("Control is unsupported!",t,l));if(!0===l["tooltip-errordisabled"]||!n||void 0===n[l.key]||"boolean"==typeof n[l.key]||Array.isArray(n[l.key]))return l["tooltip-enabled"]?(M=""==l["tooltip-showtype"]?void 0:l["tooltip-showtype"],B=""==l["tooltip-position"]?void 0:l["tooltip-position"],K("popup",{className:l["tooltip-classname"],content:l["tooltip-content"],header:l["tooltip-header"],key:l.key+"-tooltip",trigger:P,popupOn:B,popupPosition:M})):P;var B=""==l["tooltip-errorposition"]?void 0:l["tooltip-errorposition"],M=""==l["tooltip-errorshowtype"]?void 0:l["tooltip-errorshowtype"];return K("popup",{className:"dwkit-tooltiperror",content:n[l.key],key:l.key+"-error",trigger:P,popupOn:M,popupPosition:B})}},{key:"createCollectionEditorControl",value:function(e,t,r,n){if(a=this.getControlByType(t)){var o=this.createControl(e,a,La(La({},r),{},{needCheckReplace:!0})),a=[];return r.buildermode?(n=z.a.createElement(Vo,{key:r.model.key+"_controlbar",model:r.model,parent:n.parentComponent,onDelete:n.eventOnDelete,onEdit:n.eventOnEdit,onCopy:n.eventOnCopy,control:o}),a.push(n),a):o}console.error("Control is unsupported!",t,e,r)}},{key:"getPlatformContainerControl",value:function(){return"div"}}]),t}());function qa(){return(qa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Wa(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Ga(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Wa(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Wa(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function Ha(e){return(Ha="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function Qa(){return(Qa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ja(){return(Ja=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ya(e){return!0===e?{}:{display:"none"}}function Za(e){return z.a.createElement(oa.Dimmer,{active:!0,inverted:!0},z.a.createElement(oa.Loader,e))}f("collection-checkbox",function(e){var t={};return e.props.errorFlag&&(t.className="error"),z.a.createElement(oa.Checkbox,qa({},t,{name:e.props.colName,checked:e.props.checked,readOnly:e.props.readOnly,onChange:e.me.handleChange}))}),f("collection-custom-control",function(e){var t=e.props.model;return e.props.createControl(e.props.parent,t["data-buildertype"],{model:t,data:e.props.row,errors:e.props.errorOnRow,parentItem:e.props.name,buildermode:e.props.buildermode,handleEvent:e.handleEvent,getAdditionalDataForControl:e.getAdditionalDataForControl,readOnly:e.props.readOnly,uploadUrl:e.props.uploadUrl,downloadUrl:e.props.downloadUrl,controlsToReplace:[],formData:e.props.data,adaptiveViewType:e.props.adaptiveViewType},e.props.controlBarParams)}),f("collection-date-time",function(e){return z.a.createElement(Xe,{name:e.props.colName,error:e.props.errorFlag,value:e.props.value,readOnly:e.props.readOnly,onChange:e.me.handleChange,type:e.props.type,isForm:!0})}),f("collection-dropdown",function(e){return z.a.createElement(oa.Dropdown,{name:e.props.colName,multiple:e.props.multiple,placeholder:e.props.placeholder,options:e.props.options,error:e.props.errorFlag,value:e.props.value,readOnly:e.props.readOnly,onChange:e.me.handleChange,selection:!0,fluid:!0,search:!0})}),f("collection-editor",function(F){var e=F.props.columns,t=F.props.value,r=F.props.error;return F.props.collapseAll&&Array.isArray(t)&&F.applyCollapseAll(t),e&&e.length?((t={style:F.props.style,className:F.props.className,onBlur:F.props.onBlur,onClick:F.props.onClick,onFocus:F.props.onFocus,onMouseEnter:F.props.onMouseEnter,onMouseLeave:F.props.onMouseLeave}).className?t.className+=" field":t.className="field",F.props.error&&"object"!==Ha(F.props.error)&&(t.className+=" error"),t.className+=" dwkit-collectioneditor-control",z.a.createElement("div",t,z.a.createElement("label",null,F.props.label),z.a.createElement("table",{className:"dwkit-collectioneditor"},z.a.createElement("tbody",null,function(e){var l=[],s=0;e.forEach(function(e){var t,r,n,o,a=void 0;"object"===Ha(e)?(t=e.key,r=e.name,n=e.width,Array.isArray(e.dataList)&&(a=e.dataList)):r=t=e,Ve(r)&&2<=r.length&&(r=r.charAt(0).toUpperCase()+r.slice(1));var i,e=void 0;Ve(a)&&null!=a&&(e=t+"_datalist",i=[],a.forEach(function(e){i.push(z.a.createElement("option",{key:e,value:e}))}),o=z.a.createElement("datalist",{key:e,id:e},i)),l.push(z.a.createElement("td",{key:s,style:Ga({width:n},0==s?{display:"flex"}:{})},r,o)),s++});var t=!0!==F.props.disableAdd,r=!0!==F.props.disableCopy,e=!0!==F.props.disableDelete;return!F.props.readOnly&&(t||r||e)&&(r="Add",Ve(e=function(){if(window.DWKitAdminLang&&window.DWKitAdminLang.collectioneditor)return window.DWKitAdminLang.collectioneditor}())&&(r=e.add),l.push(z.a.createElement("td",{key:"btntd",className:"dwkit-collectioneditor-buttoncol"},t&&z.a.createElement("a",{key:"btnadd",className:"dwkit-btn",onClick:F.btnAdd},r)))),z.a.createElement("tr",{key:"headertr",className:"dwkit-collectioneditor-header"},l)}(e),function e(n,t,r,o,a,i){var l=F.me,s=[];if(null==t)return s;var c=t;fe(a)&&(a=0),void 0===i&&(i=""),F.props.filter&&(c=F.getFilteredItems(c,F.props.filter));for(var u=0;u<c.length;u++)if(void 0!==F.props.childrenField||!F.props.hierarchical||c[u][F.props.parentIdField]==o){var p,d=function(e,t){var r=!F.props.readOnly&&Boolean(F.props.draggable);if(r)return z.a.createElement("div",{draggable:r,onDragStart:F.onDragStart.bind(F.me,t,e),onDragEnd:F.onDragEnd.bind(F.me,t,e),onDragOver:F.onDragOver.bind(F.me),onDrop:F.onDrop.bind(F.me,t,e),key:"celldrag",className:"dwkit-collectioneditor-action"},z.a.createElement(oa.Icon,{onClick:F.onExpand.bind(F.me,t,!1),name:"ellipsis vertical"}))}(c,u),f=void 0,V=void 0,h=c[u][F.props.idField]||c[u].__id||u;F.props.hierarchical&&(g=void 0,v=i+String(u+"_"),he(F.props.parentIdField)?he(p=c[u][F.props.idField]||c[u].__id)&&0<(V=e(n,t,r,p,a+1,v)).length&&(fe(p=F.state.expanded[i+u])||p?g=z.a.createElement("img",{onClick:F.onExpand.bind(F.me,i+u,!1),className:"dwkit-collectioneditor-imgbutton-collapse"}):(g=z.a.createElement("img",{onClick:F.onExpand.bind(F.me,i+u,!0),className:"dwkit-collectioneditor-imgbutton-expand"}),V=void 0)):Array.isArray(c[u][F.props.childrenField])&&0<c[u][F.props.childrenField].length?0<(V=e(n,c[u][F.props.childrenField],r,void 0,a+1,v)).length&&(fe(b=F.state.expanded[i+u])||b?g=z.a.createElement("img",{onClick:F.onExpand.bind(F.me,i+u,!1),className:"dwkit-collectioneditor-imgbutton-collapse"}):(g=z.a.createElement("img",{onClick:F.onExpand.bind(F.me,i+u,!0),className:"dwkit-collectioneditor-imgbutton-expand"}),V=void 0)):g=z.a.createElement("img",{style:{opacity:0},className:"dwkit-collectioneditor-imgbutton-collapse"}),f=z.a.createElement("div",{className:"dwkit-collectioneditor-action"},g));var m=[],y=void 0;Array.isArray(r)&&0<r.length&&(void 0!==r[0].__id&&null!==r[0].__id?function(){var t=c[u].__id;void 0!==t&&null!=t&&(y=r.find(function(e){return e.__id===t}))}():y=r[u]);for(var v,b,g,w=0;w<n.length;w++){var O=void 0,C=F.props.readOnly?"":"input",k=void 0,E=void 0,A=void 0;"object"===Ha(n[w])?(O=n[w].key,C=n[w].control,E=n[w].customControl,Array.isArray(n[w].dataList)&&(k=O+"_datalist"),Array.isArray(n[w].options)&&(A=n[w].options)):O=n[w];var S=void 0;Ve(y)&&(S=Boolean(y[O]));var P={};0===w&&(d||F.props.hierarchical)&&(P.display="flex");var j,R,_,x,D=void 0;"checkbox"===C?D=z.a.createElement(T,{key:h+"_"+w,row:c[u],handleChange:F.handleChange,colName:O,checked:c[u][O],errorFlag:S,readOnly:F.props.readOnly}):"span"===C?(P.verticalAlign="middle",D=z.a.createElement("span",{key:h+"_"+w,name:O},c[u][O])):"number"===C?(j=null===c[u][O]||void 0===c[u][O]?"":c[u][O],j={name:O,type:"number",error:S,value:j,readOnly:F.props.readOnly},D=z.a.createElement(M,{key:h+"_"+w,row:c[u],inputProps:j,handleChange:F.handleChange})):"date"===C?(j=null===c[u][O]||void 0===c[u][O]?"":c[u][O],D=z.a.createElement(I,{key:h+"_"+w,row:c[u],colName:O,value:j,errorFlag:S,readOnly:F.props.readOnly,handleChange:F.handleChange,type:"date"})):"datetime"===C?(R=null===c[u][O]||void 0===c[u][O]?"":c[u][O],D=z.a.createElement(I,{key:h+"_"+w,row:c[u],colName:O,value:R,errorFlag:S,readOnly:F.props.readOnly,handleChange:F.handleChange,type:"datetime"})):"dropdown"===C?(R=null==c[u][O]?n[w].multiple?[]:"":c[u][O],D=z.a.createElement(L,{key:h+"_"+w,row:c[u],colName:O,multiple:n[w].multiple,placeholder:n[w].placeholder,errorFlag:S,value:R,options:A,readOnly:F.props.readOnly,handleChange:F.handleChange})):"file"===C||"file2"===C?(A=null===c[u][O]||void 0===c[u][O]?"":c[u][O],D=z.a.createElement(Q,{key:h+"_"+w,row:c[u],colName:O,errorFlag:S,value:A,readOnly:F.props.readOnly,handleChange:F.handleChange,downloadUrl:F.props.downloadUrl,uploadUrl:F.props.uploadUrl,control:C,additionalData:n[w].additionalData})):"camera"===C?(_=null===c[u][O]||void 0===c[u][O]?"":c[u][O],D=z.a.createElement(ee,{key:h+"_"+w,row:c[u],colName:O,errorFlag:S,value:_,readOnly:F.props.readOnly,handleChange:F.handleChange,downloadUrl:F.props.downloadUrl,uploadUrl:F.props.uploadUrl,control:C,additionalData:n[w].additionalData})):"signature"===C?(_=null===c[u][O]||void 0===c[u][O]?"":c[u][O],D=z.a.createElement(ae,{key:h+"_"+w,row:c[u],colName:O,errorFlag:S,value:_,readOnly:F.props.readOnly,handleChange:F.handleChange,downloadUrl:F.props.downloadUrl,uploadUrl:F.props.uploadUrl,control:C,additionalData:n[w].additionalData})):"custom"===C?E?function(){var e=c[u][O]||"",t={},r=Ga(Ga({},t=n[w].customControlGetPropsFunc?n[w].customControlGetPropsFunc(c[u]):t),{},{key:h+"_"+w,name:O,error:S,value:e,colName:O,row:c[u],readOnly:F.props.readOnly,onChange:function(e,t){l.handleChange(r.row,e,t)}});D=z.a.createElement(E,r)}():Ve(F.props.placeholders)&&Array.isArray(F.props.placeholders[O])&&0<F.props.placeholders[O].length?(C=F.props.placeholders[O][0])&&(x=c[u],void 0!==C.propertyName&&""!==C.propertyName||(C.propertyName=O),P.position="relative",D=z.a.createElement(N,{key:h+"_"+w,model:C,parent:F.me,row:x,errorOnRow:y,name:F.props.name,buildermode:F.props.buildermode,handleChange:F.handleChange,handleEvent:F.props.handleEvent,getAdditionalDataForControl:F.props.getAdditionalDataForControl,readOnly:F.props.readOnly,uploadUrl:F.props.uploadUrl,downloadUrl:F.props.downloadUrl,data:F.props.data,adaptiveViewType:F.props.adaptiveViewType,controlBarParams:F.props.controlBarParams,createControl:F.props.createControl})):F.props.buildermode&&F.props.createBuilderDropzone&&(D=F.props.createBuilderDropzone(F.props.name,F.props.name,void 0,O,O)):(x=null===c[u][O]||void 0===c[u][O]?"":c[u][O],x={name:O,list:k,error:S,value:x,readOnly:F.props.readOnly},D=z.a.createElement(M,{key:h+"_"+w,row:c[u],inputProps:x,handleChange:F.handleChange})),0===w?(a&&(P.paddingLeft=String(15*a+5)+"px"),m.push(z.a.createElement("td",{key:h+"_"+w+"td",style:P},f,d,D))):m.push(z.a.createElement("td",{key:h+"_"+w+"td",style:P},D))}F.props.readOnly||(v=!F.props.disableAdd,b=!F.props.disableCopy,g=!F.props.disableDelete,(v||b||g)&&(F.props.hierarchical?m.push(z.a.createElement("td",{key:"celldelete",className:"dwkit-collectioneditor-cellbtn"},z.a.createElement("div",{className:"field"},v&&z.a.createElement(oa.Icon,{key:"addchild",onClick:F.btnAddChild.bind(F.me,u,c),link:!0,name:"add"}),b&&z.a.createElement(oa.Icon,{key:"copy",onClick:F.btnCopy.bind(F.me,u,c),link:!0,name:"copy"}),g&&z.a.createElement(oa.Icon,{key:"delete",onClick:F.btnDelete.bind(F.me,u,c),link:!0,name:"delete"})))):m.push(z.a.createElement("td",{key:"celldelete",className:"dwkit-collectioneditor-cellbtn"},z.a.createElement("div",{className:"field"},b&&z.a.createElement(oa.Icon,{key:"copy",onClick:F.btnCopy.bind(F.me,u,void 0),link:!0,name:"copy"}),g&&z.a.createElement(oa.Icon,{key:"delete",onClick:F.btnDelete.bind(F.me,u,void 0),link:!0,name:"delete"})))))),s.push(z.a.createElement("tr",{key:i+h,className:"dwkit-collectioneditor-row","data-rowindex":u},m)),s=s.concat(V)}return s}(e,F.state.data,r))))):z.a.createElement("div",null,"Fill columns property!")}),f("collection-input",function(e){return z.a.createElement(oa.Input,Qa({},e.props.inputProps,{onChange:e.me.handleChange}))}),f("collection-upload",function(e){return z.a.createElement($n,{name:e.props.colName,error:e.props.errorFlag,value:e.props.value,readOnly:e.props.readOnly,onChange:e.me.handleChange,downloadUrl:e.props.downloadUrl,uploadUrl:e.props.uploadUrl,additionalData:e.props.additionalData,additionalDataContext:e.props.row,isForm:!0,hideClearButton:"file2"===e.props.control})}),f("collection-camera",function(e){return z.a.createElement(de,{name:e.props.colName,error:e.props.errorFlag,value:e.props.value,readOnly:e.props.readOnly,onChange:e.me.handleChange,downloadUrl:e.props.downloadUrl,uploadUrl:e.props.uploadUrl,additionalData:e.props.additionalData,additionalDataContext:e.props.row,compact:!0,showPreview:!0,hideClear:!0,fluid:!0,isForm:!0,compression:.75})}),f("collection-signature",function(e){return z.a.createElement(vn,{name:e.props.colName,error:e.props.errorFlag,value:e.props.value,readOnly:e.props.readOnly,onChange:e.me.handleChange,downloadUrl:e.props.downloadUrl,uploadUrl:e.props.uploadUrl,additionalData:e.props.additionalData,additionalDataContext:e.props.row,compact:!0,showPreview:!0,fluid:!0,isForm:!0})}),f("breadcrumb",function(e){for(var t=[],r=0;r<e.children.length;r++){var n=e.children[r];n.isDivider?t.push(z.a.createElement(oa.Breadcrumb.Divider,n.dividerProps)):t.push(z.a.createElement(oa.Breadcrumb.Section,n.childProps,n.text))}return z.a.createElement(oa.Breadcrumb,Ja({},e.propsControl,{children:t}))}),f("builder-dropzone",function(t){return z.a.createElement(Po.Consumer,null,function(e){return e=e.visible,z.a.createElement(oa.Popup,{trigger:z.a.createElement("div",{name:t.key,key:t.key,elementafter:t.elementAfter,elementtoinsert:t.elementToInsert,placeholderkey:t.placeholderKey,className:"dwkit-formbuilder-zone",style:Ya(e)},t.text),onClose:t.onClosePopup,content:z.a.createElement(oa.TextArea,{rows:"10",width:"200px",onChange:t.onChangeDZ,placeholder:"Insert a model control"}),on:"click"})})}),f("button",function(e){return e.propsControl.link?(e.propsControl.style.cursor="pointer",z.a.createElement("a",e.propsControl,e.propsControl.content)):e.propsControl.isForm?z.a.createElement(oa.Form.Button,e.propsControl):z.a.createElement(oa.Button,e.propsControl)});var Xa=r(13),$a=function(e){return z.a.createElement("div",e,e.children,e.isLoading&&z.a.createElement(Za,null))};function ei(e){return(ei="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function ti(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ri(e,t){return(ri=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ni(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oi(e){return(oi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ai(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ii="image/png",li="signature-image",si=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ri(e,t)}(o,z.a.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=oi(r),t=n?(t=oi(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==ei(t)&&"function"!=typeof t?ni(e):t});function o(e){var a;return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),ai(ni(a=t.call(this,e)),"labels",function(){return a.props.compact?{}:{open:a.props.openLabel||"Open",clear:a.props.clearLabel||"Clear"}}),ai(ni(a),"load",function(n){var e=ni(a).props,t=e.value,o=new XMLHttpRequest;o.open("POST",e.downloadUrl+t,!0),o.responseType="arraybuffer",o.onload=function(){var e=li,t=o.getResponseHeader("Content-Disposition");!t||-1===t.indexOf("attachment")||(r=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(t))&&r[1]&&(e=r[1].replace(/['"]/g,""));var r=o.response;r.filename=e,r=URL.createObjectURL(new Blob([r],{type:ii})),a.setState({image:r,loading:!1}),n&&n(r)},o.send(null)}),ai(ni(a),"download",function(e){e.preventDefault(),a.load(function(e){var t=document.createElement("a");t.setAttribute("href",window.URL.createObjectURL(new Blob([e],{type:ii}))),t.setAttribute("download",e.filename||"unknown"),document.body.appendChild(t),t.onclick=function(){document.body.removeChild(t)},t.click()})}),ai(ni(a),"clear",function(){a.props.clear(),a.setState({image:null})}),ai(ni(a),"openFullscreen",function(){var e=ni(a).state;e.image?window.open(e.image):a.load(function(e){window.open(e)})}),ai(ni(a),"preview",function(){var e=(t=ni(a)).props,t=t.state;return e.showPreview&&z.a.createElement($a,{isLoading:t.loading,className:"image-uploaded-preview"+(e.compact?" compact":""),onClick:a.openFullscreen},e.compact?z.a.createElement(oa.Image,{rounded:!0,src:t.image,className:"compact-image-preview signature"}):z.a.createElement("img",{src:t.image,className:"image-preview"}))}),a.state={image:null,loading:!!e.showPreview},e.value&&e.showPreview&&a.load(),a}return ti(o.prototype,[{key:"componentDidUpdate",value:function(e){var t=this.props;t.value!==e.value&&(t.value?t.showPreview&&this.load():this.setState({image:null}))}},{key:"render",value:function(){var e=this.props,t=(this.state,this.labels);return z.a.createElement("div",{style:{display:"flex",flexDirection:e.showPreview&&!e.compact?"column":"row"}},e.showPreview?this.preview():z.a.createElement(oa.Button,{content:t().open,onClick:this.openFullscreen,icon:"zoom-in",fluid:!e.compact}),!e.hideClear&&z.a.createElement(oa.Button,{onClick:this.clear,content:t().clear,icon:"cancel",fluid:!e.compact}))}}]),o}(),ci=function(e,t,r){var e=function(e){for(var t=atob(e.split(",")[1]),r=e.split(",")[0].split(":")[1].split(";")[0],e=new ArrayBuffer(t.length),n=new Uint8Array(e),o=0;o<t.length;o++)n[o]=t.charCodeAt(o);return new Blob([e],{type:r})}(e),n=new FormData,e=new File([e],"file",{type:"image/jpeg"});n.append("data",e),n.append("name","photo"),window.$.ajax({url:t,type:"POST",processData:!1,contentType:!1,dataType:"json",data:n,success:function(e){r(n,e)}})};function ui(e){return(ui="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function pi(){return(pi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function di(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fi(e,t){return(fi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hi(e){return(hi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var yi=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fi(e,t)}(o,z.a.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=hi(r),t=n?(t=hi(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==ui(t)&&"function"!=typeof t?Vi(e):t});function o(e){var n;return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),mi(Vi(n=t.call(this,e)),"labels",function(){return{takeShot:n.props.compact?"":n.props.shotLabel||"Take shot",openImage:n.props.compact?"":n.props.openImageLabel||"Open image",reset:n.props.resetLabel||"Reset",upload:n.props.uploadLabel||"Upload",cancel:n.props.cancelLabel||"Cancel"}}),mi(Vi(n),"showCameraModal",function(){n.setState({open:!0,dataUrl:null})}),mi(Vi(n),"openImageDialog",function(){var r=document.createElement("input");r.setAttribute("type","file"),r.style.opacity=0,r.setAttribute("accept","image/*"),r.setAttribute("multiple",!1),document.body.appendChild(r),r.onchange=function(e){var e=e.target.files[0],t=new FileReader;t.onload=function(){n.upload(t.result)},t.readAsDataURL(e),document.body.removeChild(r)},r.click()}),mi(Vi(n),"cancel",function(){n.setState({open:!1,dataUrl:null})}),mi(Vi(n),"clear",function(){n.setState({dataUrl:null})}),mi(Vi(n),"upload",function(e){var r=Vi(n).props;ci(n.state.dataUrl||e,r.uploadUrl,function(e,t){r.onUpload(e,t)}),n.setState({open:!1})}),mi(Vi(n),"onTakePhoto",function(e){n.setState({dataUrl:e})}),n.state={open:!1,dataUrl:null},n}return di(o.prototype,[{key:"render",value:function(){var e=this.props,t=this.state,r=this.labels;return e.value?z.a.createElement(si,pi({},e,{clear:e.onClear})):z.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},z.a.createElement(oa.Modal,{open:this.state.open},z.a.createElement(oa.Modal.Content,null,t.dataUrl?z.a.createElement("div",{className:"react-html5-camera-photo"},z.a.createElement("img",{src:t.dataUrl,className:"image-preview"}),z.a.createElement(oa.Button,{fluid:!0,content:r().reset,className:"ui button",onClick:this.clear,icon:"cancel"})):z.a.createElement(Xa.Camera,{onTakePhotoAnimationDone:this.onTakePhoto,isFullscreen:!1,idealFacingMode:Xa.FACING_MODES.ENVIRONMENT,imageType:Xa.IMAGE_TYPES.JPG,imageCompression:parseFloat(e.compression)||1,isMaxResolution:!0,isImageMirror:!0})),z.a.createElement(oa.Modal.Actions,null,z.a.createElement(oa.Button,{className:"buttontype1",content:r().upload,src:t.dataUrl,download:!0,onClick:this.upload,icon:"check",disabled:!t.dataUrl}),z.a.createElement(oa.Button,{className:"buttontype2",content:r().cancel,onClick:this.cancel}))),z.a.createElement(oa.Button,{content:r().takeShot,basic:!0,fluid:!!e.compact,onClick:this.showCameraModal,icon:"photo"}),z.a.createElement(oa.Button,{content:r().openImage,basic:!0,fluid:!!e.compact,onClick:this.openImageDialog,icon:"folder"}))}}]),o}();f("camera",function(e){var t=e.props,r=t.compact&&t.showPreview?{minWidth:160}:{};return z.a.createElement("div",{className:"field",style:r},e.props.label&&z.a.createElement("label",null,e.props.label),z.a.createElement(yi,pi({},t,{onUpload:e.onUpload,onClear:e.onClear})))}),f("chart-view",function(e){var t=e.props.style,r=Ve(e.props.width)?e.props.width:"400px";Ve(t.width)&&(r=t.width);var n=Ve(e.props.height)?e.props.height:"300px";Ve(t.height)&&(n=t.height),e.state.width===r&&e.state.height===n||!Ve(e.state.chart)||(e.state.chart.destroy(),e.state.chart=void 0),e.state.width=r,e.state.height=n;var o="field";return Ve(e.props.className)&&(o+=" "+e.props.className),z.a.createElement("div",{className:o,style:t},z.a.createElement("canvas",{id:e.divId,width:r,height:n}))}),f("chart-view-redraw-chart",function(e){if(Ve(e.state.chart)&&(e.state.chart.destroy(),e.state.chart=void 0),fe(e.state.chart)){var t=document.getElementById(e.divId).getContext("2d"),r=e.chartData,n=void 0;if(Ve(r)&&Array.isArray(r.datasets)){var o=[];if(r.datasets.forEach(function(e){Ve(e.yAxisID)&&null!=e.yAxisID&&(o.includes(e.yAxisID)||o.push(e.yAxisID))}),0<o.length)for(var n=[],a=0;a<o.length;a++)a?n.push({type:"linear",display:!0,position:"right",id:o[a],gridLines:{drawOnChartArea:!1}}):n.push({type:"linear",display:!0,position:"left",id:o[a]})}r={type:e.props.chartType,data:r,options:{responsive:Boolean(e.props.responsive),legend:{position:e.props.legendPosition},title:{fontSize:fe(e.props.titleSize)?14:e.props.titleSize,display:he(e.props.title),text:e.props.title}}},Ve(n)&&(r.options.scales={yAxes:n}),e.state.chart=new Chart(t,r)}else e.state.chart.update()}),f("checkbox",function(e){return e.isForm?z.a.createElement(oa.Form.Checkbox,e.propsControl):z.a.createElement(oa.Checkbox,e.propsControl)}),f("container",function(e){return z.a.createElement("div",e.props)});var Oe=r(7),vi=r.n(Oe);f("control-bar",function(i){function l(){var e=vi()(".dwkit-formbuilder-zone");e.removeClass("dwkit-formbuilder-zone-active"),e.removeClass("dwkit-formbuilder-zone-select"),e.off()}return i.me.updateBarPosition=function(){var e,t,r,n;i.me.controlRef&&i.me.controlRef.current&&i.me.barRef&&i.me.barRef.current&&(n=aa.a.findDOMNode(i.me.controlRef.current),e=aa.a.findDOMNode(i.me.barRef.current),t=vi()(n).position(),r=n.getBoundingClientRect(),n=e.getBoundingClientRect(),r=t.left+r.width-n.width,n=t.top-n.height/2,e.style.transform="translate3d("+(r=(r=r<15?15:r)<15?15:r)+"px, "+n+"px, 0)")},z.a.createElement(Po.Consumer,null,function(e){return e=e.visible,e=z.a.createElement("div",{ref:i.me.barRef,className:"dwkit-formbuilder-item-toolbar-container",style:Ya(e)},z.a.createElement("div",{key:"bar",className:"dwkit-formbuilder-item-toolbar-header",onMouseOver:function(e){var t=void 0;(t=i.me.controlRef.current?aa.a.findDOMNode(i.me.controlRef.current):t)&&vi()(t).addClass("dwkit-formbuilder-item-selected")}.bind(i.me),onMouseLeave:function(e){var t=void 0;(t=i.me.controlRef.current?aa.a.findDOMNode(i.me.controlRef.current):t)&&vi()(t).removeClass("dwkit-formbuilder-item-selected")}.bind(i.me)},z.a.createElement("div",{className:"dwkit-formbuilder-item-toolbar-header-buttons"},z.a.createElement("div",{className:"dwkit-formbuilder-item-toolbar-header-title",title:i.props.text,onDoubleClick:i.onCopyControl},i.props.model.key),z.a.createElement(oa.Icon,{key:"move",draggable:!0,onDragStart:function(e,t){var r,n,o,a=".dwkit-formbuilder-zone";t.dataTransfer.setData("text",""),this.controlRef.current&&(n=(r=aa.a.findDOMNode(this.controlRef.current)).getBoundingClientRect(),t.dataTransfer.setDragImage(r,n.width/2,0)),Ve(e.forContainerType)&&(n=e.forContainerType.split(","),o="",n.forEach(function(e){0<o.length&&(o+=","),o+="[data-buildertype='"+e+"'] > "+a}),a=o),vi()(a).addClass("dwkit-formbuilder-zone-active").on("dragenter",function(e,t,r){vi()(r.target).addClass(t)}.bind(i.me,e,"dwkit-formbuilder-zone-select")).on("dragleave",function(e,t,r){vi()(r.target).removeClass(t)}.bind(i.me,e,"dwkit-formbuilder-zone-select")).on("dragover",function(e){e.preventDefault()}).on("drop",function(e,t){return 0<(t=vi()(t.target)).length&&lo.move(e.key,t[0]),l(),!1}.bind(i.me,e))}.bind(i.me,i.props.model),onDragEnd:l.bind(i.me,i.props.model),link:!0,name:"move"}),z.a.createElement(oa.Icon,{key:"edit",onClick:i.me.props.onEdit.bind(i.props.parent,i.props.model),link:!0,name:"edit"}),z.a.createElement(oa.Icon,{key:"copy",onClick:i.me.props.onCopy.bind(i.props.parent,i.props.model),link:!0,name:"copy"}),z.a.createElement(oa.Icon,{key:"delete",onClick:i.me.props.onDelete.bind(i.props.parent,i.props.model),link:!0,name:"delete"})))),[z.a.cloneElement(i.props.control,{ref:i.me.controlRef}),e]})});var Yr=r(18),bi=r.n(Yr);function gi(){return(gi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function wi(){return(wi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Oi(){return(Oi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}f("date-picker",function(e){var t=z.a.createElement(bi.a,gi({},e.datePickerProps,{peekNextMonth:!0,showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",isClearable:!e.props.readOnly,placeholderText:e.placeholder,selected:e.date,onChange:e.onChange,onChangeRaw:e.handleChangeRaw}));return!e.props.labelPosition||e.props.isForm?(e.controlProps.className?e.controlProps.className+=" field":e.controlProps.className="field",e.props.error&&(e.controlProps.className+=" error"),e.props.readOnly&&(e.controlProps.className+=" datepicker-readonly"),z.a.createElement("div",e.controlProps,Ve(e.props.label)&&z.a.createElement("label",null,e.props.label),z.a.createElement("div",{"data-buildertype":e.props.type},t))):(e.controlProps.className?e.controlProps.className+=" ui fluid labeled input":e.controlProps.className="ui fluid labeled input",e.props.error&&(e.controlProps.className+=" error"),e.props.readOnly&&(e.controlProps.className+=" datepicker-readonly"),z.a.createElement("div",gi({},e.controlProps,{"data-buildertype":e.props.type}),Ve(e.props.label)&&z.a.createElement("div",{className:"ui label label"},e.props.label),t))}),f("dictionary",function(e){return z.a.createElement(oa.Form.Dropdown,wi({},e.propsControl,{error:Ve(e.propsControl.error)}))}),f("dropdown",function(e){return z.a.createElement(oa.Form.Dropdown,e.propsControl)}),f("dropdown-trigger",function(e){return e.controlProps.trigger=z.a.createElement("span",null,Ve(e.props.imageUrl)&&z.a.createElement(oa.Image,{avatar:!0,src:e.props.imageUrl}),Ve(e.props.value)?e.props.value:e.props.defaultValue),z.a.createElement(oa.Dropdown,Oi({},e.controlProps,{onMouseDown:e.onMouseDown}))});var Oe=r(19),Ci=r.n(Oe);function ki(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Ei(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?ki(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):ki(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function Ai(){return(Ai=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Si(){return(Si=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Pi(){return(Pi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ji(){return(ji=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ri(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}f("dropzone",function(e){var t=e.props.readOnly?z.a.createElement("div",null):z.a.createElement(Ci.a,{config:e.componentConfig,eventHandlers:e.eventHandlers,djsConfig:e.djsConfig});return e.isForm?z.a.createElement("div",{className:"field"},t):t}),f("edit-form",function(e){if(fe(e.state.item))return z.a.createElement("div",null);var t=e.dwKitControls.getEditControlByType(e.state.item["data-buildertype"],e.props.externalControlList);if(!t)return o="Close",Ve(e.props.localization)&&(o=e.props.localization.base.closebutton),z.a.createElement(oa.Modal,{open:e.state.open,onClose:e.onClose},z.a.createElement(oa.Modal.Header,null,"Error"),z.a.createElement(oa.Modal.Content,null,z.a.createElement("p",null,"EditForm is not found for this control!")),z.a.createElement(oa.Modal.Actions,null,z.a.createElement(oa.Button,{onClick:e.onClose},o)));var r="OK",n="Cancel",o="Question";return Ve(e.props.localization)&&(r=e.props.localization.base.okbutton,n=e.props.localization.base.cancelbutton,o=e.props.localization.base.questiontitle),z.a.createElement("div",null,z.a.createElement(t,{key:"editform",data:e.state.item,parent:e.parent,open:e.state.open,onSave:e.onSave,onClose:e.onClose,actions:e.props.actions,className:"dwkit-formbuilder-editform",localization:e.props.localization}),z.a.createElement(oa.Modal,{size:"small",open:e.state.confirm,dimmer:"inverted",onClose:e.confirmHandleCancel},z.a.createElement(oa.Modal.Header,null,o),z.a.createElement(oa.Modal.Content,null,z.a.createElement("p",null,e.state.confirmtext)),z.a.createElement(oa.Modal.Actions,null,z.a.createElement(oa.Button,{className:"buttontype1",onClick:e.state.confirmHandle},r),z.a.createElement(oa.Button,{className:"buttontype2",onClick:e.confirmHandleCancel},n))))}),f("empty",function(e){return z.a.createElement("div",{className:"dwkit-formbuilder-empty",key:e.key},e.text)}),f("events-editor",function(o){var a=o.props.data,e=o.props.events,i=[];return e.forEach(function(e){var t=Ve(a)?a[e]:{},r={element:oa.Form.Dropdown,props:{className:"dwkit-action-dropdown",multiple:!0,search:!0,selection:!0,allowAdditions:!0}},n={element:Te,props:{className:"parameters-editor",multiple:!0,search:!0,selection:!0,allowAdditions:!0}};i.push(z.a.createElement("div",{key:e+"_events"},z.a.createElement(oa.Form.Checkbox,{className:t.active?"events-editor-checkbox":"",width:3,key:"active",label:e,name:"active",checked:t.active,onChange:o.me.handleChange.bind(o.me,e)}),z.a.createElement("div",{className:"events-editor-block",style:t.active?{}:{display:"none"}},z.a.createElement(Te,{draggable:!0,columns:[{key:"actions",name:"Actions",control:"custom",customControl:r.element,customControlGetPropsFunc:function(e){return Ei({options:o.actionOptions,value:e.actions},r.props)}},{key:"parameters",name:"Parameters",control:"custom",customControl:n.element,customControlGetPropsFunc:function(e){return Ei({value:e.parameters,columns:[{key:"name",name:"Name"},{key:"value",name:"Value"}]},n.props)}},{key:"targets",name:"Targets",control:"custom",customControl:r.element,customControlGetPropsFunc:function(e){return Ei({options:o.targetOptions,value:e.targets},r.props)}}],name:"triggers",className:"events-editor",value:t.triggers,onChange:o.me.handleChange.bind(o.me,e)}),z.a.createElement(oa.Button,{onClick:o.me.initNewTrigger.bind(o.me,e),basic:!0,size:"mini",style:{width:"calc(100% - 70px)",marginLeft:20,fontWeight:900,padding:4,fontSize:19}},"+"))))}),z.a.createElement("div",null,i)}),f("files",function(t){return z.a.createElement("div",null,z.a.createElement(Te,Ai({disableAdd:!0,disableCopy:!0},t.editorProps)),function(){if(t.props.readOnly)return null;if(t.props.useDropzone){var e={iconFiletypes:t.props.iconFiletypes,postUrl:t.props.postUrl,showFiletypeIcon:t.props.showFiletypeIcon,autoProcessQueue:t.props.autoProcessQueue,additionalParams:t.props.additionalParams,onSuccess:t.onDropzoneUploadSuccess,onFail:t.onDropzoneUploadFail};return z.a.createElement(vt,Ai({addRemoveLinks:!0},e))}return t.props.useCamera&&(t.editorProps.columns.find(function(e){return"file2"==e.control}).control="camera"),e={uploadUrl:t.props.postUrl,downloadUrl:t.props.downloadUrl,readOnly:t.props.readOnly,onlyImages:t.props.useCamera,multiple:t.props.multiple,onChange:t.onUploadChange,onUploadFail:t.onUploadFail},z.a.createElement($n,Ai({isForm:!0},e))}())}),f("form",function(e){return z.a.createElement(oa.Form,Si({},e.propsControl,{children:e.children,size:e.model.size}))}),f("formgroup",function(e){var t=e.widths;return"custom"===t&&(t=e.widthsCustom),"grouped"==e.orientation&&(e.propsControl[e.orientation]=!0),"field"==e.orientation?z.a.createElement(oa.Form.Field,Pi({},e.propsControl,{children:e.children})):z.a.createElement(oa.Form.Group,Pi({},e.propsControl,{widths:t,children:e.children}))}),f("checkbox-formatter",function(e){return e=Boolean(e.props.value),z.a.createElement(oa.Checkbox,{checked:e,disabled:!0})}),f("number-formatter",function(e){return e=e.props.value,z.a.createElement("span",{style:{textAlign:"right"}},z.a.createElement("div",{title:e},e))}),f("date-formatter",function(e){return z.a.createElement("span",{style:{textAlign:"right"}},z.a.createElement("div",{title:e.strValue},e.strValue))}),f("datetime-formatter",function(e){return z.a.createElement("span",{style:{textAlign:"right"}},z.a.createElement("div",{title:e.strValue},e.strValue))}),f("time-formatter",function(e){return z.a.createElement("span",{style:{textAlign:"right"}},z.a.createElement("div",{title:e.strValue},e.strValue))}),Yr=r(16),Oe=r.n(Yr);var _i=Object(Yr.WidthProvider)(Oe.a);f("grid-layout",function(l){var e=function(t){var o=l.me,a=[],i=void 0;if(!l.props.buildermode)try{i=JSON.parse(l.getCookie(window.location.pathname+"_"+l.props.name))}catch(e){}if(Array.isArray(t))for(var e=function(e){var r=t[e];if(void 0!==r.visibleCondition&&null!==r.visibleCondition&&""!==r.visibleCondition){e="return "+r.visibleCondition;try{if(!new Function("",e)())return"continue"}catch(e){}}var n=!1;Ve(i)&&i.forEach(function(e){var t;e.i==r.psid&&(n=!0,t=function(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Ri(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Ri(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}({},r),o.props.draggable&&(t.x=e.x,t.y=e.y),o.props.resizable&&(t.w=e.w,t.h=e.h),a.push(o.renderPanel(t)))}),n||a.push(function(e){var t,r=void 0;Ve(l.props.placeholders)&&Array.isArray(l.props.placeholders[e.psid])&&0<l.props.placeholders[e.psid].length?(n=l.props.placeholders[e.psid])&&(r=l.props.createControls(l.me,{model:n,parentPlaceholder:e.psid,buildermode:l.props.buildermode,data:l.props.data,errors:l.props.errors,parentItem:l.props.model,children:l.props.children,handleEvent:l.props.handleEvent,getFormFunc:l.props.getFormFunc,getAdditionalDataForControl:l.props.getAdditionalDataForControl,readOnlyControls:l.props.readOnlyControls,readOnly:l.props.readOnly,disableRefs:l.props.disableRefs,uploadUrl:l.props.uploadUrl,downloadUrl:l.props.downloadUrl,extendedData:l.props.extendedData,controlsToReplace:l.props.controlsToReplace,needCheckReplace:l.props.needCheckReplace,eventOnEdit:l.props.eventOnEdit,eventOnDelete:l.props.eventOnDelete,eventOnCopy:l.props.eventOnCopy,adaptiveViewType:l.props.adaptiveViewType}),t=e.psid,l.props.buildermode&&l.props.createBuilderDropzone&&(0<r.length&&0<n.length&&r.unshift(l.props.createBuilderDropzone(t+"layout_dropzone_header",l.props.name,void 0,e.title,e.psid)),r.push(l.props.createBuilderDropzone(t+"layout_dropzone_footer",l.props.name,n[n.length-1].key,e.title,e.psid)))):l.props.buildermode&&l.props.createBuilderDropzone&&(r=l.props.createBuilderDropzone("layout_dropzone_footer",l.props.name,void 0,e.title,e.psid));var n={x:Ve(e.x)?e.x:0,y:Ve(e.y)?e.y:0,w:Ve(e.w)?e.w:4,h:Ve(e.h)?e.h:4,i:e.psid};return z.a.createElement("div",{key:e.psid,className:e.cssclass,"data-grid":n},e.title&&z.a.createElement("div",{className:"react-grid-item-title"},e.title),r)}(r))},r=0;r<t.length;r++)e(r);return a}(l.props["data-panes"]),t={isDraggable:!0,isResizable:!0,cols:he(l.props.cols)?l.props.cols:12,rowHeight:30,containerPadding:[0,0],draggableCancel:"input,textarea"};l.props.buildermode||(t.isDraggable=l.props.draggable,t.isResizable=l.props.resizable);var r=l.props.className;return l.props.scroll&&(r="react-grid-scroll"),z.a.createElement("div",{className:r,style:l.props.style},z.a.createElement(_i,ji({onLayoutChange:l.onLayoutChange},t),e))});var xi=r(12),Di=r.n(xi);function Fi(){return(Fi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ti(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Ni(){return(Ni=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ii(){return(Ii=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Li(){return(Li=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ui(){return(Ui=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Bi(){return(Bi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}f("grid-view",function(e){var t=e.props.className,r=function(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Ti(Object(o),!0).forEach(function(e){var t,r=n;e=o[t=e],t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Ti(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}({},e.props.style),n=e.gridProps;return n.columns=e.gridColumns,n.rowKey=e.props.rowKey,he(e.props.rowHeight)&&(n.rowHeight=Number(e.props.rowHeight)),e.props.headerRowHeight&&(n.headerRowHeight=e.props.headerRowHeight),e.props.autoHeight?(r.minHeight=e.props.minHeight,he(e.props.offSet)?r.height="calc(100vh - "+e.props.offSet+")":r.height="100vh",t=(fe(t)?"":t+" ")+"dwkit-gridview-autoHeight"):he(e.props.minHeight)&&(n.minHeight=e.props.minHeight),e.props.multiselect&&(n.rowSelection={onRowsSelected:e.onRowsSelected,onRowsDeselected:e.onRowsDeselected,selectBy:e.selectBy}),z.a.createElement("div",{key:e.props.name,name:e.props.name,className:t,style:r},z.a.createElement(Di.a,Fi({key:"grid"},n,{rowsCount:e.state.rowsCount,rowGetter:e.gridRowGetter,onRowClick:e.gridOnRowClick,onGridSort:e.handleGridSort})))}),f("header",function(e){return z.a.createElement(oa.Header,Ni({},e.propsControl,{textAlign:e.model.textAlign,size:e.model.size,content:e.props.content,subheader:e.props.subheader}))}),f("image",function(r){var e,t,n,o,a=r.props.src;return"string"==typeof r.props.value&&32==r.props.value.length&&(r.props.value==r.me.state.token?a=r.me.state.source:(t=function(e,t){r.me.setState({token:e,source:t})},n=(e=r).props.value,(o=new XMLHttpRequest).open("POST",e.me.props.additionalParams.downloadUrl+n,!0),o.responseType="blob",o.onload=function(){var e=new FileReader;e.onloadend=function(){t(n,this.result)},e.readAsDataURL(o.response)},o.send(null))),z.a.createElement(oa.Image,Ii({},r.propsControl,{avatar:r.model.avatar,bordered:r.model.bordered,centered:r.model.centered,disabled:r.model.disabled,inline:r.model.inline,href:r.props.href,src:a,floated:r.model.floated,shape:r.model.shape,spaced:r.model.spaced,verticalAlign:r.model.verticalAlign,height:r.model.height,width:r.model.width}))}),f("input",function(e){return"file"===e.propsControl.type?(e.propsControl.isForm=!e.propsControl.labelPosition||e.isForm,z.a.createElement($n,Li({},e.propsControl,{downloadUrl:e.props.additionalParams.downloadUrl,uploadUrl:e.props.additionalParams.uploadUrl}))):"date"===e.propsControl.type||"time"===e.propsControl.type||"datetime"===e.propsControl.type?(e.propsControl.isForm=!e.propsControl.labelPosition||e.isForm,z.a.createElement(Xe,e.propsControl)):!e.propsControl.labelPosition||e.isForm?z.a.createElement(oa.Form.Input,e.propsControl):z.a.createElement(oa.Input,e.propsControl)}),f("label",function(e){return z.a.createElement(oa.Label,Ui({},e.propsControl,{size:e.model.size,content:e.props.content,attached:e.model.attached,basic:e.model.basic,circular:e.model.circular,corner:e.model.corner,floating:e.model.floating,pointing:e.model.pointing}))}),f("menu-group",function(s){var e,t=function e(t,r){var n=[];fe(r)&&(r="");for(var o=0;o<t.length;o++){var a=t[o];if(Ve(a.visibleCondition)&&null!==a.visibleCondition&&""!==a.visibleCondition){var i="return "+a.visibleCondition;try{if(!new Function("",i)())continue}catch(e){}}var l=String(r)+String(o),i=z.a.createElement("span",{dangerouslySetInnerHTML:{__html:a.title}});Array.isArray(a.children)&&0<a.children.length?n.push(z.a.createElement(oa.Menu.Item,{key:l},z.a.createElement(oa.Menu.Header,null,i),z.a.createElement(oa.Menu.Menu,null,e(a.children,l+"_")))):(i=s.props.link?z.a.createElement("a",{style:{color:"inherit"},href:a.target,onClick:s.handleItemClick2.bind(s.me,{name:a.target})},i):i,s.props.link?n.push(z.a.createElement(oa.Menu.Item,{key:l,name:a.target,active:s.state.activeitem===a.target},i)):n.push(z.a.createElement(oa.Menu.Item,{key:l,name:a.target,active:s.state.activeitem===a.target,onClick:s.handleItemClick},i)))}return n}(s.items),r={};for(e in s.props)"data-items"!=e&&"activeItem"!=e&&"handleEvent"!=e&&"link"!=e&&(r[e]=s.props[e]);return z.a.createElement(oa.Menu,r,t)}),f("message",function(e){return z.a.createElement(oa.Message,Bi({},e.propsControl,{floated:e.model.floated,size:e.model.size,content:e.props.content,compact:e.model.compact,error:e.model.error,floating:e.model.floating,info:e.model.info,negative:e.model.negative,positive:e.model.positive,success:e.model.success,warning:e.model.warning,header:e.props.header}))}),f("null-control",function(e){return z.a.createElement("div",{key:e.key},e.text)});var Oe=r(20),Mi=r.n(Oe);f("number-format",function(e){return e.propsControl.customInput=(!e.propsControl.labelPosition||e.isForm?oa.Form:oa).Input,z.a.createElement(Mi.a,e.propsControl)}),f("popup",function(e){return z.a.createElement(oa.Popup,{key:e.key,trigger:e.trigger,on:e.popupOn,position:e.popupPosition,className:e.className,header:e.header,content:e.content})}),f("radio-group",function(r){var e=r.props.items.map(function(e){var t=e.key||e.value;return z.a.createElement(oa.Form.Field,{key:t+"_formfield"},z.a.createElement(oa.Form.Radio,{key:t,label:e.text,name:r.props.name+"_radioGroup",value:e.value,readOnly:r.props.readOnly,checked:r.props.value===e.value,onChange:r.onChange}))},r),t=(t=r.props.className)||"";return r.props.error&&(t+=" error"),"v"===r.props.direction?z.a.createElement("div",{className:t+=" ui form",style:r.props.style},z.a.createElement("label",null,r.props.label),z.a.createElement(oa.Form,null,e)):z.a.createElement("div",{className:"ui form"},z.a.createElement("div",{className:t+=" field"},z.a.createElement("label",null,r.props.label),z.a.createElement("div",{style:r.props.style},z.a.createElement(oa.Form.Group,{key:"group"},e))))});var Oe=r(21),zi=r.n(Oe);function Ki(){return(Ki=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function qi(){return(qi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}f("repeater",function(l){function e(e,t,r){var n,o=l.me,a=[],i=0;return Array.isArray(e)&&0<e.length?e.forEach(function(e){Ve(e=s(i,e,!i&&o.props.controlProps.buildermode))&&(r?a.push(z.a.createElement("div",{key:i},e)):a.push(e)),i++}):l.props.controlProps.buildermode?Ve(n=s(i,{},0===i))&&(r?a.push(z.a.createElement("div",null,n)):a.push(n)):!l.state.loading&&l.isServerMode&&(!fe(n=l.props.noRecordsLabel)&&""!=n||(n="No records. Refresh..."),n=z.a.createElement("div",{key:"norecords",className:"dwkit-repeater-norecords"},z.a.createElement(oa.Button,{onClick:l.loadNextPage},n)),a.push(n)),!l.state.loading&&l.isServerMode&&t>e.length&&0<e.length&&(!fe(e=l.props.loadButtonLabel)&&""!=e||(e="Load more..."),e=z.a.createElement("div",{key:"loadmore",className:"dwkit-repeater-loadmore"},z.a.createElement(oa.Button,{onClick:l.loadNextPage},e)),a.push(e)),a}function s(e,t,r){if(!l.props.controlProps.buildermode&&""!==l.props["item-visibleCondition"]&&void 0!==l.props["item-visibleCondition"]&&null!==l.props["item-visibleCondition"]){var n="return "+l.props["item-visibleCondition"];try{if(!new Function("data",n)(t))return}catch(e){return}}var o=void 0,a=l.props.controlProps.createBuilderDropzone;return Ve(l.props.placeholders)&&Array.isArray(l.props.placeholders[l.psTemplate])&&0<l.props.placeholders[l.psTemplate].length?Ve(n=l.props.placeholders[l.psTemplate])&&(o=z.a.createElement(Jr,{key:e,parent:l.me,model:n,psTemplate:l.psTemplate,item:t,controlProps:l.props.controlProps,includeDropzone:r,errors:Array.isArray(l.props.error)?l.props.error[e]:void 0,index:e,handleChange:l.handleChange,data:l.props.data,parentItem:l.props.model})):r&&a&&(o=a("repeater_dropzone_footer",l.props.model.key,void 0,void 0,l.psTemplate)),o}var t="dwkit-repeater";return l.props.className&&(t+=" "+l.props.className),l.isServerMode&&l.state.firstLoad?(l.state.firstLoad=!1,l.loadNextPage(),z.a.createElement("div",{className:t,style:l.props.style},l.state.loading&&z.a.createElement(oa.Loader,{active:!0,inline:"centered"}))):l.props.slider&&0<l.state.items.length?z.a.createElement("div",{className:t,style:l.props.style},z.a.createElement(zi.a,{dots:!0,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1},e(l.state.items,l.state.rowsCount,!0)),l.state.loading&&z.a.createElement(oa.Loader,{active:!0,inline:"centered"})):z.a.createElement("div",{className:t,style:l.props.style},e(l.state.items,l.state.rowsCount),l.state.loading&&z.a.createElement(oa.Loader,{active:!0,inline:"centered"}))}),f("row-loading-renderer",function(t){return z.a.createElement("div",{className:t.className},z.a.createElement(xi.Row,Ki({ref:function(e){return t.me.row=e}},t.props)))}),f("search",function(e){return z.a.createElement(oa.Search,qi({},e.controlProps,{fluid:!0,loading:e.state.isLoading,onResultSelect:e.handleResultSelect,onSearchChange:e.handleSearchChange,results:e.state.results,value:e.state.value}))});var Oe=r(22),Wi=r.n(Oe);function Gi(e){return(Gi="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function Hi(){return(Hi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Qi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ji(e,t){return(Ji=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zi(e){return(Zi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $i=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ji(e,t)}(a,z.a.Component);var r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=Zi(r),t=n?(t=Zi(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==Gi(t)&&"function"!=typeof t?Yi(e):t});function a(e){var t;return function(e){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this),Xi(Yi(t=o.call(this,e)),"labels",function(){return{draw:t.props.compact?null:t.props.drawLabel||"Draw signature",clear:t.props.clearCanvasLabel||"Clear canvas",upload:t.props.uploadLabel||"Upload",cancel:t.props.cancelLabel||"Cancel"}}),Xi(Yi(t),"upload",function(){var r=Yi(t).props,e=t.sigPad.current.getCanvas().toDataURL("image/png");ci(e,r.uploadUrl,function(e,t){r.onUpload(e,t)}),t.setState({open:!1})}),Xi(Yi(t),"onClear",function(){t.sigPad.current.clear()}),t.state={open:!1},t.sigPad=Object(c.createRef)(),t}return Qi(a.prototype,[{key:"render",value:function(){var e=this,t=this.props,r=this.labels;return t.value?z.a.createElement(si,Hi({},t,{clear:t.onClear})):z.a.createElement("div",null,z.a.createElement(oa.Button,{content:r().draw,basic:!0,fluid:t.fluid,onClick:function(){return e.setState({open:!0})},icon:"signup"}),z.a.createElement(oa.Modal,{open:e.state.open,style:{width:"max-content"}},z.a.createElement(oa.Modal.Header,null,"Draw signature"),z.a.createElement(oa.Modal.Content,null,z.a.createElement("div",{className:"signature-canvas-container"},z.a.createElement(Wi.a,{ref:e.sigPad,canvasProps:{className:"canvas ui basic button"}}),z.a.createElement(oa.Button,{fluid:!0,content:r().clear,className:"ui button",onClick:e.onClear,icon:"cancel"}))),z.a.createElement(oa.Modal.Actions,null,z.a.createElement(oa.Button,{className:"buttontype1",content:r().upload,download:!0,onClick:e.upload,icon:"check"}),z.a.createElement(oa.Button,{className:"buttontype2",content:r().cancel,onClick:function(){return e.setState({open:!1})}}))))}}]),a}();function el(){return(el=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function tl(){return(tl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function rl(){return(rl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function nl(){return(nl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ol(){return(ol=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}f("signature",function(e){var t=e.props,r=t.compact&&t.showPreview?{minWidth:160}:{};return z.a.createElement("div",{className:"field",style:r},e.props.label&&z.a.createElement("label",null,e.props.label),z.a.createElement($i,Hi({},t,{onUpload:e.onUpload,onClear:e.onClear})))}),f("statistic",function(e){return z.a.createElement(oa.Statistic.Group,el({},e.propsControl,{floated:e.model.floated,horizontal:e.model.horizontal,size:e.model.size,items:e.items}))}),f("static-content",function(e){if(e.props.isHtml)return z.a.createElement("span",tl({},e.spanProps,{dangerouslySetInnerHTML:{__html:e.props.content}}));var t=Ve(e.props.content)?e.props.content.replace("\n","<br/>"):void 0;return z.a.createElement("span",e.spanProps,t)}),f("style-button",function(e){var t="RichEditor-styleButton";return e.props.active&&(t+=" RichEditor-activeButton"),z.a.createElement("span",{className:t,onMouseDown:e.me.onToggle},e.props.label)}),f("tab-group",function(e){var t={};t.pointing=e.props.pointing,t.secondary=e.props.secondary,t.tabular=e.props.tabular,t.fluid=e.props.fluid,t.vertical=e.props.vertical;var r=e.props.className;return e.props.scroll&&(r="dwkit-tabgroup"),z.a.createElement("div",{className:r,style:e.props.style},z.a.createElement(oa.Tab,{menu:t,panes:e.panes,renderActiveOnly:!1,onTabChange:e.onTabChange}))}),f("textarea",function(e){if(!e.propsControl.labelPosition||e.isForm)return z.a.createElement(oa.Form.TextArea,e.propsControl);var t="ui labeled input";return e.propsControl.fluid&&(t+=" fluid"),e.propsControl.error&&(t+=" error"),he(e.props.className)&&(t+=" "+e.props.className),z.a.createElement("div",{className:t},e.propsControl.label&&z.a.createElement("div",{className:"ui label label"},e.propsControl.label),z.a.createElement(oa.TextArea,e.propsControl))}),f("tree-picker-header",function(e){return z.a.createElement(oa.Modal.Header,null,e.props.name,z.a.createElement("div",{className:"ui menu"},z.a.createElement(oa.Item,{className:"active tree",as:"a"},z.a.createElement("i",{className:"list icon"})," Select"),z.a.createElement(oa.Item,{className:"picked item",as:"a"},z.a.createElement("i",{className:"checkmark icon"})," ",e.props.selected," ",z.a.createElement("span",{className:"count"}))))}),f("tree-picker-trigger",function(e){return z.a.createElement(oa.Form.Dropdown,rl({},e.controlProps,{onClick:e.handleOpen,onChange:e.onDropdownChange}))}),f("unknown",function(e){return z.a.createElement("span",null,"Unknown type '",e.type,"' of '",e.props.name,"' element.")}),f("upload",function(a){var e,t,r=a.props.type,n=[],o=a.props.isForm,i=a.props.value;return Ve(i)&&null!=i&&""!=i?(e="Download",t="Clear",Ve(i=function(){if(window.DWKitAdminLang&&window.DWKitAdminLang.button)return window.DWKitAdminLang.button}())&&(e=i.download,t=i.clear),i=a.props.disabled||a.props.readOnly||a.props.hideClearButton,n.push(z.a.createElement("a",{key:"download",className:"ui button",target:"blank",onClick:function(e){e.preventDefault();var e=a.props.value,o=new XMLHttpRequest;o.open("POST",a.props.downloadUrl+e,!0),o.responseType="arraybuffer",o.onload=function(){var e,t=a.getCustomFileName();t||!(e=o.getResponseHeader("Content-Disposition"))||-1===e.indexOf("attachment")||(r=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(e))&&r[1]&&(t=r[1].replace(/['"]/g,""));var r=(r=a.getCustomContentType())||o.getResponseHeader("Content-Type"),n=document.createElement("a");n.setAttribute("href",window.URL.createObjectURL(new Blob([o.response],{type:r}))),n.setAttribute("download",t||"unknown"),document.body.appendChild(n),n.onclick=function(){document.body.removeChild(n)},n.click()},o.send(null)},href:"#"},e)),i||(n.push(z.a.createElement("span",{key:"sparator"},"")),n.push(z.a.createElement("button",{key:"clear",className:"ui button",onClick:a.onClear},t)))):a.props.disabled||a.props.readOnly?n.push(z.a.createElement("span",null)):n.push(z.a.createElement("input",{key:"uploadcontrol",type:"file",multiple:a.props.multiple,accept:a.props.onlyImages?"image/*":void 0,name:a.props.name,onChange:a.onChange,value:""})),o?z.a.createElement("div",{className:"field"},Ve(a.props.label)&&z.a.createElement("label",null,a.props.label),z.a.createElement("div",{"data-buildertype":r},n)):(o="ui labeled input",a.props.fluid&&(o+=" fluid"),a.props.error&&(o+=" error"),he(a.props.className)&&(o+=" "+a.props.className),z.a.createElement("div",{className:o,"data-buildertype":r},a.props.label&&z.a.createElement("div",{className:"ui label label"},a.props.label),n))}),f("workflow-bar",function(o){var e="dwkit-workflowbar";o.props.className&&(e+=" "+o.props.className);var t=o.props.style,r=o.state.commands||o.props.commands;o.props.selectedScheme&&r&&(r=r.filter(function(e){return e.scheme===o.props.selectedScheme}));var n=o.state.states||o.props.states;return z.a.createElement("div",{className:e,style:t},z.a.createElement("div",{className:"dwkit-workflowbar-items"},function(){if(o.state.processExists||o.props.blockSelectScheme||o.props.schemes.length<=1)return null;var e,t="Select scheme";o.props.selectSchemeDropdown?t=o.props.selectSchemeDropdown:(e=We())&&e.selectscheme&&(t=e.startworkflow);var r=[];return r.push({value:null,text:""}),o.props.schemes.forEach(function(e){return r.push({value:e,text:e})}),z.a.createElement(oa.Dropdown,{key:"setstate",name:"setstate",className:"setstate",options:r,placeholder:t,onChange:o.selectWorkflowScheme,selection:!0,search:!0,value:o.props.selectedScheme})}(),function(e){if(o.props.blockCommands)return null;if(!o.props.blockSelectScheme&&!o.props.selectedScheme&&1<o.props.schemes.length)return null;if(Array.isArray(e)&&0<e.length){var r=[];return e.forEach(function(e){var t={};1==e.type?t.primary=!0:2==e.type&&(t.secondary=!0),r.push(z.a.createElement(oa.Button,nl({},t,{key:e.value,onClick:o.onCommand.bind(o.me,e)}),e.text))}),r}}(r),function(e){if(!o.props.blockSetState&&Array.isArray(e)&&0<e.length){var t,r=fe(o.state.setstate)||""==o.state.setstate,n="Set state";return he(o.props.setStateButton)?n=o.props.setStateButton:(t=We())&&(n=t.setstate),[z.a.createElement(oa.Dropdown,{key:"setstate",name:"setstate",className:"setstate",placeholder:"States",options:e,onChange:o.handleChanged,selection:!0,search:!0}),z.a.createElement(oa.Button,{key:"btnsetstate",disabled:r,onClick:o.onSetState.bind(o.me)},n)]}}(n)))}),f("card",function(e){return z.a.createElement(oa.Card,e.propsControls,e.props.imgurl&&z.a.createElement(oa.Image,{src:e.props.imgurl,wrapped:!0,ui:!1}),z.a.createElement(oa.Card.Content,null,e.props.header&&z.a.createElement(oa.Card.Header,null,z.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.props.header}})),e.props.subheader&&z.a.createElement(oa.Card.Meta,null,z.a.createElement("span",{dangerouslySetInnerHTML:{__html:e.props.subheader}})),z.a.createElement(oa.Card.Description,null,e.me.renderPanel("description"))),z.a.createElement(oa.Card.Content,{extra:!0},e.me.renderPanel("extra")))}),f("accordion",function(e){var t={};t.fluid=e.props.fluid,t.styled=e.props.styled;var r=e.props.className;return z.a.createElement("div",{className:r,style:e.props.style},z.a.createElement(oa.Accordion,ol({},t,{panels:e.panels})))}),ke([{key:"sepContainers",title:"Containers",isseparate:!0,defaultopen:!0},{key:"container",title:"Container",control:Be},{key:"staticcontent",title:"Static Content",control:Cn,defaultValues:{content:"Text..."}},{key:"form",title:"Form",control:pn},{key:"formgroup",title:"Form Group",control:pn,defaultValues:{widths:"equal"}},{key:"card",title:"Card",control:Bn,defaultValues:{header:"Card",subheader:"Description"}},{key:"tab",title:"Tab",control:jn,defaultValues:{panes:[{title:"Tab 1",psid:"t1"},{title:"Tab 2",psid:"t2"},{title:"Tab 3",psid:"t3"}]}},{key:"accordion",title:"Accordion",control:Fn,defaultValues:{panels:[{title:"Panel 1",psid:"p1"},{title:"Panel 2",psid:"p2"},{title:"Panel 3",psid:"p3"}]}},{key:"customblock",title:"Custom block",control:void 0,defaultValues:{sourceType:"form"}},{key:"gridlayout",title:"Grid Layout",control:Mt,defaultValues:{draggable:!1,resizable:!1,panes:[{title:"Pane 1",psid:"p1",x:0,w:4},{title:"Pane 2",psid:"p2",x:4,w:4},{title:"Pane 3",psid:"p3",x:8,w:4}]}},{key:"sepCollection",title:"Collections",isseparate:!0},{key:"gridview",title:"GridView",control:ur,defaultValues:{columns:[{key:"id",name:"ID"},{key:"title",name:"Title"},{key:"count",name:"Count"}]}},{key:"collectioneditor",title:"Collection Editor",control:Te,defaultValues:{columns:[{key:"Id",name:"ID"},{key:"Title",name:"Title"},{key:"Count",name:"Count"}]}},{key:"repeater",title:"Repeater",control:Ur,defaultValues:{}},{key:"sepControls",title:"Controls",isseparate:!0},{key:"header",title:"Header",control:pn,defaultValues:{content:"Header",size:"medium"}},{key:"input",title:"Input",control:pn,defaultValues:{label:"Input",fluid:!0,onChangeTimeout:200}},{key:"numberformat",title:"Number Format",control:Or,defaultValues:{label:"NumberFormat",fluid:!0,onChangeTimeout:200}},{key:"textarea",title:"TextArea",control:pn,defaultValues:{label:"TextArea",fluid:!0}},{key:"dictionary",title:"Dictionary",control:at,defaultValues:{label:"Dictionary",fluid:!0,selection:!0}},{key:"treepicker",title:"TreePicker",control:ha,defaultValues:{label:"TreePicker",selection:!0,fluid:!0,parentIdField:"ParentId"}},{key:"dropdown",title:"Dropdown",control:pn,defaultValues:{label:"Dropdown",fluid:!0,selection:!0,"data-elements":[{value:1,text:"Item 1"},{value:2,text:"Item 2"},{value:3,text:"Item 3"}]}},{key:"checkbox",title:"CheckBox",control:pn,defaultValues:{label:"Checkbox"}},{key:"radiogroup",title:"Radio group",control:jr,defaultValues:{label:"Radio","data-elements":[{value:1,text:"Item 1"},{value:2,text:"Item 2"},{value:3,text:"Item 3"}]}},{key:"button",title:"Button",control:pn,defaultValues:{content:"Button"}},{key:"label",title:"Label",control:pn,defaultValues:{content:"Label"}},{key:"message",title:"Message",control:pn,defaultValues:{header:"Message",content:"Description..."}},{key:"image",title:"Image",control:pn,defaultValues:{src:"/images/unknown.png"}},{key:"statistic",title:"Statistic",control:pn,defaultValues:{"data-elements":[{label:"Score",value:"22,1%"},{label:"Views",value:"30,000"},{label:"Points",value:"500"}]}},{key:"customcontrol",title:"Custom control",control:void 0,defaultValues:{props:"{  }"}},{key:"dropdowntrigger",title:"Dropdown trigger",control:dt,defaultValues:{defaultValue:"User",items:[{target:"#1",title:"Item 1"},{target:"#2",title:"Item 2"},{target:"#3",title:"Item 3"}]}},{key:"dropzonecontrol",title:"Dropzone",control:vt,defaultValues:{showFiletypeIcon:!1,autoProcessQueue:!0,addRemoveLinks:!0,multile:!0}},{key:"files",title:"Files",control:Tt,defaultValues:{idField:"Id",columns:[{title:"Name",field:"Name",property:"Name",showcolumn:!0},{title:"Length",field:"Length",property:"Length",showcolumn:!1,control:"span"},{title:"Content Type",field:"ContentType",property:"ContentType",showcolumn:!1},{title:"File",field:"Token",property:"Token",showcolumn:!0,control:"file2"}]}},{key:"signature",title:"Signature",control:vn,defaultValues:{showPreview:!0}},{key:"camera",title:"Camera",control:de,defaultValues:{showPreview:!0,compression:.75}},{key:"breadcrumb",title:"Breadcrumbs",control:pn,defaultValues:{items:[{text:"Home",url:"/"},{divider:"right angle",text:"Page1",url:"/page1"},{text:"Page2",active:!0}],events:{onItemClick:{active:!0,actions:["redirect"]}}}},{key:"search",title:"Search",control:rn,defaultValues:{}},{key:"menu",title:"Menu",control:yr,defaultValues:{items:[{title:"Menu 1"},{title:"Menu 2"},{title:"Menu 3"}]}},{key:"workflowbar",title:"Workflow bar",control:io,defaultValues:{blockSetState:!0,blockLoadParameters:!0,events:{onCommandClick:{active:!0,actions:["workflowExecuteCommand"]},onSetStateClick:{active:!0,actions:["workflowSetState"]},onSchemeSelected:{active:!0,actions:["workflowSelectScheme"]}}}},{key:"richtexteditor",title:"Rich Text Editor",control:Pa,defaultValues:{}},{key:"sepCharts",title:"Charts",isseparate:!0},{key:"barchart",title:"Bar",control:we,defaultValues:{chartType:"bar",datasetLabel:""}},{key:"linechart",title:"Line",control:we,defaultValues:{chartType:"line",datasetLabel:""}},{key:"scatterchart",title:"Scatter",control:we,defaultValues:{chartType:"scatter",datasetLabel:""}},{key:"doughnutchart",title:"Doughnut",control:we,defaultValues:{chartType:"doughnut",datasetLabel:""}},{key:"piechart",title:"Pie",control:we,defaultValues:{chartType:"pie",datasetLabel:""}},{key:"radarchart",title:"Radar",control:we,defaultValues:{chartType:"radar",datasetLabel:""}}]),t.setItems(Me());var al=t;function il(e){return(il="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function ll(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function sl(e,t){return(sl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cl(e){return(cl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ul=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sl(e,t)}(o,na);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=cl(r),t=n?(t=cl(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==il(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function o(e){return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e)).createControls=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return al.createControls.apply(al,t)},e}return ll(o.prototype,[{key:"render",value:function(){var t=this,e="dwkit-form"+(void 0===this.props.className?"":" "+this.props.className),r=this.getItemsForRender();return z.a.createElement("div",{className:e,ref:function(e){t.currentElement=e}},r)}},{key:"print",value:function(e){if(this.currentElement){var t=this.currentElement.innerHTML,r=window.open("",this.props.formName,"toolbar=no,location=no,directories=no,status=no,scrollbars=yes,resizable=yes");e||(r.document.title=this.props.formName),r.document.title=e||"PrintForm",r.document.head.insertAdjacentHTML("beforeend","<style type='text/css'>body, html { height: auto!important; width:auto!important;} body{margin:10px!important;} .dwkit-notprint{display:none!important;}</style>");for(var n=document.getElementsByTagName("style"),o=0;o<n.length;o++){var a="<style>"+n[o].innerHTML+"</style>";r.document.head.insertAdjacentHTML("beforeend",a)}for(var i=document.getElementsByTagName("link"),o=0;o<i.length;o++){var l=i[o];"stylesheet"==l.rel&&(a='<link href="'+l.href+'" rel="stylesheet" type="text/css" />',r.document.head.insertAdjacentHTML("beforeend",a))}r.document.body.innerHTML=t;for(var s=r.document.getElementsByTagName("img"),o=0;o<s.length;o++){var c,u=s[o];u.src||!u.attributes.src||(c=u.attributes.src.value)&&1<c.length&&(u.src=location.origin+("/"!=c[0]?"/":"")+c)}r.focus(),setTimeout(function(){r.print()},1e3)}}}]),o}();function pl(e){return(pl="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function dl(e,t){return(dl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fl(e){return(fl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Vl=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dl(e,t)}(t,ul);var r,n,e=(r=t,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=fl(r),t=n?(t=fl(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==pl(t)&&"function"!=typeof t?function(){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}():t});function t(){return function(e){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),e.apply(this,arguments)}return t}();function hl(e){return(hl="function"==typeof Symbol&&"symbol"==wl(Symbol.iterator)?function(e){return wl(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":wl(e)})(e)}function ml(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yl(e,t){return(yl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bl(e){return(bl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var gl=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yl(e,t)}(o,c.Component);var r,n,t=(r=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e=bl(r),t=n?(t=bl(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this;return!t||"object"!==hl(t)&&"function"!=typeof t?vl(e):t});function o(e){return function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(e=t.call(this,e)).state={activeItem:"general",defaultValuePreferInt:!1},e.menuItems=[{key:"general",name:"general",content:e.getLocalValue("generaltab","General"),active:!0,onClick:e.handleItemClick.bind(vl(e))},{key:"style",name:"style",content:e.getLocalValue("styletab","Style"),active:!1,onClick:e.handleItemClick.bind(vl(e))},{key:"events",name:"events",content:e.getLocalValue("eventstab","Events"),active:!1,onClick:e.handleItemClick.bind(vl(e))},{key:"tooltip",name:"tooltip",content:e.getLocalValue("tooltiptab","Tooltip"),active:!1,onClick:e.handleItemClick.bind(vl(e))},{key:"other",name:"other",content:e.getLocalValue("othertab","Other"),active:!1,onClick:e.handleItemClick.bind(vl(e))}],e}return ml(o.prototype,[{key:"getLocalValue",value:function(e,t,r){var n=this.props.localization,r=Ve(r)?r:"base";return fe(n)||fe(n[r])||fe(n[r][e])?t:n[r][e]}},{key:"handleItemClick",value:function(e,t){t=t.name,this.setState({activeItem:t})}},{key:"getDescription",value:function(){var t=this.state.activeItem;return this.menuItems.forEach(function(e){e.active=e.name===t}),z.a.createElement(oa.Modal.Description,null,z.a.createElement(oa.Menu,{key:"descriptionMenu",pointing:!0,secondary:!0,items:this.menuItems}),this.getDetailDescription(t))}},{key:"getDetailDescription",value:function(e){var t;return"general"===e?t=this.getGeneralDescription():"style"===e?t=this.getStyleDescription():"events"===e?t=this.getEventsDescription():"tooltip"===e?t=this.getToolTipDescription():"other"===e&&(t=this.getOtherDescription()),t}},{key:"getGeneralDescription",value:function(){var e=this.props.data,t=this.props.parent.handleChange.bind(this.props.parent);return z.a.createElement(oa.Form,{key:"generalDescriptionForm"},z.a.createElement(oa.Form.Input,{key:"name",label:"Name",name:"key",value:e.key,onChange:t}))}},{key:"getStyleDescription",value:function(){var e=this.props.data,t=this.props.parent.handleChange.bind(this.props.parent),r="/*** Example Code ***/\ncolor:red;\npaddingTop:5px;",n=[{text:this.getLocalValue("adaptivedefault","Any"),value:""},{text:this.getLocalValue("adaptivedesctop","Desktop"),value:"desktop"},{text:this.getLocalValue("adaptivemobile","Mobile"),value:"mobile"}];return z.a.createElement(oa.Form,{key:"styleDescriptionForm"},z.a.createElement(oa.Form.Group,{widths:"equal"},z.a.createElement(oa.Form.Input,{name:"style-width",label:this.getLocalValue("widthfield","Width"),placeholder:"100px",value:e["style-width"],onChange:t}),z.a.createElement(oa.Form.Input,{name:"style-height",label:this.getLocalValue("heightfield","Height"),placeholder:"100px",value:e["style-height"],onChange:t})),z.a.createElement(oa.Form.Group,{widths:"equal"},z.a.createElement(oa.Form.Input,{name:"style-marginTop",label:this.getLocalValue("margintopfield","Margin Top"),placeholder:"0px",value:e["style-marginTop"],onChange:t}),z.a.createElement(oa.Form.Input,{name:"style-marginBottom",label:this.getLocalValue("marginbottomfield","Margin Bottom"),placeholder:"0px",value:e["style-marginBottom"],onChange:t}),z.a.createElement(oa.Form.Input,{name:"style-marginLeft",label:this.getLocalValue("marginleftfield","Margin Left"),placeholder:"0px",value:e["style-marginLeft"],onChange:t}),z.a.createElement(oa.Form.Input,{name:"style-marginRight",label:this.getLocalValue("marginrightfield","Margin Right"),placeholder:"0px",value:e["style-marginRight"],onChange:t})),z.a.createElement(oa.Form.Input,{name:"style-customcss",label:this.getLocalValue("customcssclassfield","Custom CSS class"),placeholder:"dwkit-application-css (without '.')",value:e["style-customcss"],onChange:t}),z.a.createElement(oa.Form.TextArea,{name:"style-source",label:this.getLocalValue("stylefield","Style"),placeholder:r,value:e["style-source"],onChange:t}),z.a.createElement(oa.Form.Group,null,z.a.createElement(oa.Form.Checkbox,{name:"style-hidden",label:this.getLocalValue("hiddenfield","Hidden"),checked:e["style-hidden"],onChange:t}),z.a.createElement(oa.Form.Checkbox,{name:"style-hiddeninprint",label:this.getLocalValue("hiddeninprintfield","Hidden in Print mode"),checked:e["style-hiddeninprint"],onChange:t})),z.a.createElement(oa.Form.Checkbox,{name:"style-adaptive",label:this.getLocalValue("adaptivefield","Adaptive Layout"),checked:e["style-adaptive"],onChange:t}),e["style-adaptive"]&&z.a.createElement(oa.Form.Dropdown,{name:"style-renderwhen",selection:!0,fluid:!0,search:!0,options:n,placeholder:"Any",label:this.getLocalValue("style-renderwhenfield","Render when"),value:e["style-renderwhen"],onChange:t}),e["style-adaptive"]&&z.a.createElement(oa.Form.TextArea,{name:"style-mobilesource",label:this.getLocalValue("mobilesourcefield","Mobile style"),placeholder:r,value:e["style-mobilesource"],onChange:t}))}},{key:"getEventsList",value:function(){return[]}},{key:"getEventsDescription",value:function(){var e=this.props.data;fe(e.events)&&(e.events={});var t,r=this.props.parent.handleChange.bind(this.props.parent),n=this.props.actions,o=this.getEventsList();if(Array.isArray(o)&&0!==o.length){for(var a=this.props.parent.getControlsList(),i=[],l=0;l<a.length;l++)e.key!==a[l]&&i.push({text:a[l],value:a[l]});t=z.a.createElement(St,{key:"events",name:"events",data:e.events,events:o,actions:n,targets:i,onAdditionActions:this.handleAdditionActions.bind(this),onChange:r})}else t=z.a.createElement(oa.Message,{icon:!0},z.a.createElement(oa.Icon,{name:"info"}),z.a.createElement(oa.Message.Content,null,this.getLocalValue("controlhasnoeventsmsg","This control has no events.")));return n=null,o.includes("onChange")&&(n=z.a.createElement(oa.Form.Input,{name:"onChangeTimeout",style:{width:100},placeholder:"0",type:"number",label:this.getLocalValue("onchangetimeout","onChange timeout"),value:e.onChangeTimeout,onChange:r})),z.a.createElement(oa.Form,{key:"eventsDescriptionForm"},z.a.createElement(oa.Message,{icon:!0},z.a.createElement(oa.Icon,{name:"info"}),z.a.createElement(oa.Message.Content,null,this.getLocalValue("eventsinfomsg","These flags enable processing from this element."))),n,t)}},{key:"getToolTipDescription",value:function(){var e=[{text:this.getLocalValue("tooltipdefault","Default"),value:""},{text:this.getLocalValue("tooltiptopcenter","Top Center"),value:"top center"},{text:this.getLocalValue("tooltiptopleft","Top Left"),value:"top left"},{text:this.getLocalValue("tooltiptopright","Top Right"),value:"top right"},{text:this.getLocalValue("tooltipbottomcenter","Bottom Center"),value:"bottom center"},{text:this.getLocalValue("tooltipbottomleft","Bottom Left"),value:"bottom left"},{text:this.getLocalValue("tooltipbottomright","Bottom right"),value:"bottom right"},{text:this.getLocalValue("tooltiprightright","Right Center"),value:"right center"},{text:this.getLocalValue("tooltipleftcenter","Left Center"),value:"left center"}],t=[{text:this.getLocalValue("tooltipdefault","Default"),value:""},{text:this.getLocalValue("tooltiphover","Hover"),value:"hover"},{text:this.getLocalValue("tooltipclick","Click"),value:"click"},{text:this.getLocalValue("tooltipfocus","Focus"),value:"focus"}],r=this.props.data,n=this.props.parent.handleChange.bind(this.props.parent),o=r["tooltip-enabled"]?z.a.createElement(oa.Segment,{vertical:!0},z.a.createElement(oa.Form.Checkbox,{name:"tooltip-enabled",label:this.getLocalValue("tooltipenabledfield","Enabled"),checked:r["tooltip-enabled"],onChange:n}),z.a.createElement(oa.Form.Input,{name:"tooltip-header",label:this.getLocalValue("tooltipheaderfield","Tooltip Header"),value:r["tooltip-header"],onChange:n}),z.a.createElement(oa.Form.Input,{name:"tooltip-content",label:this.getLocalValue("tooltipcontentfield","Tooltip Content"),value:r["tooltip-content"],onChange:n}),z.a.createElement(oa.Form.Group,null,z.a.createElement(oa.Form.Input,{name:"tooltip-classname",label:this.getLocalValue("tooltipclassnamefield","ClassName"),value:r["tooltip-classname"],onChange:n}),z.a.createElement(oa.Form.Dropdown,{name:"tooltip-showtype",selection:!0,fluid:!0,search:!0,options:t,placeholder:"Default",label:this.getLocalValue("tooltipshowtypefield","Tooptip showing type"),value:r["tooltip-showtype"],onChange:n}),z.a.createElement(oa.Form.Dropdown,{name:"tooltip-position",selection:!0,fluid:!0,search:!0,options:e,placeholder:"Default",label:this.getLocalValue("tooltippositionfield","Tooptip position"),value:r["tooltip-position"],onChange:n}))):z.a.createElement(oa.Segment,{vertical:!0},z.a.createElement(oa.Form.Checkbox,{name:"tooltip-enabled",label:this.getLocalValue("tooltipenabledfield","Enabled"),checked:r["tooltip-enabled"],onChange:n}));return z.a.createElement(oa.Form,{key:"tooltipDescriptionForm"},z.a.createElement(oa.Segment,{vertical:!0},z.a.createElement(oa.Form.Group,null,z.a.createElement(oa.Form.Checkbox,{name:"tooltip-errordisabled",label:this.getLocalValue("errortooltipdisabledfield","Disable error tooptip"),checked:r["tooltip-errordisabled"],onChange:n}),z.a.createElement(oa.Form.Dropdown,{name:"tooltip-errorshowtype",selection:!0,fluid:!0,search:!0,options:t,placeholder:"Default",label:this.getLocalValue("tooltiperrorshowtypefield","Error tooptip showing type"),value:r["tooltip-errorshowtype"],onChange:n}),z.a.createElement(oa.Form.Dropdown,{name:"tooltip-errorposition",selection:!0,fluid:!0,search:!0,options:e,placeholder:"Default",label:this.getLocalValue("errortooltippositionfield","Error tooptip position"),value:r["tooltip-errorposition"],onChange:n}))),o)}},{key:"getOtherDescription",value:function(){var e=this.props.data,n=this.props.parent.handleChange.bind(this.props.parent),t=this.state.defaultValuePreferInt?function(e,t){var r=t.name;(t=t.value)&&t.match&&t.match(/^-?\d+$/)&&(t=parseInt(t)),n(e,{name:r,value:t})}:n;return z.a.createElement(oa.Form,{key:"otherDescriptionForm"},z.a.createElement(oa.Form.Input,{name:"propertyName",label:this.getLocalValue("propertynamefield","Property Name"),value:e.propertyName,onChange:n}),z.a.createElement(oa.Form.Checkbox,{name:"other-required",label:this.getLocalValue("requiredfield","Required"),checked:e["other-required"],onChange:n}),z.a.createElement(oa.Form.Input,{name:"defaultValue",label:this.getLocalValue("defaultvaluefield","Default value"),value:e.defaultValue,onChange:t}),z.a.createElement(oa.Form.TextArea,{name:"other-customValidation",label:this.getLocalValue("customvalidationfield","Custom Validation"),placeholder:"/*** Example Code ***/\nvalue > 10 ? true : 'Must be more 10'",value:e["other-customValidation"],onChange:n}),z.a.createElement(oa.Form.TextArea,{name:"other-visibleConition",label:this.getLocalValue("visibleconditionfield","Visible condition"),placeholder:"/*** Example Code ***/\ndata.type == 1 ? true : false",value:e["other-visibleConition"],onChange:n}),z.a.createElement(oa.Form.TextArea,{name:"other-readOnlyConition",label:this.getLocalValue("readonlyconditionfield","ReadOnly condition"),placeholder:"/*** Example Code ***/\ndata.type == 1 ? true : false",value:e["other-readOnlyConition"],onChange:n}))}},{key:"render",value:function(){return z.a.createElement(oa.Modal,{dimmer:"inverted",open:this.props.open,onClose:this.props.onClose.bind(this.props.parent)},z.a.createElement(oa.Modal.Content,null,z.a.createElement(oa.Modal.Description,null,z.a.createElement(oa.Label,{className:"dwkit-formbuilder-editform-controltype"},this.props.data["data-buildertype"]),this.getDescription())),z.a.createElement(oa.Modal.Actions,null,z.a.createElement(oa.Button,{className:"buttontype1",onClick:this.props.onSave.bind(this.props.parent)},this.getLocalValue("savebutton","Save")),z.a.createElement(oa.Button,{className:"buttontype2",onClick:this.props.onClose.bind(this.props.parent)},this.getLocalValue("cancelbutton","Cancel"))))}},{key:"checkActionsList",value:function(e){for(var t=!1,r=0;r<this.props.actions.length;r++)if(this.props.actions[r]==e){t=!0;break}t||this.props.actions.push({text:e,value:e})}},{key:"handleAdditionActions",value:function(e,t){t=t.value,this.checkActionsList(t),this.forceUpdate()}}]),o}()}],w.c=C,w.d=function(e,t,r){w.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},w.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},w.t=function(t,e){if(1&e&&(t=w(t)),8&e)return t;if(4&e&&"object"==wl(t)&&t&&t.__esModule)return t;var r=Object.create(null);if(w.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)w.d(r,n,function(e){return t[e]}.bind(null,n));return r},w.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return w.d(t,"a",t),t},w.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},w.p="",w(w.s=31);function w(e){if(C[e])return C[e].exports;var t=C[e]={i:e,l:!1,exports:{}};return O[e].call(t.exports,t,t.exports,w),t.l=!0,t.exports}var O,C},"object"==wl(n)&&"object"==wl(e)?e.exports=r(o(0),o(3),o(5),o(9),o(10),o(6),o(11),o(8),o(12),o(13),o(14),o(15),o(16),o(17),o(18),o(19),o(20),o(21),o(22)):(t=[o(0),o(3),o(5),o(9),o(10),o(6),o(11),o(8),o(12),o(13),o(14),o(15),o(16),o(17),o(18),o(19),o(20),o(21),o(22)],void 0===(r="function"==typeof(r=r)?r.apply(n,t):r)||(e.exports=r))}.call(this,o(34)(e))},function(e,t){e.exports=_},function(e,t){e.exports=x},function(e,t){e.exports=D},function(e,t){e.exports=F},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){"use strict";r.r(t),r.d(t,"Actions",function(){return N}),r.d(t,"API",function(){return le}),r.d(t,"ApplicationRouter",function(){return on}),r.d(t,"FlowContent",function(){return Yt}),r.d(t,"FormContent",function(){return zt}),r.d(t,"WorkflowContent",function(){return or}),r.d(t,"NotificationComponent",function(){return ur}),r.d(t,"SignalRConnector",function(){return ln}),r.d(t,"StateBindedForm",function(){return br}),r.d(t,"Store",function(){return L}),r.d(t,"Thunks",function(){return ft}),r.d(t,"DWKitAppForm",function(){return Ge});var n=r(23),a=r.n(n),o=r(4),N=Object(o.createActions)({UPDATESTATE:function(e){return{stateDelta:e}},APP:{USERINFO:{FETCH:{BEGIN:void 0,SUCCESS:function(e){return{user:e}},FAILURE:function(e,t){return{error:e,details:t}}}},CLEARERRORS:void 0,FAILURE:function(e,t,r){return{error:e,details:t,level:r}},FETCHBEGIN:void 0,RESETFETCHCOUNT:void 0,IMPERSONATEDUSERIDFROMURL:void 0,SETAUTH:function(e){return{type:e}},FORM:{MODEL:{FETCH:{BEGIN:void 0,SUCCESS:function(e,t,r,n,o){return{model:e,name:r,modalId:n,formParams:o,mapping:t}},FAILURE:function(e,t){return{error:e,details:t}}},CHANGE:function(e,t){return{name:e,modalId:t}}},DATA:{FETCH:{BEGIN:void 0,SUCCESS:function(e,t,r){return{data:e,isNew:r,modalId:t}},FAILURE:function(e,t){return{error:e,details:t}}},UPDATE:function(e,t,r,n){return{key:e,value:t,modalId:r,additionalValues:n}},SAVE:{BEGIN:void 0,SUCCESS:function(e,t,r){return{data:e,url:r,modalId:t}},FAILURE:function(e,t,r,n){return{error:e,details:t,level:r,formerrors:n}}},DELETE:{BEGIN:void 0,SUCCESS:function(e){return{name:e}},FAILURE:function(e,t,r,n){return{error:e,details:t,level:r,formerrors:n}}},UPDATEFROMCHILD:function(e,t,r){return{key:e,value:t,modalId:r}},UPDATEMODALFILTER:function(e,t){return{filter:e,modalId:t}},SETPROCESSPARAMETERS:function(e,t){return{modalId:e,parameters:t}}},CLEAR:function(e){return{modalId:e}},REFRESH:function(e){return{modalId:e}}}},ROUTER:{PUSH:function(e){return{newurl:e}},REDIRECT:function(e){return{newurl:e}},REFRESH:function(){return{newurl:"refresh"}},RELOAD:function(){return{newurl:"reload"}},ROUTECHANGED:function(e,t,r){return{history:e,location:t,changeRefreshKey:r}},CHANGEURLFILTER:function(e,t){return{newfilter:e,clearCommand:t}},SETSCREEN:function(e){return{screen:e}}},SETTINGS:{SET:function(e,t){return{key:e,value:t}}}}),i=r(24),l=r.n(i),s=r(7),t=r(25),n=r(26),i=r.n(n),c={app:{user:null,impersonatedUserId:null,fetchCount:0,error:void 0,errorDetails:void 0,modals:{models:{},windows:{},order:[]},form:{models:{model:null,mapping:null,hideControls:null,readOnlyControls:null,readOnly:null},filters:{main:null},data:{isDirty:!1,isNew:!1,original:null,modified:null},errors:null,formParams:{schemes:null,securityGroup:void 0,permissions:null,name:null}},authType:"identityserver",screens:[]},router:{history:null,redirect:null,location:null,push:null,refreshKey:null,screen:null},settings:{backendUrl:"",fetchOptions:void 0,form:"form",flow:"flow",workflow:"workflow",accountget:"/account/get",uiform:"/ui/form",uiflow:"/ui/flow",uiworkflow:"/ui/workflow",dataget:"/data/get",datachange:"/data/change",datadelete:"/data/delete",datadictionary:"/data/dictionary",dataupload:"/data/upload/",datadownload:"/data/download/",dataexport:"/data/export",workflowget:"/workflow/get",workflowexecute:"/workflow/execute",workflowset:"/workflow/set",notificationhub:"/hubs/notifications",executeaction:"/actions/execute",mobile:!1}};function u(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach(function(e){V(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function V(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}n={failure:function(e,t){var r=t.payload,n=r.error,o=r.details,a=r.level,t=r.formerrors,r=t?t.modalId:null;return f(f({},e),{},r?{fetchCount:e.fetchCount<=0?0:e.fetchCount-1,error:n,errorLevel:a,errorDetails:o,modals:f(f({},e.modals),{},{windows:f(f({},e.modals.windows),{},V({},r,f(f({},e.modals.windows[r]),{},{errors:t?t.errors:null})))})}:{fetchCount:e.fetchCount<=0?0:e.fetchCount-1,error:n,errorLevel:a,errorDetails:o,form:f(f({},e.form),{},{errors:t?t.errors:null})})}},n={CLEAR:function(e,t){t=t.payload.modalId;return f(f({},e),{},t?{modals:f(f({},e.modals),{},{windows:f(f({},e.modals.windows),{},V({},t,f(f({},e.modals.windows[t]),{},{data:f(f({},e.modals.windows[t].data),{},{isDirty:!1,original:null,modified:null})})))})}:{form:f({},c.app.form)})},MODEL:{FETCH:{BEGIN:function(e){return f(f({},e),{},{fetchCount:e.fetchCount+1})},SUCCESS:function(e,t){var r=t.payload,n=r.model,o=r.name,a=r.formParams,t=r.mapping;if(r.modalId){r=f(f({},e),{},{fetchCount:e.fetchCount<=0?0:e.fetchCount-1});return r.modals.models[o]={model:n,mapping:t,formParams:a},r}return f(f({},e),{},{fetchCount:e.fetchCount<=0?0:e.fetchCount-1,form:f(f({},e.form),{},{models:f(f({},e.form.models),{},{model:n,mapping:t}),formParams:a})})},FAILURE:function(e,t){var r=t.payload,t=r.error,r=r.details;return f(f({},e),{},{fetchCount:e.fetchCount<=0?0:e.fetchCount-1,error:t,errorDetails:r})}},CHANGE:function(e,t){var r=t.payload,t=r.name,r=r.modalId;return r&&e.modals.windows[r]?f(f({},e),{},{modals:f(f({},e.modals),{},{windows:f(f({},e.modals.windows),{},V({},r,f(f({},e.modals.windows[r]),{},{name:t})))})}):e}},DATA:{FETCH:{BEGIN:function(e){return f(f({},e),{},{fetchCount:e.fetchCount+1})},SUCCESS:function(e,t){var r=t.payload,n=r.data,o=r.modalId,t=r.isNew;o&&e.modals.windows[o]&&((a=e.modals.windows[o].data)&&a.isNew&&(t=!0)),t&&(n.__id="CLIENT__"+G());var r=J(n),a=(o?e.modals.windows[o]:e.form).data;if(Y(a.original,n),Y(a.modified,r),o)return f(f({},e),{},{fetchCount:e.fetchCount<=0?0:e.fetchCount-1,modals:f(f({},e.modals),{},{windows:f(f({},e.modals.windows),{},V({},o,f(f({},e.modals.windows[o]),{},{errors:null,data:f(f({},e.modals.windows[o].data),{},{isDirty:!1,isNew:!!t,original:n,modified:r})})))})});var i,l=f({},e.modals.windows);for(i in l)l.hasOwnProperty(i)&&(l[i]=f(f({},l[i]),{},{errors:null}));return f(f({},e),{},{fetchCount:e.fetchCount<=0?0:e.fetchCount-1,form:f(f({},e.form),{},{data:f(f({},e.form.data),{},{isDirty:!1,isNew:!!t,original:n,modified:r}),errors:null}),modals:f(f({},e.modals),{},{windows:l})})},FAILURE:function(e,t){var r=t.payload,t=r.error,r=r.details;return f(f({},e),{},{fetchCount:e.fetchCount<=0?0:e.fetchCount-1,error:t,errorDetails:r})}},UPDATEFROMCHILD:function(e,t){function r(e,t){if(Array.isArray(e)){var r=u(e),n=r.findIndex(function(e){return e.__id===t.__id});return 0<=n?r[n]=W(r[n],t):r.push(t),r}return W(e,t)}var n=t.payload,o=n.key,a=n.value,i=n.modalId,t=(!!i?e.modals.windows[i]:e.form).data,n=r(o?t.modified[o]:t.modified,a),t=r(o?t.original[o]:t.original,a);if(i){a=f({},e),i=a.modals.windows[i].data;return o?(i.modified[o]=n,i.original[o]=t):(i.modified=n,i.original=t),a}return f(f({},e),{},o?{form:f(f({},e.form),{},{data:f(f({},e.form.data),{},{modified:f(f({},e.form.data.modified),{},V({},o,n)),original:f(f({},e.form.data.original),{},V({},o,t))})})}:{form:f(f({},e.form),{},{data:f(f({},e.form.data),{},{modified:n,original:t})})})},UPDATEMODALFILTER:function(e,t){var r=t.payload,t=r.filter,r=r.modalId;return f(f({},e),{},{modals:f(f({},e.modals),{},{windows:f(f({},e.modals.windows),{},V({},r,f(f({},e.modals.windows[r]),{},{data:f(f({},e.modals.windows[r].data),{},{filter:t})})))})})},SETPROCESSPARAMETERS:function(e,t){var r=t.payload,n=r.parameters,t=r.modalId;if(n){var r=(t?e.modals.windows[t]:e.form).data,o=f({},r.modified),a=f({},r.original);return Object.keys(o).filter(function(e){return e.startsWith("_wp")}).forEach(function(e){delete o[e]}),Object.keys(a).filter(function(e){return e.startsWith("_wp")}).forEach(function(e){delete a[e]}),Object.keys(n).forEach(function(e){o["_wp".concat(e)]=a["_wp".concat(e)]=n[e]}),f(f({},e),{},t?{modals:f(f({},e.modals),{},{windows:f(f({},e.modals.windows),{},V({},t,f(f({},e.modals.windows[t]),{},{data:f(f({},e.modals.windows[t].data),{},{modified:o,original:a})})))})}:{form:f(f({},e.form),{},{data:f(f({},e.form.data),{},{modified:o,original:a})})})}},UPDATE:function(e,t){var r,n=t.payload,o=n.key,a=n.value,i=n.modalId,l=n.additionalValues,s=null,s=o?((r={})[o]=a,l&&!Array.isArray(l)&&Object.keys(l).forEach(function(e){r["".concat(o,"_").concat(e)]=l[e]}),W((i?e.modals.windows[i]:e.form).data.modified,r)):a;if(i){t=f({},e);t.modals.windows[i]||(t.modals.windows[i]={});n=t.modals.windows[i].data;return n?(a=t.modals.windows[i].data.original,z(s,a)?n.isDirty=!!n.isNew&&n.isDirty:n.isDirty=!0,n.modified=s,n.additionalValues[o]=l):((n=new{original:null,modified:s,isDirty:!0,isNew:!0,additionalValues:{}}).additionalValues[o]=l,t.modals.windows[i].data=n),t}s=z(s,e.form.data.original)?f(f({},e),{},{form:f(f({},e.form),{},{data:f(f({},e.form.data),{},{isDirty:!!e.form.data.isNew&&e.form.data.isDirty,modified:s}),errors:null})}):f(f({},e),{},{form:f(f({},e.form),{},{data:f(f({},e.form.data),{},{isDirty:!0,modified:s})})});return s},SAVE:{BEGIN:function(e){return f(f({},e),{},{fetchCount:e.fetchCount+1})},SUCCESS:function(e,t){var r=t.payload,t=r.data,r=r.modalId,e=f(f({},e),{},{fetchCount:e.fetchCount<=0?0:e.fetchCount-1,form:f({},e.form)});return r?e.modals.windows[r]&&(e.modals.windows[r].errors=null,(r=e.modals.windows[r].data).isNew=!1,r.isDirty=!1,null!==t&&(Y(r.modified,t),r.modified=t),r.original=J(r.modified)):(e.form.errors=null,e.form.data.isNew=!1,e.form.data.isDirty=!1,null!==t&&(Y(e.form.data.modified,t),e.form.data.modified=t),e.form.data.original=e.form.data.modified,Object.values(e.modals.windows).forEach(function(e){e=e.data;e.isNew=!1,e.isDirty=!1,e.original=J(e.modified)})),e},FAILURE:n.failure},DELETE:{BEGIN:function(e){return f(f({},e),{},{fetchCount:e.fetchCount+1})},SUCCESS:function(e,t){t.payload;return f(f({},e),{},{fetchCount:e.fetchCount<=0?0:e.fetchCount-1})},FAILURE:n.failure}}};function h(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function m(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?h(Object(o),!0).forEach(function(e){var t,r;t=n,e=o[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):h(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}var y=Object(o.handleActions)({APP:{USERINFO:{FETCH:{BEGIN:function(e){return m(m({},e),{},{fetchCount:e.fetchCount+1})},SUCCESS:function(e,t){t=t.payload.user;return m(m({},e),{},{user:t,fetchCount:e.fetchCount<=0?0:e.fetchCount-1})},FAILURE:function(e,t){var r=t.payload,t=r.error,r=r.details;return m(m({},e),{},{error:t,errorDetails:r,fetchCount:e.fetchCount<=0?0:e.fetchCount-1})}}},CLEARERRORS:function(e){return m(m({},e),{},{error:void 0,errorLevel:void 0,errorDetails:void 0})},FAILURE:function(e,t){var r=t.payload,n=r.error,t=r.details,r=r.level;return m(m({},e),{},{error:n,errorLevel:r,errorDetails:t,fetchCount:e.fetchCount<=0?0:e.fetchCount-1})},FETCHBEGIN:function(e){return m(m({},e),{},{fetchCount:e.fetchCount+1})},RESETFETCHCOUNT:function(e){return m(m({},e),{},{fetchCount:0})},FORM:n,IMPERSONATEDUSERIDFROMURL:function(e){return m(m({},e),{},{impersonatedUserId:ft.common.getParameterFormUrlOrCookie("impersonatedUserId")})},SETAUTH:function(e,t){t=t.payload.type;return m(m({},e),{},{authType:t})}}},c.app),v=Object(o.handleActions)({UPDATESTATE:function(e,t){t=t.payload.stateDelta;if(!t||K(t))return e;var r=W(e,t);return Object.keys(r.app.modals.windows).forEach(function(e){r.app.modals.windows[e]||delete r.app.modals.windows[e]}),r}},c),b=["copy"];function g(e){var t={urlFilter:null,type:null,name:null,options:null,command:null};if(e){e="string"==typeof e?e:e.pathname;return e.includes("?")?w(e.split("?")[0],t):w(e,t)}return t}function w(e,t){var r=e.split("/");return 1<r.length&&(t.type=r[1]),2<r.length&&(t.name=r[2]),3<r.length&&(t.urlFilter=r[3]),5===r.length&&(e=r[4],b.includes(e)?t.command=e:t.options=e),5<r.length&&(t.command=r[4],t.options=r[5]),t}function O(e,t,r){r=!(2<arguments.length&&void 0!==r)||r,e=e.split("/");return 3<e.length?e[3]=t:e.push(t),r&&4<e.length&&b.includes(e[4])&&(5===e.length?e.pop():e.slice(4,1)),e.join("/")}var I={filterFromLocation:function(e){return g(e).urlFilter},formFilterFromLocation:function(e){var t=L.getState(),r=g(e),e=r.type,r=r.urlFilter;return!e||e!==t.settings.form&&e!==t.settings.flow&&e!==t.settings.workflow?null:r},typeFromLocation:function(e){var t=g(e),e=t.type;t.name;return e},nameFromLocation:function(e,t){var r=g(e),e=r.type,r=r.name;return e&&e.toLowerCase()===t?r:null},changeFilter:function(e,t,r){var n=e.pathname;if(n.includes("?")){e=n.split("?");return"".concat(O(e[0],t,r),"?").concat(e[1])}return O(n,t,r)},formDataFromLocation:function(e){var t=g(e),r=t.urlFilter,e=t.options;return t.type!==L.getState().settings.form?{urlFilter:null,options:null}:{urlFilter:r,options:e}},deconstructLocation:g,getParamValue:function(e,t){return!e||!e.search||e.search.length<2?null:new URLSearchParams(e.search.substring(1)).get(t)}},C={getWindowLocation:function(){return window.location},setCurrentLocation:function(e){return window.location.href=e},loadScript:function(e,t){var r;window.document&&((r=window.document.createElement("script")).src="data:text/javascript,"+encodeURIComponent(e),window.document.body.appendChild(r),t&&t())},openExcel:function(e,t){var r=document.createElement("a"),t=new Blob([t],{type:"application/vnd.ms-excel"}),e=e.fileName||e.propertyName+".xlsx";r.setAttribute("href",window.URL.createObjectURL(t)),r.setAttribute("download",e),document.body.appendChild(r),r.onclick=function(){return window.document.body.removeChild(r)},r.click()},getCookie:function(){return window.document&&window.document.cookie},setCookie:function(e){window.document&&(window.document.cookie=e)}};function k(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function E(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?k(Object(o),!0).forEach(function(e){var t,r;t=n,e=o[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):k(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}var A=Object(o.handleActions)({ROUTER:{ROUTECHANGED:function(e,t){var r=t.payload,n=r.history,t=r.location,r=r.changeRefreshKey;return E(E({},e),{},{push:null,redirect:null,refresh:null,reload:null,history:n,location:t,refreshKey:r?G():e.refreshKey})},PUSH:function(e,t){t=t.payload.newurl;return E(E({},e),{},{push:t,redirect:null,refresh:null,reload:null})},REDIRECT:function(e,t){t=t.payload.newurl;return E(E({},e),{},{redirect:t,push:null,refresh:null,reload:null})},REFRESH:function(e,t){t=t.payload.newurl;return E(E({},e),{},{refresh:t,reload:null,redirect:null,push:null})},RELOAD:function(e,t){t=t.payload.newurl;return E(E({},e),{},{reload:t,refresh:null,redirect:null,push:null})},CHANGEURLFILTER:function(e,t){var r=t.payload,n=r.newfilter,t=r.clearCommand,r=C.getWindowLocation();return E(E({},e),{},{redirect:I.changeFilter(r,n,t),push:null,refresh:null,reload:null})},SETSCREEN:function(e,t){t=t.payload.screen;return E(E({},e),{},{screen:t})}}},c.router);function S(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function P(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?S(Object(r),!0).forEach(function(e){j(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var R=Object(o.handleActions)({SETTINGS:{SET:function(e,t){var r=t.payload,t=r.key,r=r.value;return P(P({},e),{},j({},t,r))}}},c.settings),_={preFetchUser:function(){return Promise.resolve()},logoff:function(){var e=C.getWindowLocation();C.setCurrentLocation(e.href)},onLogon:function(){}},x={cookie:_},D={get:function(e){e=e.getState().app.authType,e=x[e];return e||_},addProvider:function(e,t){return x[e]=t}},F=(Object(s.combineReducers)({"":v,app:y,router:A,settings:R}),Object(s.createStore)(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0;return"UPDATESTATE"===t.type?v(e,t):{app:y(e.app,t,e),router:A(e.router,t,e),settings:R(e.settings,t,e)}},c,Object(t.composeWithDevTools)(Object(s.applyMiddleware)(i.a))));F.getState().app.addQueryParams=function(e){for(var t in F.additionalParams||(F.additionalParams={}),e)F.additionalParams[t]=e[t]},F.resetForm=function(e){var t=F.getState();t.app.form=c.app.form,e&&(t.app.modals.models={})},F.logoff=function(){D.get(F).logoff().then(function(){F.resetStateInStorage()}).catch(function(e){F.dispatch(N.app.failure("Logoff failed",e.message,1))})},F.login=function(r){D.get(F).onLogon().then(function(){F.dispatch(ft.userinfo.fetch(function(e){r&&r(e);var t=F.getState().settings.router;t&&t.userLoaded&&t.userLoaded(e)}))}).catch(function(e){F.dispatch(N.app.failure("Logon failed",e.message,1))})},F.encodeQueryData=function(e){var t,r=[],n=F.getState();for(t in n.app.impersonatedUserId&&r.push("impersonatedUserId="+encodeURIComponent(n.app.impersonatedUserId)),e)e.hasOwnProperty(t)&&r.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return r.join("&")},F.getAuthState=function(){var e=D.get(F);return null==e.getAuthState&&console.log("getAuthState is not implemented for this auth provider."),e.getAuthState()},F.setAuthState=function(e){var t=D.get(F);return null==t.setAuthState&&console.log("setAuthState is not implemented for this auth provider."),t.setAuthState(e)},F.loadStateFromStorage=function(){console.log("loadStateFromStorage is not implemented for this build.")},F.saveStateToStorage=function(){console.log("loadStateFromStorage is not implemented for this build.")},F.resetStateInStorage=function(){};var L=window.DWKitStore=F;function T(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function U(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?T(Object(r),!0).forEach(function(e){B(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function B(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var z=function(e,t){return JSON.stringify(e)===JSON.stringify(t)};function K(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return;return 1}function q(e,t){return t}var W=function(e,t){return l()(e,t,{arrayMerge:q})},G=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},H=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)(Z|([+\-])(\d{2}):(\d{2}))$/;function Q(e,t){return"string"==typeof t&&H.test(t)?new Date(t):t}function J(e){var t,r,n=U({},e);for(t in n)Array.isArray(n[t])&&(r=[],e[t].forEach(function(e){"object"===M(e)?r.push(U({},e)):r.push(e)}),n[t]=r);return n}function Y(t,r){t&&Object.keys(t).filter(function(e){return e.startsWith("_wp")}).forEach(function(e){r[e]=t[e]})}function Z(){return window.DWKitAdminLang}function X(e,t){var r=t.model,n=t.data,o=t.mapping,a=t.hideControls,i=t.readOnlyControls,l=t.readOnly,s=t.filters,t=t.errors;return function t(r){return Object.keys(r).forEach(function(e){r[e]&&"object"===M(r[e])?t(r[e]):void 0===r[e]&&delete r[e]}),r}(e?{app:{modals:{models:B({},L.getState().app.modals.windows[e].name,{model:r,mapping:o}),windows:B({},e,{data:{modified:n},hideControls:a,readOnlyControls:i,readOnly:l,filters:s,errors:t})}}}:{app:{form:{data:{modified:n},models:{model:r,mapping:o,hideControls:a,readOnlyControls:i,readOnly:l},filters:s,errors:t}}})}var $,ee=r(2),t=r(5),te=r.n(t),re=r(0),ne=r.n(re),oe=function(e,t,r,o,n,a){var i=new FormData;i.append("request",JSON.stringify(t));t=L.getState().settings,e=t.executeaction+"?"+L.encodeQueryData({name:e});a&&(e+="&useServerCodeActionRequest=true"),t.mobile&&(e+="&mobile=true");i=(i=ft.configuredFetch(e,{method:"post",body:i})).then(function(e){return e.json()});if(r&&(i=i.then(function(e){var t=r(e);return void 0!==t?t:e})),n&&(i=i.then(function(e){if(null!=e){if(e.success){var t={},r=!1,n=e.result;return null==n?{}:(n.hasOwnProperty("data")&&(t.data=n.data,r=!0),n.hasOwnProperty("stateDelta")&&(t.stateDelta=n.stateDelta,r=!0),r||(t.stateDelta=n),o&&L.dispatch(actions.updatestate(t.stateDelta)),t)}if(!o)throw{level:1,message:e.message,details:e.details};L.dispatch(actions.app.failure(e.message,e.details,1))}return{}})),!o)return i},ae={getModelConrol:function(e,t){for(var r in e){var n=e[r];if(n.key==t)return n;if(n.children&&0<n.children.length){r=ae.getModelConrol(n.children,t);if(null!=r)return r}if(n.placeholders)for(var o in n.placeholders){o=ae.getModelConrol(n.placeholders[o],t);if(null!=o)return o}}},changeModelControl:function(e,t,r,n){return ae.changeModelControls(e,[{key:t,name:r,value:n}])},changeModelControls:function(e,t){function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];e.key==n.key&&(e[n.name]=n.value)}if(null!=e.children&&0<e.children.length)for(var o in e.children)i(e.children[o],t);if(null!=e.placeholders&&0<e.placeholders.length)for(var a in e.placeholders)i(e.placeholders[a],t)}var r,n=e.modalId?e.state.app.modals.windows[e.modalId].name:null,o=(e.modalId?e.state.app.modals.models[n]:e.state.app.form.models).model;for(r in o)i(o[r],t);return X(e.modalId,{model:o})},setDataField:function(e,t,r){L.dispatch(N.app.form.data.update(e,t,r))},rewriteControlModel:function(e,t,r){var n=L.getState(),o=r?n.app.modals.windows[r].name:null,n=(r?n.app.modals.models[o]:n.app.form.models).model,a=ae.getModelConrol(n,e),i=t(a);if(i!==a)for(var l in i)a[l]=i[l]},clearErrors:function(){L.dispatch(N.app.clearerrors())},forceUpdate:function(){L.dispatch(N.updatestate({}))},redirectToForm:function(e,t){ae.redirect("form",e,t)},redirectToFlow:function(e,t){ae.redirect("flow",e,t)},redirectToUrl:function(e){L.dispatch(N.router.push(e))},redirect:function(e,t,r){t="/"+e+"/"+t;null!=r&&(t+="/"+r),L.dispatch(N.router.push(t))},formValidate:function(e){return xe.validate(e)},createElement:function(e,t,r){return ne.a.createElement(e,t,r)},checkRole:function(e){return _e.checkRole(e,L.getState())},checkPermission:function(e,t){return _e.checkPermission(e,L.getState(),t)},callUrl:function(e,t,r){var n=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],t=ft.configuredFetch(e,t);return n&&(t=t.then(function(e){return e.json()})),t=r?t.then(function(e){return r(e)}):t},callServerCodeAction:function(e,t,r,n,o){return oe(e,t,r,!1,n,o)},callServerCodeActionDispatch:function(e,t,r,n){oe(e,t,r,!0,autoResultProcessing,useServerCodeActionRequest)},openModal:function(e,t,r){var n=r.type,o=r.viewType,a=r.sidebarWidth,i=r.sidebarFrom,l=r.onOpenFunc,s=r.onCloseFunc,c=r.callContext,u=r.closeOnOutsideClick,p=r.data,d=L.getState(),r=d.app.modals.order.length?d.app.modals.order[d.app.modals.order.length-1]:null;return xe.openModal({modalId:r,state:d,controlRef:void 0,parameters:{filter:t,name:e,type:n,viewType:o,sidebarSettings:{from:i,width:a},onOpenFunc:l,onCloseFunc:s,closeOnOutsideClick:u,data:p},callContext:c})},openModalDispatch:function(e,t,r){var n=r.type,o=r.viewType,a=r.sidebarWidth,i=r.sidebarFrom,l=r.onOpenFunc,s=r.onCloseFunc,c=r.callContext,u=r.closeOnOutsideClick,r=r.data,r=ae.openModal(e,t,{type:n,viewType:o,sidebarWidth:a,sidebarFrom:i,onOpenFunc:l,onCloseFunc:s,callContext:c,closeOnOutsideClick:u,data:r});"function"==typeof r?r(L.dispatch).then(function(e){e&&e.stateDelta&&L.dispatch(N.updatestate(e.stateDelta))}):L.dispatch(N.updatestate(r))},executeActions:function(e){return ft.form.executeActions(e)},executeActionsDispatch:function(e){L.dispatch(ft.form.executeActions(e))},setCookie:function(e,t){ft.common.setCookie(e,t)},getCookie:function(e){return ft.common.getCookie(e)},getParameterFormUrlOrCookie:function(e){return ft.common.getParameterFormUrlOrCookie(e)},setAuth:function(e){L.dispatch(N.app.setauth(e))},loadBackendScript:function(e,t,r){return ft.configuredFetch(e,t).then(function(e){return e.text()}).then(function(e){C.loadScript(e,r)}).catch(function(e){console.error(e)})},convertToState:X,getWindowState:($=function(e,t){return getWindowState(e,t)},ie.toString=function(){return $.toString()},ie),validate:function(e,t,r){r=r||L.getState(),e=e||(t?r.app.modals.models[r.app.modals.windows[t].name]:r.app.form).data.modified;for(var n=!0,o={},a=t?_e.getControlsForValidate(r.app.modals.models[r.app.modals.windows[t].name].model):_e.getControlsForValidate(r.app.form.models.model),i=0;i<a.length;i++){var l=a[i].propertyName||a[i].key,s=_e.validate(a[i],e[l],e);s&&(o[l]=s,n=!1)}return n?null:o},loadImage:function(e,r){e=L.getState().settings.datadownload+e;ae.callUrl(e,void 0,void 0,!1).then(function(e){return e.blob()}).then(function(e){var t;0==e.size?r(void 0):((t=new FileReader).onload=function(){r(this.result)},t.readAsDataURL(e))})}};function ie(e,t){return $.apply(this,arguments)}var le=ae;function se(e){return function(e){if(Array.isArray(e))return ce(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ce(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ce(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ue={open:function(e,t,r,n,o,a,i,l,s,c,u,p,d,f){null===n&&(n=void 0);var V="form"===l,h="flow"===l,m="workflow"===l,y=V?t.app.modals.models[r]:null,v=se(t.app.modals.order),b=r+"_"+v.length;v.push(b);var g={};return g[b]={id:b,parentId:e,data:{isDirty:!1,isNew:a,original:n,modified:n,additionalValues:{},filter:o,property:i},errors:null,name:V?r:null,type:l,viewType:s,sidebarSettings:c,onOpenFunc:u,onCloseFunc:p,preventLoad:void 0!==n,flowName:h?r:void 0,schemeName:m?r:void 0,keyIndex:0,callContext:d,closeOnOutsideClick:f},V?!y&&V?function(e){return ft.form.fetchform(r,b)(e).then(function(){if(g[b].onOpenFunc&&!g[b].onOpenFunc(b,g[b],t))return{};return ee.Promise.resolve({stateDelta:{app:{modals:{windows:g,order:v}}}})})}:{app:{modals:{windows:g,order:v}}}:m?function(e){return ft.form.fetchworkflow(r,o,g[b],a&&!!o)(e).then(function(){if(g[b].onOpenFunc&&!g[b].onOpenFunc(b,g[b],t))return{};return ee.Promise.resolve({stateDelta:{app:{modals:{windows:g,order:v}}}})})}:function(e){return ft.form.fetchflow(r,o,g[b],a&&!!o)(e).then(function(){if(g[b].onOpenFunc&&!g[b].onOpenFunc(b,g[b],t))return{};return ee.Promise.resolve({stateDelta:{app:{modals:{windows:g,order:v}}}})})}}};function pe(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function de(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?pe(Object(o),!0).forEach(function(e){var t,r;t=n,e=o[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):pe(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}var fe={edit:function(e){var t=e.state,r=e.controlRef,n=e.parameters,e=e.modalId;return fe.operation({state:t,controlRef:r,parameters:n,modalId:e,op:"edit"})},create:function(e){var t=e.state,r=e.controlRef,n=e.parameters,e=e.modalId;return fe.operation({state:t,controlRef:r,parameters:n,modalId:e,op:"create"})},copy:function(e){var t=e.state,r=e.controlRef,n=e.parameters,e=e.modalId;return fe.operation({state:t,controlRef:r,parameters:n,modalId:e,op:"copy"})},operation:function(e){var t=e.state,r=e.controlRef,n=e.parameters,o=e.modalId,a=e.op,i=r.props,l="copy"===a,s="create"===a,c=void 0!==r.props.editType||"form"===r.props.editType,u=i.editForm;"flow"===r.props.editType?u=i.editFlow:"workflow"===r.props.editType&&(u=i.editWorkflow);var p=null,d=null,e=fe.getSelectedRow({parameters:n,controlRef:r});if(!e&&!s)return{};a=r.props.name,i=r.props.propertyName&&""!=r.props.propertyName?r.props.propertyName:a,p=!s&&e.__loaded&&c?(c=t.app.modals.models[u],i=(o?t.app.modals.model[t.app.modals.windows[o].name]:t.app.form.models).mapping.toData[i],c=c.mapping.toForm,d=fe.mapRow(fe.mapRow(e,i),c),l&&(d.__id="CLIENT_"+G()),d.__id):s?null:e.__id;s&&((d=de({},n)).__id||(d.__id="CLIENT_"+G()));return ue.open(o,t,u,d,p,l||s,a,r.props.editType||"form",r.props.editFormShowType,{from:r.props.sidebarDirection,width:n.sidebarWidth},void 0,function(e){var t=L.getState();L.dispatch(ft.form.executeActions({actions:["modalClosed"],controlRef:r,formName:t.app.modals.windows[e.modalId].name,modalId:o,parameters:e})),null!=r&&null!=r.props.handleEvent&&r.props.handleEvent({key:r.props.name,eventName:"onModalClosed",parameters:e})})},mapRow:function(e,r,n){var t,o={};for(t in e)!function(t){t.startsWith("__")&&(o[t]=e[t]),r&&r[t]&&(o[r[t]]=e[t],n&&n[t]&&Object.keys(n[t]).forEach(function(e){o["".concat(r[t],"_").concat(e)]=n[t][e]}))}(t);return o},getSelectedRow:function(e){var t=e.parameters,r=e.controlRef,n=-1;if("object"===M(e=t.rowIdx)&&null===e||void 0===e?0<r.state.selectedIndexes.length&&(n=r.state.selectedIndexes[0]):n=t.rowIdx,!(n<0))return r.state.items[n]}},Ve=fe;function he(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var me=new(function(){function n(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),r={},(t="map")in(e=this)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}var e,t,r;return e=n,(t=[{key:"register",value:function(e,t){if(me.map[e])throw new Error("Component "+e+" already registered!");me.map[e]=t}},{key:"draw",value:function(e,t){var r=me.map[e];if(!r)throw new Error("Cannot find draw function for ".concat(e,", ").concat(t));return r(t)}}])&&he(e.prototype,t),r&&he(e,r),n}()),s=me.register,ye=me.draw;function ve(e,t,r){return ye("alert",{message:e,type:t,props:r})}function be(e,t){return ve(e,"error",t)}function ge(e,t){return ve(e,"success",t)}var i=r(27),we=r.n(i);function Oe(e){return function(e){if(Array.isArray(e))return Ce(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Ce(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ce(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ee(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Ae(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ee(Object(r),!0).forEach(function(e){Se(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ee(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Se(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pe(e,n){var o=e.key,t=e.actions,a=e.controlRef,i=e.sourceControlRef,l=e.sourceControlValue,s=e.parameters,c=e.component,u=e.formName,p=e.schemeName,d=e.modalId,r=e.callContext;function f(e){return d?e.app.modals.windows[d]:e.app.form}if(!t||t.length<1)return ee.Promise.resolve();var V,e=null==u?"":u.toLowerCase(),h=window.globalUserActions,m=window.DWKitApp.ActionHandlers?window.DWKitApp.ActionHandlers[e]:void 0,y=L.getState(),v=Ae({},y),b=null===(e=f(v)).data.modified?null:Ae({},e.data.modified),g=null===e.data.original?null:Ae({},e.data.original),w=null,O={},C=r||{};for(V in t)!function(e){var r=t[e];w=w?w.then(function(e){var t=e.data,e=e.stateDelta;return e&&(O=W(O,e),v=W(v,e)),Re(o,r,h,m,a,i,l,s,t,g,v,c,u,p,d,n,C)}):Re(o,r,h,m,a,i,l,s,b,g,v,c,u,p,d,n,C)}(V);return w=w.then(function(e){var t=e.data,r=e.stateDelta;r&&(O=W(O,r));e=f(y);d?z(e.data.modified,t)||((r={app:{modals:{windows:Se({},d,{})}}}).app.modals.windows[d].data={modified:t},O=W(O,r)):z(e.data.modified,t)||(O=W(O,{app:{form:{data:{modified:t}}}})),K(O)||n(N.updatestate(O))})}var je=r(8),Re=function(e,t,r,n,o,a,i,l,s,c,u,p,d,f,V,h,m){function y(e){return{data:e&&e.data?e.data:s,stateDelta:e&&e.stateDelta?e.stateDelta:null}}var v=null;if(!(v=(v=!(v=n?n[t]:v)&&r?r[t]:v)||xe[t]))return le.callServerCodeAction(t,{data:s,parameters:l,formName:d,modalId:V},void 0,!0,!0).then(y);t=null;try{t=v({key:e,data:s,originalData:c,state:u,component:p,formName:d,schemeName:f,controlRef:o,sourceControlRef:a,sourceControlValue:i,parameters:l,modalId:V,callContext:m})}catch(e){return ee.Promise.reject(e)}return t&&t.then instanceof Function?t.then(y):t instanceof Function?t(h).then(function(e){return ee.Promise.resolve({data:e&&e.data?e.data:s,stateDelta:e&&e.stateDelta?e.stateDelta:null})}):ee.Promise.resolve({data:s,stateDelta:t})},_e={getControlsForValidate:function(e){var n=[];return e.forEach(function(e){var t;if((!0===e["other-required"]||void 0!==e["other-customValidation"]&&""!==e["other-customValidation"])&&n.push(e),void 0!==e.children&&0<e.children.length&&(t=_e.getControlsForValidate(e.children),n=n.concat(t)),void 0!==e.placeholders)if("collectioneditor"===e["data-buildertype"])n.push(e);else for(var r in e.placeholders){r=_e.getControlsForValidate(e.placeholders[r]);n=n.concat(r)}"customblock"===e["data-buildertype"]&&"source"===e.sourceType&&null!=e.source&&(t=te.a.parse(e.source),t=_e.getControlsForValidate(t),n=n.concat(t))}),n},validate:function(e,t,r){var n=void 0;if(!0===e["other-required"]&&(null==t||""===t||"collectioneditor"===e["data-buildertype"]&&Array.isArray(t)&&0===t.length))n="This field is required!";else if(void 0!==e["other-customValidation"]&&""!==e["other-customValidation"]){var o="return "+e["other-customValidation"],r=new Function("value, data",o)(t,r);"boolean"==typeof r?!1===r&&(n=!0):n=r}else if("collectioneditor"===e["data-buildertype"]&&Array.isArray(t)&&0<t.length&&Array.isArray(e.columns)){var a,i=[],l=!1;for(a in t){var s=t[a];if(null!=s&&null!=s){var c,u={__id:s.__id},p=!1;for(c in e.columns){var d,f=e.columns[c];"custom"==f.control&&e.placeholders&&(d=e.placeholders[f.key],Array.isArray(d)&&0<d.length&&((d=_e.validate(d[0],s[f.key],s))&&(p=!0,u[f.key]=d)))}p&&(l=!0,i.push(u))}}l&&(n=i)}return n},initDefaultState:function(e,t){if(Array.isArray(e)&&void 0!==t)for(var r,n=0;n<e.length;n++){if(void 0!==e[n].defaultValue&&""!==e[n].defaultValue&&(t[e[n].propertyName||e[n].key]=e[n].defaultValue),Array.isArray(e[n].children)&&_e.initDefaultState(e[n].children,t),void 0!==e[n].placeholders)for(var o in e[n].placeholders)_e.initDefaultState(e[n].placeholders[o],t);"customblock"===e[n]["data-buildertype"]&&"source"===e[n].sourceType&&null!=e[n].source&&(r=te.a.parse(e[n].source),_e.initDefaultState(r,t))}},initDefaultStateFormUrl:function(e){void 0===e&&(e={});var t=function(e){if(window.location&&window.location.href.href){e=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null==e?null:decodeURI(e[1])||0}return null}("defaultvalues");if(t){var r=void 0;try{r=te.a.parse(t)}catch(e){}if(r&&"object"===ke(r))for(var n in r)void 0!==r[n]&&(e[n]=r[n])}return e},checkPermission:function(e,t,r){var n=(r?t.app.modals.models[t.app.modals.windows[r].name]:t.app.form).formParams.permissions;if(Array.isArray(n))for(var o=0;o<n.length;o++)if(n[o].code===e)return 1===n[o].accessType||0===n[o].accessType;return!1},checkRole:function(e,t){return void 0!==t.app.user&&void 0!==t.app.user.roles&&t.app.user.roles.includes(e)},checkConditions:function(e){var t=e.model,r=e.data,n=e.state,o=e.modalId,a={hideControls:[],readOnlyControls:[]};if(null===t||null===r)return a;for(var i=0;i<t.length;i++){var l,s=t[i]["other-visibleConition"];if(void 0!==s&&""!==s&&(new Function("data, checkPermission, checkRole","return "+s)(r,function(e){return _e.checkPermission(e,n,o)},function(e){return _e.checkRole(e,n)})||a.hideControls.push(t[i].key)),void 0!==(s=t[i]["other-readOnlyConition"])&&""!==s&&(new Function("data, checkPermission, checkRole","return "+s)(r,function(e){return _e.checkPermission(e,n,o)},function(e){return _e.checkRole(e,n)})&&a.readOnlyControls.push(t[i].key)),Array.isArray(t[i].children)&&(l=_e.checkConditions({model:t[i].children,data:r,state:n,modalId:o}),a={hideControls:a.hideControls.concat(l.hideControls),readOnlyControls:a.readOnlyControls.concat(l.readOnlyControls)}),void 0!==t[i].placeholders)for(var c in t[i].placeholders){c=_e.checkConditions({model:t[i].placeholders[c],data:r,state:n,modalId:o});a={hideControls:a.hideControls.concat(c.hideControls),readOnlyControls:a.readOnlyControls.concat(c.readOnlyControls)}}"customblock"===t[i]["data-buildertype"]&&"source"===t[i].sourceType&&null!=t[i].source&&(l=te.a.parse(t[i].source),l=_e.checkConditions({model:l,data:r,state:n,modalId:o}),a={hideControls:a.hideControls.concat(l.hideControls),readOnlyControls:a.readOnlyControls.concat(l.readOnlyControls)})}return a}},xe={initSystem:function(e){var t=e.state,r=e.data,n=e.modalId,o=(n?t.app.modals.models[t.app.modals.windows[n].name]:t.app.form.models).model,a=(n?t.app.modals.models[t.app.modals.windows[n].name]:t.app.form).formParams,i=null;if(a&&a.securityGroup){var l=a.permissions;if(Array.isArray(l))for(var i=!0,s=0;s<l.length;s++)if("Edit"===l[s].code){1==l[s].accessType&&(i=!1);break}}if((n?t.app.modals.windows[n]:t.app.form).data.isNew){e=r;_e.initDefaultState(o,e),_e.initDefaultStateFormUrl(e);a=_e.checkConditions({model:o,data:e,state:t,modalId:n});return n?{app:{modals:{windows:Se({},n,{data:{original:e,modified:e},hideControls:a.hideControls,readOnlyControls:a.readOnlyControls,readOnly:i})}}}:{app:{form:{data:{original:e,modified:e},models:{hideControls:a.hideControls,readOnlyControls:a.readOnlyControls,readOnly:i}}}}}t=_e.checkConditions({model:o,data:r,state:t,modalId:n});return n?{app:{modals:{windows:Se({},n,{hideControls:t.hideControls,readOnlyControls:t.readOnlyControls,readOnly:i})}}}:{app:{form:{models:{hideControls:t.hideControls,readOnlyControls:t.readOnlyControls,readOnly:i}}}}},init:function(e){},dataReceived:function(e){},modalClosed:function(e){},checkConditions:function(e){var t=e.data,r=e.state,n=e.modalId,e=(n?r.app.modals.models[r.app.modals.windows[n].name]:r.app.form.models).model,r=_e.checkConditions({model:e,data:t,state:r,modalId:n});return n?{app:{modals:{windows:Se({},n,{hideControls:r.hideControls,readOnlyControls:r.readOnlyControls})}}}:{app:{form:{models:{hideControls:r.hideControls,readOnlyControls:r.readOnlyControls}}}}},workflowExecuteCommand:function(e){var o=e.formName,a=e.state,s=e.parameters,c=e.modalId,u=e.callContext,p=e.schemeName,d=e.data,f=u.commandFormResult&&u.commandFormResult.commandParams?u.commandFormResult.commandParams:null;return function(i){i(N.app.form.data.fetch.begin());var r=c?a.app.modals.windows[c]:a.app.form,l=(null!=s.row&&null!=s.row.__id?s.row:d).__id;l||(e=C.getWindowLocation(),l=c?r.data.filter:I.filterFromLocation(e));var n,t,e={command:s.command.value,name:o,id:l};return p&&(e.schemeName=p),f&&(n={},t=u.commandFormResult.model,Object.keys(f).forEach(function(e){le.getModelConrol(t,e)&&(n[e]=f[e])}),Object.keys(r.data.modified).filter(function(e){return e.startsWith("_wp")}).forEach(function(e){var t=e.substring(3);n[t]||je(r.data.modified[e],r.data.original[e])||(n[t]=r.data.modified[e])}),Object.keys(n).length&&(e.data=JSON.stringify(n))),ft.configuredFetch(L.getState().settings.workflowexecute+"?"+L.encodeQueryData(e),{method:"post"}).then(function(e){return e.json()}).then(function(e){if(e.success){var t="The command execution has been completed!";if(void 0!==Z()&&(t=Z().msg.commandexecutioncompleted),i(N.app.resetfetchcount()),ge(t),p){var r=e.item,n=(r&&r.entity,r?r.entityId:null),o=null!=n,a={};return o&&n!=l&&o&&(t={},c?t.app={modals:{windows:Se({},c,{data:{filter:o?n:void 0}})}}:(r=C.getWindowLocation(),t.router={push:o?I.changeFilter(r,n):void 0}),a.stateDelta=t),ee.Promise.resolve(a)}}else i(N.app.form.data.save.failure(e.message,e.details))}).catch(function(e){i(N.app.form.data.save.failure(e.message,e.stack))})}},workflowSetState:function(e){var a=e.formName,i=e.state,l=(e.controlRef,e.parameters),s=e.modalId,c=e.schemeName;return function(r){r(N.app.form.data.fetch.begin());var e,n=s?i.app.modals.windows[s]:i.app.form,t=(null!=l.row&&null!=l.row.__id?l.row:n.data.modified).__id;t||(e=C.getWindowLocation(),t=s?n.data.filter:I.filterFromLocation(e));t={state:l.state.value,name:a,id:t};c&&(t.schemeName=c);var o={};return Object.keys(n.data.modified).filter(function(e){return e.startsWith("_wp")}).forEach(function(e){var t=e.substring(3);je(n.data.modified[e],n.data.original[e])||(o[t]=n.data.modified[e])}),Object.keys(o).length&&(t.data=JSON.stringify(o)),ft.configuredFetch(L.getState().settings.workflowset+"?"+L.encodeQueryData(t),{method:"post"}).then(function(e){return e.json()}).then(function(e){var t;e.success?(r(N.app.resetfetchcount()),t="The new state was set!",ge(t=void 0!==Z()?Z().msg.newstateset:t)):r(N.app.form.data.save.failure(e.message,e.details))}).catch(function(e){r(N.app.form.data.save.failure(e.message,e.stack))})}},workflowSelectScheme:function(e){var t=e.modalId,e=e.parameters.scheme;return t?{app:{modals:{windows:Se({},t,{data:{modified:{__wf_selectedscheme:e}}})}}}:{app:{form:{data:{modified:{__wf_selectedscheme:e}}}}}},save:function(e){var t=e.formName,r=e.modalId,n=e.state,o=e.data,e=e.schemeName;return ft.form.savedata({formName:t,modalId:r,state:n,data:o,schemeName:e})},delete:function(e){var t=e.formName,r=e.data,e=e.schemeName;return ft.common.deleteByIds(t,null,r.__id,void 0,e)},exit:function(e){var t=e.state,r=e.modalId,e=e.parameters;if(t.settings.mobile)return{router:{push:"/"}};if(r){var n=Ae({},t.app.modals.windows);if(null!=n[r]&&null!=n[r].onCloseFunc){var o=n[r].onCloseFunc({modalId:r,modal:n[r],state:t});if(0==o)return{};if("object"===ke(o))return o}o=Oe(t.app.modals.order);return o.pop(),n[r]=null,{app:{modals:{windows:n,order:o}}}}n="/",o=function(e){e=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null==e?null:decodeURI(e[1])||0}("backurl");return o?n=o:e&&e.target&&(n=e.target),{router:{push:n}}},confirm:function(e){e=e.parameters;function t(e,t,r){var n=window.DWKitLang;return(e&&n&&n.msg&&n.msg[e]?n.msg[e]:e)||(Z()&&Z().confirm[t]?Z().confirm[t]:r)}var r={title:t(e.confirmTitle,"title","Confirm"),text:t(e.confirmText,"text","Please confirm the action"),ok:t(e.confirmOk,"ok","Ok"),cancel:t(e.confirmCancel,"cancel","Cancel")};return function(e){return ye("confirm",{messages:r})}},apply:function(e){var t=e.state,r=e.modalId;if(!r)return{};var n=t.app.modals.windows[r],o=n.data;if(!o||!o.isDirty&&!o.isNew)return{};var a=null,i=null,e=null,r=!!n.parentId;e=r?(i=(c=t.app.modals.windows[n.parentId]).name,a=c.data,t.app.modals.models[i].model):(a=t.app.form.data,t.app.form.models.model);var l=o.modified,s=o.additionalValues,c=o.property,u=c;!u||(o=le.getModelConrol(e,c))&&o.propertyName&&""!=o.propertyName&&(u=o.propertyName);function p(e,t){t=Ve.mapRow(Ve.mapRow(t,d,s),f);var r=e.findIndex(function(e){return e.__id===t.__id});0<=r?(e[r]=W(e[r],t),e[r].__loaded=!0):(t.__loaded=!0,e.push(t))}var d=t.app.modals.models[n.name].mapping.toData,f=(r?t.app.modals.models[i]:t.app.form.models).mapping.toForm[u],V=null;if(!u)throw Error("apply action: propertyName is not defined");e=le.getModelConrol(e,c);if("gridview"===e["data-buildertype"]&&"server"===e.pagerType)throw Error("Can't apply to gridview with server paging! Use a custom CodeActions for changing data in DB.");c=Array.isArray(l),e=a.modified[u],a=Array.isArray(e);if(!c&&a)p(V=e,l);else if(c&&a)for(var V=e,h=0;l.length,h++;)p(V,l[h]);else{if(c&&!a)throw Error("apply action: source data are array but target data is not array, can not merge");c||a||(V=W(e,l))}return function(e){return ft.form.updateData(u,V,n.parentId)(e)}},redirect:function(e){e.state;e=e.parameters;if(void 0!==e&&void 0!==e.target)return e.target.includes("http://")||e.target.includes("https://")?void C.setCurrentLocation(e.target):{app:{modals:c.app.modals},router:{redirect:null,push:e.target}};console.error("For call 'redirect' action you need to set the 'target' parameter!")},refresh:function(e){var t=e.state,e=e.modalId;return e?{app:{modals:{windows:Se({},e,{keyIndex:t.app.modals.windows[e].keyIndex+1})}}}:{router:{refresh:"refresh"}}},reload:function(){return{router:{reload:"reload"}}},loadRecord:function(e){var t=e.parameters;return null!=t.urlFilter?function(e){return e(N.router.changeurlfilter(t.urlFilter)),ee.Promise.resolve()}:t.row&&t.row.__id?function(e){return e(N.router.changeurlfilter(t.row.__id)),ee.Promise.resolve()}:(null!=console&&console.log("This action uses parameters.row.__id or parameters.urlFilter. Fill one of them."),{})},validate:function(e){for(var t=e.data,r=(e.originalData,e.state),n=(e.component,e.controlRef,e.eventArgs,e.modalId),o=(e.callContext,!0),a={},i=n?_e.getControlsForValidate(r.app.modals.models[r.app.modals.windows[n].name].model):_e.getControlsForValidate(r.app.form.models.model),l=0;l<i.length;l++){var s=i[l].propertyName||i[l].key,c=_e.validate(i[l],t[s],t);c&&(a[s]=c,o=!1)}if(o)return X(n,{errors:null});r="Check errors on the form!";throw{level:1,message:r=void 0!==Z()?Z().msg.checkerrorsonform:r,formerrors:{modalId:n,errors:o?null:a}}},createElement:function(e){var t=e.data,r=(e.model,e.controlRef),n=(e.state,e.parameters),o=e.modelId;if(void 0===n)return{};if(!r)throw{level:1,message:"Fill targets for the createElement event!"};if(r.isServerMode&&r.isServerMode())throw{level:1,message:"The createElement event does not work in Server pagination!"};var a=r.props.propertyName&&""!==r.props.propertyName?r.props.propertyName:r.props.name,e=t[a];Array.isArray(e)||(e=t[a]=[]);var i=r.props.columns;if(Array.isArray(i)){var l,s={__id:"CLIENT_"+G()};for(l in n){for(var c=!1,u=0;u<i.length;u++)if(i[u].key.toLowerCase()===l.toLowerCase()){s[i[u].key]=n[l],c=!0;break}!1===c&&(s[l]=n[l])}e.push(s)}else{r=Ae({},n);r.__id||(r.__id="CLIENT_"+G()),e.push(r)}return X(o,{data:t})},deleteElement:function(e){var t=e.data,r=(e.model,e.controlRef),n=(e.state,e.parameters),o=e.modelId;if(void 0===n)return{};if(!r)throw{level:1,message:"Fill targets for the createElement event!"};e=r.props.propertyName&&""!==r.props.propertyName?r.props.propertyName:r.props.name,r=t[e],n=n.index;return Array.isArray(r)&&(r=t[e]).length>n&&r.splice(n,1),X(o,{data:t})},setFilter:function(e){var t=e.key,r=(e.data,e.originalData,e.state),n=(e.component,e.controlRef,e.eventArgs,e.parameters),o=e.sourceControlRef,a=e.sourceControlValue,i=e.modalId,e=t,t=i?r.app.modals.windows[i]&&r.app.modals.windows[i].filters&&r.app.modals.windows[i].filters.hasOwnProperty(e)?r.app.modals.windows[i].filters[e]:[]:null!==r.app.form.filters.main&&r.app.form.filters.main.hasOwnProperty(e)?r.app.form.filters.main[e]:[],r=t.find(function(e){return e.__controlName===o.props.name});return void 0!==r?r.nextValue=null!=a&&""!==a?a:null:null!=a&&""!==a&&((r={}).column=void 0===n.column?o.props.name:n.column.split(",").map(function(e){return e.trim()}).join(","),r.term=void 0===n.term?"like":n.term,r.nextValue=a,r.value=null,r.__controlName=o.props.name,t.push(r)),i?{app:{modals:{windows:Se({},i,{filters:Se({},e,t)})}}}:{app:{form:{filters:{main:Se({},e,t)}}}}},applyFilter:function(e){var t=e.key,r=(e.data,e.originalData,e.state),n=(e.component,e.controlRef,e.eventArgs,e.parameters,e.sourceControlRef,e.sourceControlValue,e.modalId),e=null,t=t;return n?r.app.modals.windows[n]&&r.app.modals.windows[n].filters&&r.app.modals.windows[n].filters.hasOwnProperty(t)&&(e=r.app.modals.windows[n].filters[t]):null!==r.app.form.filters.main&&r.app.form.filters.main.hasOwnProperty(t)&&(e=r.app.form.filters.main[t]),null===e?{}:((e=e.filter(function(e){return null!==e.nextValue})).forEach(function(e){return e.value=e.nextValue}),n?{app:{modals:{windows:Se({},n,{filters:Se({},t,e)})}}}:{app:{form:{filters:{main:Se({},t,e)}}}})},openModal:function(e){var t=e.modalId,r=e.controlRef,n=e.state,o=e.parameters,e=e.callContext;return ue.open(t,n,o.name,o.data,o.filter,!o.filter||o.isCopy,r?r.props.name:null,o.type||"form",o.viewType||"modal",o.sidebarSettings,o.onOpenFunc,o.onCloseFunc,e,o.closeOnOutsideClick)},copy:function(e){var t=e.state,r=e.modalId,e=e.data;if((r?t.app.modals.windows[r]:t.app.form).data.isNew)throw Error("Can't copy new unsaved object");e=e.__id;if(r)return{app:{modals:{windows:Se({},r,{data:{isNew:!0,filter:e}})}}};t=I.deconstructLocation(t.router.location);return{router:{push:"/".concat(t.type,"/").concat(t.name,"/").concat(e,"/copy")}}},workflowShowCommandForm:function(e){var t=e.state,r=e.parameters,n=e.callContext,o=e.data;if(t.settings.mobile)return{};if(r.command.form&&r.command.form.name){var a=null;return!o||(t=Object.keys(o).filter(function(e){return e.startsWith("_wp")})).length&&(a={},t.forEach(function(e){a[e.substring(3)]=o[e]})),new ee.Promise(function(e,t){le.openModalDispatch(r.command.form.name,null,{onCloseFunc:function(){n.commandFormResult||t(),(n.commandFormResult&&n.commandFormResult.cancel?t:e)()},callContext:n,closeOnOutsideClick:!0,data:a})})}return{}},workflowContinueExecution:function(e){var t=e.state,r=e.modalId,n=e.data,o=e.callContext,e=(r?t.app.modals.models[t.app.modals.windows[r].name]:t.app.form.models).model;return o.commandFormResult={commandParams:n,model:e},xe.exit({state:t,modalId:r})},workflowCancelExecution:function(e){var t=e.state,r=e.modalId;return e.callContext.commandFormResult={cancel:!0},xe.exit({state:t,modalId:r})},gridCreate:function(e){var t=e.state,r=e.controlRef,n=e.parameters,e=e.modalId;if(r.isEditFormModal()||r.isEditFormSidebar())return Ve.create({state:t,controlRef:r,parameters:n,modalId:e});r=r.props;return"flow"!==r.editType?"workflow"!==r.editType?{router:{push:"/form/"+r.editForm+"/"}}:{router:{push:"/workflow/"+r.editWorkflow+"/"}}:{router:{push:"/flow/"+r.editFlow+"/"}}},gridRefresh:function(e){return e.controlRef.refresh(),{}},gridCopy:function(e){var t=e.state,r=e.controlRef,n=e.parameters,e=e.modalId;if(r.isEditFormModal()||r.isEditFormSidebar())return Ve.copy({state:t,controlRef:r,parameters:n,modalId:e});e=r.props;if(e.editFormShowType&&"Default"!==e.editFormShowType)return{};r=Ve.getSelectedRow({parameters:n,controlRef:r}),r=r?r.__id:void 0;return r?"flow"!==e.editType?{router:{push:"/form/"+e.editForm+"/"+r+"/copy"}}:{router:{push:"/flow/"+e.editFlow+"/"+r+"/copy"}}:{}},gridDelete:function(e){var t=e.state,r=e.controlRef,n=e.formName,o=e.modalId,a=r.props.propertyName||r.props.name;if(r.isServerMode()){var i=r.getSeletedRowKeys();if(0!==i.length)return i=i.filter(function(e){return null!=e&&!e.toString().startsWith("CLIENT_")}),function(e){return ft.common.deleteByIds(n,a,i,function(){var e="Rows have been deleted!";ge(e=void 0!==Z()?Z().msg.rowsdeleted:e),r.refresh()})(e)};e="Please, select rows for deletion!";be(e=void 0!==Z()?Z().msg.selectrowsfordelete:e)}else{var l=r.getSeletedRowKeys();if(0!==l.length){var s=(o?t.modals.windows[o]:t.app.form).data.modified[a].filter(function(e){return!l.includes(e.__id)});return function(e){return ft.form.updateData(a,s,o)(e)}}t="Please, select rows for deletion!";be(t=void 0!==Z()?Z().msg.selectrowsfordelete:t)}return{}},gridEdit:function(e){var t=e.state,r=e.controlRef,n=e.parameters,e=e.modalId;if(r.isEditFormModal()||r.isEditFormSidebar())return Ve.edit({state:t,controlRef:r,parameters:n,modalId:e});e=r.props;if(e.editFormShowType&&"Default"!==e.editFormShowType)return{};r=Ve.getSelectedRow({parameters:n,controlRef:r}),r=r?r.__id:void 0;return r?"flow"!==e.editType?"workflow"!==e.editType?{router:{push:"/form/"+e.editForm+"/"+r+"/"}}:{router:{push:"/workflow/"+e.editWorkflow+"/"+r+"/"}}:{router:{push:"/flow/"+e.editFlow+"/"+r+"/"}}:{}},gridExport:function(e){var o=e.controlRef,a=e.parameters,i=e.modalId,l=e.formName;return function(e){var t=we.a.chain(o.props.columns).map(function(e){return e.key+":"+e.name}).join(",").value(),r=o.getSort(),n=o.getFilters();return ft.additional.exportToExcel({type:o.props["data-buildertype"],controlRef:o,modalId:i,formName:l,parameters:a,startIndex:0,cols:t,pagerType:o.props.pagerType,sort:r,filters:n})(e)}},changeModel:function(e){var t=e.controlRef,r=e.state,n=e.parameters,e=e.modalId,o=r.app.form.models.model;if(void 0===n)return{};function a(e,t,r){if(t.key!=e){if(null!=t.children&&0<t.children.length)for(var n in t.children)a(e,t.children[n],r)}else for(var o in r)t[o]=r[o]}var i,l=t.props.name;for(i in o)a(l,o[i],n);return X(e,{model:o})},setFields:function(e){var t,r,n=e.data,o=e.parameters,e=e.modalId;for(t in o)r=o[t],/^-?\d+(?:[.,]\d*?)?$/.test(r)&&(r=parseFloat(r),!isNaN(r))?n[t]=parseFloat(o[t]):n[t]=o[t];return X(e,{data:n})},print:function(e){var t=void 0;e.parameters&&e.parameters.title&&(t=e.parameters.title),e.component.print||console.error("Print is unsupported for this component!",e),e.component.print(t)}},t=r(1);function De(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Fe(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?De(Object(o),!0).forEach(function(e){var t,r;t=n,e=o[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):De(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}i=Object.getPrototypeOf(new XMLHttpRequest);i!==XMLHttpRequest.prototype&&(XMLHttpRequest.prototype=i);var Te=XMLHttpRequest.prototype.send,Ne=XMLHttpRequest.prototype.setRequestHeader,Ie=null,Le=window.fetch,Ue=[],Be=null,Me=!1;var ze={addRequestCallback:function(e){Ue.push(e)},removeRequestCallback:function(e){!function(e,t){var r=e.indexOf(t);if(!(-1<r))throw new Error("Could not remove "+t+" from array");e.splice(r,1)}(Ue,e)},isWired:function(){return Me},wire:function(){if(Me)throw new Error("Ajax interceptor already wired");XMLHttpRequest.prototype.send=function(){!function(e,t){for(var r=0;r<e.length;r++)e[r](t)}(Ue,this),this.authToken&&Ne.apply(this,["Authorization",this.authToken]),Te.apply(this,arguments)},XMLHttpRequest.prototype.setRequestHeader=function(e,t){"Authorization"===e?(this.authToken=t,Ie=this.authToken):Ne.apply(this,arguments)},Me=!0},unwire:function(){if(!Me)throw new Error("Ajax interceptor not currently wired");XMLHttpRequest.prototype.send=Te,XMLHttpRequest.prototype.setRequestHeader=Ne,Me=!1},fetch:function(e,t){var r=t||{},t=r.headers||new Headers;return Ie&&t.append("Authorization",Ie),r.headers=t,Le(e,r)},configureHeaders:function(e){var t=null,t=(t=window.globalFetchOptions?window.globalFetchOptions():t)||Fe({},L.getState().settings.fetchOptions),r=e?"Bearer "+e:null;t.headers=Fe(Fe({},t.headers),{},{Authorization:r}),window.globalFetchOptions||L.dispatch(N.settings.set("fetchOptions",t)),Be?ze.removeRequestCallback(Be):ze.wire(),Be=function(e){e.setRequestHeader("Authorization",r)},ze.addRequestCallback(Be)}},Ke=ze;function qe(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function We(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?qe(Object(o),!0).forEach(function(e){var t,r;t=n,e=o[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):qe(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function Ge(e){e=We({},e);return e.fetchFunc=Ke.fetch,ye("dwkit-form",{props:e})}function He(e){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qe(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Je(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Qe(Object(r),!0).forEach(function(e){tt(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Qe(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Ye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ze(e,t){return(Ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xe(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=et(r);return e=n?(e=et(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==He(e)&&"function"!=typeof e?$e(t):e}}function $e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function et(e){return(et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ze(e,t)}(o,re["Component"]);var e,t,r,n=Xe(o);function o(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),tt($e(a=n.call(this,e)),"getAdditionalDataForControl",function(e,t,r){var n=a.props,o=a.state.forCopy||!1;return a.props.additionalFetch(function(){return n.name},n.id,o,e,t,r,a.props.schemeName)}),a.state={},a}return e=o,r=[{key:"getDerivedStateFromProps",value:function(e,t){var r={},n=void 0!==e.filter?e.filter:null,o=null!==t?t.filter:null,a=null,i=e.preventLoad;return!n||o&&z(o,n)?e.preventLoad||null!==n||void 0!==o?!n||!e.isNew||t&&t.isNew||(a={filter:n,forCopy:!0}):i||(a={forCopy:!1}):i||(a={filter:n,forCopy:n&&e.isNew}),null!==(r.childDataRequest=a)&&(r.forCopy=a.forCopy),r.filter=n,r.isNew=e.isNew,r}}],(t=[{key:"componentDidMount",value:function(){this.requestModelAndData()}},{key:"componentDidUpdate",value:function(){this.requestModelAndData()}},{key:"requestModelAndData",value:function(){var e;this.state.childDataRequest&&(e=this.state.childDataRequest,"flow"===this.props.type&&0<this.props.keyIndex?this.props.fetchFlow(this.props.flowName,e.filter,this.props.id,e.forCopy):"workflow"===this.props.type&&0<this.props.keyIndex?this.props.fetchWorkflow(this.props.schemeName,e.filter,this.props.id,e.forCopy):"flow"===this.props.type||this.props.model?this.props.fetchData(null,e.filter,this.props.name,this.props.id,e.forCopy,this.props.schemeName):this.props.fetchForm(this.props.name,e.filter,this.props.id,e.forCopy),this.setState({childDataRequest:null}))}},{key:"render",value:function(){var a=this,i=this.props,e=L.getState().settings,t=e.dataupload,r=e.datadownload;e.backendUrl&&(t=e.backendUrl+t,r=e.backendUrl+r);t={key:"chidForm_"+i.id,formName:i.name,data:i.data,extendedData:{filters:i.controlFilters,schemes:i.schemes},model:this.props.model,errors:i.errors,dataChanged:function(e,t){var r=t.key,n=t.propertyName,o=t.value,t=t.additionalValues;a.props.dataChanged(n||r,o,t,i.id)},eventFunc:function(e){a.props.executeActions(Je(Je({},e),{},{schemeName:a.props.schemeName,modalId:i.id,callContext:i.callContext}))},getAdditionalDataForControl:this.getAdditionalDataForControl,hideControls:i.hideControls,readOnlyControls:i.readOnlyControls,readOnly:i.readOnly,uploadUrl:t,downloadUrl:r};if(e.userForms){r=t.formName?t.formName.toLowerCase():void 0;if(r&&e.userForms[r]){r=e.userForms[r];return ne.a.createElement(r,t)}}return ne.a.createElement(Ge,t)}}])&&Ye(e.prototype,t),r&&Ye(e,r),o}(),rt=Object(t.connect)(null,function(a){return Je(Je({},bt(a)),{},{fetchFlow:function(e,t,r,n){a(ft.form.fetchflow(e,t,r,n)).then(function(){var e=L.getState();a(ft.form.fetchdata(null,t,e.app.modals.windows[r].name,r,n))})},fetchWorkflow:function(t,r,n,o){a(ft.form.fetchworkflow(t,r,n,o)).then(function(){var e=L.getState();a(ft.form.fetchdata(null,r,e.app.modals.windows[n].name,n,o,t))})},fetchForm:function(e,t,r,n){a(ft.form.fetchform(e,r)).then(function(){a(ft.form.fetchdata(null,t,e,r,n))})}})})(i);function nt(e){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ot(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function at(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ot(Object(r),!0).forEach(function(e){it(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ot(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function it(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lt(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,lt)}var st=r(33),ct={credentials:"same-origin"},ut={},pt={configuredFetch:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=L.getState(),n=window.globalFetchOptions?window.globalFetchOptions():r.settings.fetchOptions||{},o=at(at(at({},ct),n),t),n="",t=L.getState().settings;return t.backendUrl&&!e.startsWith("http")&&(n=t.backendUrl),n+=e,a()(n,o,window.globalFetchOptions).then(function(e){if(r.settings.mobile&&401==e.status)throw L.login(),new lt;return e})},userinfo:{fetch:function(r){return function(t){D.get(L).preFetchUser().then(function(){return t(N.app.userinfo.fetch.begin()),pt.configuredFetch(L.getState().settings.accountget).then(function(e){if(200==e.status)return e.json();e="Error status:"+e.status+".";throw new Error(e)}).then(function(e){e.success?(t(N.app.userinfo.fetch.success(e.item)),r&&r(e.item)):t(N.app.userinfo.fetch.failure(e.message,e.details))}).catch(lt,function(){}).catch(function(e){t(N.app.userinfo.fetch.failure(e,"userinfo.fetch"))})})}}},additional:{fetch:function(e){var b=e.type,g=e.controlRef,w=e.formName,O=e.schemeName,C=e.startIndex,k=e.pageSize,E=e.filters,A=e.sort,S=e.callback,P=e.modalId,j=e.forCopy,R=e.row,_=e.loadParameters,x=e.baseLocation,D=e.fetchUrl,F=e.fetchResponseType,T=e.fetchOptions;return function(t){if("dictionary"===b){for(var e=g.props.dataModel,r=g.props.columns.split(",").map(function(e){return e.trim()}),n=[],o=[],a=0;a<r.length;a++){var i=r[a],l=i.split(/\s+/);1===l.length?o.push(i):2===l.length&&(o.push(l[0]),n.push({column:l[0],order:l[1]}))}e={columns:JSON.stringify(o),sort:JSON.stringify(n),name:e};return null!=E&&(e.filter="string"==typeof E?E:JSON.stringify(E)),null!=C&&null!=k&&(e.paging=JSON.stringify({startIndex:C,pageSize:k})),dt.dictionaryFetch(t,e,C,k,S,function(e){return{items:e.item.map(function(e){var t=g.props.textFunc?g.props.textFunc(e.values):e.value;return{key:e.key,text:t,value:e.key,values:e.values}}),count:e.count}})}if("treepicker"===b){for(var s=g.props.dataModel,e=g.props.parentIdField,c=g.props.columns.split(",").map(function(e){return e.trim()}),u=[],p=[],d=0;d<c.length;d++){var f=c[d],V=f.split(/\s+/);1===V.length?p.push(f):2===V.length&&(p.push(V[0]),u.push({column:V[0],order:V[1]}))}s={columns:JSON.stringify(p),sort:JSON.stringify(u),name:s,parent:e};return E&&(s.filter=JSON.stringify(E)),void 0!==C&&k&&(e=g.state.parentIdToFetch,s.paging=JSON.stringify({startIndex:C,pageSize:k,parentId:e})),dt.dictionaryFetch(t,s,C,k,S,function(e){return{items:e.item.map(function(e){return at(at({},e),{},{name:g.props.textFunc?g.props.textFunc(e.values):e.name})}),count:e.count}})}if("gridview"===b){var h=dt.createUrlData({type:b,controlRef:g,formName:w,startIndex:C,pageSize:k,filters:E,sort:A,callback:S,modalId:P,forCopy:j,baseLocation:x}),s=L.getState().settings;return s.mobile&&(h.mobile=s.mobile),pt.configuredFetch(s.dataget+"?"+L.encodeQueryData(h)).then(function(e){return e.json()}).then(function(e){e.success?S({sIndex:C,pSize:k,rowsCount:e.item["__"+h.propertyName+"_totalcount"],items:e.item[h.propertyName]}):t(N.app.form.data.fetch.failure(e.message,e.details))}).catch(function(e){t(N.app.form.data.fetch.failure(e.message,e.stack))})}if("repeater"===b){var m=dt.createUrlData({type:b,controlRef:g,formName:w,startIndex:C,pageSize:k,filters:E,sort:A,callback:S,modalId:P,forCopy:j,baseLocation:x}),y=L.getState().settings;return y.mobile&&(m.mobile=y.mobile),pt.configuredFetch(y.dataget+"?"+L.encodeQueryData(m)).then(function(e){return e.json()}).then(function(e){e.success?S({sIndex:C,pSize:k,rowsCount:e.item["__"+m.propertyName+"_totalcount"],items:e.item[m.propertyName]}):t(N.app.form.data.fetch.failure(e.message,e.details))}).catch(function(e){t(N.app.form.data.fetch.failure(e.message,e.stack))})}if("workflowbar"!==b)return"fetch"===b?"blob"==F?pt.configuredFetch(D,T).then(function(e){return e.blob()}).then(function(e){S(e)}).catch(function(e){t(N.app.form.data.fetch.failure(e.message,e.stack))}):"json"==F?pt.configuredFetch(D,T).then(function(e){return e.json()}).then(function(e){e.success?S(e):t(N.app.form.data.fetch.failure(e.message,e.details))}).catch(function(e){t(N.app.form.data.fetch.failure(e.message,e.stack))}):pt.configuredFetch(D,T).then(function(e){return S(e)}).catch(function(e){t(N.app.form.data.fetch.failure(e.message,e.stack))}):(console.log("TODO: implement getAdditionalDataForControl method for "+b+" control"),Promise.resolve());y=null!=R&&null!=R.__id?R.__id:P?L.getState().app.modals.windows[P].data.filter:(v=L.getState().router.location,I.formFilterFromLocation(v||x));var v={name:w,forCopy:j,loadParameters:_};return O&&(v.schemeName=O),null!==y&&(v.urlFilter=y),dt.buildRequest(t,L.getState().settings.workflowget,v,function(e){return _&&t(N.app.form.data.setprocessparameters(P,e.item.processParameters)),e.item}).then(function(e){e&&S(e)})}},exportToExcel:function(e){var n=e.type,o=e.controlRef,a=e.formName,i=e.startIndex,l=e.filters,s=e.sort,c=e.callback,u=e.modalId,p=e.forCopy,d=e.cols,f=e.pagerType,V=e.parameters;return function(t){var r=dt.createUrlData({type:n,controlRef:o,formName:a,startIndex:i,pageSize:null,filters:l,sort:s,callback:c,modalId:u,forCopy:p,cols:d,pagerType:f,filename:V.filename}),e=L.getState().settings;return e.mobile&&(r.mobile=e.mobile),pt.configuredFetch(e.dataexport+"?"+L.encodeQueryData(r)).then(function(e){return e.blob()}).then(function(e){return C.openExcel(r,e)}).catch(function(e){t(N.app.failure(e.message,e.stack))})}}},form:{clear:function(){return function(e){e(N.app.form.clear())}},fetchform:function(n,o){return function(r){r(N.app.form.model.fetch.begin());var e=L.getState().settings,t={wrapresult:!0,enableSecurity:!0,mobile:e.mobile};return pt.configuredFetch(e.uiform+"/"+n+"?"+L.encodeQueryData(t)).then(function(e){return e.json()}).then(function(e){var t;e.success?(t=e.item,r(N.app.form.model.fetch.success(JSON.parse(t.source),t.mapping,n,o,{schemes:t.schemes,securityGroup:t.securityGroup,permissions:t.permissions,mapping:t.mapping,name:t.name}))):r(N.app.form.model.fetch.failure(e.message,e.details))}).catch(function(e){r(N.app.form.model.fetch.failure(e.message,e.stack))})}},fetchflow:function(r,o,a,i){return function(n){var e=L.getState().settings,t={urlFilter:o};return e.mobile&&(t.mobile=e.mobile),i&&(t.forCopy=i),n(N.app.form.model.fetch.begin()),pt.configuredFetch(e.uiflow+"/"+r+"?"+L.encodeQueryData(t)).then(function(e){return e.json()}).then(function(e){var t,r;e.success?(t=e.item,r=null,a&&("string"==typeof a||a instanceof String?n(N.app.form.model.change(t.name,r=a)):(r=a.id,a.name=t.name)),n(N.app.form.model.fetch.success(JSON.parse(t.source),t.mapping,t.name,r,{schemes:t.schemes,securityGroup:t.securityGroup,permissions:t.permissions,mapping:t.mapping,name:t.name}))):n(N.app.form.model.fetch.failure(e.message,e.details))}).catch(function(e){n(N.app.form.model.fetch.failure(e.message,e.stack))})}},fetchworkflow:function(o,r,a,i){return function(n){var e=L.getState().settings,t={urlFilter:r};return e.mobile&&(t.mobile=e.mobile),i&&(t.forCopy=i),n(N.app.form.model.fetch.begin()),pt.configuredFetch(e.uiworkflow+"/"+o+"?"+L.encodeQueryData(t)).then(function(e){return e.json()}).then(function(e){var t,r;e.success?(t=e.item,r=null,a&&("string"==typeof a||a instanceof String?n(N.app.form.model.change(t.name,r=a)):(r=a.id,a.name=t.name)),n(N.app.form.model.fetch.success(JSON.parse(t.source),t.mapping,t.name,r,{schemes:[o],securityGroup:t.securityGroup,permissions:t.permissions,mapping:t.mapping,name:t.name}))):n(N.app.form.model.fetch.failure(e.message,e.details))}).catch(function(e){n(N.app.form.model.fetch.failure(e.message,e.stack))})}},fetchdata:function(r,o,a,i,l,s){return function(n){n(N.app.form.data.fetch.begin());var e=L.getState().settings,t={name:a};return s&&(t.schemeName=s),r&&(t.filter=JSON.stringify(r)),o&&(t.urlFilter=o),l&&(t.forCopy=!0),e.mobile&&(t.mobile=e.mobile),pt.configuredFetch(e.dataget+"?"+L.encodeQueryData(t)).then(function(e){return e.json()}).then(function(e){var t,r;e.success?(t=l||"object"===nt(e.item)&&!Array.isArray(e.item)&&null===e.item.__id,r=JSON.parse(JSON.stringify(e.item),Q),pt.form.executeActions({formName:a,schemeName:s,eventName:"dataReceived",actions:["dataReceived"],modalId:i,parameters:{data:r}})(n),n(N.app.form.data.fetch.success(r,i,t))):n(N.app.form.data.fetch.failure(e.message,e.details))}).catch(function(e){n(N.app.form.data.fetch.failure(e.message,e.stack))})}},savedata:function(e){var n=e.formName,f=e.modalId,V=e.state,o=e.data,a=e.schemeName;return function(u){var p=(f?V.app.modals.windows[f]:V.app.form).data;u(N.app.form.data.save.begin());var e={};n&&(e.name=n),a&&(e.schemeName=a);var t=new FormData,d=p.isNew;t.append("data",JSON.stringify(o));var r=L.getState().settings;return r.mobile&&(e.mobile=r.mobile),pt.configuredFetch(r.datachange+"?"+L.encodeQueryData(e),{method:"post",body:t}).then(function(e){return e.json()}).then(function(e){if(e.success){var t="The changes have been applied!";Z()&&(t=Z().msg.savedatasuccess),ge(t=void 0!==e.message&&null!==e.message?e.message:t);var r=e.item,n=r?r.entity:null,o=r?r.entityId:null,a=null!=n,i=null!=o;u(a?N.app.form.data.save.success(n,f):N.app.form.data.save.success(null,f)),dt.changeStateWithResult(e),f&&(r=((t=(s=V.app.modals.windows[f]).parentId)?V.app.modals.models[V.app.modals.windows[t].name]:V.app.form.models).model,(r=le.getModelConrol(r,p.property))&&"gridview"===r["data-buildertype"]&&"server"===r.pagerType||(l=null,(r=!!s.parentId)&&(l=V.app.modals.windows[t].name),c=p.property,t=V.app.modals.models[s.name].mapping.toData,l=(r?V.app.modals.models[l]:V.app.form.models).mapping.toForm,c&&(l=l[c]),l=Ve.mapRow(Ve.mapRow(n,t,p.additionalValues),l),u(N.app.form.data.updatefromchild(c,l,s.parentId))));var l,s,c={};return d&&(a||i)&&(l={},f?l.app={modals:{windows:it({},f,{data:{filter:i?o:a?n.__id:void 0}})}}:(s=C.getWindowLocation(),l.router={push:i?I.changeFilter(s,o):a?I.changeFilter(s,n.__id):void 0}),c.stateDelta=l),a&&(c.data=n),Promise.resolve(c)}dt.changeStateWithResult(e);n=null!==e.message?e.message:void 0,c=null!==e.details?e.details:void 0;throw null!==e.validationResult&&void 0!==e.validationResult?{level:1,message:n,details:c,formerrors:{modalId:f,errors:e.validationResult}}:{level:1,message:n,details:c}}).catch(function(e){throw e.stack&&!e.details&&(e.details=e.stack),e})}},updateData:function(t,r,n){return function(e){return e(N.app.form.data.update(t,r,n)),Promise.resolve()}},executeActions:function(e){return function(r){Pe(e,r).catch(function(e){var t;"object"===nt(e)?(t=e.details,null!=e.stack&&(t=null==t?e.stack:t+"\nStack: "+e.stack),null!=console&&null!=t&&console.log(t),r(N.app.form.data.save.failure(e.message,e.details,e.level,e.formerrors))):r(N.app.form.data.save.failure(e,void 0))})}}},common:{deleteByIds:function(o,a,i,l,s){return function(t){t(N.app.form.data.delete.begin());var e={name:o};a&&(e.propertyName=a),s&&(e.schemeName=s);var r=new FormData;Array.isArray(i)?r.append("data",JSON.stringify(i)):r.append("data",JSON.stringify([i]));var n=L.getState().settings;return n.mobile&&(e.mobile=n.mobile),pt.configuredFetch(n.datadelete+"?"+L.encodeQueryData(e),{method:"post",body:r}).then(function(e){return e.json()}).then(function(e){e.success?(dt.changeStateWithResult(e),t(N.app.form.data.delete.success(o)),l&&l(e)):(dt.changeStateWithResult(e),t(N.app.form.data.delete.failure(null!==e.message?e.message:void 0,null!==e.details?e.details:void 0,void 0,null!==e.validationResult&&void 0!==e.validationResult?{main:e.validationResult}:void 0)))}).catch(function(e){t(N.app.form.data.delete.failure(e.message,e.details))})}},setCookie:function(e,t,r){dt.setCookie(e,t,r)},getCookie:function(e){return dt.getCookie(e)},getParameterFormUrlOrCookie:function(){var e=C.getWindowLocation();return I.getParamValue(e,"impersonatedUserId")||dt.getCookie("impersonatedUserId")}}},dt={createUrlDataForCollections:function(e){e.type;var t=e.controlRef,r=e.formName,n=e.startIndex,o=e.pageSize,a=e.filters,i=e.sort,l=(e.callback,e.modalId),s=e.forCopy,c=e.cols,u=e.pagerType,p=e.filename,e=e.baseLocation,o=o?{startIndex:n,pageSize:o}:void 0,a=a,d=[];i&&i.split(",").forEach(function(e){e=e.trim().split(" ");1<e.length?d.push({column:e[0].trim(),Order:e[1].trim()}):d.push({column:e[0].trim(),Order:"ASC"})});i={};l?i.urlFilter=L.getState().app.modals.windows[l].data.filter:(f=L.getState().router.location,i=I.formDataFromLocation(f=f||e));var f=t.props.name,t=t.props.propertyName,r={control:f,propertyName:t||f,name:r&&r.toLowerCase()};return s&&(r.forCopy=s),o&&(r.paging=JSON.stringify(o)),a&&(r.filter=JSON.stringify(a)),d&&(r.sort=JSON.stringify(d)),c&&(r.cols=c),i.options&&(r.options=i.options),i.urlFilter&&(r.urlFilter=i.urlFilter),u&&(r.pagerType=u),p&&(r.fileName=p),r},createUrlData:function(e){switch(e.type){case"gridview":case"repeater":return this.createUrlDataForCollections(e);default:throw new Error("unknown type")}},changeStateWithResult:function(e){void 0!==e.result&&null!==e.result&&L.dispatch(N.updatestate(e.result))},getCookie:function(e){var t=C.getCookie();if(t){e=t.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0}},setCookie:function(e,t,r){var n,o=(r=r||{}).expires;"number"==typeof o&&o&&((n=new Date).setTime(n.getTime()+1e3*o),o=r.expires=n),o&&o.toUTCString&&(r.expires=o.toUTCString());var a,i=e+"="+(t=encodeURIComponent(t));for(a in r){i+="; "+a;var l=r[a];!0!==l&&(i+="="+l)}C.setCookie("".concat(i,"; path=/"))},dictionaryFetch:function(e,t,r,n,o,a){return this.buildRequest(e,L.getState().settings.datadictionary,t,a).then(function(e){e&&o({sIndex:r,pSize:n,rowsCount:e.count,items:e.items})})},buildRequest:function(t,e,r,n){var o=st(r),a=null;return ut[o]?a=ut[o]:(a=pt.configuredFetch(e+"?"+L.encodeQueryData(r)).then(function(e){return e.json()}).then(function(e){return e.success?n(e):void t(N.app.form.data.fetch.failure(e.message,e.details))}).catch(function(e){t(N.app.form.data.fetch.failure(e.message,e.stack))}).finally(function(){ut[o]=void 0}),ut[o]=a),a}},ft=pt;function Vt(e){return function(e){if(Array.isArray(e))return ht(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ht(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ht(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function mt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function yt(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?mt(Object(o),!0).forEach(function(e){var t,r;t=n,e=o[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):mt(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function vt(e){var t,r=e.app.form.filters.main,n={};if(r)for(var o in r)!r.hasOwnProperty(o)||0<(t=r[o].filter(function(e){return null!==e.value}).map(function(e){return{column:e.column,term:e.term,value:e.value}})).length&&(n[o]=t);var a=e.app.form.data.modified,i=(l=I.deconstructLocation(e.router.location)).urlFilter,l=l.command;return{filter:i,model:e.app.form.models.model,data:null==a?void 0:(Array.isArray(a)?Vt:J)(a),mainControlFilters:n,errors:e.app.form.errors||void 0,hideControls:e.app.form.models.hideControls,readOnlyControls:e.app.form.models.readOnlyControls,readOnly:e.app.form.models.readOnly,dimmed:Object.values(e.app.modals.windows).some(function(e){return"sidebar"===e.type}),selectedScheme:e.app.form.selectedScheme,schemes:null===e.app.form.formParams||void 0===e.app.form.formParams?void 0:e.app.form.formParams.schemes,command:l}}var bt=function(l){return{fetchData:function(e,t,r,n,o,a){l(ft.form.fetchdata(e,t,r,n,o,a))},dataChanged:function(e,t,r,n){l(N.app.form.data.update(e,t,n,r))},executeActions:function(e){l(ft.form.executeActions(e))},additionalFetch:function(e,t,r,n,o,a,i){i=yt(yt({},o),{},{formName:e(),controlRef:n,callback:a,modalId:t,forCopy:r,schemeName:i});!i.type&&n&&n.props&&n.props["data-buildertype"]&&(i.type=n.props["data-buildertype"]),l(ft.additional.fetch(i))}}};function gt(e){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wt(e,t){return(wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ot(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=kt(r);return e=n?(e=kt(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==gt(e)&&"function"!=typeof e?Ct(t):e}}function Ct(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kt(e){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Et(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var At=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wt(e,t)}(o,re["Component"]);var n=Ot(o);function o(){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Et(Ct(a=n.call.apply(n,[this].concat(t))),"getAdditionalDataForControl",function(e,t,r){return t&&!t.baseLocation&&(t.baseLocation=a.props.baseLocation),a.props.additionalFetch(function(){return a.props.formName},null,"copy"===a.props.command,e,t,r,a.props.schemeName)}),Et(Ct(a),"drawMainForm",function(){if(a.props.preventDrawMainform)return null;var e=L.getState().settings,t=e.dataupload,r=e.datadownload;e.backendUrl&&(t=e.backendUrl+t,r=e.backendUrl+r);t={key:a.props.getMainFormKey(),formName:a.props.formName,objectId:a.props.data?a.props.data.__id:a.props.filter,data:a.props.data,extendedData:{filters:a.props.mainControlFilters,schemes:a.props.schemes},model:a.props.model,errors:a.props.errors,dataChanged:function(e,t){var r=t.key,n=t.propertyName,o=t.value,t=t.additionalValues;a.props.dataChanged(n||r,o,t)},eventFunc:function(e){a.props.schemeName&&(e.schemeName=a.props.schemeName),a.props.executeActions(e)},getAdditionalDataForControl:a.getAdditionalDataForControl,hideControls:a.props.hideControls,readOnlyControls:a.props.readOnlyControls,readOnly:a.props.readOnly,uploadUrl:t,downloadUrl:r};if(e.userForms){r=t.formName?t.formName.toLowerCase():void 0;if(r&&e.userForms[r]){r=e.userForms[r];return ne.a.createElement(r,t)}}return ne.a.createElement(Ge,t)}),a}return o}();function St(e){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function jt(e,t){return(jt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Rt(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=xt(r);return e=n?(e=xt(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==St(e)&&"function"!=typeof e?_t(t):e}}function _t(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xt(e){return(xt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Dt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ft=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jt(e,t)}(a,re["Component"]);var e,t,r,o=Rt(a);function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Dt(_t(e=o.call.apply(o,[this].concat(r))),"abort",function(){e.reject()}),Dt(_t(e),"confirm",function(){e.resolve()}),e}return e=a,(t=[{key:"componentDidMount",value:function(){var r=this;this.promise=new Promise(function(e,t){r.resolve=e,r.reject=t})}}])&&Pt(e.prototype,t),r&&Pt(e,r),a}();function Tt(e){return(Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function It(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Nt(Object(o),!0).forEach(function(e){var t,r;t=n,e=o[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Nt(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function Lt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ut(e,t){return(Ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bt(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Mt(r);return e=n?(e=Mt(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Tt(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function Mt(e){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var i=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ut(e,t)}(o,re["Component"]);var e,t,r,n=Bt(o);function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=n.call(this,e)).state={},e}return e=o,r=[{key:"getDerivedStateFromProps",value:function(e,t){var r={},n=null===e.formName||void 0===e.formName?null:e.formName.toLowerCase(),o=null===t||void 0===t.formName?null:t.formName,a=void 0!==e.filter?e.filter:null,i=null!==t?t.filter:null,l=t?t.command:null;return r.formName=n,r.command=e.command,n!==o?null!==n&&(r.needFetchForm=!0,r.needFetchData=!0):a===i&&l===r.command||(r.filter=e.filter,r.needFetchData=!0),r.refreshKey=e.refreshKey,e.refreshKey!=t.refreshKey&&(r.needFetchForm=!0,r.needFetchData=!0),r}}],(t=[{key:"componentDidMount",value:function(){this.RequestModelAndData()}},{key:"componentDidUpdate",value:function(){this.RequestModelAndData()}},{key:"getMainFormKey",value:function(){return"mainform_"+this.state.formName+"_"+this.props.refreshKey}},{key:"RequestModelAndData",value:function(){this.state.needFetchForm?(this.setState({needFetchForm:!1}),this.props.fetchForm(this.state.formName)):this.state.needFetchData&&null!==this.state.formName&&(this.setState({needFetchData:!1}),this.props.fetchData(null,this.state.filter,this.state.formName,null,"copy"===this.props.command))}},{key:"render",value:function(){var e=It({},this.props);return e.getMainFormKey=this.getMainFormKey.bind(this),e.preventDrawMainform=!this.state.formName||this.state.needFetchForm,ye("content",{key:this.getMainFormKey()+"_formcontent",props:e})}}])&&Lt(e.prototype,t),r&&Lt(e,r),o}(),zt=Object(t.connect)(function(e,t){return It(It({},vt(e)),{},{formName:t.formName||I.nameFromLocation(e.router.location,e.settings.form),refreshKey:e.router.refreshKey})},function(t){return It(It({},bt(t)),{},{fetchForm:function(e){t(ft.form.clear()),t(ft.form.fetchform(e))}})})(i);function Kt(e){return(Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Wt(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?qt(Object(o),!0).forEach(function(e){var t,r;t=n,e=o[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):qt(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function Gt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ht(e,t){return(Ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qt(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Jt(r);return e=n?(e=Jt(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Kt(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function Jt(e){return(Jt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var i=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ht(e,t)}(o,re["Component"]);var e,t,r,n=Qt(o);function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=n.call(this,e)).state={},e}return e=o,r=[{key:"getDerivedStateFromProps",value:function(e,t){var r={},n=null===e.flowName||void 0===e.flowName?null:e.flowName.toLowerCase(),o=null===t||void 0===t.flowName?null:t.flowName,a=void 0!==e.filter?e.filter:null,i=null!==t?t.filter:null,l=t?t.command:null;return r.flowName=n,r.command=e.command,n!==o?null!==n&&(r.needFetchFlow=!0,r.needFetchData=!0,r.filter=e.filter):a===i&&l===r.command||(r.filter=e.filter,r.needFetchData=!0),r.refreshKey=e.refreshKey,e.refreshKey!=t.refreshKey&&(r.needFetchForm=!0,r.needFetchData=!0),r}}],(t=[{key:"componentDidMount",value:function(){this.RequestModelAndData()}},{key:"componentDidUpdate",value:function(e,t){this.RequestModelAndData()}},{key:"getMainFormKey",value:function(){return"mainform_"+this.state.flowName+"_"+this.props.refreshKey}},{key:"RequestModelAndData",value:function(){this.state.needFetchFlow?(this.setState({needFetchFlow:!1}),this.props.fetchFlow(this.state.flowName,this.state.filter,"copy"===this.props.command)):this.state.needFetchData&&null!==this.props.formName&&(this.setState({needFetchData:!1}),this.props.fetchData(null,this.state.filter,this.props.formName,null,"copy"===this.props.command))}},{key:"render",value:function(){var e=Wt({},this.props);return e.getMainFormKey=this.getMainFormKey.bind(this),e.preventDrawMainform=!this.state.flowName||this.state.needFetchFlow,ye("content",{key:this.getMainFormKey()+"_flowcontent",props:e})}}])&&Gt(e.prototype,t),r&&Gt(e,r),o}(),Yt=Object(t.connect)(function(e,t){return Wt(Wt({},vt(e)),{},{flowName:t.flowName||I.nameFromLocation(e.router.location,L.getState().settings.flow),formName:e.app.form.formParams.name,refreshKey:e.router.refreshKey})},function(n){return Wt(Wt({},bt(n)),{},{fetchFlow:function(e,t,r){n(ft.form.clear()),n(ft.form.fetchflow(e,t,null,r))}})})(i);function Zt(e){return(Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xt(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function $t(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Xt(Object(o),!0).forEach(function(e){var t,r;t=n,e=o[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Xt(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function er(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tr(e,t){return(tr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rr(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=nr(r);return e=n?(e=nr(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Zt(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function nr(e){return(nr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var i=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tr(e,t)}(o,re["Component"]);var e,t,r,n=rr(o);function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=n.call(this,e)).state={},e}return e=o,r=[{key:"getDerivedStateFromProps",value:function(e,t){var r={},n=null===e.schemeName||void 0===e.schemeName?null:e.schemeName.toLowerCase(),o=null===t||void 0===t.schemeName?null:t.schemeName,a=void 0!==e.filter?e.filter:null,i=null!==t?t.filter:null,l=t?t.command:null;return r.schemeName=n,r.command=e.command,n!==o?null!==n&&(r.needFetchWorkflow=!0,r.needFetchData=!0,r.filter=e.filter):a===i&&l===r.command||(r.filter=e.filter,r.needFetchData=!0),r.refreshKey=e.refreshKey,e.refreshKey!=t.refreshKey&&(r.needFetchForm=!0,r.needFetchData=!0),r}}],(t=[{key:"componentDidMount",value:function(){this.RequestModelAndData()}},{key:"componentDidUpdate",value:function(e,t){this.RequestModelAndData()}},{key:"getMainFormKey",value:function(){return"mainform_"+this.state.schemeName+"_"+this.props.refreshKey}},{key:"RequestModelAndData",value:function(){this.state.needFetchWorkflow?(this.setState({needFetchWorkflow:!1}),this.props.fetchWorkflow(this.state.schemeName,this.state.filter,"copy"===this.props.command)):this.state.needFetchData&&null!==this.props.formName&&(this.setState({needFetchData:!1}),this.props.fetchData(null,this.state.filter,this.props.formName,null,"copy"===this.props.command,this.props.schemeName))}},{key:"render",value:function(){var e=$t({},this.props);return e.getMainFormKey=this.getMainFormKey.bind(this),e.preventDrawMainform=!this.state.schemeName||this.state.needFetchWorkflow,ye("content",{key:this.getMainFormKey()+"_workflowcontent",props:e})}}])&&er(e.prototype,t),r&&er(e,r),o}(),or=Object(t.connect)(function(e,t){return $t($t({},vt(e)),{},{schemeName:t.schemeName||I.nameFromLocation(e.router.location,e.settings.workflow),formName:e.app.form.formParams.name,refreshKey:e.router.refreshKey})},function(n){return $t($t({},bt(n)),{},{fetchWorkflow:function(e,t,r){n(ft.form.clear()),n(ft.form.fetchworkflow(e,t,null,r))}})})(i);function ar(e){return(ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ir(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function lr(e,t){return(lr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sr(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=cr(r);return e=n?(e=cr(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==ar(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function cr(e){return(cr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var i=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lr(e,t)}(o,re["Component"]);var e,t,r,n=sr(o);function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=n.call(this,e)).state={fetchCount:0},e}return e=o,r=[{key:"getDerivedStateFromProps",value:function(e,t){var r={};return 0===t.fetchCount&&0<e.fetchCount?(r.fetchCount=e.fetchCount,r.start=!0,r.stop=!1):0<t.fetchCount&&0===e.fetchCount&&(r.fetchCount=0,r.start=!1,r.stop=!0),r.showError||void 0===e.error||(r.showError=!0,r.error=e.error,r.errorLevel=e.errorLevel,r.errorDetails=e.errorDetails),r}}],(t=[{key:"render",value:function(){return null}},{key:"componentDidMount",value:function(){this.StartStopOnFetch(),this.ShowError()}},{key:"componentDidUpdate",value:function(e,t){this.StartStopOnFetch(),this.ShowError()}},{key:"StartStopOnFetch",value:function(){this.state.start?(this.setState({start:!1}),this.onFetchStarted()):this.state.stop&&(this.setState({stop:!1}),this.onFetchFinished())}},{key:"ShowError",value:function(){var e,t;this.state.showError&&(t=this.state.error,this.setState({showError:!1}),1===this.state.errorLevel?(this.state.errorDetails&&(t+="\n"+this.state.errorDetails),this.ShowPopupError(t)):(e=t,void 0!==this.state.errorDetails&&(t="More information in the developer console!",e+=". "+(t=void 0!==Z()?Z().msg.moreinformation:t)),this.ShowPopupError(e)),this.props.clearErrors())}},{key:"ShowPopupError",value:function(e){var t,r,n=void 0;null!=this.state.prevError&&null!=this.state.prevErrorDate&&(t=new Date,r=this.state.prevErrorDate,n=(t.getTime()-r.getTime())/1e3),null!=n&&this.state.prevError==e&&n<1||be(e),this.state.prevError=e,this.state.prevErrorDate=new Date}},{key:"onFetchStarted",value:function(){void 0!==this.props.onFetchStarted&&this.props.onFetchStarted()}},{key:"onFetchFinished",value:function(){void 0!==this.props.onFetchFinished&&this.props.onFetchFinished()}}])&&ir(e.prototype,t),r&&ir(e,r),o}(),ur=Object(t.connect)(function(e,t){return{fetchCount:e.app.fetchCount,error:e.app.error,errorLevel:e.app.errorLevel,errorDetails:e.app.errorDetails}},function(e,t){return{clearErrors:function(){e(N.app.clearerrors())}}})(i);function pr(e){return(pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dr(){return(dr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function fr(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Vr(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?fr(Object(o),!0).forEach(function(e){var t,r;t=n,e=o[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):fr(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function hr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mr(e,t){return(mr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yr(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=vr(r);return e=n?(e=vr(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==pr(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function vr(e){return(vr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var i=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mr(e,t)}(o,re["Component"]);var e,t,r,n=yr(o);function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=n.call(this,e)).state={},e}return e=o,r=[{key:"getDerivedStateFromProps",value:function(e,t){var r={};return e.modelurl||void 0!==e.formName&&""!==e.formName&&e.formName!==t.formName&&(r.formName=e.formName,r.needFetchModel=!0),r}}],(t=[{key:"render",value:function(){var e=Vr({},this.props);return void 0===e.key&&(e.key="bindForm"),e.data=this.props.combinedData,ne.a.createElement(Ge,dr({},e,{eventFunc:this.eventFunc.bind(this),getAdditionalDataForControl:this.getAdditionalDataForControl.bind(this),model:this.state.model,data:this.props.combinedData,hideControls:this.state.checkConditions,readOnlyControls:this.state.readOnlyControls}))}},{key:"eventFunc",value:function(e){var t="initSystem";if(Array.isArray(e.actions)&&e.actions.includes(t)){this.initSystem(e);t=e.actions.indexOf(t);if(-1!==t&&e.actions.splice(t,1),0==e.actions.length)return}L.dispatch(ft.form.executeActions(e))}},{key:"getAdditionalDataForControl",value:function(e,t,r){var n=t.startIndex,o=t.pageSize,a=t.filters,i=t.sort,t=(t.model,this.props.formName);L.dispatch(ft.additional.fetch({type:e.props["data-buildertype"],formName:t,controlRef:e,startIndex:n,pageSize:o,filters:a,sort:i,callback:r}))}},{key:"initSystem",value:function(e){var t;this.state.model&&(t=_e.checkConditions({model:this.state.model,data:this.props.combinedData}),this.setState({checkConditions:t.checkConditions,readOnlyControls:t.readOnlyControls}))}},{key:"componentDidMount",value:function(){this.PrepareState()}},{key:"componentDidUpdate",value:function(e,t){this.PrepareState()}},{key:"PrepareState",value:function(){var e,t,r=this;this.state.needFetchModel&&(r.setState({needFetchModel:!1}),t={mobile:(e=L.getState().settings).mobile},ft.configuredFetch(e.uiform+"/"+this.props.formName+"?"+L.encodeQueryData(t)).then(function(e){return e.json()}).then(function(e){var t=e,e=_e.checkConditions({model:t,data:r.props.combinedData});r.setState({model:t,checkConditions:e.checkConditions,readOnlyControls:e.readOnlyControls})}).catch(function(e){r.props.LogError(e.message,e.stack)}))}}])&&hr(e.prototype,t),r&&hr(e,r),o}(),br=Object(t.connect)(function(i,e){function t(e,t){for(var r=e.split("."),n=0<r.length?i[r[0]]:null,o=null,a=1;a<r.length&&null!=n;a++)n=n[o=r[a]];return null==n?Vr({},t):"object"===pr(n)?Vr(Vr({},t),n):(t=Vr({},t),null!==o&&(t[o]=n),t)}var r,n={},o={};if(null!==e.stateDataPath&&void 0!==e.stateDataPath)if("string"==typeof e.stateDataPath)o=t(e.stateDataPath,o);else if(Array.isArray(e.stateDataPath))for(var a=0;a<e.stateDataPath.length;a++)"string"==typeof e.stateDataPath[a]&&(o=t(e.stateDataPath[a],o));return void 0!==e.data&&null!==e.data&&"object"===pr(e.data)&&(r=e.data,o=Vr(Vr({},o),r)),n.combinedData=o,n},function(r,e){return{LogError:function(e,t){r(N.app.form.model.fetch.failure(e,t))}}})(i),gr={getUserManagerConfig:function(){var e=L.getState().settings.backendUrl,t=C.getWindowLocation(),t="".concat(t.protocol,"//").concat(t.host);return{client_id:"spa",redirect_uri:t,response_type:"token id_token",scope:"openid profile IdentityServerApi",authority:e=""===e||null==e?t:e,silent_redirect_uri:"".concat(t,"/silentRenew.html"),automaticSilentRenew:!0,filterProtocolClaims:!0,loadUserInfo:!0,monitorSession:!0}}};s("alert",function(e){return"success"===e.type?alertify.success(e.message):"error"===e.type?(console.log("dwkit",e.type,e.message),alertify.error(e.message)):alertify.log("Notification",e.type)});var i=r(6),wr=r.n(i),Or=r(3);function Cr(e){return(Cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Er(e,t){return(Er=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ar(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Sr(r);return e=n?(e=Sr(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Cr(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function Sr(e){return(Sr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Pr=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Er(e,t)}(o,Ft);var e,t,r,n=Ar(o);function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),n.apply(this,arguments)}return e=o,(t=[{key:"render",value:function(){return ne.a.createElement(Or.Modal,{open:!0},ne.a.createElement(Or.Modal.Header,null,this.props.title),ne.a.createElement(Or.Modal.Content,null,this.props.text),ne.a.createElement(Or.Modal.Actions,null,ne.a.createElement(Or.Button,{className:"buttontype1",content:this.props.ok,onClick:this.confirm}),ne.a.createElement(Or.Button,{className:"buttontype2",content:this.props.cancel,onClick:this.abort})))}}])&&kr(e.prototype,t),r&&kr(e,r),o}();s("confirm",function(e){return e=e.messages,t=document.body.appendChild(document.createElement("div")),wr.a.render(ne.a.createElement(Pr,e),t).promise.finally(function(){return wr.a.unmountComponentAtNode(t),setTimeout(function(){return t.remove()})});var t});var i=r(28),jr=r.n(i);function Rr(e){var t=e.isOpen,r=e.title,n=e.onRequestClose,o=e.onAfterOpen,a=e.children,i=e.className,l=e.overlayClassName,s=e.from,c=e.width,e=e.closeOnOutsideClick,s="slide-pane_from_".concat(void 0===s?"right":s);return ne.a.createElement(jr.a,{ariaHideApp:!1,className:"slide-pane ".concat(s," ").concat(i||""),style:{content:{width:c||"80%"}},overlayClassName:"slide-pane__overlay ".concat(l||""),closeTimeoutMS:500,isOpen:t,onAfterOpen:o,onRequestClose:n,shouldCloseOnOverlayClick:e,contentLabel:'Modal "'.concat(r||"",'"')},ne.a.createElement("div",{className:"slide-pane__header"},ne.a.createElement("div",{className:"slide-pane__close",onClick:n},ne.a.createElement(_r,null)),ne.a.createElement("div",{className:"slide-pane__title-wrapper"},ne.a.createElement("h2",{className:"slide-pane__title"},r))),ne.a.createElement("div",{className:"slide-pane__content"},a))}function _r(){return ne.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 13 22"},ne.a.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4 11l8 8c.6.5.6 1.5 0 2-.5.6-1.5.6-2 0l-9-9c-.6-.5-.6-1.5 0-2l9-9c.5-.6 1.5-.6 2 0 .6.5.6 1.5 0 2l-8 8z"}))}function xr(e){return(xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dr(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Fr(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Dr(Object(o),!0).forEach(function(e){var t,r;t=n,e=o[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Dr(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function Tr(e){return function(e){if(Array.isArray(e))return Nr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Nr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Nr(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ir(){return(Ir=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Lr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ur(e,t){return(Ur=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Br(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Mr(r);return e=n?(e=Mr(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==xr(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function Mr(e){return(Mr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var i=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ur(e,t)}(o,re["Component"]);var e,t,r,n=Br(o);function o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=n.call(this,e)).state={isrtl:!1};try{e.state.isrtl="rtl"==getComputedStyle(document.getElementsByTagName("html")[0]).direction}catch(e){}return e}return e=o,(t=[{key:"render",value:function(){var a=this,i=this,e=this.props.windowsOrder.map(function(e,t,r){function n(){i.props.executeActions({key:void 0,controlRef:i,formName:i.props.formName,schemeName:i.props.schemeName,component:i,eventName:"exit",actions:["exit"],parameters:void 0,modalId:o.id})}var o=a.props.childWindows[e];if("modal"===o.viewType)return ne.a.createElement(Or.Modal,{open:!0,key:o.id,onClose:n,closeOnDimmerClick:o.closeOnOutsideClick},ne.a.createElement(Or.Modal.Content,null,ne.a.createElement(rt,Ir({key:o.id+o.keyIndex},o,{model:a.props.childModels[o.name]}))));e=t===r.length-1?"last-pane-overlay":"",t="right",r="80%";return o.sidebarSettings&&(o.sidebarSettings.from&&(t=o.sidebarSettings.from),o.sidebarSettings.width&&(r=o.sidebarSettings.width)),a.state.isrtl&&("right"===t?t="left":"left"===t&&(t="right")),ne.a.createElement(Rr,{key:o.id,overlayClassName:e,isOpen:!0,from:t,onRequestClose:n,width:r,closeOnDimmerClick:o.closeOnOutsideClick},ne.a.createElement(rt,Ir({key:o.id+o.keyIndex},o,{model:a.props.childModels[o.name]})))});return ne.a.createElement("div",{ref:function(e){return a.el=e}},e)}}])&&Lr(e.prototype,t),r&&Lr(e,r),o}(),zr=Object(t.connect)(function(e){var t,r=e.app.modals.windows,n=e.app.modals.models,o={},a={};for(t in r)if(r.hasOwnProperty(t)){var i=n[r[t].name],i=null==i?void 0:i.formParams,i=null==i?void 0:i.schemes;a[t]={id:t,errors:r[t].errors,name:r[t].name,viewType:r[t].viewType,sidebarSettings:r[t].sidebarSettings,onOpenFunc:r[t].onOpenFunc,onCloseFunc:r[t].onCloseFunc,schemes:i,isNew:null===r[t].data||void 0===r[t].data?void 0:r[t].data.isNew,hideControls:r[t].hideControls,readOnlyControls:r[t].readOnlyControls,readOnly:r[t].readOnly,preventLoad:r[t].preventLoad,flowName:r[t].flowName,schemeName:r[t].schemeName,keyIndex:r[t].keyIndex,filter:null===r[t].data||void 0===r[t].data?void 0:r[t].data.filter,type:r[t].type,callContext:r[t].callContext,closeOnOutsideClick:void 0===r[t].closeOnOutsideClick||r[t].closeOnOutsideClick},!r[t].data||void 0!==(i=r[t].data.modified)&&(a[t].data=Array.isArray(i)?Tr(i):Fr({},i));var l=r[t].filters;if(l){var s,c={};for(s in l)l.hasOwnProperty(s)&&(c[s]=l[s].filter(function(e){return null!==e.value}).map(function(e){return Fr({},e)}));a[t].controlFilters=c}}return Object.keys(n).forEach(function(e){o[e]=n[e].model}),{childModels:o,childWindows:a,windowsOrder:e.app.modals.order}},bt)(i);function Kr(e){return(Kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Wr(e,t){return(Wr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gr(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=Hr(r);return e=n?(e=Hr(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Kr(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function Hr(e){return(Hr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Qr=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wr(e,t)}(o,At);var e,t,r,n=Gr(o);function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),n.apply(this,arguments)}return e=o,(t=[{key:"render",value:function(){return ne.a.createElement("div",null,this.drawMainForm(),ne.a.createElement(zr,null))}}])&&qr(e.prototype,t),r&&qr(e,r),o}();function Jr(){return(Jr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}s("content",function(e){return ne.a.createElement(Qr,Jr({key:e.key},e.props))});var Yr=r(29);s("dwkit-form",function(e){return ne.a.createElement(Yr.DWKitForm,e.props)});i=r(30);function Zr(e){return(Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xr(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function $r(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Xr(Object(o),!0).forEach(function(e){var t,r;t=n,e=o[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Xr(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}function en(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tn(e,t){return(tn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rn(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=nn(r);return e=n?(e=nn(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),t=this,!(e=e)||"object"!==Zr(e)&&"function"!=typeof e?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}}function nn(e){return(nn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tn(e,t)}(o,re["Component"]);var e,t,r,n=rn(o);function o(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),n.apply(this,arguments)}return e=o,(t=[{key:"render",value:function(){return this.props.children?ne.a.Children.only(this.props.children):null}},{key:"componentDidMount",value:function(){"#_=_"===this.props.history.location.hash?this.props.history.push($r($r({},this.props.history.location),{},{hash:null})):this.props.history.location.hash&&-1<this.props.history.location.hash.substring(1,this.props.history.location.hash.length-1).split("=").indexOf("id_token")&&(D.get(L).onLogon(),this.props.history.push($r($r({},this.props.history.location),{},{hash:null}))),this.props.onRouteChanged()}},{key:"componentDidUpdate",value:function(){var e,t=!1;this.props.push&&(e={pathname:this.props.push},this.props.history.push(e),t=!0),this.props.redirect&&(e={pathname:this.props.redirect},this.props.history.replace(e),t=!1),this.props.reload&&(this.props.onReload?this.props.onReload():console.log("ApplicationRouter: Need to define handler for onReload"),t=!0),this.props.refresh&&(this.props.onRefresh?this.props.onRefresh():console.log("ApplicationRouter: Need to define handler for onRefresh"),t=!0),this.props.onRouteChanged(t)}}])&&en(e.prototype,t),r&&en(e,r),o}(),on=Object(i.withRouter)(Object(t.connect)(function(e,t){return{push:e.router.push,redirect:e.router.redirect,refresh:e.router.refresh,reload:e.router.reload}},function(t,r){return{onRouteChanged:function(e){t(N.router.routechanged(r.history,(r.history&&r.history.location?r.history:r).location,e))}}})(s)),an=r(31),ln={connection:null,Connect:function(a){null!==this.connection&&(this.connection.off("StateChange"),this.connection.stop());var e=a.encodeQueryData({}),t=a.getState().settings,r=t.backendUrl;r+=0<e.length?t.notificationhub+"?"+e:t.notificationhub,this.connection=(new an.HubConnectionBuilder).withUrl(r).build(),this.connection.on("StateChange",function(e){if(null!=e&&null!==e.path&&void 0!==e.path&&"string"==typeof e.path){for(var t=e.path.split("."),r={},n=r,o=0;o<t.length;o++)o===t.length-1?n[t[o]]=e.change:(n[t[o]]={},n=n[t[o]]);a.dispatch(N.updatestate(r))}}),this.connection.start()}},sn=r(32),cn=null;function un(){var e;return cn||(e=gr.getUserManagerConfig(),(cn=new sn.UserManager(e)).events.addUserLoaded(function(){cn.getUser().then(function(e){e&&!e.expired&&Ke.configureHeaders(e.access_token)})}),cn.events.addUserSignedOut(function(){cn.removeUser().then(function(){cn.signinRedirect()})})),cn}D.addProvider("identityserver",{preFetchUser:function(){return un().getUser().then(function(e){return e&&!e.expired?(Ke.configureHeaders(e.access_token),ee.Promise.resolve()):un().signinSilent().catch(function(e){console.log("preFetchUser: signin error",e),un().signinRedirect()})})},logoff:function(){var e=un();e.signoutRedirect(),e.removeUser()},onLogon:function(){un().signinRedirectCallback().then(function(e){Ke.configureHeaders(e.access_token)}).catch(function(e){console.log("onLogon: signin error",e),un().signinRedirect()})}})}],T.c=I,T.d=function(e,t,r){T.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},T.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},T.t=function(t,e){if(1&e&&(t=T(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(T.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)T.d(r,n,function(e){return t[e]}.bind(null,n));return r},T.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return T.d(t,"a",t),t},T.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},T.p="",T(T.s=35);function T(e){if(I[e])return I[e].exports;var t=I[e]={i:e,l:!1,exports:{}};return N[e].call(t.exports,t,t.exports,T),t.l=!0,t.exports}var N,I});